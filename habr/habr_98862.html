<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Создание расширений PHP: Введение в PHP и Zend / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/98862\/"},"headline":"Создание расширений PHP: Введение в PHP и Zend","datePublished":"2010-07-13T07:32:12+04:00","dateModified":"2010-07-13T19:34:23+04:00","author":{"@type":"Person","name":"Михаил Крестьянинов"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Перевод статьи Sara Golemon &laquo;Extension Writing Part I: Introduction to PHP and Zend&raquo;.    Введение Если вы читаете данную статью, скорее всего у вас есть некоторы...","url":"https:\/\/habr.com\/ru\/post\/98862\/#post-content-body","about":["h_php","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/98862\/98bb1f56bee87dc00c2a7f305ec49c2f\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Создание расширений PHP: Введение в PHP и Zend" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Создание расширений PHP: Введение в PHP и Zend" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Создание расширений PHP: Введение в PHP и Zend" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».



Введение
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».



Введение
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».



Введение
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».



Введение
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».



Введение
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="98862" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2010-07-13T03:32:12.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/98862/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/98862/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/98862/98bb1f56bee87dc00c2a7f305ec49c2f/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/krestjaninoff/" title="krestjaninoff" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/095/b2b/002/095b2b00299151b9fb579590f965f463.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/krestjaninoff/" class="tm-user-info__username">
      krestjaninoff
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2010-07-13T03:32:12.000Z" title="2010-07-13, 07:32">13  июля  2010 в 07:32</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Создание расширений PHP: Введение в PHP и Zend</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/php/" class="tm-article-snippet__hubs-item-link"><span>PHP</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-page-article__origin"><a href="http://devzone.zend.com/node/view/id/1021" target="_blank" class="tm-page-article__origin-link">
                Автор оригинала:
                <span class="tm-page-article__origin-value">
                  Sara Golemon
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">Перевод статьи <a href="http://devzone.zend.com/member/4580-SaraMG">Sara Golemon</a> <a href="http://devzone.zend.com/node/view/id/1021">«Extension Writing Part I: Introduction to PHP and Zend»</a>.<br/>
<br/>
<a name="habracut"></a><br/>
<br/>
<h1>Введение</h1><br/>
Если вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений для языка PHP. Если же нет… возможно, когда вы прочтёте эту статью, то обнаружите в себе этот интерес, не смотря на то, что вы о нём даже не подозревали!<br/>
<br/>
Материал, изложенный в данной статье, подразумевает знакомство как с самим языком PHP, так и с языком, на котором написан интерпретатор PHP: <i>C</i>.<br/>
<br/>
Начнём с того, что определим причины, по которым вы хотите написать расширение для PHP:<br/>
<ol>
<li>Существование какой-нибудь библиотеки или специфичного вызова ОС, который не может быть сделан из PHP напрямую из-за уровня абстракции принятого в языке;</li>
<li>Вы хотите заставить PHP работать нестандартным способом;</li>
<li>У вас уже есть решение, написанное на PHP, но вы знаете, что оно может быть быстрее, компактней и потреблять меньше памяти в процессе работы;</li>
<li>У вас есть особенный код, который вы хотели бы продать. Однако, важно, что бы покупатель мог запускать Ваш код, но не смотреть исходники.</li>
</ol><br/>
Все перечисленные выше причины являются вполне адекватными, но, создавая расширение, прежде всего вам стоит понимать, что это в первую очередь <strong>расширение</strong>.<br/>
<br/>
<br/>
<br/>
<h1>Что такое Расширение?</h1><br/>
Если вам приходилось использовать PHP, то вы использовали и расширения. За небольшим исключением каждая доступная для использования функция в языке PHP сгруппирована в то или иное расширение. Основная часть функций (более 400) входит в состав <em>стандартного расширения</em>. Исходные коды PHP распространяются с порядка 86 расширениями, имеющими примерно по 30 функций в каждом. Посчитав, получим где-то 2500 функций в сумме. Если этого не достаточно, <a href="http://pecl.php.net/">репозитарий PECL</a> предлагает свыше 100 дополнительных расширений, ещё больше можно найти на бескрайних просторах интернета.<br/>
<br/>
«Что же, с учётом всего этого множества функций, живущих в расширениях, тогда остаётся вне расширений?» — спросите вы. «Что расширения расширяют? Что такое <strong>ядро PHP</strong>?»<br/>
<br/>
Ядро PHP реализовано в виде 2-х отдельных частей. Техническая часть языка представлена в виде <strong>Zend Engine</strong> (ZE). ZE отвечает за преобразование понятного для человека скрипта в понятные для компьютера токены (tokens), после чего выполняет их. Кроме того, ZE отвечает за управление памятью, область видимости переменных, обработку вызова функций.<br/>
Второй частью ядра является то, что непосредственно называется «ядром» (<strong>the PHP core</strong>). Оно отвечает за взаимодействие со слоем SAPI (Server Application Programming Interface, интерфейс взаимодействия PHP с другим серверным ПО — CLI, CGI, Apache и так далее). Кроме того, ядро реализует обобщённый слой контроля для проверок safe_mode и open_basedir (данные фичи объявлены depricated с версии 5.3), так же, как и слой потоков, который ассоциирует файловые и сетевые I/O операции с функциями fopen, fread и fwrite.<br/>
<br/>
<br/>
<br/>
<h1>Жизненный цикл</h1><br/>
Когда происходит запуск заданного SAPI (например, при запуске сервера Apache по команде <em>/usr/local/apache/bin/apachectl start</em>), PHP начинает свою работу с запуска подсистемы ядра. К концу процедуры запуска он загружает код каждого расширения и вызывает его функцию <strong>Module Initialization</strong> (MINIT). Это даёт каждому расширению возможность инициализировать внутренние переменные, выделить память под ресурсы, зарегистрировать обработчики ресурсов и свои функции в ZE, что бы при вызове каким-нибудь скриптом функции этого расширения ZE знал, какой код ему выполнять.<br/>
<br/>
Далее PHP ждёт от слоя SAPI запроса на обработку страницы. В случае CGI или CLI SAPI это происходит незамедлительно и только один раз. В случае SAPI Apache, IIS или другого полноценного web-сервера запрос на обработку страницы происходит каждый раз при запросе (возможно конкурентном) страницы удалённым пользователем. Однако, вне зависимости от того, каким образом пришёл запрос, его обработка начинается с того, что ядро PHP просит ZE настроить окружающую среду для запуска скрипта, после чего вызывает функцию <strong>Request Initialization</strong> (RINIT) для каждого расширения. <i>RINIT</i> даёт расширениям возможность настроить специфичные переменные окружения, выделить память для специфичных ресурсов запроса и выполнить другие задания. Наглядным примером функции <i>RINIT</i> в действии может служить расширение <i>session</i>, в котором при включенной настройке <i>session.auto_star</i>t функция <i>RINIT</i> автоматически вызывает исполнение функции <em>session_start</em> и инициализирует переменную <em>$_SESSION</em>.<br/>
<br/>
После того, как запрос инициализирован, ZE транслирует PHP скрипт в <strong>токены</strong>, а затем в <strong>опкоды</strong> (opcodes), которые он может выполнить. Если какой-нибудь из этих опкодов запрашивает вызов функции из расширения, ZE формирует аргументы для вызова этой функции и временно передаёт ей управление до её завершения.<br/>
<br/>
После того как скрипт завершил своё выполнение, PHP вызывает функцию <strong>Request Shutdown</strong> (RSHUTDOWN) для каждого расширения, что выполнить все необходимые для завершения чистки (например, сохранение сессионных переменных на диск). Следующим шагом ZE выполняет процесс чистки (также известный как сборка мусора), который фактически выполняет метод <em>unset</em> для каждой переменной, использованной в выполненном скрипте (начиная с PHP 5.3 <a href="http://php.net/manual/en/features.gc.php">механизм сборки мусора</a> значительно улучшен).<br/>
<br/>
Завершив обработку запроса, PHP ждёт от SAPI либо запроса на обработку другого скрипта, либо сигнала на завершение. В случае CGI или CLI SAPI «следующий запрос» невозможен, поэтому SAPI инициализирует завершение работы PHP незамедлительно. В процессе завершения PHP перебирает все расширения и для каждого вызывает функцию <strong>Module Shutdown</strong> (MSHUTDOWN), после чего завершает свою собственную подсистему ядра.<br/>
<br/>
Этот процесс поначалу может показаться немного запутанным, но, погрузившись в работу над расширениями, вы постепенно прочувствуете его.<br/>
<br/>
<br/>
<br/>
<h1>Выделение памяти</h1><br/>
Для того, что бы избежать утечек памяти в плохо написанных расширениях, ZE использует свой собственный внутренний механизм управления памятью, основанный на дополнительном флаге для определения времени жизни данных. Постоянное (<b>persistent</b>) выделение памяти означает, что память будет выделена более, чем на время обработки запроса одной страницы. Непостоянное (<b>non-persistent</b>) выделение памяти означает освобождение памяти после обработки запроса вне зависимости от того, была ли вызвана функция освобождения памяти. К примеру, выделение памяти под пользовательские переменные носит непостоянный характер, так как по завершению обработки запроса они становятся бесполезными.<br/>
<br/>
Несмотря на то, что расширение в теории может возложить на ZE освобождение непостоянной памяти автоматически по завершению каждого запроса, делать это не рекомендуется. Выделенная память будет оставаться долгое время невостребованной, ассоциированные с этой памятью ресурсы будут иметь меньше шансов быть закрытыми правильно, и, в конце концов, создание путаницы с освобождением памяти — плохая практика. Как вы увидите позже, убедиться, что все данные отчищены верно, достаточно легко.<br/>
<br/>
Давайте кратко сравним традиционные функции выделения памяти (которые стоит использовать только при работе с внешними библиотеками) с функциями постоянного и непостоянного выделения памяти в PHP/ZE.<br/>
<br/>
<table>
<tr>
<th><strong>Традиционные</strong></th>
<th><strong>Непостоянные</strong></th>
<th><strong>Постоянные</strong></th>
</tr>
<tr>
<td>malloc(count)</td>
<td>emalloc(count)</td>
<td>pemalloc(count, 1)<sup>*</sup></td>
</tr>
<tr>
<td>calloc(count, num)</td>
<td>ecalloc(count, 1)</td>
<td>pecalloc(count, num, 1)</td>
</tr>
<tr>
<td>strdup(str)</td>
<td>estrdup(str)</td>
<td>pestrdup(str, 1)</td>
</tr>
<tr>
<td>strndup(str, len)</td>
<td>estrndup(str, len)</td>
<td>pemalloc() &amp; memcpy()</td>
</tr>
<tr>
<td>free(ptr)</td>
<td>efree(ptr)</td>
<td>pefree(ptr, 1)</td>
</tr>
<tr>
<td>realloc(ptr, newsize)</td>
<td>erealloc(ptr, newsize)</td>
<td>perealloc(ptr, newsize, 1)</td>
</tr>
<tr>
<td>malloc(count * num + extr)<sup>**</sup></td>
<td>safe_emalloc(count, num, extr)</td>
<td>safe_pemalloc(count, num, extr)</td>
</tr>
</table><em>* Семейство функций pemalloc принимает в качестве параметра флаг «постоянности», который позволяет им вести себя как их непостоянные аналоги.<br/>
 К примеру: emalloc(1234) тоже самое, что и pemalloc(1234, 0)<br/>
** safe_emalloc() и (в PHP 5) safe_pemalloc реализуют дополнительную проверку целочисленных переполнений.<br/>
</em><br/>
<br/>
<br/>
<br/>
<h1>Настройка и сборка окружения</h1><br/>
Теперь, когда вы ознакомились с теорией работы PHP и Zend Engine, могу поспорить, вам не терпится погрузиться в работу и начать что-нибудь делать. Однако, перед этим вам нужно обзавестись кое-какими утилитами для сборки и настроить окружение для ваших целей.<br/>
<br/>
Прежде всего, вам необходим сам PHP и набор средств сборки, необходимых для PHP. Если вам не приходилось собирать PHP из исходников, предлагаю взглянуть на <a href="http://www.php.net/manual/en/install.unix.php">эту статью</a>. Несмотря на то, что использование бинарного пакета с исходниками PHP может показаться заманчивым, такие сборки зачастую лишены двух важных параметров программы <em>./configure</em>, которые очень полезны во время процесса разработки. Первый из них это <strong>--enable-debug</strong>. Эта опция компилирует PHP с дополнительной отладочной информацией в исполняемых файлах, так что при возникновении ошибки сегментации (segfault) вы сможете получить дамп ядра и воспользоваться отладчиком gdb, что бы выяснить, где и почему произошла ошибка.<br/>
Название второй опции зависит от того, с какой версией PHP вы собираетесь работать. В PHP 4.3 она называется <strong>--enable-experimental-zts</strong>, начиная с PHP 5, она переименована в <strong>--enable-maintainer-zts</strong>. Эта опция заставит PHP думать, что он работает в многопотоковой (multithread) среде, и позволит вам отловить общие ошибки, которые незаметны в среде без потоков, но повлекут нестабильную работу вашего расширения в многопотоковой среде.<br/>
Скомпилировав PHP с дополнительными опциями и установив его на сервер разработки (или рабочую станцию), вы можете преступать к созданию своего первого расширения.<br/>
<br/>
<br/>
<br/>
<h1>Hello World</h1><br/>
Какая вводная статья по программированию может считаться завершённой без примера ставшей уже обязательной программы Hello World? В данном случае, мы рассмотрим создание расширения, которое добавляет в PHP одну единственную функцию, возвращающую строку со словом «Hello World». На PHP вы возможно реализовали бы это примерно так:<br/>
<blockquote><code><font color="black">&lt;?php<br/>
<br/>
function hello_world() {<br/>
  <font color="#0000ff">return</font> <font color="#A31515">'Hello World'</font>;<br/>
}<br/>
<br/>
?></font></code></blockquote><br/>
Теперь давайте сделаем из этой функции расширение PHP. Первым делом создадим подкаталог <em>hello</em> в каталоге <em>ext/</em> дерева каталогов исходников PHP и сделаем <em>cd</em> в него. В принципе, этот каталог может располагаться где угодно внутри или снаружи дерева каталогов с исходниками, но вам следует поместить его именно сюда для возможности ссылаться на него из статьи в дальнейшем. Здесь вам нужно создать три файла:<br/>
<ol>
<li>конфигурационный файл (<em>config.m4</em>), используемый утилитой <em>phpize</em> для подготовки расширения к компиляции:<br/>
 <blockquote><code>PHP_ARG_ENABLE(hello, whether to enable Hello World support,<br/>
[ --enable-hello Enable Hello World support])<br/>
<br/>
if test "$PHP_HELLO" = "yes"; then<br/>
 AC_DEFINE(HAVE_HELLO, 1, [Whether you have Hello World])<br/>
 PHP_NEW_EXTENSION(hello, hello.c, $ext_shared)<br/>
fi<br/>
 </code></blockquote><br/>
 </li>
<li>заголовочный файл (<em>php_hello.h</em>), содержащий указания, используемые PHP для загрузки расширений:<br/>
 <blockquote><code><font color="black">#ifndef PHP_HELLO_H<br/>
<font color="#0000ff">#define</font> PHP_HELLO_H 1<br/>
<br/>
<font color="#0000ff">#define</font> PHP_HELLO_WORLD_VERSION <font color="#A31515">"1.0"</font><br/>
<font color="#0000ff">#define</font> PHP_HELLO_WORLD_EXTNAME <font color="#A31515">"hello"</font><br/>
<br/>
PHP_FUNCTION(hello_world);<br/>
<br/>
<font color="#0000ff">extern</font> zend_module_entry hello_module_entry;<br/>
<font color="#0000ff">#define</font> phpext_hello_ptr &amp;hello_module_entry<br/>
<br/>
<font color="#0000ff">#endif</font></font><br/>
<br/>
</code></blockquote><br/>
 </li>
<li>файл с исходниками (<em>hello.c</em>), содержащий тело функции hello_world:<br/>
 <blockquote><code><font color="black">#ifdef HAVE_CONFIG_H<br/>
#include <font color="#A31515">"config.h"</font><br/>
<font color="#0000ff">#endif</font><br/>
<br/>
#include <font color="#A31515">"php.h"</font><br/>
#include <font color="#A31515">"php_hello.h"</font><br/>
<br/>
<font color="#0000ff">static</font> function_entry hello_functions[] = {<br/>
  PHP_FE(hello_world, NULL)<br/>
  {NULL, NULL, NULL}<br/>
};<br/>
<br/>
zend_module_entry hello_module_entry = {<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  STANDARD_MODULE_HEADER,<br/>
<font color="#0000ff">#endif</font><br/>
  PHP_HELLO_WORLD_EXTNAME,<br/>
  hello_functions,<br/>
  NULL,<br/>
  NULL,<br/>
  NULL,<br/>
  NULL,<br/>
  NULL,<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  PHP_HELLO_WORLD_VERSION,<br/>
<font color="#0000ff">#endif</font><br/>
  STANDARD_MODULE_PROPERTIES<br/>
};<br/>
<br/>
#ifdef COMPILE_DL_HELLO<br/>
ZEND_GET_MODULE(hello)<br/>
<font color="#0000ff">#endif</font><br/>
<br/>
PHP_FUNCTION(hello_world)<br/>
{<br/>
  RETURN_STRING(<font color="#A31515">"Hello World"</font>, 1);<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
 </li>
</ol>Большая часть кода, которую вы видите в предыдущем примере, всего лишь своего рода «клей» — протокол для регистрации расширения в PHP и установления диалога между ними. Реальным же кодом являются только последние 4 строки в файле <em>hello.c</em>, которые выполняют действия на уровне, который может быть вызван из пользовательского скрипта. Несомненно, этот код довольно похож на PHP код, который мы видели ранее, и может быть легко разобран на части:<br/>
<ul>
<li>объявление функции с именем hello_world,</li>
<li>установка в качестве возвращаемого значения строки «Hello World»,</li>
<li>хм… 1? Что же значит эта 1?</li>
</ul><br/>
Вспомним, что ZE использует усовершенствованный механизм управления памятью, который проверяет, что все запрошенные ресурсы высвобождены на момент завершения работы скрипта. В мире управления памятью повторное освобождение одного и того же блока памяти считается <i>большим ай-ай-ай</i>. Такое действие называется «двойное освобождение» и является частой причиной ошибок сегментации, так как заставляет программу попытаться получить доступ к блоку памяти, который ей больше не принадлежит. <br/>
Проще говоря, что бы ZE не начал повторно освобождать память, занимаемую статической строкой (какой является «Hello World» в нашем примере), функция hello_world должна каждый раз при вызове возвращать копию строки.<br/>
В принципе функция <em>RETURN_STRING</em> может взять на себя ответственность за то, что любая строка, переданная в неё должна быть скопирована, так что бы была возможность безопасно освободить занимаемую ей память позже. Однако, так как выделение памяти под строку, копирование строки и возвращение копии как результата не является стандартным поведением для внутренних функций ZE, <em>RETURN_STRING</em> позволяет указать, необходимо ли делать копию переменной или нет с помощью второго аргумента. Для более наглядного описания данной концепции, обратите внимание на следующий фрагмент кода, который функционально идентичен предыдущему:<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_world)<br/>
{<br/>
  <font color="#0000ff">char</font> *str;<br/>
<br/>
  str = estrdup(<font color="#A31515">"Hello World"</font>);<br/>
  RETURN_STRING(str, 0);<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
В этом примере вы вручную выделили непостоянную память для строки «Hello World», которую передали обратно в вызывающий скрипт с помощьюфункции <em>RETURN_STRING</em>, указав ей 0 в качестве второго параметра, что заставляет функцию не делать копию строки, так как она может воспользоваться нашей.<br/>
<br/>
<br/>
<br/>
<h1>Сборка расширения</h1><br/>
Последним шагом в этом упражнении будет сборка вашего расширения как динамически подгружаемого модуля. Если вы скопировали предыдущие примеры верно, остаётся лишь запустить три команды из каталога ext/hello/:<br/>
<blockquote><code>$ phpize<br/>
$ ./configure --enable-hello<br/>
$ make<br/>
</code></blockquote><br/>
Обратите внимание, что для корректной работы утилиты <i>phpize</i> необходимо наличие утилит <i>m4</i> и <i>autoconf</i>.<br/>
После запуска всех этих команд у вас должен появится файл <em>hello.so</em> в папке <em>ext/hello/modules/</em>. Теперь, как и любое другое расширение PHP, вы можете просто скопировать его каталог с расширениями (по-умолчанию это <em>/usr/local/lib/php/extensions/</em>, но на всякий случай проверьте настройки <em>php.ini</em> или воспользуйтесь командой <i>php-config --extension-dir</i>) и добавьте строку <em>extension=hello.so</em> в <em>php.ini</em> для инициализации загрузки расширения при запуске PHP. Для SAPI типа CGI/CLI это будет следующий запуск скрипта, для SAPI web-серверов типа Apache это будет следующий перезапуск сервера. Давайте попробуем вызвать функцию из командной строки:<br/>
<blockquote><code>$ php –r ‘echo hello_world();’<br/>
</code></blockquote><br/>
Если всё пойдёт так, как должно, вы увидите строку <i>Hello World</i> в качестве результата работы скрипта, так как функция <em>hello_world</em> из загруженного расширения возвращает строку, а команда <i>echo</i> отображает то, что ей было передано на вход (в данном случае – результат работы функции <em>hello_world</em>).<br/>
<br/>
В данном примере мы возвращали строку, другие скалярные типы данных могут быть возвращены по схожему принципу: RETURN_LONG для целочисленных значений, <em>RETURN_DOUBLE</em> для чисел с плавающей точкой, <em>RETURN_BOOL</em> для TRUE/FALSE и <em>RETURN_NULL</em> для, как вы догадались, NULL-значений. Давайте посмотрим на каждую из них в действии, добавив строки с макросом <em>PHP_FE</em> в структуру <em>function_entity</em> и соответствующие им макросы <em>PHP_FUNCTION</em> в файле <em>hello.c</em>:<br/>
<blockquote><code><font color="black"><font color="#0000ff">static</font> function_entry hello_functions[] = {<br/>
  PHP_FE(hello_world, NULL)<br/>
  PHP_FE(hello_long, NULL)<br/>
  PHP_FE(hello_double, NULL)<br/>
  PHP_FE(hello_bool, NULL)<br/>
  PHP_FE(hello_null, NULL)<br/>
  {NULL, NULL, NULL}<br/>
};<br/>
<br/>
PHP_FUNCTION(hello_long)<br/>
{<br/>
  RETURN_LONG(42);<br/>
}<br/>
<br/>
PHP_FUNCTION(hello_double)<br/>
{<br/>
  RETURN_DOUBLE(3.1415926535);<br/>
}<br/>
<br/>
PHP_FUNCTION(hello_bool)<br/>
{<br/>
  RETURN_BOOL(1);<br/>
}<br/>
<br/>
PHP_FUNCTION(hello_null)<br/>
{<br/>
  RETURN_NULL();<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
Кроме того, нам придётся добавить прототипы для этих функций рядом с прототипом для функции <em>hello_world</em> в заголовочном файле <em>php_hello.h</em> для того, что бы процесс сборки прошёл без проблем:<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_world);<br/>
PHP_FUNCTION(hello_long);<br/>
PHP_FUNCTION(hello_double);<br/>
PHP_FUNCTION(hello_bool);<br/>
PHP_FUNCTION(hello_null);</font><br/>
<br/>
</code></blockquote><br/>
Так как вы не вносили изменений в файл <em>config.m4</em>, технически нет необходимости повторять шаги <em>phpize</em> и <em>./configure</em>, а можно сразу перейти к выполнению команды <em>make</em>. Тем не менее, на этот раз я попрошу вас пройти через все три шага сборки заново с целью убедиться, что никаких проблем не возникло. Кроме того, в качестве последнего шага вы можете использовать команду <em>make clean all</em> вместо <em>make</em>, что бы быть уверенным, что все файлы с исходниками будут пересобраны. Повторюсь, что это не необходимо ввиду типа изменений, которые вы сделали, но лучше перестраховаться, чем наткнуться на ошибку. После того, как модуль собран, вам остаётся скопировать его в каталог расширений, заменив им старую версию.<br/>
<br/>
Сейчас вы можете снова вызвать интерпретатор PHP, передав ему нехитрые скрипты для того, что бы протестировать только что добавленные функции. На самом деле – почему бы ни сделать это сейчас? Я подожду вас здесь…<br/>
<br/>
Готово? Хорошо. Если для просмотра результата работы каждой функции вы использовали <em>var_dump</em>, а не <em>echo</em>, то, возможно, обратили внимание, что <em>hello_bool</em> возвращает TRUE. Это результат равенства 1-це аргумента функции. Также как и в PHP-скриптах, целочисленное значение 0 эквивалентно FALSE, в то время как любое другое число эквивалентно TRUE. Авторы расширений зачастую используют соглашение, согласно которому этим числом является 1. Желательно, но не обязательно, что бы и вы придерживались этого соглашения. Кроме того, для большего удобства доступны макросы <em>RETURN_TRUE</em> и <em>RETURN_FALSE</em>. Ниже приведён пример функции <em>hello_bool</em> с использованием макроса <em>RETURN_TRUE</em>.<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_bool)<br/>
{<br/>
  RETURN_TRUE;<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
Обратите внимание, что никаких круглых скобок при вызове макроса не использовалось. В этом плане макросы <em>RETURN_TRUE</em> и <em>RETURN_FALSE</em> отличаются от остальных макросов семейства <em>RETURN_*</em>, так что будьте внимательны и не попадитесь на этом!<br/>
<br/>
Вы, возможно, заметили, что во всех предыдущих примерах мы не передаём параметр, отвечающий за создание копии результата. Причина этого в том, что для таких простых скалярных величин не требуется выделение или освобождение дополнительной памяти.<br/>
<br/>
Существуют ещё 3 дополнительных возвращаемых типа: <strong>RESOURCE</strong> (возвращаемый, к примеру, функциями <em>mysql_connect</em>, <em>fsockopen</em> или <em>ftp_connect</em>), <strong>ARRAY</strong> (также известный как <strong>HASH</strong>) и <b>OBJECT</b> (возвращаемый по ключевому слову <em>new</em>). Речь о них пойдёт позже.<br/>
<br/>
<br/>
<br/>
<h1>INI-настройки</h1><br/>
Zend Engine предоставляет два подхода для работы с INI-данными. Сейчас мы рассмотрим наиболее простой из них, а к более общему вернёмся после ознакомления с глобальными переменными.<br/>
<br/>
Предположим, вы хотите объявить в файле <em>php.ini</em> настройку <em>hello.greeting</em> для вашего расширения, которая будет содержать значение для вывода функцией <em>hello_world</em>. Для этого нам придётся добавить несколько изменений в файлы <em>hello.c</em> и <em>php_hello.h</em> в рамках изменения структуры <em>hello_module_entry</em>. Начнём с добавления следующих прототипов перед списком прототипов пользовательских функций в файле <em>php_hello.h</em>:<br/>
<blockquote><code><font color="black">PHP_MINIT_FUNCTION(hello);<br/>
PHP_MSHUTDOWN_FUNCTION(hello);<br/>
<br/>
PHP_FUNCTION(hello_world);<br/>
PHP_FUNCTION(hello_long);<br/>
PHP_FUNCTION(hello_double);<br/>
PHP_FUNCTION(hello_bool);<br/>
PHP_FUNCTION(hello_null);</font><br/>
<br/>
</code></blockquote><br/>
Далее откройте файл <em>hello.c</em> и замените текущую версию <em>hello_module_entry</em> на следующую:<br/>
<blockquote><code><font color="black">zend_module_entry hello_module_entry = {<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  STANDARD_MODULE_HEADER,<br/>
<font color="#0000ff">#endif</font><br/>
  PHP_HELLO_WORLD_EXTNAME,<br/>
  hello_functions,<br/>
  PHP_MINIT(hello),<br/>
  PHP_MSHUTDOWN(hello),<br/>
  NULL,<br/>
  NULL,<br/>
  NULL,<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  PHP_HELLO_WORLD_VERSION,<br/>
<font color="#0000ff">#endif</font><br/>
  STANDARD_MODULE_PROPERTIES<br/>
};<br/>
<br/>
PHP_INI_BEGIN()<br/>
PHP_INI_ENTRY(<font color="#A31515">"hello.greeting"</font>, <font color="#A31515">"Hello World"</font>, PHP_INI_ALL, NULL)<br/>
PHP_INI_END()<br/>
<br/>
PHP_MINIT_FUNCTION(hello)<br/>
{<br/>
  REGISTER_INI_ENTRIES();<br/>
<br/>
  <font color="#0000ff">return</font> SUCCESS;<br/>
}<br/>
<br/>
PHP_MSHUTDOWN_FUNCTION(hello)<br/>
{<br/>
  UNREGISTER_INI_ENTRIES();<br/>
<br/>
  <font color="#0000ff">return</font> SUCCESS;<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
Теперь вам следует добавить соответствующую директиву <em>#include</em> в начале файла <em>hello.c</em> для получения заголовков для работы с INI-файлами:<br/>
<blockquote><code><font color="black">#ifdef HAVE_CONFIG_H<br/>
#include <font color="#A31515">"config.h"</font><br/>
<font color="#0000ff">#endif</font><br/>
<br/>
#include <font color="#A31515">"php.h"</font><br/>
#include <font color="#A31515">"php_ini.h"</font><br/>
#include <font color="#A31515">"php_hello.h"</font></font><br/>
<br/>
</code></blockquote><br/>
Последнее, что вам осталось – это модифицировать функцию <em>hello_world</em> так, что бы она использовала INI-настройку:<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_world)<br/>
{<br/>
  RETURN_STRING(INI_STR(<font color="#A31515">"hello.greeting"</font>), 1);<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
Обратите внимание, что вы создаёте копию значения, полученного от <em>INI_STR</em>. Причина в том, что строка, возвращаемая <em>INI_STR</em> является статической. Другими словами, если вы попытаетесь её изменить рабочее окружение PHP может стать нестабильным или даже аварийно завершиться.<br/>
<br/>
Первый набор внесённых в этой главе изменений добавляет два новых метода, с которыми вы должны быть уже знакомы: <em>MINIT</em> и <em>MSHUTDOWN</em>. Как упоминалось ранее, эти методы вызываются при первом запуске SAPI-слоя и в процессе завершения его работы соответственно. Они не вызываются в течение или между запросами. В этом примере они используются для регистрации записей из файла php.ini, объявленных в вашем расширении. Также в этих функциях могут быть зарегистрированы ресурсы, объекты и обработчики потоков.<br/>
<br/>
В вашей функции <em>hello_world</em> вы используете макрос <em>INI_STR</em> для получения текущего значения записи <em>hello.greating</em> в качестве строки. Существует совокупность других функций для получения целочисленных значений, значений с плавающей точкой, булевых значений перечисленных ниже. В дополнение эти функции имеют дубликаты с суффиксом ORIG, позволяющие получить значение записи в том виде, в котором оно записано в файле <em>php.ini</em> (до того, как могло быть изменено посредствам файла <em>.htaccess</em> или функции <em>ini_set</em>).<br/>
<table>
<tr>
<th><strong>Текущее значение</strong></th>
<th><strong>Оригинальное значение</strong></th>
<th><strong>Тип</strong></th>
</tr>
<tr>
<td>INI_STR(name)</td>
<td>INI_ORIG_STR(name)</td>
<td>Char * (NULL terminated)</td>
</tr>
<tr>
<td>INI_INT(name)</td>
<td>INI_ORIG_INT(name)</td>
<td>signed long</td>
</tr>
<tr>
<td>INI_FLT(name)</td>
<td>INI_ORIG_FLT(name)</td>
<td>signed double</td>
</tr>
<tr>
<td>INI_BOOL(name)</td>
<td>INI_ORIG_BOOL(name)</td>
<td>Zend_bool</td>
</tr>
</table><br/>
Перейдём к функции <em>PHP_INI_ENTRY</em>. Первым параметром ей передаётся строка, содержащая имя интересующей вас записи в файле <em>php.ini</em>. Для того, что бы избежать коллизий между именами записей в <em>php.ini</em>, вам следует использовать те же соглашения, что при наименовании функций: имя должно начинаться с префикса, совпадающего с именем расширения. Так же соглашение предусматривает, что разделителем имени расширения от оригинального имени настройки в INI-файлах должна служить точка. В данном случае имя настройки будет выглядеть как <em>hello.greeting</em>.<br/>
Вторым параметром является начальное значение настройки, которое всегда задаётся как char* вне зависимости от того, является ли значение числом или нет. Это является следствием того факта, что все настройки в INI-файлах по своей сути текстовые, так как сам файл текстовый. Только последующее использование в скрипте макросов <em>INI_INT</em>, <em>INI_FLT</em> или <em>INI_BOOL</em> вызывает преобразование их типов.<br/>
Третьим параметром является модификатор уровня доступа. Это битовая маска, которая определяет когда и как данная INI-настройка может быть модифицирована. Для некоторых настроек, таких как <em>register_globals</em>, просто-напросто не имеет смысла позволять изменение значения внутри скрипта с помощью функции <em>ini_set</em>, так как данная настройка имеет смысл только во время подготовки обработки запроса – до того как скрипту дана возможность отработать. Другие, такие как <em>allow_url_fopen</em>, являются административными настройками, которые пользователи не должны иметь права изменять ни через <em>ini_set</em>, ни через директивы <em>.htaccess</em>. По-умолчанию значением для этого параметра является значение <em>PHP_INI_ALL</em>, указывающее, что значение настройки может меняться где угодно. Также возможны значения <em>PHP_INI_SYSTEM|PHP_INI_PERDIR</em>, указывающие, что значение настройки может быть изменено через php.ini или директиву в файле .htaccess, но через функцию ini_set(). Или же возможно значение <em>PHP_INI_SYSTEM</em>, означающее, что настройку можно изменить только через файл <em>php.ini</em> и нигде больше.<br/>
<br/>
Последний четвёртый параметр позволяет указать функцию обратного вызова (callback), вызываемую при изменении настройки с помощью функции <em>ini_set</em>. Это позволяет расширениям производить более полный контроль над условиями изменения настройки или вызывать соответствующую функцию в зависимости от нового значения настройки.<br/>
<br/>
<br/>
<br/>
<h1>Глобальные переменные</h1><br/>
Довольно часто расширению требуется обработать переменную в отдельном запросе, сохраняя её значение независимым от других запросов, которые могут обрабатываться в тоже самое время. В немногопоточном SAPI это можно сделать очень просто: всего лишь объявите глобальную переменную в файле с исходным кодом и обращайтесь к ней, когда вам нужно. Проблема в том, что, так как PHP спроектирован для работы с многопоточными web-серверами (такими как Apache 2 и ISS), ему необходимо хранить глобальные переменные, используемые одним потоком, отдельно от глобальных переменных другого. PHP значительно упрощает эту задачу благодаря использованию слоя абстракции <strong>TSRM</strong> (Thread Safe Resource Manager) иногда называемого <strong>ZTS</strong> (Zend Thread Safety). Фактически в данной статье уже использовались части TSRM, чего вы даже не заметили. (Не пытайтесь найти их, так как пока для вас это слишком сложно).<br/>
<br/>
Первая часть создания потокобезопасной глобальной переменной, как и любой другой глобальной переменной, заключается в её объявлении. В качестве примера мы объявим одну глобальную переменную типа long, начальным значением которой будет 0. Каждый раз, когда функция hello_long будет вызываться, мы будем увеличивать значение глобальной переменной и возвращать её значение.<br/>
Добавьте следующий фрагмент кода в файл <em>php_hello.h</em> сразу после строки <em>#define PHP_HELLO_H</em>:<br/>
<blockquote><code><font color="black">#ifdef ZTS<br/>
#include <font color="#A31515">"TSRM.h"</font><br/>
<font color="#0000ff">#endif</font><br/>
<br/>
ZEND_BEGIN_MODULE_GLOBALS(hello)<br/>
  <font color="#0000ff">long</font> counter;<br/>
ZEND_END_MODULE_GLOBALS(hello)<br/>
<br/>
#ifdef ZTS<br/>
<font color="#0000ff">#define</font> HELLO_G(v) TSRMG(hello_globals_id, zend_hello_globals *, v)<br/>
<font color="#0000ff">#else</font><br/>
<font color="#0000ff">#define</font> HELLO_G(v) (hello_globals.v)<br/>
<font color="#0000ff">#endif</font></font><br/>
<br/>
</code></blockquote><br/>
Вам также предстоит использовать метод <em>RINIT</em>, так что необходимо объявить его прототип в заголовке:<br/>
<blockquote><code><font color="black">PHP_MINIT_FUNCTION(hello);<br/>
PHP_MSHUTDOWN_FUNCTION(hello);<br/>
PHP_RINIT_FUNCTION(hello);</font><br/>
<br/>
</code></blockquote><br/>
Теперь давайте перейдём к файлу <em>hello.c</em> и добавим следующий код после блока include’ов:<br/>
<blockquote><code><font color="black">#ifdef HAVE_CONFIG_H<br/>
#include <font color="#A31515">"config.h"</font><br/>
<font color="#0000ff">#endif</font><br/>
<br/>
#include <font color="#A31515">"php.h"</font><br/>
#include <font color="#A31515">"php_ini.h"</font><br/>
#include <font color="#A31515">"php_hello.h"</font><br/>
<br/>
ZEND_DECLARE_MODULE_GLOBALS(hello)</font><br/>
</code></blockquote><br/>
Изменим <em>hello_module_entry</em>, добавив в него <em>PHP_RINIT(hello)</em>:<br/>
<blockquote><code><font color="black">zend_module_entry hello_module_entry = {<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  STANDARD_MODULE_HEADER,<br/>
<font color="#0000ff">#endif</font><br/>
  PHP_HELLO_WORLD_EXTNAME,<br/>
  hello_functions,<br/>
  PHP_MINIT(hello),<br/>
  PHP_MSHUTDOWN(hello),<br/>
  PHP_RINIT(hello),<br/>
  NULL,<br/>
  NULL,<br/>
<font color="#0000ff">#if</font> ZEND_MODULE_API_NO >= 20010901<br/>
  PHP_HELLO_WORLD_VERSION,<br/>
<font color="#0000ff">#endif</font><br/>
  STANDARD_MODULE_PROPERTIES<br/>
};</font><br/>
</code></blockquote><br/>
<br/>
И измените вашу функцию <em>MINIT</em> вместе с добавлением ещё нескольких функций для обработки инициализации при старте запроса:<br/>
<blockquote><code><font color="black"><font color="#0000ff">static</font> <font color="#0000ff">void</font> php_hello_init_globals(zend_hello_globals *hello_globals)<br/>
{<br/>
}<br/>
<br/>
PHP_RINIT_FUNCTION(hello)<br/>
{<br/>
  HELLO_G(counter) = 0;<br/>
<br/>
  <font color="#0000ff">return</font> SUCCESS;<br/>
}<br/>
<br/>
PHP_MINIT_FUNCTION(hello)<br/>
{<br/>
  ZEND_INIT_MODULE_GLOBALS(hello, php_hello_init_globals, NULL);<br/>
<br/>
  REGISTER_INI_ENTRIES();<br/>
<br/>
  <font color="#0000ff">return</font> SUCCESS;<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
И, наконец, вы можете изменить функцию <em>hello_long</em>, добавив в неё использование глобальной переменной:<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_long)<br/>
{<br/>
  HELLO_G(counter)++;<br/>
<br/>
  RETURN_LONG(HELLO_G(counter));<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
В изменениях, которые вы внесли в файл <em>php_hello.h</em>, вы использовали пару макросов – <em>ZEND_BEGIN_MODULE_GLOBALS</em> и <em>ZEND_END_MODULE_GLOBALS</em>. С их помощью была определена структура <em>zend_hello_globals</em>, содержащая одну переменную типа long. После этого был определён макрос <em>HELLO_G</em>, позволяющий в зависимости от режима компиляции (с учётом или без многопоточности) получать значение из пула потоков или просто взять его из глобальной области видимости.<br/>
В файле <em>hello.c</em> с помощью макроса <em>ZEND_DECLARE_MODULE_GLBALS</em> вы объявили структуру <em>zend_hello_globals</em> либо как глобальную (при непотокобезопасной сборке), либо как член пула ресурсов потока. Нам как авторам расширения не нужно задумываться об этом механизме, так как всю работу берёт на себя ZE. И, наконец, вы используете функцию <em>ZEND_INIT_MODULE_GLOBALS</em> для выделения идентификатора потокобезопасного ресурса.<br/>
Возможно, вы заметили, что функция <em>php_hello_init_globals</em> на самом деле ничего не делает. Кроме того, инициализация счётчика значением 0 оказалась в функции <em>RINIT</em>. Почему?<br/>
Ключ к ответу на этот вопрос кроется в моменте, когда эти функции вызываются. Функция <em>php_hello_init_globals</em> вызывается только при запуске нового процесса или потока. Однако, каждый процесс может обслуживать более одного запроса, так что использование этой функции для инициализации нашего счётчика значением 0 будет верно только для первого запроса. Последующий запрос к этому же процессу по прежнему будет работать со старым значением счётчика и, следовательно, не будет начинать отчёт с нуля. Для инициализации счётчика значением 0 для каждого запроса мы использовали функция <em>RINIT</em>, которая, как вы уже читали, вызывается перед каждым запросом обработки скрипта. Мы включили функцию <em>php_hello_init_globals</em> в наш код как минимум из-за того, что передача NULL в качестве соответствующего параметра <em>ZEND_INIT_MODULE_GLOBALS</em> функции <em>init</em> приведёт к ошибке сегментации для платформ без поддержки потоков.<br/>
<br/>
<br/>
<br/>
<h1>INI-настройки и глобальные переменные</h1><br/>
Как вы уже знаете, настройки в файле php.ini, объявляемые с помощью функции <em>PHP_INI_ENTRY</em> считываются как строки и при необходимости конвертируются в другие форматы с помощью функций <em>INI_INT</em>, <em>INI_FLT</em> и <em>INI_BOOL</em>. Однако, некоторые настройки во время выполнения скрипта могут запрашиваться слишком часто, что приведёт к большому количеству ненужных операций чтения из файла. К счастью, существует возможность инструктировать ZE хранить INI-настройки в особенном типе данных и производить приведение типов только при изменении значения настройки. Давайте проверим эту возможность в работе, объявив ещё одну INI-настройку, на этот раз типа boolean, определяющую, должен ли счётчик в настоящий момент уменьшаться или увеличиваться. Начнём с изменения блока <em>MODULE_GLOBALS</em> в файле p<em>hp_hello.h</em> следующим образом:<br/>
<blockquote><code><font color="black">ZEND_BEGIN_MODULE_GLOBALS(hello)<br/>
  <font color="#0000ff">long</font> counter;<br/>
  zend_bool direction;<br/>
ZEND_END_MODULE_GLOBALS(hello)</font><br/>
<br/>
</code></blockquote><br/>
Следующим шагом объявите INI-настройку, изменив блок <em>PHP_INI_BEGIN</em>:<br/>
<blockquote><code><font color="black">PHP_INI_BEGIN()<br/>
  PHP_INI_ENTRY(<font color="#A31515">"hello.greeting"</font>, <font color="#A31515">"Hello World"</font>, PHP_INI_ALL, NULL)<br/>
  STD_PHP_INI_ENTRY(<font color="#A31515">"hello.direction"</font>, <font color="#A31515">"1"</font>, PHP_INI_ALL, OnUpdateBool, direction, zend_hello_globals, hello_globals)<br/>
PHP_INI_END()</font><br/>
<br/>
</code></blockquote><br/>
Теперь инициализируйте настройку в функции <em>init_globals</em>:<br/>
<blockquote><code><font color="black"><font color="#0000ff">static</font> <font color="#0000ff">void</font> php_hello_init_globals(zend_hello_globals *hello_globals)<br/>
{<br/>
  hello_globals->direction = 1;<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
И, наконец, используйте значение INI-настройки в функции <em>hello_long</em> для выбора операции над счётчиком:<br/>
<blockquote><code><font color="black">PHP_FUNCTION(hello_long)<br/>
{<br/>
  <font color="#0000ff">if</font> (HELLO_G(direction)) {<br/>
    HELLO_G(counter)++;<br/>
  } <font color="#0000ff">else</font> {<br/>
    HELLO_G(counter)--;<br/>
  }<br/>
<br/>
  RETURN_LONG(HELLO_G(counter));<br/>
}</font><br/>
<br/>
</code></blockquote><br/>
Вот и всё! С помощью метода <em>OnUpdateBool</em> (метод является часть ZE), переданного в качестве третьего параметра макроса <em>STD_PHP_INI_ENTRY</em>, будет производиться автоматическое приведение типа значения настройки, полученного из файла <em>php.ini</em>, <em>.htaccess</em>, или с помощью функции <em>ini_set</em>, к соответствующему значению TRUE/FALSE, которое вы можете получить прямо внутри скрипта. Последние три параметра функции <em>STD_PHP_INI_ENTRY</em> указывают PHP, какую глобальную переменную изменить, как выглядит структура глобальных переменных нашего расширения, и имя контейнера глобальных переменных, в котором они содержаться.<br/>
<br/>
<br/>
<br/>
<h1>Что дальше?</h1><br/>
В этой статье мы разобрали структуру простого PHP расширения, которое экспортирует функции, возвращающие значения, загружает и обрабатывает INI-настройки, сохраняя их на протяжении обработки запроса.<br/>
<br/>
В <a href="http://devzone.zend.com/node/view/id/1022">следующей статье</a> мы рассмотрим внутреннюю структуру переменных PHP, способы их хранения и обработки. Поработаем с функцией <em>zend_parse_parameters</em>, используемой для получения параметров из программы при вызове функции, и откроем способы возвращения более сложных результатов из функции, таких как массив, объект и ресурс.<br/>
<br/>
<br/>
<br/>
<h1>P.S.</h1><br/>
В некоторых местах перевод имеет довольно вольный формат, что является следствием трудностей перевода, которые мне не удалось преодолеть в полной мере. Кроме того перевод содержит некоторое количество мелких дополнений, показавшихся мне актуальными.<br/>
Процесс сборки расширения согласно статье проверен на <a href="http://ru2.php.net/get/php-5.3.2.tar.bz2/from/a/mirror">исходниках PHP 5.3.2</a>.<br/>
<br/>
У <a href="http://devzone.zend.com/member/4580-SaraMG">автора</a> есть несколько статей по данной тематике: <a href="http://devzone.zend.com/node/view/id/1021">1</a>, <a href="http://devzone.zend.com/node/view/id/1022">2.1</a>, <a href="http://devzone.zend.com/node/view/id/1023">2.2</a>, <a href="http://devzone.zend.com/node/view/id/1024">3</a>. Четвёртая статья видимо так и не увидит свет ввиду публикации автором книги <a href="http://www.amazon.com/Extending-Embedding-PHP-Sara-Golemon/dp/067232704X">«Extending and Embedding PHP»</a>, посвящённой данной тематике.<br/>
<br/>
Так же про Zend Engine можно <a href="http://www.php.net/manual/en/internals2.php">почитать на php.net</a>.</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bphp%5D" class="tm-article-body__tags-item-link">php</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bextension%5D" class="tm-article-body__tags-item-link">extension</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bzend%20engine%5D" class="tm-article-body__tags-item-link">zend engine</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/php/" class="tm-article-body__tags-item-link">
                  PHP
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 83: ↑77 и ↓6</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 83: ↑77 и ↓6" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+71</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    247
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/98862/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      16
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/krestjaninoff/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/095/b2b/002/095b2b00299151b9fb579590f965f463.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 171 голос " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    128.2
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Михаил Крестьянинов</span> <a href="/ru/users/krestjaninoff/" class="tm-user-card__nickname">
          @krestjaninoff
        </a> <!----></div> <p class="tm-user-card__short-info">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/98862/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 16 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-02-01T16:31:01.000Z" title="2021-02-01, 19:31">1  февраля   в 19:31</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/news/t/540402/" class="tm-article-title__link"><span>Microsoft открыла исходный код Extensible Storage Engine</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 12: ↑11 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 12: ↑11 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+10</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">5.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    7
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/news/t/540402/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      8
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2018-10-17T22:44:11.000Z" title="2018-10-18, 01:44">18  октября  2018 в 01:44</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/426809/" class="tm-article-title__link"><span>Зеев Сураски: Будущее Zend Engine и Zend Framework</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 38: ↑37 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 38: ↑37 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+36</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">14K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    22
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/426809/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      28
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2016-06-20T12:09:34.000Z" title="2016-06-20, 15:09">20  июня  2016 в 15:09</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/303678/" class="tm-article-title__link"><span>Макросы Zend обхода циклов (HashTable Iteration)</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 14: ↑12 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑12 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+10</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    22
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/303678/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      10
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T07:08:30.000Z" title="2021-09-28, 10:08">сегодня в 10:08</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/nlmk/blog/580270/" class="tm-article-title__link"><span>Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 65: ↑65 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 65: ↑65 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+65</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    23
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/nlmk/blog/580270/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      23
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:07:48.000Z" title="2021-09-28, 11:07">сегодня в 11:07</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/domclick/blog/575686/" class="tm-article-title__link"><span>Когда сделаете доработку?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 39: ↑38 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 39: ↑38 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+37</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    33
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/domclick/blog/575686/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:51:05.000Z" title="2021-09-28, 11:51">сегодня в 11:51</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/yandex/blog/579778/" class="tm-article-title__link"><span>YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 36: ↑36 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 36: ↑36 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+36</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    22
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/yandex/blog/579778/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      7
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:18:27.000Z" title="2021-09-28, 11:18">сегодня в 11:18</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/cloud4y/blog/580348/" class="tm-article-title__link"><span>Самый большой космический телескоп Джеймс Уэбб должен изменить наши представления о космосе</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 29: ↑28 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 29: ↑28 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+27</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    8
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/cloud4y/blog/580348/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      27
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T11:03:01.000Z" title="2021-09-28, 14:03">сегодня в 14:03</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580168/" class="tm-article-title__link"><span>Как вообще Интернет приходит в ЦОД</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 26: ↑26 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 26: ↑26 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+26</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    30
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580168/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      8
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="98862" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/98862/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/98862/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"98862":{"id":"98862","timePublished":"2010-07-13T03:32:12+00:00","isCorporative":false,"lang":"ru","titleHtml":"Создание расширений PHP: Введение в PHP и Zend","leadData":{"textHtml":"Перевод статьи \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fmember\u002F4580-SaraMG\"\u003ESara Golemon\u003C\u002Fa\u003E \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1021\"\u003E«Extension Writing Part I: Introduction to PHP and Zend»\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Sara Golemon","originalUrl":"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1021"}}],"author":{"scoreStats":{"score":128.2,"votesCount":171},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"52623","alias":"krestjaninoff","fullname":"Михаил Крестьянинов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F095\u002Fb2b\u002F002\u002F095b2b00299151b9fb579590f965f463.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":16,"favoritesCount":247,"readingCount":28711,"score":71,"votesCount":83},"hubs":[{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EПеревод статьи \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fmember\u002F4580-SaraMG\"\u003ESara Golemon\u003C\u002Fa\u003E \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1021\"\u003E«Extension Writing Part I: Introduction to PHP and Zend»\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EВведение\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nЕсли вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений для языка PHP. Если же нет… возможно, когда вы прочтёте эту статью, то обнаружите в себе этот интерес, не смотря на то, что вы о нём даже не подозревали!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМатериал, изложенный в данной статье, подразумевает знакомство как с самим языком PHP, так и с языком, на котором написан интерпретатор PHP: \u003Ci\u003EC\u003C\u002Fi\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНачнём с того, что определим причины, по которым вы хотите написать расширение для PHP:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EСуществование какой-нибудь библиотеки или специфичного вызова ОС, который не может быть сделан из PHP напрямую из-за уровня абстракции принятого в языке;\u003C\u002Fli\u003E\r\n\u003Cli\u003EВы хотите заставить PHP работать нестандартным способом;\u003C\u002Fli\u003E\r\n\u003Cli\u003EУ вас уже есть решение, написанное на PHP, но вы знаете, что оно может быть быстрее, компактней и потреблять меньше памяти в процессе работы;\u003C\u002Fli\u003E\r\n\u003Cli\u003EУ вас есть особенный код, который вы хотели бы продать. Однако, важно, что бы покупатель мог запускать Ваш код, но не смотреть исходники.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nВсе перечисленные выше причины являются вполне адекватными, но, создавая расширение, прежде всего вам стоит понимать, что это в первую очередь \u003Cstrong\u003Eрасширение\u003C\u002Fstrong\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЧто такое Расширение?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nЕсли вам приходилось использовать PHP, то вы использовали и расширения. За небольшим исключением каждая доступная для использования функция в языке PHP сгруппирована в то или иное расширение. Основная часть функций (более 400) входит в состав \u003Cem\u003Eстандартного расширения\u003C\u002Fem\u003E. Исходные коды PHP распространяются с порядка 86 расширениями, имеющими примерно по 30 функций в каждом. Посчитав, получим где-то 2500 функций в сумме. Если этого не достаточно, \u003Ca href=\"http:\u002F\u002Fpecl.php.net\u002F\"\u003Eрепозитарий PECL\u003C\u002Fa\u003E предлагает свыше 100 дополнительных расширений, ещё больше можно найти на бескрайних просторах интернета.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n«Что же, с учётом всего этого множества функций, живущих в расширениях, тогда остаётся вне расширений?» — спросите вы. «Что расширения расширяют? Что такое \u003Cstrong\u003Eядро PHP\u003C\u002Fstrong\u003E?»\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯдро PHP реализовано в виде 2-х отдельных частей. Техническая часть языка представлена в виде \u003Cstrong\u003EZend Engine\u003C\u002Fstrong\u003E (ZE). ZE отвечает за преобразование понятного для человека скрипта в понятные для компьютера токены (tokens), после чего выполняет их. Кроме того, ZE отвечает за управление памятью, область видимости переменных, обработку вызова функций.\u003Cbr\u002F\u003E\r\nВторой частью ядра является то, что непосредственно называется «ядром» (\u003Cstrong\u003Ethe PHP core\u003C\u002Fstrong\u003E). Оно отвечает за взаимодействие со слоем SAPI (Server Application Programming Interface, интерфейс взаимодействия PHP с другим серверным ПО — CLI, CGI, Apache и так далее). Кроме того, ядро реализует обобщённый слой контроля для проверок safe_mode и open_basedir (данные фичи объявлены depricated с версии 5.3), так же, как и слой потоков, который ассоциирует файловые и сетевые I\u002FO операции с функциями fopen, fread и fwrite.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЖизненный цикл\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nКогда происходит запуск заданного SAPI (например, при запуске сервера Apache по команде \u003Cem\u003E\u002Fusr\u002Flocal\u002Fapache\u002Fbin\u002Fapachectl start\u003C\u002Fem\u003E), PHP начинает свою работу с запуска подсистемы ядра. К концу процедуры запуска он загружает код каждого расширения и вызывает его функцию \u003Cstrong\u003EModule Initialization\u003C\u002Fstrong\u003E (MINIT). Это даёт каждому расширению возможность инициализировать внутренние переменные, выделить память под ресурсы, зарегистрировать обработчики ресурсов и свои функции в ZE, что бы при вызове каким-нибудь скриптом функции этого расширения ZE знал, какой код ему выполнять.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее PHP ждёт от слоя SAPI запроса на обработку страницы. В случае CGI или CLI SAPI это происходит незамедлительно и только один раз. В случае SAPI Apache, IIS или другого полноценного web-сервера запрос на обработку страницы происходит каждый раз при запросе (возможно конкурентном) страницы удалённым пользователем. Однако, вне зависимости от того, каким образом пришёл запрос, его обработка начинается с того, что ядро PHP просит ZE настроить окружающую среду для запуска скрипта, после чего вызывает функцию \u003Cstrong\u003ERequest Initialization\u003C\u002Fstrong\u003E (RINIT) для каждого расширения. \u003Ci\u003ERINIT\u003C\u002Fi\u003E даёт расширениям возможность настроить специфичные переменные окружения, выделить память для специфичных ресурсов запроса и выполнить другие задания. Наглядным примером функции \u003Ci\u003ERINIT\u003C\u002Fi\u003E в действии может служить расширение \u003Ci\u003Esession\u003C\u002Fi\u003E, в котором при включенной настройке \u003Ci\u003Esession.auto_star\u003C\u002Fi\u003Et функция \u003Ci\u003ERINIT\u003C\u002Fi\u003E автоматически вызывает исполнение функции \u003Cem\u003Esession_start\u003C\u002Fem\u003E и инициализирует переменную \u003Cem\u003E$_SESSION\u003C\u002Fem\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того, как запрос инициализирован, ZE транслирует PHP скрипт в \u003Cstrong\u003Eтокены\u003C\u002Fstrong\u003E, а затем в \u003Cstrong\u003Eопкоды\u003C\u002Fstrong\u003E (opcodes), которые он может выполнить. Если какой-нибудь из этих опкодов запрашивает вызов функции из расширения, ZE формирует аргументы для вызова этой функции и временно передаёт ей управление до её завершения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того как скрипт завершил своё выполнение, PHP вызывает функцию \u003Cstrong\u003ERequest Shutdown\u003C\u002Fstrong\u003E (RSHUTDOWN) для каждого расширения, что выполнить все необходимые для завершения чистки (например, сохранение сессионных переменных на диск). Следующим шагом ZE выполняет процесс чистки (также известный как сборка мусора), который фактически выполняет метод \u003Cem\u003Eunset\u003C\u002Fem\u003E для каждой переменной, использованной в выполненном скрипте (начиная с PHP 5.3 \u003Ca href=\"http:\u002F\u002Fphp.net\u002Fmanual\u002Fen\u002Ffeatures.gc.php\"\u003Eмеханизм сборки мусора\u003C\u002Fa\u003E значительно улучшен).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗавершив обработку запроса, PHP ждёт от SAPI либо запроса на обработку другого скрипта, либо сигнала на завершение. В случае CGI или CLI SAPI «следующий запрос» невозможен, поэтому SAPI инициализирует завершение работы PHP незамедлительно. В процессе завершения PHP перебирает все расширения и для каждого вызывает функцию \u003Cstrong\u003EModule Shutdown\u003C\u002Fstrong\u003E (MSHUTDOWN), после чего завершает свою собственную подсистему ядра.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭтот процесс поначалу может показаться немного запутанным, но, погрузившись в работу над расширениями, вы постепенно прочувствуете его.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EВыделение памяти\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nДля того, что бы избежать утечек памяти в плохо написанных расширениях, ZE использует свой собственный внутренний механизм управления памятью, основанный на дополнительном флаге для определения времени жизни данных. Постоянное (\u003Cb\u003Epersistent\u003C\u002Fb\u003E) выделение памяти означает, что память будет выделена более, чем на время обработки запроса одной страницы. Непостоянное (\u003Cb\u003Enon-persistent\u003C\u002Fb\u003E) выделение памяти означает освобождение памяти после обработки запроса вне зависимости от того, была ли вызвана функция освобождения памяти. К примеру, выделение памяти под пользовательские переменные носит непостоянный характер, так как по завершению обработки запроса они становятся бесполезными.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНесмотря на то, что расширение в теории может возложить на ZE освобождение непостоянной памяти автоматически по завершению каждого запроса, делать это не рекомендуется. Выделенная память будет оставаться долгое время невостребованной, ассоциированные с этой памятью ресурсы будут иметь меньше шансов быть закрытыми правильно, и, в конце концов, создание путаницы с освобождением памяти — плохая практика. Как вы увидите позже, убедиться, что все данные отчищены верно, достаточно легко.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте кратко сравним традиционные функции выделения памяти (которые стоит использовать только при работе с внешними библиотеками) с функциями постоянного и непостоянного выделения памяти в PHP\u002FZE.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ctable\u003E\r\n\u003Ctr\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EТрадиционные\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EНепостоянные\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EПостоянные\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Emalloc(count)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eemalloc(count)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Epemalloc(count, 1)\u003Csup\u003E*\u003C\u002Fsup\u003E\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Ecalloc(count, num)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eecalloc(count, 1)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Epecalloc(count, num, 1)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Estrdup(str)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eestrdup(str)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Epestrdup(str, 1)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Estrndup(str, len)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eestrndup(str, len)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Epemalloc() &amp; memcpy()\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Efree(ptr)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eefree(ptr)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Epefree(ptr, 1)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Erealloc(ptr, newsize)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eerealloc(ptr, newsize)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eperealloc(ptr, newsize, 1)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003Emalloc(count * num + extr)\u003Csup\u003E**\u003C\u002Fsup\u003E\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Esafe_emalloc(count, num, extr)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Esafe_pemalloc(count, num, extr)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003C\u002Ftable\u003E\u003Cem\u003E* Семейство функций pemalloc принимает в качестве параметра флаг «постоянности», который позволяет им вести себя как их непостоянные аналоги.\u003Cbr\u002F\u003E\r\n К примеру: emalloc(1234) тоже самое, что и pemalloc(1234, 0)\u003Cbr\u002F\u003E\r\n** safe_emalloc() и (в PHP 5) safe_pemalloc реализуют дополнительную проверку целочисленных переполнений.\u003Cbr\u002F\u003E\r\n\u003C\u002Fem\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EНастройка и сборка окружения\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nТеперь, когда вы ознакомились с теорией работы PHP и Zend Engine, могу поспорить, вам не терпится погрузиться в работу и начать что-нибудь делать. Однако, перед этим вам нужно обзавестись кое-какими утилитами для сборки и настроить окружение для ваших целей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрежде всего, вам необходим сам PHP и набор средств сборки, необходимых для PHP. Если вам не приходилось собирать PHP из исходников, предлагаю взглянуть на \u003Ca href=\"http:\u002F\u002Fwww.php.net\u002Fmanual\u002Fen\u002Finstall.unix.php\"\u003Eэту статью\u003C\u002Fa\u003E. Несмотря на то, что использование бинарного пакета с исходниками PHP может показаться заманчивым, такие сборки зачастую лишены двух важных параметров программы \u003Cem\u003E.\u002Fconfigure\u003C\u002Fem\u003E, которые очень полезны во время процесса разработки. Первый из них это \u003Cstrong\u003E--enable-debug\u003C\u002Fstrong\u003E. Эта опция компилирует PHP с дополнительной отладочной информацией в исполняемых файлах, так что при возникновении ошибки сегментации (segfault) вы сможете получить дамп ядра и воспользоваться отладчиком gdb, что бы выяснить, где и почему произошла ошибка.\u003Cbr\u002F\u003E\r\nНазвание второй опции зависит от того, с какой версией PHP вы собираетесь работать. В PHP 4.3 она называется \u003Cstrong\u003E--enable-experimental-zts\u003C\u002Fstrong\u003E, начиная с PHP 5, она переименована в \u003Cstrong\u003E--enable-maintainer-zts\u003C\u002Fstrong\u003E. Эта опция заставит PHP думать, что он работает в многопотоковой (multithread) среде, и позволит вам отловить общие ошибки, которые незаметны в среде без потоков, но повлекут нестабильную работу вашего расширения в многопотоковой среде.\u003Cbr\u002F\u003E\r\nСкомпилировав PHP с дополнительными опциями и установив его на сервер разработки (или рабочую станцию), вы можете преступать к созданию своего первого расширения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EHello World\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nКакая вводная статья по программированию может считаться завершённой без примера ставшей уже обязательной программы Hello World? В данном случае, мы рассмотрим создание расширения, которое добавляет в PHP одну единственную функцию, возвращающую строку со словом «Hello World». На PHP вы возможно реализовали бы это примерно так:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nfunction hello_world() {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#A31515\"\u003E'Hello World'\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n?\u003E\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nТеперь давайте сделаем из этой функции расширение PHP. Первым делом создадим подкаталог \u003Cem\u003Ehello\u003C\u002Fem\u003E в каталоге \u003Cem\u003Eext\u002F\u003C\u002Fem\u003E дерева каталогов исходников PHP и сделаем \u003Cem\u003Ecd\u003C\u002Fem\u003E в него. В принципе, этот каталог может располагаться где угодно внутри или снаружи дерева каталогов с исходниками, но вам следует поместить его именно сюда для возможности ссылаться на него из статьи в дальнейшем. Здесь вам нужно создать три файла:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003Eконфигурационный файл (\u003Cem\u003Econfig.m4\u003C\u002Fem\u003E), используемый утилитой \u003Cem\u003Ephpize\u003C\u002Fem\u003E для подготовки расширения к компиляции:\u003Cbr\u002F\u003E\r\n \u003Cblockquote\u003E\u003Ccode\u003EPHP_ARG_ENABLE(hello, whether to enable Hello World support,\u003Cbr\u002F\u003E\r\n[ --enable-hello Enable Hello World support])\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nif test \"$PHP_HELLO\" = \"yes\"; then\u003Cbr\u002F\u003E\r\n AC_DEFINE(HAVE_HELLO, 1, [Whether you have Hello World])\u003Cbr\u002F\u003E\r\n PHP_NEW_EXTENSION(hello, hello.c, $ext_shared)\u003Cbr\u002F\u003E\r\nfi\u003Cbr\u002F\u003E\r\n \u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003Cli\u003Eзаголовочный файл (\u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E), содержащий указания, используемые PHP для загрузки расширений:\u003Cbr\u002F\u003E\r\n \u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E#ifndef PHP_HELLO_H\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E PHP_HELLO_H 1\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E PHP_HELLO_WORLD_VERSION \u003Cfont color=\"#A31515\"\u003E\"1.0\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E PHP_HELLO_WORLD_EXTNAME \u003Cfont color=\"#A31515\"\u003E\"hello\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_world);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Eextern\u003C\u002Ffont\u003E zend_module_entry hello_module_entry;\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E phpext_hello_ptr &amp;hello_module_entry\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003Cli\u003Eфайл с исходниками (\u003Cem\u003Ehello.c\u003C\u002Fem\u003E), содержащий тело функции hello_world:\u003Cbr\u002F\u003E\r\n \u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E#ifdef HAVE_CONFIG_H\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"config.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php_hello.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E function_entry hello_functions[] = {\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_world, NULL)\u003Cbr\u002F\u003E\r\n  {NULL, NULL, NULL}\u003Cbr\u002F\u003E\r\n};\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nzend_module_entry hello_module_entry = {\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_HEADER,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_EXTNAME,\u003Cbr\u002F\u003E\r\n  hello_functions,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_VERSION,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_PROPERTIES\u003Cbr\u002F\u003E\r\n};\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n#ifdef COMPILE_DL_HELLO\u003Cbr\u002F\u003E\r\nZEND_GET_MODULE(hello)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_world)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_STRING(\u003Cfont color=\"#A31515\"\u003E\"Hello World\"\u003C\u002Ffont\u003E, 1);\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003EБольшая часть кода, которую вы видите в предыдущем примере, всего лишь своего рода «клей» — протокол для регистрации расширения в PHP и установления диалога между ними. Реальным же кодом являются только последние 4 строки в файле \u003Cem\u003Ehello.c\u003C\u002Fem\u003E, которые выполняют действия на уровне, который может быть вызван из пользовательского скрипта. Несомненно, этот код довольно похож на PHP код, который мы видели ранее, и может быть легко разобран на части:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eобъявление функции с именем hello_world,\u003C\u002Fli\u003E\r\n\u003Cli\u003Eустановка в качестве возвращаемого значения строки «Hello World»,\u003C\u002Fli\u003E\r\n\u003Cli\u003Eхм… 1? Что же значит эта 1?\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nВспомним, что ZE использует усовершенствованный механизм управления памятью, который проверяет, что все запрошенные ресурсы высвобождены на момент завершения работы скрипта. В мире управления памятью повторное освобождение одного и того же блока памяти считается \u003Ci\u003Eбольшим ай-ай-ай\u003C\u002Fi\u003E. Такое действие называется «двойное освобождение» и является частой причиной ошибок сегментации, так как заставляет программу попытаться получить доступ к блоку памяти, который ей больше не принадлежит. \u003Cbr\u002F\u003E\r\nПроще говоря, что бы ZE не начал повторно освобождать память, занимаемую статической строкой (какой является «Hello World» в нашем примере), функция hello_world должна каждый раз при вызове возвращать копию строки.\u003Cbr\u002F\u003E\r\nВ принципе функция \u003Cem\u003ERETURN_STRING\u003C\u002Fem\u003E может взять на себя ответственность за то, что любая строка, переданная в неё должна быть скопирована, так что бы была возможность безопасно освободить занимаемую ей память позже. Однако, так как выделение памяти под строку, копирование строки и возвращение копии как результата не является стандартным поведением для внутренних функций ZE, \u003Cem\u003ERETURN_STRING\u003C\u002Fem\u003E позволяет указать, необходимо ли делать копию переменной или нет с помощью второго аргумента. Для более наглядного описания данной концепции, обратите внимание на следующий фрагмент кода, который функционально идентичен предыдущему:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_world)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *str;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  str = estrdup(\u003Cfont color=\"#A31515\"\u003E\"Hello World\"\u003C\u002Ffont\u003E);\u003Cbr\u002F\u003E\r\n  RETURN_STRING(str, 0);\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nВ этом примере вы вручную выделили непостоянную память для строки «Hello World», которую передали обратно в вызывающий скрипт с помощьюфункции \u003Cem\u003ERETURN_STRING\u003C\u002Fem\u003E, указав ей 0 в качестве второго параметра, что заставляет функцию не делать копию строки, так как она может воспользоваться нашей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EСборка расширения\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nПоследним шагом в этом упражнении будет сборка вашего расширения как динамически подгружаемого модуля. Если вы скопировали предыдущие примеры верно, остаётся лишь запустить три команды из каталога ext\u002Fhello\u002F:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E$ phpize\u003Cbr\u002F\u003E\r\n$ .\u002Fconfigure --enable-hello\u003Cbr\u002F\u003E\r\n$ make\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nОбратите внимание, что для корректной работы утилиты \u003Ci\u003Ephpize\u003C\u002Fi\u003E необходимо наличие утилит \u003Ci\u003Em4\u003C\u002Fi\u003E и \u003Ci\u003Eautoconf\u003C\u002Fi\u003E.\u003Cbr\u002F\u003E\r\nПосле запуска всех этих команд у вас должен появится файл \u003Cem\u003Ehello.so\u003C\u002Fem\u003E в папке \u003Cem\u003Eext\u002Fhello\u002Fmodules\u002F\u003C\u002Fem\u003E. Теперь, как и любое другое расширение PHP, вы можете просто скопировать его каталог с расширениями (по-умолчанию это \u003Cem\u003E\u002Fusr\u002Flocal\u002Flib\u002Fphp\u002Fextensions\u002F\u003C\u002Fem\u003E, но на всякий случай проверьте настройки \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E или воспользуйтесь командой \u003Ci\u003Ephp-config --extension-dir\u003C\u002Fi\u003E) и добавьте строку \u003Cem\u003Eextension=hello.so\u003C\u002Fem\u003E в \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E для инициализации загрузки расширения при запуске PHP. Для SAPI типа CGI\u002FCLI это будет следующий запуск скрипта, для SAPI web-серверов типа Apache это будет следующий перезапуск сервера. Давайте попробуем вызвать функцию из командной строки:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E$ php –r ‘echo hello_world();’\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nЕсли всё пойдёт так, как должно, вы увидите строку \u003Ci\u003EHello World\u003C\u002Fi\u003E в качестве результата работы скрипта, так как функция \u003Cem\u003Ehello_world\u003C\u002Fem\u003E из загруженного расширения возвращает строку, а команда \u003Ci\u003Eecho\u003C\u002Fi\u003E отображает то, что ей было передано на вход (в данном случае – результат работы функции \u003Cem\u003Ehello_world\u003C\u002Fem\u003E).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ данном примере мы возвращали строку, другие скалярные типы данных могут быть возвращены по схожему принципу: RETURN_LONG для целочисленных значений, \u003Cem\u003ERETURN_DOUBLE\u003C\u002Fem\u003E для чисел с плавающей точкой, \u003Cem\u003ERETURN_BOOL\u003C\u002Fem\u003E для TRUE\u002FFALSE и \u003Cem\u003ERETURN_NULL\u003C\u002Fem\u003E для, как вы догадались, NULL-значений. Давайте посмотрим на каждую из них в действии, добавив строки с макросом \u003Cem\u003EPHP_FE\u003C\u002Fem\u003E в структуру \u003Cem\u003Efunction_entity\u003C\u002Fem\u003E и соответствующие им макросы \u003Cem\u003EPHP_FUNCTION\u003C\u002Fem\u003E в файле \u003Cem\u003Ehello.c\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E function_entry hello_functions[] = {\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_world, NULL)\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_long, NULL)\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_double, NULL)\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_bool, NULL)\u003Cbr\u002F\u003E\r\n  PHP_FE(hello_null, NULL)\u003Cbr\u002F\u003E\r\n  {NULL, NULL, NULL}\u003Cbr\u002F\u003E\r\n};\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_long)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_LONG(42);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_double)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_DOUBLE(3.1415926535);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_bool)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_BOOL(1);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_null)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_NULL();\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nКроме того, нам придётся добавить прототипы для этих функций рядом с прототипом для функции \u003Cem\u003Ehello_world\u003C\u002Fem\u003E в заголовочном файле \u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E для того, что бы процесс сборки прошёл без проблем:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_world);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_long);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_double);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_bool);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_null);\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nТак как вы не вносили изменений в файл \u003Cem\u003Econfig.m4\u003C\u002Fem\u003E, технически нет необходимости повторять шаги \u003Cem\u003Ephpize\u003C\u002Fem\u003E и \u003Cem\u003E.\u002Fconfigure\u003C\u002Fem\u003E, а можно сразу перейти к выполнению команды \u003Cem\u003Emake\u003C\u002Fem\u003E. Тем не менее, на этот раз я попрошу вас пройти через все три шага сборки заново с целью убедиться, что никаких проблем не возникло. Кроме того, в качестве последнего шага вы можете использовать команду \u003Cem\u003Emake clean all\u003C\u002Fem\u003E вместо \u003Cem\u003Emake\u003C\u002Fem\u003E, что бы быть уверенным, что все файлы с исходниками будут пересобраны. Повторюсь, что это не необходимо ввиду типа изменений, которые вы сделали, но лучше перестраховаться, чем наткнуться на ошибку. После того, как модуль собран, вам остаётся скопировать его в каталог расширений, заменив им старую версию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСейчас вы можете снова вызвать интерпретатор PHP, передав ему нехитрые скрипты для того, что бы протестировать только что добавленные функции. На самом деле – почему бы ни сделать это сейчас? Я подожду вас здесь…\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nГотово? Хорошо. Если для просмотра результата работы каждой функции вы использовали \u003Cem\u003Evar_dump\u003C\u002Fem\u003E, а не \u003Cem\u003Eecho\u003C\u002Fem\u003E, то, возможно, обратили внимание, что \u003Cem\u003Ehello_bool\u003C\u002Fem\u003E возвращает TRUE. Это результат равенства 1-це аргумента функции. Также как и в PHP-скриптах, целочисленное значение 0 эквивалентно FALSE, в то время как любое другое число эквивалентно TRUE. Авторы расширений зачастую используют соглашение, согласно которому этим числом является 1. Желательно, но не обязательно, что бы и вы придерживались этого соглашения. Кроме того, для большего удобства доступны макросы \u003Cem\u003ERETURN_TRUE\u003C\u002Fem\u003E и \u003Cem\u003ERETURN_FALSE\u003C\u002Fem\u003E. Ниже приведён пример функции \u003Cem\u003Ehello_bool\u003C\u002Fem\u003E с использованием макроса \u003Cem\u003ERETURN_TRUE\u003C\u002Fem\u003E.\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_bool)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_TRUE;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nОбратите внимание, что никаких круглых скобок при вызове макроса не использовалось. В этом плане макросы \u003Cem\u003ERETURN_TRUE\u003C\u002Fem\u003E и \u003Cem\u003ERETURN_FALSE\u003C\u002Fem\u003E отличаются от остальных макросов семейства \u003Cem\u003ERETURN_*\u003C\u002Fem\u003E, так что будьте внимательны и не попадитесь на этом!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы, возможно, заметили, что во всех предыдущих примерах мы не передаём параметр, отвечающий за создание копии результата. Причина этого в том, что для таких простых скалярных величин не требуется выделение или освобождение дополнительной памяти.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСуществуют ещё 3 дополнительных возвращаемых типа: \u003Cstrong\u003ERESOURCE\u003C\u002Fstrong\u003E (возвращаемый, к примеру, функциями \u003Cem\u003Emysql_connect\u003C\u002Fem\u003E, \u003Cem\u003Efsockopen\u003C\u002Fem\u003E или \u003Cem\u003Eftp_connect\u003C\u002Fem\u003E), \u003Cstrong\u003EARRAY\u003C\u002Fstrong\u003E (также известный как \u003Cstrong\u003EHASH\u003C\u002Fstrong\u003E) и \u003Cb\u003EOBJECT\u003C\u002Fb\u003E (возвращаемый по ключевому слову \u003Cem\u003Enew\u003C\u002Fem\u003E). Речь о них пойдёт позже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EINI-настройки\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nZend Engine предоставляет два подхода для работы с INI-данными. Сейчас мы рассмотрим наиболее простой из них, а к более общему вернёмся после ознакомления с глобальными переменными.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПредположим, вы хотите объявить в файле \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E настройку \u003Cem\u003Ehello.greeting\u003C\u002Fem\u003E для вашего расширения, которая будет содержать значение для вывода функцией \u003Cem\u003Ehello_world\u003C\u002Fem\u003E. Для этого нам придётся добавить несколько изменений в файлы \u003Cem\u003Ehello.c\u003C\u002Fem\u003E и \u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E в рамках изменения структуры \u003Cem\u003Ehello_module_entry\u003C\u002Fem\u003E. Начнём с добавления следующих прототипов перед списком прототипов пользовательских функций в файле \u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_MINIT_FUNCTION(hello);\u003Cbr\u002F\u003E\r\nPHP_MSHUTDOWN_FUNCTION(hello);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_world);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_long);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_double);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_bool);\u003Cbr\u002F\u003E\r\nPHP_FUNCTION(hello_null);\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nДалее откройте файл \u003Cem\u003Ehello.c\u003C\u002Fem\u003E и замените текущую версию \u003Cem\u003Ehello_module_entry\u003C\u002Fem\u003E на следующую:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003Ezend_module_entry hello_module_entry = {\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_HEADER,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_EXTNAME,\u003Cbr\u002F\u003E\r\n  hello_functions,\u003Cbr\u002F\u003E\r\n  PHP_MINIT(hello),\u003Cbr\u002F\u003E\r\n  PHP_MSHUTDOWN(hello),\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_VERSION,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_PROPERTIES\u003Cbr\u002F\u003E\r\n};\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_INI_BEGIN()\u003Cbr\u002F\u003E\r\nPHP_INI_ENTRY(\u003Cfont color=\"#A31515\"\u003E\"hello.greeting\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E\"Hello World\"\u003C\u002Ffont\u003E, PHP_INI_ALL, NULL)\u003Cbr\u002F\u003E\r\nPHP_INI_END()\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_MINIT_FUNCTION(hello)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  REGISTER_INI_ENTRIES();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E SUCCESS;\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_MSHUTDOWN_FUNCTION(hello)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  UNREGISTER_INI_ENTRIES();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E SUCCESS;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nТеперь вам следует добавить соответствующую директиву \u003Cem\u003E#include\u003C\u002Fem\u003E в начале файла \u003Cem\u003Ehello.c\u003C\u002Fem\u003E для получения заголовков для работы с INI-файлами:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E#ifdef HAVE_CONFIG_H\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"config.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php_ini.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php_hello.h\"\u003C\u002Ffont\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nПоследнее, что вам осталось – это модифицировать функцию \u003Cem\u003Ehello_world\u003C\u002Fem\u003E так, что бы она использовала INI-настройку:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_world)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  RETURN_STRING(INI_STR(\u003Cfont color=\"#A31515\"\u003E\"hello.greeting\"\u003C\u002Ffont\u003E), 1);\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nОбратите внимание, что вы создаёте копию значения, полученного от \u003Cem\u003EINI_STR\u003C\u002Fem\u003E. Причина в том, что строка, возвращаемая \u003Cem\u003EINI_STR\u003C\u002Fem\u003E является статической. Другими словами, если вы попытаетесь её изменить рабочее окружение PHP может стать нестабильным или даже аварийно завершиться.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервый набор внесённых в этой главе изменений добавляет два новых метода, с которыми вы должны быть уже знакомы: \u003Cem\u003EMINIT\u003C\u002Fem\u003E и \u003Cem\u003EMSHUTDOWN\u003C\u002Fem\u003E. Как упоминалось ранее, эти методы вызываются при первом запуске SAPI-слоя и в процессе завершения его работы соответственно. Они не вызываются в течение или между запросами. В этом примере они используются для регистрации записей из файла php.ini, объявленных в вашем расширении. Также в этих функциях могут быть зарегистрированы ресурсы, объекты и обработчики потоков.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ вашей функции \u003Cem\u003Ehello_world\u003C\u002Fem\u003E вы используете макрос \u003Cem\u003EINI_STR\u003C\u002Fem\u003E для получения текущего значения записи \u003Cem\u003Ehello.greating\u003C\u002Fem\u003E в качестве строки. Существует совокупность других функций для получения целочисленных значений, значений с плавающей точкой, булевых значений перечисленных ниже. В дополнение эти функции имеют дубликаты с суффиксом ORIG, позволяющие получить значение записи в том виде, в котором оно записано в файле \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E (до того, как могло быть изменено посредствам файла \u003Cem\u003E.htaccess\u003C\u002Fem\u003E или функции \u003Cem\u003Eini_set\u003C\u002Fem\u003E).\u003Cbr\u002F\u003E\r\n\u003Ctable\u003E\r\n\u003Ctr\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EТекущее значение\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EОригинальное значение\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003Cth\u003E\u003Cstrong\u003EТип\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EINI_STR(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EINI_ORIG_STR(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EChar * (NULL terminated)\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EINI_INT(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EINI_ORIG_INT(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Esigned long\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EINI_FLT(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EINI_ORIG_FLT(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Esigned double\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EINI_BOOL(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EINI_ORIG_BOOL(name)\u003C\u002Ftd\u003E\r\n\u003Ctd\u003EZend_bool\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003C\u002Ftable\u003E\u003Cbr\u002F\u003E\r\nПерейдём к функции \u003Cem\u003EPHP_INI_ENTRY\u003C\u002Fem\u003E. Первым параметром ей передаётся строка, содержащая имя интересующей вас записи в файле \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E. Для того, что бы избежать коллизий между именами записей в \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E, вам следует использовать те же соглашения, что при наименовании функций: имя должно начинаться с префикса, совпадающего с именем расширения. Так же соглашение предусматривает, что разделителем имени расширения от оригинального имени настройки в INI-файлах должна служить точка. В данном случае имя настройки будет выглядеть как \u003Cem\u003Ehello.greeting\u003C\u002Fem\u003E.\u003Cbr\u002F\u003E\r\nВторым параметром является начальное значение настройки, которое всегда задаётся как char* вне зависимости от того, является ли значение числом или нет. Это является следствием того факта, что все настройки в INI-файлах по своей сути текстовые, так как сам файл текстовый. Только последующее использование в скрипте макросов \u003Cem\u003EINI_INT\u003C\u002Fem\u003E, \u003Cem\u003EINI_FLT\u003C\u002Fem\u003E или \u003Cem\u003EINI_BOOL\u003C\u002Fem\u003E вызывает преобразование их типов.\u003Cbr\u002F\u003E\r\nТретьим параметром является модификатор уровня доступа. Это битовая маска, которая определяет когда и как данная INI-настройка может быть модифицирована. Для некоторых настроек, таких как \u003Cem\u003Eregister_globals\u003C\u002Fem\u003E, просто-напросто не имеет смысла позволять изменение значения внутри скрипта с помощью функции \u003Cem\u003Eini_set\u003C\u002Fem\u003E, так как данная настройка имеет смысл только во время подготовки обработки запроса – до того как скрипту дана возможность отработать. Другие, такие как \u003Cem\u003Eallow_url_fopen\u003C\u002Fem\u003E, являются административными настройками, которые пользователи не должны иметь права изменять ни через \u003Cem\u003Eini_set\u003C\u002Fem\u003E, ни через директивы \u003Cem\u003E.htaccess\u003C\u002Fem\u003E. По-умолчанию значением для этого параметра является значение \u003Cem\u003EPHP_INI_ALL\u003C\u002Fem\u003E, указывающее, что значение настройки может меняться где угодно. Также возможны значения \u003Cem\u003EPHP_INI_SYSTEM|PHP_INI_PERDIR\u003C\u002Fem\u003E, указывающие, что значение настройки может быть изменено через php.ini или директиву в файле .htaccess, но через функцию ini_set(). Или же возможно значение \u003Cem\u003EPHP_INI_SYSTEM\u003C\u002Fem\u003E, означающее, что настройку можно изменить только через файл \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E и нигде больше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоследний четвёртый параметр позволяет указать функцию обратного вызова (callback), вызываемую при изменении настройки с помощью функции \u003Cem\u003Eini_set\u003C\u002Fem\u003E. Это позволяет расширениям производить более полный контроль над условиями изменения настройки или вызывать соответствующую функцию в зависимости от нового значения настройки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EГлобальные переменные\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nДовольно часто расширению требуется обработать переменную в отдельном запросе, сохраняя её значение независимым от других запросов, которые могут обрабатываться в тоже самое время. В немногопоточном SAPI это можно сделать очень просто: всего лишь объявите глобальную переменную в файле с исходным кодом и обращайтесь к ней, когда вам нужно. Проблема в том, что, так как PHP спроектирован для работы с многопоточными web-серверами (такими как Apache 2 и ISS), ему необходимо хранить глобальные переменные, используемые одним потоком, отдельно от глобальных переменных другого. PHP значительно упрощает эту задачу благодаря использованию слоя абстракции \u003Cstrong\u003ETSRM\u003C\u002Fstrong\u003E (Thread Safe Resource Manager) иногда называемого \u003Cstrong\u003EZTS\u003C\u002Fstrong\u003E (Zend Thread Safety). Фактически в данной статье уже использовались части TSRM, чего вы даже не заметили. (Не пытайтесь найти их, так как пока для вас это слишком сложно).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервая часть создания потокобезопасной глобальной переменной, как и любой другой глобальной переменной, заключается в её объявлении. В качестве примера мы объявим одну глобальную переменную типа long, начальным значением которой будет 0. Каждый раз, когда функция hello_long будет вызываться, мы будем увеличивать значение глобальной переменной и возвращать её значение.\u003Cbr\u002F\u003E\r\nДобавьте следующий фрагмент кода в файл \u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E сразу после строки \u003Cem\u003E#define PHP_HELLO_H\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E#ifdef ZTS\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"TSRM.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nZEND_BEGIN_MODULE_GLOBALS(hello)\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Elong\u003C\u002Ffont\u003E counter;\u003Cbr\u002F\u003E\r\nZEND_END_MODULE_GLOBALS(hello)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n#ifdef ZTS\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E HELLO_G(v) TSRMG(hello_globals_id, zend_hello_globals *, v)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#else\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#define\u003C\u002Ffont\u003E HELLO_G(v) (hello_globals.v)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nВам также предстоит использовать метод \u003Cem\u003ERINIT\u003C\u002Fem\u003E, так что необходимо объявить его прототип в заголовке:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_MINIT_FUNCTION(hello);\u003Cbr\u002F\u003E\r\nPHP_MSHUTDOWN_FUNCTION(hello);\u003Cbr\u002F\u003E\r\nPHP_RINIT_FUNCTION(hello);\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nТеперь давайте перейдём к файлу \u003Cem\u003Ehello.c\u003C\u002Fem\u003E и добавим следующий код после блока include’ов:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E#ifdef HAVE_CONFIG_H\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"config.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php_ini.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"php_hello.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nZEND_DECLARE_MODULE_GLOBALS(hello)\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nИзменим \u003Cem\u003Ehello_module_entry\u003C\u002Fem\u003E, добавив в него \u003Cem\u003EPHP_RINIT(hello)\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003Ezend_module_entry hello_module_entry = {\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_HEADER,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_EXTNAME,\u003Cbr\u002F\u003E\r\n  hello_functions,\u003Cbr\u002F\u003E\r\n  PHP_MINIT(hello),\u003Cbr\u002F\u003E\r\n  PHP_MSHUTDOWN(hello),\u003Cbr\u002F\u003E\r\n  PHP_RINIT(hello),\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n  NULL,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#if\u003C\u002Ffont\u003E ZEND_MODULE_API_NO \u003E= 20010901\u003Cbr\u002F\u003E\r\n  PHP_HELLO_WORLD_VERSION,\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E#endif\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  STANDARD_MODULE_PROPERTIES\u003Cbr\u002F\u003E\r\n};\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ измените вашу функцию \u003Cem\u003EMINIT\u003C\u002Fem\u003E вместе с добавлением ещё нескольких функций для обработки инициализации при старте запроса:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E php_hello_init_globals(zend_hello_globals *hello_globals)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_RINIT_FUNCTION(hello)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  HELLO_G(counter) = 0;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E SUCCESS;\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPHP_MINIT_FUNCTION(hello)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  ZEND_INIT_MODULE_GLOBALS(hello, php_hello_init_globals, NULL);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  REGISTER_INI_ENTRIES();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E SUCCESS;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nИ, наконец, вы можете изменить функцию \u003Cem\u003Ehello_long\u003C\u002Fem\u003E, добавив в неё использование глобальной переменной:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_long)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  HELLO_G(counter)++;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  RETURN_LONG(HELLO_G(counter));\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nВ изменениях, которые вы внесли в файл \u003Cem\u003Ephp_hello.h\u003C\u002Fem\u003E, вы использовали пару макросов – \u003Cem\u003EZEND_BEGIN_MODULE_GLOBALS\u003C\u002Fem\u003E и \u003Cem\u003EZEND_END_MODULE_GLOBALS\u003C\u002Fem\u003E. С их помощью была определена структура \u003Cem\u003Ezend_hello_globals\u003C\u002Fem\u003E, содержащая одну переменную типа long. После этого был определён макрос \u003Cem\u003EHELLO_G\u003C\u002Fem\u003E, позволяющий в зависимости от режима компиляции (с учётом или без многопоточности) получать значение из пула потоков или просто взять его из глобальной области видимости.\u003Cbr\u002F\u003E\r\nВ файле \u003Cem\u003Ehello.c\u003C\u002Fem\u003E с помощью макроса \u003Cem\u003EZEND_DECLARE_MODULE_GLBALS\u003C\u002Fem\u003E вы объявили структуру \u003Cem\u003Ezend_hello_globals\u003C\u002Fem\u003E либо как глобальную (при непотокобезопасной сборке), либо как член пула ресурсов потока. Нам как авторам расширения не нужно задумываться об этом механизме, так как всю работу берёт на себя ZE. И, наконец, вы используете функцию \u003Cem\u003EZEND_INIT_MODULE_GLOBALS\u003C\u002Fem\u003E для выделения идентификатора потокобезопасного ресурса.\u003Cbr\u002F\u003E\r\nВозможно, вы заметили, что функция \u003Cem\u003Ephp_hello_init_globals\u003C\u002Fem\u003E на самом деле ничего не делает. Кроме того, инициализация счётчика значением 0 оказалась в функции \u003Cem\u003ERINIT\u003C\u002Fem\u003E. Почему?\u003Cbr\u002F\u003E\r\nКлюч к ответу на этот вопрос кроется в моменте, когда эти функции вызываются. Функция \u003Cem\u003Ephp_hello_init_globals\u003C\u002Fem\u003E вызывается только при запуске нового процесса или потока. Однако, каждый процесс может обслуживать более одного запроса, так что использование этой функции для инициализации нашего счётчика значением 0 будет верно только для первого запроса. Последующий запрос к этому же процессу по прежнему будет работать со старым значением счётчика и, следовательно, не будет начинать отчёт с нуля. Для инициализации счётчика значением 0 для каждого запроса мы использовали функция \u003Cem\u003ERINIT\u003C\u002Fem\u003E, которая, как вы уже читали, вызывается перед каждым запросом обработки скрипта. Мы включили функцию \u003Cem\u003Ephp_hello_init_globals\u003C\u002Fem\u003E в наш код как минимум из-за того, что передача NULL в качестве соответствующего параметра \u003Cem\u003EZEND_INIT_MODULE_GLOBALS\u003C\u002Fem\u003E функции \u003Cem\u003Einit\u003C\u002Fem\u003E приведёт к ошибке сегментации для платформ без поддержки потоков.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EINI-настройки и глобальные переменные\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nКак вы уже знаете, настройки в файле php.ini, объявляемые с помощью функции \u003Cem\u003EPHP_INI_ENTRY\u003C\u002Fem\u003E считываются как строки и при необходимости конвертируются в другие форматы с помощью функций \u003Cem\u003EINI_INT\u003C\u002Fem\u003E, \u003Cem\u003EINI_FLT\u003C\u002Fem\u003E и \u003Cem\u003EINI_BOOL\u003C\u002Fem\u003E. Однако, некоторые настройки во время выполнения скрипта могут запрашиваться слишком часто, что приведёт к большому количеству ненужных операций чтения из файла. К счастью, существует возможность инструктировать ZE хранить INI-настройки в особенном типе данных и производить приведение типов только при изменении значения настройки. Давайте проверим эту возможность в работе, объявив ещё одну INI-настройку, на этот раз типа boolean, определяющую, должен ли счётчик в настоящий момент уменьшаться или увеличиваться. Начнём с изменения блока \u003Cem\u003EMODULE_GLOBALS\u003C\u002Fem\u003E в файле p\u003Cem\u003Ehp_hello.h\u003C\u002Fem\u003E следующим образом:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EZEND_BEGIN_MODULE_GLOBALS(hello)\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Elong\u003C\u002Ffont\u003E counter;\u003Cbr\u002F\u003E\r\n  zend_bool direction;\u003Cbr\u002F\u003E\r\nZEND_END_MODULE_GLOBALS(hello)\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nСледующим шагом объявите INI-настройку, изменив блок \u003Cem\u003EPHP_INI_BEGIN\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_INI_BEGIN()\u003Cbr\u002F\u003E\r\n  PHP_INI_ENTRY(\u003Cfont color=\"#A31515\"\u003E\"hello.greeting\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E\"Hello World\"\u003C\u002Ffont\u003E, PHP_INI_ALL, NULL)\u003Cbr\u002F\u003E\r\n  STD_PHP_INI_ENTRY(\u003Cfont color=\"#A31515\"\u003E\"hello.direction\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E\"1\"\u003C\u002Ffont\u003E, PHP_INI_ALL, OnUpdateBool, direction, zend_hello_globals, hello_globals)\u003Cbr\u002F\u003E\r\nPHP_INI_END()\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nТеперь инициализируйте настройку в функции \u003Cem\u003Einit_globals\u003C\u002Fem\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E php_hello_init_globals(zend_hello_globals *hello_globals)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  hello_globals-\u003Edirection = 1;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nИ, наконец, используйте значение INI-настройки в функции \u003Cem\u003Ehello_long\u003C\u002Fem\u003E для выбора операции над счётчиком:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EPHP_FUNCTION(hello_long)\u003Cbr\u002F\u003E\r\n{\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (HELLO_G(direction)) {\u003Cbr\u002F\u003E\r\n    HELLO_G(counter)++;\u003Cbr\u002F\u003E\r\n  } \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E {\u003Cbr\u002F\u003E\r\n    HELLO_G(counter)--;\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  RETURN_LONG(HELLO_G(counter));\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nВот и всё! С помощью метода \u003Cem\u003EOnUpdateBool\u003C\u002Fem\u003E (метод является часть ZE), переданного в качестве третьего параметра макроса \u003Cem\u003ESTD_PHP_INI_ENTRY\u003C\u002Fem\u003E, будет производиться автоматическое приведение типа значения настройки, полученного из файла \u003Cem\u003Ephp.ini\u003C\u002Fem\u003E, \u003Cem\u003E.htaccess\u003C\u002Fem\u003E, или с помощью функции \u003Cem\u003Eini_set\u003C\u002Fem\u003E, к соответствующему значению TRUE\u002FFALSE, которое вы можете получить прямо внутри скрипта. Последние три параметра функции \u003Cem\u003ESTD_PHP_INI_ENTRY\u003C\u002Fem\u003E указывают PHP, какую глобальную переменную изменить, как выглядит структура глобальных переменных нашего расширения, и имя контейнера глобальных переменных, в котором они содержаться.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЧто дальше?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nВ этой статье мы разобрали структуру простого PHP расширения, которое экспортирует функции, возвращающие значения, загружает и обрабатывает INI-настройки, сохраняя их на протяжении обработки запроса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1022\"\u003Eследующей статье\u003C\u002Fa\u003E мы рассмотрим внутреннюю структуру переменных PHP, способы их хранения и обработки. Поработаем с функцией \u003Cem\u003Ezend_parse_parameters\u003C\u002Fem\u003E, используемой для получения параметров из программы при вызове функции, и откроем способы возвращения более сложных результатов из функции, таких как массив, объект и ресурс.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EP.S.\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nВ некоторых местах перевод имеет довольно вольный формат, что является следствием трудностей перевода, которые мне не удалось преодолеть в полной мере. Кроме того перевод содержит некоторое количество мелких дополнений, показавшихся мне актуальными.\u003Cbr\u002F\u003E\r\nПроцесс сборки расширения согласно статье проверен на \u003Ca href=\"http:\u002F\u002Fru2.php.net\u002Fget\u002Fphp-5.3.2.tar.bz2\u002Ffrom\u002Fa\u002Fmirror\"\u003Eисходниках PHP 5.3.2\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУ \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fmember\u002F4580-SaraMG\"\u003Eавтора\u003C\u002Fa\u003E есть несколько статей по данной тематике: \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1021\"\u003E1\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1022\"\u003E2.1\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1023\"\u003E2.2\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fdevzone.zend.com\u002Fnode\u002Fview\u002Fid\u002F1024\"\u003E3\u003C\u002Fa\u003E. Четвёртая статья видимо так и не увидит свет ввиду публикации автором книги \u003Ca href=\"http:\u002F\u002Fwww.amazon.com\u002FExtending-Embedding-PHP-Sara-Golemon\u002Fdp\u002F067232704X\"\u003E«Extending and Embedding PHP»\u003C\u002Fa\u003E, посвящённой данной тематике.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак же про Zend Engine можно \u003Ca href=\"http:\u002F\u002Fwww.php.net\u002Fmanual\u002Fen\u002Finternals2.php\"\u003Eпочитать на php.net\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"php"},{"titleHtml":"extension"},{"titleHtml":"zend engine"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F98862\u002F98bb1f56bee87dc00c2a7f305ec49c2f\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F98862\u002F98bb1f56bee87dc00c2a7f305ec49c2f\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F98862\\\u002F\"},\"headline\":\"Создание расширений PHP: Введение в PHP и Zend\",\"datePublished\":\"2010-07-13T07:32:12+04:00\",\"dateModified\":\"2010-07-13T19:34:23+04:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Михаил Крестьянинов\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Перевод статьи Sara Golemon &laquo;Extension Writing Part I: Introduction to PHP and Zend&raquo;.    Введение Если вы читаете данную статью, скорее всего у вас есть некоторы...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F98862\\\u002F#post-content-body\",\"about\":[\"h_php\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F98862\\\u002F98bb1f56bee87dc00c2a7f305ec49c2f\\\u002F\"]}","metaDescription":"Перевод статьи Sara Golemon «Extension Writing Part I: Introduction to PHP and Zend».\r\n\r\n\r\n\r\nВведение\r\nЕсли вы читаете данную статью, скорее всего у вас есть некоторый интерес к созданию расширений...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"575686":{"id":"575686","timePublished":"2021-09-28T08:07:48+00:00","isCorporative":true,"lang":"ru","titleHtml":"Когда сделаете доработку?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1097452","alias":"Turundur","fullname":"Станислав Малышев","avatarUrl":"","speciality":"Разработчик"},"statistics":{"commentsCount":5,"favoritesCount":33,"readingCount":3996,"score":37,"votesCount":39},"hubs":[{"relatedData":null,"id":"22422","alias":"domclick","type":"corporative","title":"Блог компании ДомКлик","titleHtml":"Блог компании ДомКлик","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EДовольно часто я попадаю в ситуацию, когда мне нужно в моменте оценить длительность реализации реализации бизнес-фичи. Обычно это какая-нибудь рядовая встреча, на которой инициатор бизнес-идеи, резво размахивая руками в воздухе, рассказывает о своем предложении. В конце своего выступления, в котором часто много слов (но не цифр) сказано о том, зачем это фича нужна и какой эффект она даст, всегда звучит сакральный вопрос: «Когда сделаете эту великолепную доработку?»\u003C\u002Fp\u003E\u003Cp\u003EЯ хотел бы поделиться с читателем ходом своих рассуждений, которые позволяют мне довольно точно оценивать сроки реализации даже в самых запущенных случаях.\u003C\u002Fp\u003E\u003Cp\u003EРазумеется, я не смогу предусмотреть и учесть все нюансы и специфики, принятые в различных компаниях в процессе разработки и вывода новой функциональности в эксплуатацию. Однако я верю, что описанные ниже практики будут полезны и вы сможете их адаптировать под свою ситуацию.\u003C\u002Fp\u003E\u003Cp\u003EСразу упомяну, что речь идет в первую очередь о продуктовых компаниях, где нет жесткого учета рабочего времени и можно подумать о качестве и поддерживаемости новой функциональности. В случае заказной разработки всё обычно гораздо сложнее и требует более детальной проработки.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка"},{"titleHtml":"оценка"},{"titleHtml":"заказчик"}]},"579590":{"id":"579590","timePublished":"2021-09-27T23:58:49+00:00","isCorporative":true,"lang":"ru","titleHtml":"Seeed XIAO RP2040: микроконтроллер с отличными возможностями за $5","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Les Pounder","originalUrl":"https:\u002F\u002Fwww.tomshardware.com\u002Freviews\u002Fseeed-xiao-rp2040-review-dollar5-brain-food"}}],"author":{"id":"2071241","alias":"Deluar","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1a5\u002F707\u002F699\u002F1a5707699dc1770d6a9cdd5d777d5bb0.jpg","speciality":"Разработчик"},"statistics":{"commentsCount":15,"favoritesCount":24,"readingCount":7617,"score":22,"votesCount":36},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"19737","alias":"controllers","type":"collective","title":"Программирование микроконтроллеров","titleHtml":"Программирование микроконтроллеров","isProfiled":true},{"relatedData":null,"id":"21894","alias":"gadgets","type":"collective","title":"Гаджеты","titleHtml":"Гаджеты","isProfiled":false},{"relatedData":null,"id":"21976","alias":"DIY","type":"collective","title":"DIY или Сделай сам","titleHtml":"DIY или Сделай сам","isProfiled":false},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F53b\u002F390\u002F960\u002F53b39096013cb151e161ebf489fcca96.jpg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНа первый взгляд Seeed XIAO RP2040 не выглядит многообещающим. Но это обманчивое впечатление. Возможностей у него много. Благо, у компании есть опыт разработки подобных систем, ведь это не первый микроконтроллер от Seeed. Более того, ранее компания выпускала устройство на базе Seeeduino XIAO, которое выглядит близнецом XIAO RP2040, да и стоит столько же — $5.40. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо у XIAO RP2040 другой чип — здесь мы имеем дело с RP2040 SoC, так что этот микроконтроллер гораздо более мощный, чем предыдущая система. Причем доплачивать не нужно — стоимость та же. Стоит ли новинка пяти долларов? Забегая наперед, скажу — да, стоит. \u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"микроконтроллеры"},{"titleHtml":"гаджеты"},{"titleHtml":"устройства"},{"titleHtml":"электроника"}]},"579778":{"id":"579778","timePublished":"2021-09-28T08:51:05+00:00","isCorporative":true,"lang":"ru","titleHtml":"YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"91003","alias":"DenKoren","fullname":"Кореневский Денис","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1a3\u002F2cd\u002F706\u002F1a32cd706b2d50526638707e3d3cdacc.png","speciality":"Release Engineer"},"statistics":{"commentsCount":7,"favoritesCount":22,"readingCount":2856,"score":36,"votesCount":36},"hubs":[{"relatedData":null,"id":"4991","alias":"yandex","type":"corporative","title":"Блог компании Яндекс","titleHtml":"Блог компании Яндекс","isProfiled":false},{"relatedData":null,"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true},{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EYandex Rate Limiter (далее просто YARL) — это сервис лимитирования нагрузки для распределённых сервисов. Его особенность в том, что он способен работать с миллионами квот, имея при этом очень низкие накладные расходы на проверку квоты. Если совсем кратко, это система распределённых \u003Ca href=\"https:\u002F\u002Fwww.wikiwand.com\u002Fen\u002FLeaky_bucket\" rel=\"nofollow noopener noreferrer\"\u003ELeaky Bucket'ов\u003C\u002Fa\u003E, с помощью которых можно ограничивать разные величины, связанные со временем: скорость передачи данных по сети, запросы в секунду и т. п.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdg\u002Fte\u002F--\u002Fdgte--d9wm8qyawhplaw4c87mky.jpeg\"\u003E\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EМеня зовут Денис Кореневский, я работаю в службе разработки внутреннего хранилища Яндекса, и сегодня я расскажу, как YARL устроен внутри, почему мы вообще написали своё решение и с какими трудностями нам пришлось столкнуться в процессе создания. Добро пожаловать под кат.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"rate limiter"},{"titleHtml":"балансировка нагрузки"}]},"579814":{"id":"579814","timePublished":"2021-09-28T08:18:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"World of Tanks Blitz — как мы сделали для танков динамическую подвеску","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2793863","alias":"alexbabey","fullname":"Alexander Babey","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffbd\u002Fb5f\u002F74d\u002Ffbdb5f74ddb6dab8c23878b6bdfc06ca.jpg","speciality":"Render Developer"},"statistics":{"commentsCount":7,"favoritesCount":12,"readingCount":2937,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"18218","alias":"wargaming","type":"corporative","title":"Блог компании Wargaming","titleHtml":"Блог компании Wargaming","isProfiled":false},{"relatedData":null,"id":"643","alias":"3d_graphics","type":"collective","title":"Работа с 3D-графикой","titleHtml":"Работа с 3D-графикой","isProfiled":true},{"relatedData":null,"id":"21980","alias":"games","type":"collective","title":"Игры и игровые приставки","titleHtml":"Игры и игровые приставки","isProfiled":false}],"flows":[{"id":"2","alias":"design","title":"Дизайн"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшой World of Tanks продолжает активно развиваться — игра часто получает обновления, включая как что-то, связанное с игровым процессом (новые карты и танки, режимы игры и сезонные события, умения экипажа и полевая модернизация), так и что-то чисто техническое. Например, использование новых графических технологий. Если мы говорим о ПК, то здесь есть множество гибких настроек, чтобы и комфортно поиграть с красивой картинкой, и сам ПК при этом не спалить.\u003C\u002Fp\u003E\u003Cp\u003EВ случае с мобильными устройствами все немного сложнее, и апдейты графики проводятся не так часто.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте рендер-разработчики студии мобильной разработки Wargaming MS-1 Рамиль Кудашев и Александр Бабей расскажут о том, что нового (и красивого) появилось в летнем релизе World of Tanks Blitz.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EОсторожно, внутри тяжелые гифки.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"mobile games"},{"titleHtml":"wot blitz"},{"titleHtml":"render"},{"titleHtml":"suspension"},{"titleHtml":"pbr"}]},"580104":{"id":"580104","timePublished":"2021-09-28T09:41:42+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Рост зарплат в IT это плохо? Вы же шутите, да?»","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2294597","alias":"Svetlana_get-it","fullname":"Светлана Петровичева","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F911\u002Fccf\u002Fb06\u002F911ccfb06379afc9647fcc9d45656e72.jpg","speciality":"HR tech Entrepreneur, основатель сервиса headz.io"},"statistics":{"commentsCount":157,"favoritesCount":36,"readingCount":18834,"score":25,"votesCount":47},"hubs":[{"relatedData":null,"id":"22550","alias":"headzio","type":"corporative","title":"Блог компании Headz.io","titleHtml":"Блог компании Headz.io","isProfiled":false},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"21890","alias":"statistics","type":"collective","title":"Статистика в IT","titleHtml":"Статистика в IT","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНедавно мы выпустили статью «\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fheadzio\u002Fblog\u002F578792\u002F\"\u003E\u003Cu\u003EДефицит в IT: платите больше\u003C\u002Fu\u003E\u003C\u002Fa\u003E» о росте зарплат. Совпадение или нет, но чуть позже вышла \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F578820\u002F\"\u003E\u003Cu\u003Eстатья о минусах большого заработка у российских айтишников\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Автор рассуждал о том, как высокие зарплаты могут навредить IT-отрасли. На первый взгляд аргументы выглядят логично. Но это только на первый взгляд.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"рост зарплат"},{"titleHtml":"карьера программиста"},{"titleHtml":"карьера ит-специалиста"},{"titleHtml":"ответ"},{"titleHtml":"прогнозы"},{"titleHtml":"статистика"}]},"580168":{"id":"580168","timePublished":"2021-09-28T11:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как вообще Интернет приходит в ЦОД","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1919391","alias":"ntsaplin","fullname":"Никита Цаплин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F3a9\u002Fa0c\u002F722\u002F3a9a0c722ab0b73193e60b9f84f9a2c0.png","speciality":"010501.65 Прикладная математика и информатика"},"statistics":{"commentsCount":8,"favoritesCount":30,"readingCount":2926,"score":26,"votesCount":26},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"20","alias":"hosting","type":"collective","title":"Хостинг","titleHtml":"Хостинг","isProfiled":false},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"Пользователь VDS-хостинга задал нам вопрос о том, откуда берётся Интернет. И тут мы поняли, что это тот самый детский вопрос, на который не так-то просто нормально ответить. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДумаю, что 99 % людей ответят: берёт и приходит, а потом задумаются. Это настолько естественно и очевидно, что обычно просто не обсуждается. Ну там, знаете, оптика, она приходит в домик, в домике стоит коробка, а из коробки идёт медь. Вот примерно так оно и работает. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ теории всё так и есть, но на практике это выглядит немного иначе. И есть нюансы. Давайте покажу, откуда к нам приходит Интернет и в чём. А заодно поговорим про то, где фильтруется трафик и как это устроено в хостинге. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДля нас всё начинается вот с этой ракеты в Королёве:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580168\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwl\u002Fkl\u002Fqf\u002Fwlklqfzn9is5zcsqlww90dwdqfc.jpeg\"\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Vostok-2M_(8A292M)_in_Korolyov,_Moscow_Oblast.jpg\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЭто памятник «Восток-2М» (8А292М), стоящий в Королёве примерно на том месте, где вообще был разработан «Восток». Перед ним находится люк, где одна трасса оптики разделяется на три к M9, или \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FMSK-IX\" rel=\"nofollow noopener noreferrer\"\u003EMSK-IX \u003C\u002Fa\u003E— московской международной телефонной станции № 9, где когда-то появился самый крупный узел обмена трафика. Сейчас это главное место, откуда Интернет поставляется в Москву. Из-за некоторых особенностей нашей территории бомбоубежища именно в этом люке под ракетой находится уязвимое место оптики, где все три канала идут вместе, и их легко перерубить экскаватором на протяжении примерно 120 метров. В других местах до и после ракеты такого нет. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСоответственно один луч идёт через наш ЦОД в Ивантеевку, поворачивает в Щёлково и заканчивается на M9-IX. Второй подземный ввод идёт через Ярославское шоссе, третий ввод — дополнительный, он скачет по столбам от коллектора до ЦОДа в одну сторону и до местного провайдера в другую, а провайдер уже врезается в кольцо оптики по городу и тоже попадает в девятку.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"хостинг"},{"titleHtml":"VDS-хостинг"},{"titleHtml":"Интернет"},{"titleHtml":"ЦОД"},{"titleHtml":"ruvds_статьи"}]},"580170":{"id":"580170","timePublished":"2021-09-28T10:36:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Дитя конверсии: обзор ноутбука IBM ThinkPad iSeries 1400","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"154372","alias":"ereinion","fullname":"Виталий Прокофьев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F53d\u002F8ec\u002F1fb\u002F53d8ec1fb1d65d37bb85b94c51b17167.jpg","speciality":"Руководитель отдела услуг администрирования"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":3544,"score":24,"votesCount":24},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"21898","alias":"hardware","type":"collective","title":"Компьютерное железо","titleHtml":"Компьютерное железо","isProfiled":false},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false},{"relatedData":null,"id":"21952","alias":"notebooks","type":"collective","title":"Ноутбуки","titleHtml":"Ноутбуки","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsn\u002Fs4\u002F4f\u002Fsns44fybis21deyqyx_mrkwrkie.png\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nКогда компания пытается войти в новый для себя сегмент рынка, часто получаются очень необычные и забавные девайсы. Яркие примеры — почти электромобиль BMW i3, самолет HondaJet, постсоветские мясорубки и соковыжималки, которые после обработки напильником требовали лицензии на ношение, и ноутбуки IBM ThinkPad iSeries. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЗадуманные как недорогие машины для домашнего применения и крайне малого бизнеса, эти машины стали примером неоднозначных решений и странного дизайна. Но со временем превратились в большую редкость, не сразу понятую и принятую коллекционерами, но теперь — очень желанную.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ноутбук"},{"titleHtml":"лэптоп"},{"titleHtml":"старое железо"},{"titleHtml":"история ИТ"},{"titleHtml":"celeron"},{"titleHtml":"intel"},{"titleHtml":"thinkpad"},{"titleHtml":"ibm"},{"titleHtml":"lenovo"}]},"580214":{"id":"580214","timePublished":"2021-09-28T03:06:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Как выбрать подложку для СВЧ плат?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2759195","alias":"Leka_engineer","fullname":"Олеся","avatarUrl":"","speciality":"инженер-разработчик СВЧ устройств"},"statistics":{"commentsCount":22,"favoritesCount":16,"readingCount":1267,"score":16,"votesCount":22},"hubs":[{"relatedData":null,"id":"19395","alias":"netdev","type":"collective","title":"Разработка систем связи","titleHtml":"Разработка систем связи","isProfiled":true},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭтой статьёй я продолжаю цикл (надеюсь, что получится несколько) статей про особенности проектирования и изготовления СВЧ-плат. Эта  статья очень простая, так что, скорее всего, большинство читателей-СВЧшников не найдёт в ней ничего нового. Однако, я надеюсь, что статья будет полезна начинающим разработчикам.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"свч"},{"titleHtml":"свч-техника"},{"titleHtml":"печатная плата"},{"titleHtml":"производство электроники"},{"titleHtml":"разработка электроники"},{"titleHtml":"приложения для android"}]},"580222":{"id":"580222","timePublished":"2021-09-28T13:07:07+00:00","isCorporative":true,"lang":"ru","titleHtml":"Ортодонтия во взрослом возрасте: зачем вам это надо и что лучше знать до начала лечения","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2793023","alias":"magomedovazuzu","fullname":"Магомедова Зузу","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd25\u002Fd7f\u002Fc69\u002Fd25d7fc697c903cbe6dfdf1423b5b7ba.jpg","speciality":"Врач стоматолог-ортопед"},"statistics":{"commentsCount":5,"favoritesCount":17,"readingCount":2539,"score":15,"votesCount":23},"hubs":[{"relatedData":null,"id":"22616","alias":"belayaraduga","type":"corporative","title":"Блог компании Белая Радуга","titleHtml":"Блог компании Белая Радуга","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fph\u002Fy_\u002Fys\u002Fphy_ysqfi51itdfzul5g9ujtcpe.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Forthodonticassoc.com\u002Fblog\u002Fthe-evolution-of-orthodontic-braces\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПримерно \u003C\u002Fa\u003Eтак в конце XIX века выпрямляли зубы\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ современном мире не принято умирать от кривых зубов. Максимум, что с вами случится, — станет не очень приятно широко открывать рот, вылетит челюстной сустав, вырастут амортизационные издержки на периодонт зубов, да и со стоматологом вы начнёте видеться чаще. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ принципе 99% проблем с расположением зубов сегодня можно исправить без проблем. Для этого есть опоры, создающие давление на зубы и кости, двигающие их. Брекеты несъёмные фиксируются с внешней или внутренней стороны зубов, ими можно решить много проблем, но они требуют постоянного ухода и посещения клиники раз в месяц. Альтернатива — элайнеры, прозрачные капы. Их можно снимать, чистить зубы как обычно и есть всё подряд. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ большинстве случаев ортодонтическое лечение требует от 8 месяцев до 2 лет в зависимости от сложности случая. На масштабные изменения вроде перемещения соседнего седьмого зуба на место отсутствующего шестого может уйти и 3 года. Плюс есть вероятность неуспеха, потому что нужно много считать.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСмоделировать возможную ситуацию можно на основе данных КТ, телерентгенограммы и 3D-моделирования (это после съёмки полости рта сканером). Это более-менее страхует от скрытых кист, сверхкомплектных зубов и прочих радостей, которые могут вылезти в процессе лечения. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИтак, сегодня: \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E Что умеет современная ортодонтия и сколько она стоит.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Как мы корректируем прикус с помощью брекетов и элайнеров. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Зачем используем в дополнение минивинты (импланты) и нёбные расширители.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Когда будет результат. И что мы делаем, чтобы его закрепить. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Что может пойти не так при установке брекетов или элайнеров.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"зуб"},{"titleHtml":"ортодонтия"},{"titleHtml":"лечение"},{"titleHtml":"элайнеры"},{"titleHtml":"брекеты"},{"titleHtml":"стоматология"}]},"580240":{"id":"580240","timePublished":"2021-09-28T11:02:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"SQLite-песочница в браузере","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"5634","alias":"nalgeon","fullname":"Антон Жиянов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F031\u002F537\u002F2ce\u002F0315372ce4ec69d2b80b64771b54b5a2.png","speciality":"Python, SQL и открытые данные"},"statistics":{"commentsCount":1,"favoritesCount":39,"readingCount":1640,"score":23,"votesCount":23},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true},{"relatedData":null,"id":"18554","alias":"sqlite","type":"collective","title":"SQLite","titleHtml":"SQLite","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЧего мне всегда не хватало, так это аналога JSFiddle для SQLite. Онлайн-песочницы, в которой можно быстро проверить SQL-запрос и поделиться с другими.\u003C\u002Fp\u003E\u003Cp\u003EВот чего хотелось:\u003C\u002Fp\u003E\u003Cp\u003E— Возможность загрузить готовую базу, а не писать SQL для создания таблиц.\u003Cbr\u003E— Подключать как локальные базы, так и удаленные (по url).\u003Cbr\u003E— Сохранять базу и запросы в облаке.\u003Cbr\u003E— Бесплатно и без регистрации.\u003Cbr\u003E— Свежайшая версия SQLite.\u003Cbr\u003E— Минимализм.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","buttonTextHtml":"В итоге сделал сам","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"песочница"},{"titleHtml":"gist"},{"titleHtml":"sql.js"},{"titleHtml":"sqlime"}]},"580270":{"id":"580270","timePublished":"2021-09-28T07:08:30+00:00","isCorporative":true,"lang":"ru","titleHtml":"Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2790193","alias":"AlexanderSkorniakov","fullname":"Александр Скорняков","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fcbf\u002F737\u002F072\u002Fcbf737072762c9fe82994575e36e0c25.jpg","speciality":"Руководитель цифровых продуктов"},"statistics":{"commentsCount":23,"favoritesCount":23,"readingCount":4928,"score":65,"votesCount":65},"hubs":[{"relatedData":null,"id":"22816","alias":"nlmk","type":"corporative","title":"Блог компании Блог компании Группа НЛМК","titleHtml":"Блог компании Блог компании Группа НЛМК","isProfiled":false},{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"18816","alias":"industrial_control_system","type":"collective","title":"Промышленное программирование","titleHtml":"Промышленное программирование","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"Привет из конвертерного цеха металлургического комбината! Смотрите, у нас тут есть вот такой суп в ковше, стоящем на сталевозе:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdh\u002F3m\u002Fmn\u002Fdh3mmn_3v_fbdyt4k2hs3fhfnjm.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EТаких ковшей на 320 тонн стали в цехе 40 штук, и они медленно остывают. Этой стали грустно и одиноко, она подмерзает. Через эти ковши проходит 10 миллионов тонн стали в год, это 14% стали России\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНа входе в цех у нас жидкий чугун и металлолом, на выходе надо получить сляб — большой слиток стали. Контур системы диспетчеризации «Гефест» начинается с конвертера, где мы продуваем чугун кислородом, таким образом окисляем и удаляем ненужные нам примеси. После конвертера получается «стальной бульон» для супа, в который уже можно добавлять основные ингредиенты, чтобы получались разные марки стали. За смену мы выплавляем несколько заказов, и каждая сталь требует своего рецепта — это разные добавки, разные техпроцессы, разные температуры и разные последовательности действий. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiv\u002Fmh\u002Fdj\u002Fivmhdjdffezd6k7p1kmw38_akcu.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EНа участке аргонной установки\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nУзким местом, в зависимости от сорта стали, может стать любой технологический узел на пути плавки от конвертера до разливки — агрегаты внепечной обработки, мостовые краны или сталевозы для перемещения ковшей могут оказаться в какой-то конкретный момент перегружены. Раньше графики последовательности действий составлялись в блокноте человеком и были недостаточно оптимизированы. Плюс непредсказуемость: графики с довольно широкими временными границами дают большие потери производительности, а графики с узкими границами — не дают прореагировать на возможную поломку, задержку в процессе или вынужденную остановку. Не знаю, сколько стоит у вас простой прода, но у нас один остывший не к месту ковш запросто может нанести ущерба на несколько миллионов рублей. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ общем, мы написали систему, которая не только оптимизирует загрузку этого участка производства, но и регулярно (во время смены) пересчитывает всю логистику ковшей.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо давайте начну с, собственно, рассказа про то, что же именно оптимизируется в цехе.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"сталь"},{"titleHtml":"производство"},{"titleHtml":"оптимизация"},{"titleHtml":"металл"},{"titleHtml":"металлургия"},{"titleHtml":"диспетчеризация"}]},"580304":{"id":"580304","timePublished":"2021-09-27T18:31:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как сделать 248MP фотографию Солнца","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Simon Tang","originalUrl":"https:\u002F\u002Fpetapixel.com\u002F2021\u002F09\u002F15\u002Fa-closer-look-how-i-created-a-248mp-photo-of-the-sun\u002F"}}],"author":{"id":"2192534","alias":"Itelma","fullname":"T-800","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc3a\u002Fd1e\u002F43d\u002Fc3ad1e43d500046c3228c9494b510912.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":12,"favoritesCount":14,"readingCount":4193,"score":18,"votesCount":18},"hubs":[{"relatedData":null,"id":"22356","alias":"itelma","type":"corporative","title":"Блог компании НПП ИТЭЛМА","titleHtml":"Блог компании НПП ИТЭЛМА","isProfiled":false},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21932","alias":"photo","type":"collective","title":"Фототехника","titleHtml":"Фототехника","isProfiled":false},{"relatedData":null,"id":"22022","alias":"astronomy","type":"collective","title":"Астрономия","titleHtml":"Астрономия","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe02\u002F643\u002Fa55\u002Fe02643a550e20aa10c366e20956e4b40.jpg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ci\u003EЭто изображение диска нашего Солнца создано с помощью большого рефракторного (линзового) телескопа и высокоскоростной монохромной CMOS-камеры.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКаждый день над нашими головами висит большой шар света. Он там всегда, и никто не обращает на него внимания. Разумеется, мы не советуем вам долго смотреть на него и при этом ослепнуть, тем не менее, наука дала нам возможность смотреть прямо на солнце совершенно безопасно.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку техника стала более доступной, обычный человек может заглянуть в многочисленные слои Солнца с помощью специального оборудования, которое может купить в любом хорошем магазине телескопов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ этой статье мы подробно рассмотрим слой, известный как хромосфера: область Солнца, видимая в оранжево-красном спектре. При помощи специального фильтра это устройство блокирует весь нежелательный свет, пропуская при этом определенный диапазон частот, который нас интересует.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"обработка изображений"},{"titleHtml":"фототехника"}]},"580336":{"id":"580336","timePublished":"2021-09-28T05:40:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"DOM, который построил Chrome. Или не построил? Или не Chrome? Или не DOM?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2671923","alias":"Maxim_from_HW","fullname":"Максим","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F33e\u002F1a0\u002F5ba\u002F33e1a05ba0d2d651cc292ce76ad45ee1.png","speciality":"CEO"},"statistics":{"commentsCount":22,"favoritesCount":51,"readingCount":4341,"score":18,"votesCount":22},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"524","alias":"complete_code","type":"collective","title":"Совершенный код","titleHtml":"Совершенный код","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОбычный, теневой, виртуальный, инкрементальный… Как получилось, что простой программный интерфейс доступа к элементам веб-страниц обзавелся таким количеством «родственников»? Чем современные фреймворки не устраивает стандартная объектная модель документа или просто DOM? Что и как на самом деле отрисовывает браузер в процессе рендера веб-страницы?\u003C\u002Fp\u003E\u003Cp\u003EВсем привет, это \u003Ca href=\"https:\u002F\u002Fwww.facebook.com\u002Fmy.kravets\" rel=\"noopener noreferrer nofollow\"\u003EМакс Кравец\u003C\u002Fa\u003E из Holyweb. Помните сцену из Матрицы, в которой один из юных кандидатов в Избранные наставляет Нео: «Не пытайся согнуть ложку. Первое, что ты должен понять — ложки не существует!»? Давайте переформулирую: «Не пытайся изменить DOM...». А вот о том, что прячется под многоточием, мы сегодня и поговорим.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"dom"},{"titleHtml":"google chrome"},{"titleHtml":"javascript"},{"titleHtml":"css"}]},"580348":{"id":"580348","timePublished":"2021-09-28T08:18:27+00:00","isCorporative":true,"lang":"ru","titleHtml":"Самый большой космический телескоп Джеймс Уэбб должен изменить наши представления о космосе","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"64252","alias":"Cloud4Y","fullname":"Cloud4Y","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc2d\u002Fd0d\u002Fc05\u002Fc2dd0dc05834aebeb86bb76e35caeaab.png","speciality":"Корпоративный облачный провайдер"},"statistics":{"commentsCount":27,"favoritesCount":8,"readingCount":3953,"score":27,"votesCount":29},"hubs":[{"relatedData":null,"id":"17352","alias":"cloud4y","type":"corporative","title":"Блог компании Cloud4Y","titleHtml":"Блог компании Cloud4Y","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИзучение новых миров,  понимание происхождения Вселенной, поиск жизни вне Земли. Всё это — задачи космического телескопа \"Джеймс Уэбб\", долгожданного преемника Хаббла.  Телескоп больше и легче Хаббла, зато в 100 раз мощнее,  а приборы — в семь раз чувствительнее. \u003C\u002Fp\u003E\u003Cp\u003EДжеймс Уэбб — это устройство для поиска ответов на неотвеченные вопросы о Вселенной, для изучения того, что до сих пор оставалось неизведанным. Что же такого в этом телескопе?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Телескоп"},{"titleHtml":"уэбб"},{"titleHtml":"космос"},{"titleHtml":"технологии"}]},"580360":{"id":"580360","timePublished":"2021-09-28T07:27:40+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вы используете больше Open Source-софта, чем думаете","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Klint Finley","originalUrl":"https:\u002F\u002Fgithub.com\u002Freadme\u002Ffeatured\u002Funseen-oss"}}],"author":{"id":"16172","alias":"shurup","fullname":"Дмитрий Шурупов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F062\u002Fc85\u002F607\u002F062c85607fbe4aaa29e1ad2076cd13a0.jpg","speciality":"Open Source geek"},"statistics":{"commentsCount":1,"favoritesCount":6,"readingCount":3385,"score":26,"votesCount":30},"hubs":[{"relatedData":null,"id":"20940","alias":"flant","type":"corporative","title":"Блог компании Флант","titleHtml":"Блог компании Флант","isProfiled":false},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EПрим. перев.\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003Cem\u003E: оригинал этой статьи был опубликован минувшим летом в рамках проекта ReadME. Он создан в GitHub с целью стать своеобразной трибуной для многочисленных Open Source-разработчиков, предоставив им возможность поделиться с широким сообществом актуальными для них проблемами. Данный материал несет в себе призыв «перестать воспринимать Open Source как должное» и раскрывает те сложности, с которыми сталкиваются многие авторы свободного ПО, применяемого буквально повсеместно.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EТобиас Копперс (Tobias Koppers) не работает в Instagram. И никогда не работал. Но с 2014 года он отвечает за поддержку важного компонента веб-версии Instagram. Копперс является создателем webpack — Open Source-инструмента для сборки (или «бандлинга») кода JavaScript.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"open source"}]},"580374":{"id":"580374","timePublished":"2021-09-28T08:46:26+00:00","isCorporative":true,"lang":"ru","titleHtml":"Делаем базу знаний для .NET разработчиков","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1181772","alias":"nevoroman","fullname":"Роман Неволин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F21d\u002F1d5\u002F7d9\u002F21d1d57d92a296101a1da62761632a78.jpg","speciality":"DevRel"},"statistics":{"commentsCount":5,"favoritesCount":23,"readingCount":2201,"score":12,"votesCount":14},"hubs":[{"relatedData":null,"id":"15878","alias":"skbkontur","type":"corporative","title":"Блог компании Контур","titleHtml":"Блог компании Контур","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМы вместе с DotNetRu решили сделать базу знаний для .NET разработчиков. Собрать доступные в открытом доступе материалы по .NET и выбрать из них лучшие. Разбить все это по категориям и сложности, выстроить порядок изучения. А еще пригласить известных экспертов в каждой из тем, чтобы они помогли выбрать материалы и рассказали, что и почему вам будет полезно изучить.\u003C\u002Fp\u003E\u003Cp\u003EИ теперь мы по этому поводу будем проводить по два митапу раз в две недели — начиная уже с этой пятницы. Под катом будут детали, имена, даты и всякие пояснения, что и почему мы хотим сделать.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5dd\u002F71e\u002Fcc9\u002F5dd71ecc908ff997a1f46f440a9daaad.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5dd\u002F71e\u002Fcc9\u002F5dd71ecc908ff997a1f46f440a9daaad.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"образование"},{"titleHtml":"dotnetru"},{"titleHtml":"opensource"},{"titleHtml":"обучение разработчика"}]},"580382":{"id":"580382","timePublished":"2021-09-28T10:30:17+00:00","isCorporative":true,"lang":"ru","titleHtml":"Советский «Мерседес» или как в Минске строили спортпрототип","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2776555","alias":"turbovagon","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":2,"favoritesCount":5,"readingCount":1845,"score":18,"votesCount":20},"hubs":[{"relatedData":null,"id":"17357","alias":"timeweb","type":"corporative","title":"Блог компании Timeweb","titleHtml":"Блог компании Timeweb","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Во второй половине 50-х годов в Советском Союзе начал набирать популярность автоспорт. Появляются всё новые соревнования, усложняется их регламент, растут требования и к гонщикам, и к машинам. На старт шоссейно-кольцевых начали выходить уже не слегка «обработанные напильником» серийные легковушки, а вполне гоночные штучные поделки, напоминающие современные спортпрототипы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz7\u002Fgs\u002Fzg\u002Fz7gszgbo8pc-ogtvjgvjd6vpaga.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EВот, например, некоторые участники заезда 1956 года. Штучное поделие МАЗа с двигателем «Москвич-402» в первом ряду. Дальше будет лучше.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nОдним из них стал МАЗ-1500, детище, как нетрудно догадаться, специалистов Минского автозавода. Да, профильным направлением предприятия были грузовики. Однако от кульманов конструкторов до воплощения в металле доходила и разного рода автоэкзотика. Посему, когда в Минавтопроме БССР возникла идея создать команду для участия в чемпионате Советского Союза по шоссейно-кольцевым гонкам, работу по новому проекту возглавил руководитель Конструкторского отдела МАЗа, автогонщик Владимир Майборода.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ссср"},{"titleHtml":"спорткар"},{"titleHtml":"автогонки"},{"titleHtml":"гараж"},{"titleHtml":"МАЗ"},{"titleHtml":"автомобили"}]},"580428":{"id":"580428","timePublished":"2021-09-28T10:57:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Понаехавший» в Чехию: как купить квартиру в столице и стать «своим» с акцентом","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2581359","alias":"annesina","fullname":"Анна Есина","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5d1\u002Fc94\u002F326\u002F5d1c943260bd153cf9263a6b59e7be21.png","speciality":"Пользователь"},"statistics":{"commentsCount":3,"favoritesCount":23,"readingCount":3461,"score":15,"votesCount":19},"hubs":[{"relatedData":null,"id":"22506","alias":"gms","type":"corporative","title":"Блог компании gms & g-mate","titleHtml":"Блог компании gms & g-mate","isProfiled":false},{"relatedData":null,"id":"20734","alias":"it_immigration","type":"collective","title":"IT-эмиграция","titleHtml":"IT-эмиграция","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшое количество компаний и стартапов приглашают в Чехию IT-специалистов из стран СНГ. Почему они приезжают сюда? Разработчик из Омска ответил на популярные вопросы о переезде программиста в Прагу: какие нужны документы, как проходит адаптация, нужен ли диплом и как приобрести свое жилье. Передаем ему слово.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"g-mate"},{"titleHtml":"прага"},{"titleHtml":"чехия"},{"titleHtml":"переезд"},{"titleHtml":"IT-эмиграция"},{"titleHtml":"релокейт"},{"titleHtml":"релокация"}]},"580468":{"id":"580468","timePublished":"2021-09-28T12:04:47+00:00","isCorporative":true,"lang":"ru","titleHtml":"Проект «Горирожа»: про двойной подбородок","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1588913","alias":"elena_pastukhova","fullname":"Елена Пастухова","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1dc\u002F879\u002Fc33\u002F1dc879c33e39127162333771dba2137a.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":17,"favoritesCount":14,"readingCount":3045,"score":16,"votesCount":40},"hubs":[{"relatedData":null,"id":"21848","alias":"geltek","type":"corporative","title":"Блог компании Гельтек-Медика","titleHtml":"Блог компании Гельтек-Медика","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Борода у мужчин — это самый действенный способ скрыть жир. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЕсть люди, которым повезло с квадратной челюстью: тогда всё прямо натянуто, и когда у обычного человека уже был бы тройной подбородок, у них — только двойной. Но если у вас славянский тип лица, то это не про вас. У нас прекрасный профиль, но в профиль будет видно даже минимальное количество жира. У азиатского типа — высокие скулы, которые тянут жир в другую сторону, а у нас нет никаких подобных генетических конструкций, поэтому при деформационном типе старения всё это ползёт вниз. Формируется либо второй подбородок, либо жировой компартмент располагается на щеках, и появляются так называемые «бульдожьи щёки». \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку жир там точно такой же, как на пузе и боках у мальчиков и на попе у девочек, то бороться с ним можно дефицитом калорий и физической нагрузкой. Ещё можно уменьшить склонность к отёчности и поднять тонус кожи через увлажнение. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСюрпризом стало то, что испытуемые из тестовой группы проекта Thermo Intensive (более известного вам как «\u003Ca href=\"https:\u002F\u002Fgeltek-medica.ru\u002Fcatalog\u002Fkosmetika\u002Fseriya-body-care\u002Fanticellyulitnyj-gel-thermo-intensive\u002F\u002F\" rel=\"nofollow noopener noreferrer\"\u003EГорижопа\u003C\u002Fa\u003E» ) начали мазать средство не в целевую область, а ещё и на лицо, рассчитывая, что жир там будет убираться так же быстро. Мы сразу запретили им это делать (потому что щитовидка рядом, а мажут они широко) и сразу задумались про новое средство. \u003Cbr\u003E\r\n \u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fbk\u002Fsd\u002Ffy\u002Fbksdfyfl8jwg3mvvmrjs4xzibz4.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EПервая стадия, когда борода ещё не особо нужна. \u003Ca href=\"https:\u002F\u002Fmelmagazine.com\u002Fwp-content\u002Fuploads\u002F2018\u002F08\u002F1SmLNcqJD9Ao7TSeV1MwobA.png\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПотому что бета-тестеры обозначили нам рыночную нишу. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСобственно, вы его тогда спрашивали и в комментариях, сразу раскусив, как можно неправильно использовать состав. И вот теперь у меня есть что показать.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"горирожа"},{"titleHtml":"второй подбородок"},{"titleHtml":"жир"},{"titleHtml":"артикулярная гимнастика"},{"titleHtml":"средство"},{"titleHtml":"гель"}]},"580516":{"id":"580516","timePublished":"2021-09-28T14:25:12+00:00","isCorporative":false,"lang":"ru","titleHtml":"Лучший язык программирования","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"8114","alias":"markshevchenko","fullname":"Марк Шевченко","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb16\u002F6c1\u002Fc82\u002Fb166c1c82387bf9406fcd39f40dc264e.jpg","speciality":"программист"},"statistics":{"commentsCount":17,"favoritesCount":47,"readingCount":5867,"score":24,"votesCount":30},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВопрос, который часто задают начинающие программисты&nbsp;— какой язык программирования изучать? Вопрос звучит разумно. Хочется выбрать самый лучший, чтобы потом не пришлось переучиваться.\u003C\u002Fp\u003E\u003Cp\u003EМожно ли на него ответить?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"образование"},{"titleHtml":"языки программирования"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580270","575686","579778","580348","580168","580360","580104","580516","580170","580240","579590","580382","580336","580304","580468","580214","580222","580428","579814","580374"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":4},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["540402","426809","303678"],"similarListRefs":{"303678":{"id":"303678","timePublished":"2016-06-20T12:09:34+00:00","isCorporative":false,"lang":"ru","titleHtml":"Макросы Zend обхода циклов (HashTable Iteration)","editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"144380","alias":"bizzonaru","fullname":"Евгений","avatarUrl":null,"speciality":"Пользователь"},"statistics":{"commentsCount":10,"favoritesCount":22,"readingCount":4544,"score":10,"votesCount":14},"hubs":[{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Продолжая своё поверхностное изучение исходников PHP (7.0.7) и \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F303572\u002F\"\u003Eнаписания простейшего расширения\u003C\u002Fa\u003E к нему, хотел бы в этот раз немного углубится и описать приемы обхода массива через принятый аргумент функции, с которыми я познакомился при реализации простой PHP функции median(). Задача этой функции проста — вернуть средне-арифметическое значение. Возможна данная публикация будет полезной другим разработчикам PHP, таким же как и я, которые решили в свободное время немного изучить архитектуру любимого языка, на котором зарабатывают деньги. В предыдущей публикации я на “скорую руку” описал прием быстрого создания расширения в PHP с реализаций функции расчета факториала. Она проста в той степени, что принимает простой параметр целого типа и затем рекурсивно вызывается. Реализация функции median() усложнена тем, что принимаемый параметр — массив, по нему нужно пройтись, для суммирования общего значения, а также просчитать общее число элементов в массиве. \u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"426809":{"id":"426809","timePublished":"2018-10-17T22:44:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Зеев Сураски: Будущее Zend Engine и Zend Framework","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Zeev Suraski","originalUrl":"http:\u002F\u002Fzsuraski.blogspot.com\u002F2018\u002F10\u002Fthe-future-of-zend-engine-and-zend.html"}}],"author":{"id":"100489","alias":"pronskiy","fullname":"Роман Пронский","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F27f\u002Fb99\u002Feb3\u002F27fb99eb3e30e3221c5839e88be02395.jpg","speciality":"PHP"},"statistics":{"commentsCount":28,"favoritesCount":22,"readingCount":13978,"score":36,"votesCount":38},"hubs":[{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"id":"603","alias":"zend_framework","type":"collective","title":"Zend Framework","titleHtml":"Zend Framework","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fpost\u002F426809\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftl\u002F1n\u002Fvj\u002Ftl1nvjfi3zob8khasud-jpyzjge.png\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ci\u003EВ июне 2015 года было \u003Ca href=\"http:\u002F\u002Fwww.zend.com\u002Fen\u002Fresources\u002Fnews-and-events\u002Fnewsroom\u002Fpress\u002F3683_rogue-wave-software-acquires-enterprise-php-leader-zend-acquisition-broadens-enterprise-strength-across-top-five-development-languages\"\u003Eанонсировано\u003C\u002Fa\u003E поглощение Zend, компании-разработчика ядра языка PHP, американской компанией Rogue Wave Software. В феврале 2016 года об уходе из Zend \u003Ca href=\"https:\u002F\u002Fandigutmans.com\u002F2016\u002F02\u002F24\u002Fstarting-a-new-journey\u002F\"\u003Eзаявил\u003C\u002Fa\u003E ее сооснователь и до 2015 исполнительный директор \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%93%D1%83%D1%82%D0%BC%D0%B0%D0%BD%D1%81,_%D0%AD%D0%BD%D0%B4%D0%B8\"\u003EЭнди Гутманс\u003C\u002Fa\u003E.\u003Cbr\u003E\r\nНа этот раз второй из основателей Zend Technologies \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%A1%D1%83%D1%80%D0%B0%D1%81%D0%BA%D0%B8,_%D0%97%D0%B5%D0%B5%D0%B2\"\u003EЗеев Сураски\u003C\u002Fa\u003E в своем блоге поделился планами.\u003C\u002Fi\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null},"540402":{"id":"540402","timePublished":"2021-02-01T16:31:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Microsoft открыла исходный код Extensible Storage Engine","editorVersion":"1.0","postType":"news","postLabels":[],"author":{"id":"780987","alias":"denis-19","fullname":"Денис","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F6a0\u002Ff31\u002F235\u002F6a0f31235bb26134f3c7a741c03e4efb.jpg","speciality":"Инженер, редакция Хабра"},"statistics":{"commentsCount":8,"favoritesCount":7,"readingCount":5440,"score":10,"votesCount":12},"hubs":[{"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"id":"18790","alias":"github","type":"collective","title":"GitHub","titleHtml":"GitHub","isProfiled":false},{"id":"22026","alias":"itcompanies","type":"collective","title":"IT-компании","titleHtml":"IT-компании","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент","titleHtml":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F71\u002Foh\u002Few\u002F71ohewmydek12za8hhhnlgftuni.png\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ конце января 2021 года Microsoft \u003Ca href=\"https:\u002F\u002Fmspoweruser.com\u002Fmicrosoft-open-sources-storage-engine-windows\u002F\" rel=\"nofollow noopener noreferrer\"\u003Eоткрыла\u003C\u002Fa\u003E исходный код Extensible Storage Engine. Проект \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fmicrosoft\u002FExtensible-Storage-Engine\" rel=\"nofollow noopener noreferrer\"\u003Eдоступен\u003C\u002Fa\u003E на GitHub под лицензией MIT. \u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"krestjaninoff":{"scoreStats":{"score":128.2,"votesCount":171},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"52623","alias":"krestjaninoff","fullname":"Михаил Крестьянинов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F095\u002Fb2b\u002F002\u002F095b2b00299151b9fb579590f965f463.jpg","speciality":"Пользователь"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
