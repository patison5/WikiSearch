<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/70167\/"},"headline":"Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое","datePublished":"2009-09-20T17:47:53+04:00","dateModified":"2009-09-26T10:46:53+04:00","author":{"@type":"Person","name":"Алексей"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Введение С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обс...","url":"https:\/\/habr.com\/ru\/post\/70167\/#post-content-body","about":["h_server_side_optimization","f_admin"],"image":["http:\/\/img84.imageshack.us\/img84\/9446\/btdmd8.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Введение
С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Введение
С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Введение
С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Введение
С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Введение
С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="70167" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2009-09-20T13:47:53.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/70167/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/70167/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/70167/e600762bbe3938ac8fa43603df354129/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/SaveTheRbtz/" title="SaveTheRbtz" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/b37/3dd/c4b/b373ddc4b2783a8cbe583cd7eeece149.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/SaveTheRbtz/" class="tm-user-info__username">
      SaveTheRbtz
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2009-09-20T13:47:53.000Z" title="2009-09-20, 17:47">20  сентября  2009 в 17:47</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/server_side_optimization/" class="tm-article-snippet__hubs-item-link"><span>Серверная оптимизация</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="/img/image-loader.svg" alt="Нравится мне эта картинка, у меня, вот никогда такие красивые графики в какти не получались =(" height="306" data-src="http://img84.imageshack.us/img84/9446/btdmd8.png" data-width="500"/><br/>
<h2><strong>Введение</strong></h2><br/>
С момента написания мной <a href="http://habrahabr.ru/blogs/server_side_optimization/52475/">предыдущей статьи</a> по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи человек на форуме и до 150,000 пиров на трекере уже давно покоится на какой-нить немецкой, свалке, а клуб сменил уже не один сервер. Всё сказанное в ней всё ещё остаётся актуальным, однако есть вещи которые стоит добавить. <br/>
Статья большая, так что будет поделена на логические блоки:<br/>
<br/>
<pre>0. Зачем вообще что-то оптимизировать?
  
1. Оптимизация ОС (FreeBSD)
  1.1 Переход на 7.х 
  1.2 Переход на 7.2
  1.3 Переход на amd64
  1.4 Разгрузка сетевой подсистемы
  1.5 FreeBSD и большое кол-во файлов
  1.6 Softupdates, gjournal и mount options
  
2. Оптимизация фронтенда (nginx)
  2.1 Accept Filters
  2.2 Кеширование
  2.3 AIO
  
3. Оптимизация бэкенда
  3.1 APC
  3.1.1 APC locking
  3.1.2 APC hints
  3.1.3 APC fragmentation
  3.2 PHP 5.3
  
4. Оптимизация базы данных
  4.1 MySQL 
  4.1.1 Переход на 5.1
  4.1.2 Переход на InnoDB
  4.1.3 Встроеный кеш MySQL - Query Cache
  4.1.4 Индексы
  
4.2 PostgreSQL
  4.2.1 Индексы
  4.2.2 pgBouncer и другие.
  4.2.3 pgFouine
  
4.3 Разгрузка базы данных
  4.3.1 SphinxQL
  4.3.2 Не-RDBMS хранилище
  4.4 Кодировки
  4.5 Асинхронность
  
Приложение. Мелочи.
  1. SSHGuard или альтернатива.
  2. xtrabackup
  3. Перенос почты на другой хост
  4. Интеграция со сторонним ПО
  5. Мониторинг
  
 6. Минусы оптимизации</pre><br/>
<a name="habracut"></a><br/>
<h2><strong>0. Зачем вообще что-то оптимизировать?</strong></h2><br/>
Вообще расти можно:<br/>
<ul>
<li>Scale up (Наращивать железо)</li>
<li>Scale out (Увеличивать количество фронтендов/машин в middle tier)</li>
<li>Оптимизируя</li>
</ul><br/>
Первый вариант лучше использовать когда у вас много денег, второй, когда хорошая архитектура. Ну а третий, который буду описывать я, используют когда нет ни первого, ни второго, а хочется выжать максимум из имеющегося железа.<br/>
 <br/>
<h2><strong>1. Оптимизация ОС (FreeBSD)</strong></h2><br/>
<h3><strong>1.1 Переход на 7.х </strong></h3><br/>
<a href="http://ivoras.sharanet.org/freebsd/freebsd7.html">Что же мы получим</a> при переходе на новую версию FreeBSD? <br/>
По мне самое главное это:<br/>
<a href="http://people.freebsd.org/~kris/scaling/mysql.html">Новый ULE 3.0 Scheduler</a> и <a href="http://www.freebsd.org/releases/7.0R/relnotes.html#USERLAND">jemalloc</a> весьма полезны на многоядерных (>=4) системах.<br/>
<a href="http://www.freebsd.org/releases/7.0R/relnotes.html#KERNEL">MSI (Message Signaled Interrupts)</a> — они же часто упоминаются в драйверах как Fast Interupts.<br/>
<br/>
Так что если у вас есть legacy 6.x система, которая начинает прогибаться под нагрузкой, возможно стоит перевести её на 7.х.<br/>
 <br/>
<br/>
<h3><strong>1.2 Переход на 7.2</strong></h3><br/>
<a href="http://en.wikipedia.org/wiki/Page_%28computing%29#Huge_pages">Superpages</a>, увеличенный KVA, оптимизированные по-дефолту sysctl'и. Всё это вы получите абсолютно бесплатно просто перейдя на последний релиз ОС.<br/>
<br/>
<a href="http://ivoras.sharanet.org/freebsd/freebsd8.html">Прогресс тоже не стоит на месте</a> и вот уже FreeBSD 8.0 готовится к выходу, там нам обещают дальнейшее увеличение производительности. В качестве подтверждения стабильности <a href="http://www.FreeBSD.org">www.FreeBSD.org</a> был переведён на FreeBSD-CURRENT ещё во времена первых beta-версий. Так что на staging машинах можно её уже начинать гонять.<br/>
 <br/>
<br/>
<h3><strong>1.3 Переход на amd64</strong></h3><br/>
Переходя на amd64 вы дополнительно получите <a href="http://svn.freebsd.org/viewvc/base?view=revision&amp;revision=192469">гиганские размеры KVA</a> и <a href="http://www.freebsd.org/releases/7.2R/relnotes-detailed.html#KERNEL">Shared Mem >2Gb</a>. Однако это далеко не самое главное...<br/>
<br/>
Заметьте, что 4 Gb памяти в 2009 году уже во всю ставят на ноутбуки, и ставить столько на сервер с БД довольно смешно. Конечно, для маленькой БД это нормально, но что делать когда она разрастётся и перестанет влезать в память? C i386 ОС доставить ещё памяти будет проблематично, ибо PAE это отдельный глюк. Да и INT64 уже давно много где используется и даёт прирост производительности таким приложениям как, например, базы данных и OpenSSL. (Если у кого есть линки на <em>адекватные</em> бенчмарки "***SQL i686 vs amd64" — кидайте в комменты).<br/>
<br/>
<br/>
<h3><strong>1.4 Разгрузка сетевой подсистемы</strong></h3><br/>
Тут во FreeBSD не то что поле, а целый полигон для испытаний.<br/>
Всю оптимизацию можно разделить на 2 части: Тюнинг параметров <code>ifconfig</code> и настроек <code>sysctl.conf/loader.conf</code>, давайте в таком порядке и пойдём.<br/>
Для начала нужно посмотреть на что наши сетевухи вообще способны, для этого можно воспользоваться такой командой:<br/>
<pre># ifconfig -m
capabilities=399b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_UCAST,WOL_MCAST,WOL_MAGIC></pre><br/>
В случае если у вас хорошая сетевуха класса em (Intel Gigabit) / bge (Broadcom Gigabit) можно попробовать опции ifconfig:<br/>
<ul>
<li> <code>tso</code> (<code>tso4</code>, <code>tso6</code>) — TCP Segent Offloading</li>
<li> <code>lro</code> — Large Recive Offload</li>
<li> <code>txcsum</code>, <code>rxcsum</code> — RX / TX Checksum Offload</li>
<li> <code>link0</code>, <code>link1</code>, <code>link2</code> — зависят от драйвера, надо смотреть его код. Иногда включают некоторые оптимизации, иногда просто переключает сетевуху в MASTER на Gigabit линках.</li>
</ul><br/>
Также, на <code>em</code> сетевухах и многоядерных процах можно попробовать <a href="http://people.yandex-team.ru/~wawa/">драйверы от Яндекса</a>, которые осуществляют обработку пакетов в несколько потоков. Так же очень много всего про тюнинг сетевой подсистемы можно прочитать на <a href="http://forum.nag.ru/forum/index.php?showforum=4">nag.ru</a><br/>
<br/>
Если же у вас третьесортная сетевуха (<code>re/rl/sk/nfe</code>...), то вышеописанные опции могут работать неправильно и приводить к зависанию сервера, так что лучше остановиться на <a href="http://www.cyberciti.biz/faq/freebsd-device-polling-network-polling-tutorial/">polling</a>'e.<br/>
<br/>
Ну и напоследок рекомендую всем посмотреть обновлённую версию <a href="http://www.rootconf.ru/papers2009/12568.html">тюнинга FreeBSD 7 «по Сысоеву»</a> и <a href="http://serverfault.com/questions/64356/freebsd-configuration-sysctl-tuning">мой лист sysctl'ей</a> с комментариями.<br/>
<br/>
<br/>
<h3><strong>1.5 FreeBSD и большое кол-во файлов</strong></h3><br/>
Во FreeBSD есть прекрасная технология кеширования имён файлов в директориии. Так, если у вас в одной директории находится множество файлов, то намного лучше использовать поиск по хеш таблице, нежели постоянно пробегать по всему дереву вширь/вглубь в поисках нужного файла. Однако, макс. кол-во памяти выделенное под <a href="http://en.wikipedia.org/wiki/Dirhash">dirhash</a> (так называется эта технология) ограничена <code>vfs.ufs.dirhash_maxmem</code> и по-умолчанию составляет, вроде, 2Мб, что весьма мало. Рекомендуется увеличивать память до тех пор пока <code>vfs.ufs.dirhash_mem</code> не перестанет упираться в «потолок».<br/>
 <br/>
<br/>
<h3><strong>1.6 Softupdates, gjournal и mount options</strong></h3><br/>
Новые терабайтные винты просто шикарны — стоят дешево, да и производительность у них просто касс. Однако, есть один нюанс: когда в датацентре отрубят электричество, то fsck таких терабайтников может занять не один час. Решить эту проблему можно используя <a href="http://www.maths.tcd.ie/~dwmalone/p/bsdcon01.pdf">softupdates</a> или же прикрутить к системе журналирование через gjournal. Что именно, <a href="http://www.google.ru/search?hl=ru&amp;amp;client=firefox&amp;amp;rls=org.mozilla%3Aru%3Aofficial&amp;amp;hs=YwF&amp;amp;newwindow=1&amp;amp;q=softupdates+vs+gjournal&amp;amp;btnG=%D0%9F%D0%BE%D0%B8%D1%81%D0%BA&amp;amp;lr=&amp;amp;aq=0&amp;amp;oq=">решать вам</a>. <br/>
Пара советов по журналированию: чтобы не потерять производительность, лучше журнальный раздел оправить на отдельный диск, а чтобы не ловить паники из-за его переполнения, лучше сделать раздел журнала побольше (например, RAM+swap). <br/>
<s>Если же у вас есть raid с BPU,</s> или вам просто нечего терять, то можно в <code>/etc/fstab</code> добавлять опцию <code>async</code>. А такую опцию как <code>noatime</code> можно <i>практически </i>без опаски порекомендовать всем. (читать комментарий пользователя <a href="https://habrahabr.ru/users/giner/" class="user_link">giner</a> вот <a href="http://habrahabr.ru/blogs/server_side_optimization/70167/#comment_2002224">тут</a>)<br/>
<br/>
<br/>
<h2><strong>2. Оптимизация фронтенда (nginx)</strong></h2><br/>
На самом деле, я крайне против чрезмерной и/или преждевременной оптимизации, к коим относится оптимизация фронтенда. Обычно на веб проектах, где nginx занимается не только статикой, он потребляет 1%-5% CPU в зависимости от характера его использования, остальное же кушает php. <br/>
Однако, оптимизация конфига nginx может повлиять на общий response time сайта, так что есть моменты о которых стоит поговорить.<br/>
Из стандартных оптимизаций могу порекомендовать <br/>
<pre>
 reset_timedout_connection  on;
 sendfile                   on;
 tcp_nopush                 on;
 tcp_nodelay                on;</pre><br/>
Ну и поиграться с количеством воркеров, а не просто ставить их по кол-ву CPU/Винтов. Также рекомендую всем ознакомится с <a href="https://calomel.org/nginx.html">этим документом</a> и темой <a href="http://serverfault.com/questions/18994/nginx-best-practices">Nginx best-practices</a> на Serverfault, очень вероятно, что вы узнаете что-то новое.<br/>
 <br/>
<br/>
<br/>
<h3><strong>2.1 Accept Filters</strong></h3><br/>
Во FreeBSD имеется технология, позволяющая передавать пакет от ядра к процессу только в случае прихода 1) каких либо данных 2) валидного http запроса. Технология эта называется <a href="http://sysoev.ru/freebsd/accept-filters.html">accept filters</a>. Такие фильтры помогут как разгрузить сервер в случае большого кол-ва соединений, так и немного защитить от DDoS'a (Хотя со вторым лучше справляется <a href="http://sysoev.ru/nginx/docs/http/ngx_http_limit_req_module.html">ngx_http_limit_req_module</a>, о котором уже не раз писалось на <a href="http://habrahabr.ru/search/?q=limit_req_zone">хабре</a>)<br/>
Чтобы включить обработку соединений с использованием фильтров, нужно для начала загрузить модуль ядра:<br/>
<pre>#ls /boot/kernel/|grep acc
   accf_data.ko
   accf_http.ko
#kldload accf_http</pre><br/>
Далее в конфиге <code>nginx.conf</code> включить фильтр <code>httpready</code>:<br/>
<pre>listen 80 default accept_filter=httpready;</pre><br/>
<br/>
<h3><strong>2.2 Кеширование</strong></h3><br/>
В nginx имеется очень гибкая система кеширования ответов, как от <a href="http://sysoev.ru/nginx/docs/http/ngx_http_fastcgi_module.html#fastcgi_cache">fastcgi</a>, так и от <a href="http://sysoev.ru/nginx/docs/http/ngx_http_proxy_module.html#proxy_cache">proxy</a> backend'ов. Я думаю у каждого прочитавшего документацию в голове сразу возникло несколько сценариев применения кеширования в своём проекте. Я могу дать только общие советы: <br/>
Не дай Бог у вас rss отдаётся через php скрипт. Если так, то спокойно можно кешировать ответ на 3-5 минут.<br/>
Думаю почти всю версию сайта для гостей можно запихнуть в кеш тоже минут на 5 (ну если конечно у вас не новостной сайт)<br/>
<br/>
Кроме серверного кеша существует ещё и кеш клиентский. Я бы рекомендовал на всю статику повесить expire в месяц:<br/>
<pre>    
        location ~* \.(jpg|jpeg|gif|png)$ {
    	   root   /var/nnm-club;
    	   expires      30d;
        }</pre><br/>
<h3><strong>2.3 AIO</strong></h3><br/>
Про введение <a href="http://sysoev.ru/nginx/docs/http/ngx_http_core_module.html#aio">AIO в nginx</a> уже <a href="http://habrahabr.ru/blogs/nginx/68480/">писали на хабре</a>, там же имеются довольно интересные обсуждения в комментах. Вкратце, AIO полезен на весьма специфичных нагрузках, а так же помогает сохранить response time при уменьшении количества воркеров.<br/>
Для использования aio нужно подгрузить модуь ядра aio.ko:<br/>
<code>#<strong>kldload aio</strong></code><br/>
а затем включить aio и sendfile в <code>nginx.conf</code><br/>
<pre> 
 sendfile        on;
 aio             sendfile;</pre><br/>
Новые версии nginx позволяют использовать aio вместе с sendfile. По поводу такой конфигурации в документации сказано:<br/>
<blockquote> В такой конфигурации используется флаг SF_NODISKIO и sendfile() не блокируется на диске, а сообщает об отсутствии данных в памяти, после чего nginx инициирует асинхронную подгрузку данных, читая только один байт. При этом ядро FreeBSD подгружает в память первые 128K файла, однако при последующих чтениях файл подгружается частями только по 16K. Поэтому этот режим лучше применять для раздачи небольших, до 128K, файлов. <br/>
</blockquote><br/>
Патч для FreeBSD, для решения этой проблемы <a href="http://comments.gmane.org/gmane.comp.web.nginx.russian/27401">тут</a>, возможно со временем он войдёт в -CURRENT и будет портирован в 8.0 и 7.х<br/>
 <br/>
<br/>
<h2><strong>3. Оптимизация бэкенда</strong></h2><br/>
Тут особо много мне расскажешь, у java, например, есть волшебные строки из серии "-Xms768m -Xmx1280m -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+UseCompressedOops -Djava.net.preferIPv4Stack=true -XX:+DoEscapeAnalysis", которые способен понять только наш java-программер, а у PHP 50% оптимизации деает <a href="http://en.wikipedia.org/wiki/List_of_PHP_accelerators">кеширование opcode</a>, остальной прирост наблюдается от кеширования ответов от БД. Так что эта часть топика будет весьма скупой.<br/>
<h3><strong>3.1 APC</strong></h3><br/>
Про оптимизацию APC рассказывали разработчики <a href="http://www.scribd.com/doc/88689/ApcFacebook">Facebook</a>. Очень рекомендую почитать, если будет время.<br/>
<br/>
<h4> 3.1.1 APC locking</h4><br/>
Старый File Locking, это именно тот «тормоз», из-за которого вместо APC начинают использовать eAccelerator. Так, что дефолтный locking часто <a href="http://c7y.phparch.com/c/entry/1/art,apc_facebook">рекомендуют менять</a> на spinlock или pthread mutex. Насколько я помню, pthread mutex стал дефолтным начиная с 3.0.16, так что, если у вас есть сервера со старым APC рекомендую его обновить.<br/>
<br/>
<h4>3.1.2 APC hints</h4><br/>
Если у вас много .php файлов или вы много кешируете в APC user cache, то весьма вероятно вам придётся поднимать значения <br/>
 <code>apc.num_files_hint</code> и <code>apc.user_entries_hint</code> соответственно в <code>php.ini</code>. Эти значения отвечают за размеры hash таблиц APC (на самом деле они ещё удваиваются перед применением), а мы знаем что хеш таблицы работают весьма плохо при <a href="http://en.wikipedia.org/wiki/Hash_table#Load_factor">load factor</a> >= 0.75<br/>
 <br/>
<br/>
<h4>3.1.3 APC fragmentation</h4><br/>
Фрагментация в APC — это такая штука, из-за которой этот самый кеш хочется взять, скомкать и выкинуть в окно. APC не являтеся заменой нормальному key-value по причине его неспособности удалять автоматом записи по TTL или <a href="http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used">LRU</a>. То есть, нету никакого GC и записи попавшие в кеш от туда могут уйти только в двух случаях: <br/>
<ul>
<li>Когда к ним обратились после истечения их ttl</li>
<li>Вся память кончилась и APC прибег к экстренной мере — сброс всего кеша целиком.</li>
</ul><br/>
Суммируя, можно сказать: Высокая фрагментация является признаком того, что вы используете APC не по назначению.<br/>
Тут нужно добавить заметку, судя по комментам <a href="http://pecl.php.net/bugs/bug.php?id=13146">тут</a>, в 3.1.х очень многое поправили в плане аллокации памяти, однако судя по <a href="http://pecl.php.net/bugs/bug.php?id=16843">этому</a>, 3.1.х работает не у всех.<br/>
<br/>
<br/>
<br/>
<h3><strong>3.2 PHP 5.3</strong></h3><br/>
Тут всё кажется простым — <a href="http://www.google.ru/search?hl=en&amp;client=firefox&amp;rls=org.mozilla%3Aru%3Aofficial&amp;hs=wCe&amp;newwindow=1&amp;q=PHP+5.3+performance&amp;btnG=%D0%9F%D0%BE%D0%B8%D1%81%D0%BA&amp;lr=&amp;aq=f&amp;oq=">обновляем PHP, получаем прирост производительности</a>. Однако, посмотрев на список <a href="http://us.php.net/manual/en/migration53.deprecated.php">deprecated</a> функций в 5.3 можно ужаснутся, благо они пока ещё работают.<br/>
Несмотря на всю простоту, думаю, переход от 5.2 до 5.3 будет ойойой каким долгим, особенно в продакшне.<br/>
 <br/>
<br/>
<h2><strong>4. Оптимизация базы данных</strong></h2><br/>
На самом деле лучшими оптимизациями БД у нас в клубе признаны:<br/>
<ul>
<li>Не использование RDBMS вообще (sphinxsearch)</li>
<li>Не использование базы (кеширование)</li>
<li>Batch запросы (where in (...), batch insert/update)</li>
<li>Ассинхронная работа с БД (memcacheQ, apacheMQ, AQMP, crontab)</li>
</ul><br/>
Однако, большая часть вышеописанных средств требуют довольно серьёзного переписывания приложения.<br/>
 <br/>
 <br/>
<h3><strong>4.1 MySQL </strong></h3><br/>
Мануалов в инете по оптимизации MySQL довольно много, есть <a href="http://www.mysqlperformanceblog.com/2007/11/01/innodb-performance-optimization-basics/">грамотные</a>, есть не очень. В любом случае, за время жизни любого веб-проекта его база успеет упереться и в память, и в диск, и может даже в процессор, так что простыми howto не обойтись, придётся <a href="http://www.percona.tv/">смотреть</a> конференции, учится пользоваться профайлерами(oprofile, <a href="http://www.mysqlperformanceblog.com/2009/09/14/systemtap-dtrace-for-linux/">systemtap</a>, dtrace) и использовать большое кол-во <a href="http://www.mysqlperformanceblog.com/tools/">дополнительного ПО</a>. Иными словами, не только понимать, что такое индексы, сортировки и группировки, но так же понимать как MySQL их использует внутри, знать что такое <a href="http://forge.mysql.com/wiki/Top10SQLPerformanceTips">EXPLAIN, Query cache, преимущества и недостатки различных storage engine'ов</a>, в общем, быть 100% DBA для своего проекта.<br/>
Далее я опишу способы которые помогут с минимальными изменениями кода (а то и вовсе без них), оптимизировать MySQL.<br/>
Как я уже говорил в предыдущей части, 50% тюнинга MySQL можно провести в полуавтоматическом режиме всего двумя утилитами: <br/>
<ul>
<li><a href="http://www.day32.com/MySQL/">tuningprimer</a></li>
<li><a href="http://blog.mysqltuner.com/">mysqltuner</a></li>
<li><a href="http://hackmysql.com/mysqlsla">mysqlsla</a></li>
</ul><br/>
<h4>4.1.1 Переход на 5.1</h4><br/>
Переход на 5.1 приносит <a href="http://dev.mysql.com/doc/refman/5.1/en/mysql-nutshell.html">множество бонусов</a>, мне конкретно были интересны:<br/>
<ul>
<li>Оптимизация оптимизатора (особенно GROUP BY)</li>
<li>InnoDB plugin</li>
<li>Partitioning </li>
<li>Row based replication</li>
</ul><br/>
Всё это может прибавить производительности, так что на 5.1 перелезать стоит. По поводу шума вокруг того что 5.1 не стабильна, то всё это уже не актуально, да и изначально было слишком раздуто (если у кого есть какие противопоказания или bad expirience перехода на 5.1 — прошу в комменты).<br/>
Самые экстрималы, конечно, уже давно тестируют <a href="http://dev.mysql.com/doc/refman/5.4/en/mysql-nutshell.html">5.4</a>, там говорят производительность очень хорошо подняли (не без помощи патчей от Гугла и Percona, я думаю). Но до продакшна 5.4 ещё далеко.<br/>
 <br/>
<br/>
<h4>4.1.2 Переход на InnoDB</h4><br/>
Вот скажите, если у вас используется MyISAM, то <a href="http://www.mysqlperformanceblog.com/2009/01/12/should-you-move-from-myisam-to-innodb/">почему</a> именно он? Я вообще не понимаю как может продакшн сервер жить на MyISAM (хотя, говорят такие существуют), где нет транзакций (если сервер упадёт во время большого UPDATE, то половина данных будет изменена, а половина нет), есть TABLE LOCK (во время записи в таблицу она блокируется на чтение и vice vresa), а REPAIR после пропадания электричества в датацентре может занимать десятки часов. Единственное, что спасает MyISAM — это наличие Fulltext Index, но даже он вряд ли может конкурировать по качеству и скорости со sphinxsearch.<br/>
<br/>
<br/>
Да, у InnoDB есть свои недостатки (deadlock'и, бОльшие по размеру индексы, отсутствие FTS), но бонусов, имхо, в разы больше: Во-первых, InnoDB полностью <a href="http://ru.wikipedia.org/wiki/ACID">ACID-совместим</a>, а значит любая операция, даже такая как дамп базы данных, может быть произведена в одну транзакцию (опция <code>mysqldump --single-transaction</code>), а во-вторых, он имеет row-level locking (против TABLE LOCK у myisam), это означает, что данные могут одновременно и читаться <b>и писаться</b> в несколько потоков не блокируя друг друга.<br/>
Опять же, люди совсем озабоченные производительностью сердца своего стартапа могут использовать <a href="http://www.percona.com/docs/wiki/percona-xtradb:start">XtraDB</a>, говорят оно сильно помогает на I/O-bound workload'ах.<br/>
 <br/>
<br/>
<h4>4.1.3 Встроеный кеш MySQL — Query Cache</h4><br/>
Query Cache — это одна из самых «недопонимаемых» частей MySQL. Многие его ставят в 512Mb и думают, что «щас всё залетает», многие его отключают вообще потому, что «всёравно не работает». Попытаюсь пролить свет на значение этого параметра. Начну с того, что больше, в данном случае, не лучше, так что задирать его не стоит. Далее, надо уточнить, что Query Cache — это полностью не распараллеленная подсистема, так что на кол-ве процессоров >=8 её лучше отключать, ибо будет только тормозить. Ну и последнее, но не самое бесполезное — суть Query Cache в том, что его содержимое, относящееся к какой либо таблице, <strong>полностью сбрасывается при <em>любом</em> изменении этой самой таблицы</strong>. Тоесть, фактически, Query Cache даёт прирост производительности только на <em>грамотно</em> нормализованных таблицах.<br/>
Подробнее о QC можно прочитать <a href="http://www.realcoding.net/articles/mysql-query-cache.html">тут</a>.<br/>
 <br/>
<br/>
<h4>4.1.4 Индексы</h4><br/>
Как отсутствие индекса вредно для SELECT'a, так и лишние индексы вредны для INSERT/UPDATE. Часто бывает так, что старый, когда-то сделанный индекс, может жить в базе не один год, занимая драгоценную память и замедляя изменения данных. Тут приходит на помощь простенький SQL <a href="http://pastebin.com/f6b1c381c">запрос</a>. Полезно? Множество подобных tips'ов можно найти <a href="http://forge.mysql.com/tools/search.php?sortby=rating&amp;sortorder=desc">тут</a>.<br/>
 <br/>
<br/>
<br/>
<h3><strong>4.2 PostgreSQL</strong></h3><br/>
Для меня Postgres остаётся довольно странной системой: с одной стороны это база Enterprise класса и на нём бегает Skype, с другой настройки по умолчанию такие, что он может запустится даже на моём мобильнике. В общем надо тюнить, а тюнить тут можно практически всё. Из возможных почти 200 параметров, за тюнинг отвечают <a href="http://www.pgcon.org/2008/schedule/attachments/45_guc_tutorial.pdf">основные 45</a> =)<br/>
Кстати, что ещё поразило, так это то, что при закомменчивании строки в конфиге, PostgreSQL не сбрасывает её на «дефолт», а использует ту, что «запомнил»… Показалось?<br/>
По тюнингу Postgres в инете много всего (часть мануалов устарела, так что обращайте внимание на дату публикации и ключевое слово vacuum_mem, которое заменено на maintenance_mem в новых версиях). Есть что-то типа FAQ: <a href="http://postgresmen.ru/articles/view/38">вскользь о главном</a>, есть очень <a href="http://momjian.us/main/presentations.html">глубокомысленные трактаты</a> для продвинутых администраторов БД… Я расскажу лишь основы которые помогут проекту продержаться на ногах, пока админ с програмером ищут квалифицированного DBA.<br/>
 <br/>
<br/>
<h4>4.2.1 Индексы</h4><br/>
Тут у некоторых может возникнуть справедливый вопрос: почему, мол, у MySQL индексы были на последнем месте, а у PosgreSQL на первом? Всё просто, ибо возможности его в этом плане <a href="http://www.postgresql.org/docs/8.4/interactive/indexes.html">намного выше</a>, чем у MySQL. B-tree, hash, GiST, GIN, а также multicolumn, partial и indexes on expressions: во всём этом должен разбираться человек который программирует под PostgerSQL. И не просто знать, что такие существуют, а понимать, в каких случаях нужно использовать одни типы индексов, а в каких другие.<br/>
Полезные для мониторинга SQL-запросы (в том числе и статистику по индексам) можно найти <a href="http://wiki.postgresqlrussia.org/index.php/%D0%9F%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%B4%D0%BB%D1%8F_PostgreSQL_DBA">тут</a>.<br/>
 <br/>
<br/>
<h4>4.2.2 pgBouncer и другие.</h4><br/>
<a href="https://developer.skype.com/SkypeGarage/DbProjects/PgBouncer">pgBouncer</a> (или его альтернатива) — первое, что должно быть установлено на сервере с базой данных. Я уже насмотрелся на cacti-графики показывающие <em>десятикратное</em> падение нагрузки от простой установки менеджера соединений. Если пулер соединений у вас не установлен, то на каждое соединение с базой у вас запускается отдельный процесс, далее этот процесс отъедает, как минимум, <code>work_mem оперативки</code> и начинает бороться за CPU и жесткий диск с себе подобными выполняя SQL запрос. Всё бы хорошо, но вот когда количество таких процессов зашкаливает за 200-500 серверу, даже очень мощному, становится туго. Очень туго. pgBouncer нас от этого спасает.<br/>
Также список полезных или даже незаменимых приложений для работы с PostgreSQL можно найти на сайте <a href="http://wiki.postgresqlrussia.org/index.php/%D0%9F%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B-%D1%81%D0%BF%D1%83%D1%82%D0%BD%D0%B8%D0%BA%D0%B8_PostgreSQL">postgresqlrussia.org</a>.<br/>
 <br/>
<br/>
<h4>4.2.3 pgFouine</h4><br/>
<a href="http://pgfouine.projects.postgresql.org/">pgFouine</a> как раз одна из таких незаменимых программ. Это очень продвинутый аналог mysqlsla на php. В комплекте с <a href="https://area51.myyearbook.com/trac.cgi/wiki/Playr">Playr</a> (реплэйер продакшн логов) она позволяет проводить оптимизацию запросов на staging серверах в практически «боевых» условиях.<br/>
 <br/>
<br/>
<h3><strong>4.3 Разгрузка базы данных</strong></h3><br/>
Как я уже говорил, лучший способ оптимизировать работу БД и увеличить её производительность — это обращаться к ней как можно реже.<br/>
 <br/>
<br/>
<h4>4.3.1 SphinxQL</h4><br/>
В <a href="http://habrahabr.ru/blogs/server_side_optimization/52475/">прошлой статье</a> я говорил, про то что мы ввели поиск на основе sphinxsearch. Но не все смогут перерыть тысячи строк кода, чтобы начать использовать SphinxAPI, а потом потратить ещё 1-2 итерации на тестирование и отлов багов. Проблема решилась очень элегантно: SphinxSearch научился притворяться MySQL сервером, то есть для того чтобы начать его использовать необходимо лишь создать <code>sphinx.conf</code>, создать записи для indexer'a в cron'e и переключить поиск на другую «как бы mysql» базу. Есть вероятность, что дальнейшей правки кода не понадобиться.<br/>
Что вы получаете при переходе на сфинкс? Кроме улучшений скорости и <em>качества</em> поиска, вы сможете избавиться от MyISAM и его FTS, ну и, что очень интересно, так это <em>придумать новые применения вашему поиску</em>, мы вот, объединили поиск с RSS, что оказалось весьма удобным.<br/>
А вот и пара примеров, в которых можно выиграть от наличия sphinxsearch (придумано почти с ходу, так что сильно не бейте):<br/>
<br/>
<blockquote> <strong>Пример 1</strong>: Я давно жду Starcraft 2, я всегда могу добавить в Google Reader RSS вида: rss.php?q=«starcraft 2» и увидеть все сообщения в которых его обсуждают. Так же, я, как участник форума, хочу видеть все посты где упоминается мой ник. Это тоже не проблема, надо всего лишь подправить урл.<br/>
</blockquote><br/>
<blockquote> <strong>Пример 1.5</strong>: Пользователь зашёл на сайт увидел строку поиска, ввёл запрос, нечего не нашлось, но появилась ссылка «Подписаться на этот поиск», со ссылкой на RSS для этого запроса. Так просто пользователь от вас не уйдёт =))<br/>
</blockquote><br/>
<blockquote> <strong>Пример 2</strong>: Я хочу найти фильм 21, или, не дай Бог, фильм 9 — MySQL не самоубийца, он такой запрос просто откинет, посетовав на то, что <code>ft_min_word_len</code> больше, чем длинна запроса. Сфинкс практически мгновенно вернёт результат в виде «Двадцать Одно / 21», а во втором случае даже даст выбор между «Район №9 / District 9» и «Девять / 9».<br/>
 <br/>
</blockquote> <br/>
 <br/>
<h4>4.3.2 Не-RDBMS хранилище</h4><br/>
Существует очень много мест в проекте, где можно не использовать реляционную базу данных. Достаточно простого key-value хранилища. Благо таких <a href="http://www.metabrew.com/article/anti-rdbms-a-list-of-distributed-key-value-stores/">сейчас хватает</a>. <br/>
Также есть весьма интересные проекты как, например, <a href="http://hadoop.apache.org/hive/">Hive</a> (Data Warehouse с SQL-подобным QL и бекендом в виде Hadoop). В общем с хранилищем данных, можно ой как поэкспериментировать, не одним Oracle'ом (MySQL'ем, PostgreSQL'ем, FoxPro, нужное подчеркнуть) живы.<br/>
Также key-value БД из-за своей скорости используются для кешиорвание выборок из реляционных баз. По поводу самого кеширования: после пролистывания презентации, просмотра видео и прочтения полного текста доклада <a href="http://www.smira.ru/2008/10/08/highload-plus-plus-2008/">из блога Андрея Смирнова</a>, мне практически нечего добавить. Лишь пара советов:<br/>
Если у вас действительно большой проект на PHP, то не забываете про возможность opcode cache хранить custom данные. В нём можно хранить самые часто используемые глобальные переменные: во-первых их не много и они маленькие, так что памяти кушать они будут совсем чуть-чуть, во-вторых скорость выборки будет выше, чем из memcached находящегося на соседней машине. Ну и самое интересное: в больших проектах бывали случаи когда блок глобальных переменных записывали на какую-то одну машину из memcached-фермы, так как эти переменные юзают все бэкенды, то трафик на эту машину возрастал до неприличных размеров и машинка начинала очень сильно тормозить, а вместе с ней и все бэкенды. Выходом из такой ситуации являлось бы либо хранение глобальных переменных в opcode cacher'e типа APC/eAccelerator, либо клонирование переменных на все сервера из memcached-фермы и внесение исключений в алгоритм consistency hashing'а.<br/>
 <br/>
<br/>
<br/>
<h3><strong>4.4 Кодировки</strong></h3><br/>
Небольшая заметка по поводу кодировок: <br/>
UTF-8 хорош всем кроме одного — русский текст в нём занмает ровно в два раза больше места, так что иногда есть над чем задумываться перед тем как его использовать, если у вас целиком одноязычный контингент.<br/>
<br/>
<br/>
<h3><strong>4.5 Асинхронность</strong></h3><br/>
На самом деле, далеко не всегда требуется синхронная обработка данных, довольно часто её можно заменить асинхронной. <br/>
Асинхронная обработка помогает 1) Улучшить время реакции сайта/приложения 2) Уменьшить нагрузку на сервер.<br/>
Если с первым всё понятно, то второе является следствием того, что batch запросы выполняются быстрее одиночных.<br/>
Асинхронность можно организовать по разному. В крупных проектах для этого используют очереди сообщений (<a href="http://activemq.apache.org/">ApacheMQ</a>, <a href="http://www.rabbitmq.com/">RabbitMQ</a>, <a href="http://www.zeromq.org/">ZeroMQ</a>. Про AQMP уже несколько раз писалось на <a href="http://habrahabr.ru/blogs/webdev/62502/">хабре</a>), в мелких можно обойтись и cron'ом.<br/>
 <br/>
<br/>
<h2><strong>Приложение. Мелочи.</strong></h2><br/>
<h3><strong>1. SSHGuard</strong> или альтернатива.</h3><br/>
Кроме того, что это стандартная практика ставить анти-брутфорс для ssh, так это ещё и дополнительно помогает защитить сервер от резких всплесков Load Avarenge когда на него нападают совсем офигевшие боты и начинают брутфорсить пары логин-пасс десятками тысяч.<br/>
 <br/>
<br/>
<h3><strong>2. xtrabackup</strong></h3><br/>
LVM снапшоты — <a href="http://www.mysqlperformanceblog.com/2009/02/05/disaster-lvm-performance-in-snapshot-mode/">это тормоз</a>. mysqldump — лочит таблицы и делает текстовые бэкапы, которые могут восстанавливаться неделями. <em>Очень хорошим</em> инструментом для бэкапа MySQL является <a href="https://launchpad.net/percona-xtrabackup">xtrabackup</a> от Percona. Сильно расписывать его не буду, ибо русская часть инета о нём наслышана. Вкратце, xtrabackup это инструмент, позволяющий проводить не блокирующий бинарный бэкап InnoDB/XtraDB таблиц и имеющий <a href="http://www.percona.com/docs/wiki/percona-xtrabackup:xtrabackup_manual">кучу настроек</a>. Почему очень хороший, а не отличный? Поскольку самым лучшим инструментом, на мой взгляд, являются клоны в ZFS. Делаются мгновенно, а восстановление базы с них это просто изменение пути к файлам в конфиге мускула, да и при неудачном востановлении можно откатится обратно. Также с клонов можно <a href="http://wiki.opennet.ru/%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2_%D0%B2_ZFS:_%D0%9E%D1%82%D0%BA%D0%B0%D1%82_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B">восстанавливать систему целиком</a>, например в случае неудачного апгрейда ядра. <br/>
А вообще, вроде, в 5.4 нам обещают встроеный online backup<br/>
 <br/>
<br/>
<h3><strong>3. Перенос почты на другой хост</strong></h3><br/>
Данная оптимизация кажется минорной, однако при большом кол-ве спама льющегося на сервер помогает сильно уменьшить трафик и спасти множество IOPs.<br/>
 <br/>
<br/>
<h3><strong>4. Интеграция со сторонним ПО</strong></h3><br/>
Как-то на хабре проскакивала статья про online игры, мол, для всего нужно использовать наиболее подходящие средства (кто-нибудь помнит как она называлась?). Так, например, для того, чтобы дать возможность пользователям обмениваться почтовыми сообщениями с вложениями, не нужно начинать писать PHP скрипт с бэкендами в виде БД/ФС, можно использовать для этого, то что в реальной жизни применяется для обмена текстовыми сообщениями — связку smtp/imap и написать к ним простенький адаптер. По аналогии, чат для пользователей можно организовать на основе jabber сервера с javascript клиентом, который вообще не будет грузить сервер. Нужно отмечать объекты на на карте? Тут легче лёгкого написать <a href="http://ru.wikipedia.org/wiki/%D0%9C%D1%8D%D1%88%D0%B0%D0%BF_%28%D0%B2%D0%B5%D0%B1%29">mashup</a> с использованием Yandex/Google карт. Что интересно, так такие системы, написанные на основе адаптера к готовым продуктам зачастую очень хорошо масштабируются, по крайней мере, <em>на порядки лучше</em>, чем решения на PHP и MySQL.<br/>
 <br/>
<br/>
<h3><strong>5. Мониторинг</strong></h3><br/>
Нечего оптимизировать, если не знаешь текущего состояния. Метрики производительности, задержек, свободных ресурсов, всё это должно мониториться, логироваться и, желательно, рисоваться на графиках. Благо инструментов хватает: <a href="http://nagios.org/">Nagios</a>, <a href="http://ru.wikipedia.org/wiki/Zabbix">Zabbix</a>, <a href="http://habrahabr.ru/blogs/sysadm/66602/">Cacti</a>, <a href="http://habrahabr.ru/blogs/linux/30494/">Munin</a>....<br/>
 <br/>
 Берите любой, ставьте на сервак(и) и наблюдайте за влиянием оптимизаций на нагрузку сервера. Также мониторинг поможет предвидеть появление проблем с производительностью.<br/>
 <br/>
<br/>
<h2><strong>6. Минусы оптимизации</strong></h2><br/>
Bleeding-edge он, ведь, не случайно так назван. Во время переезда клуба на новый сервер мы это почувствовали на своей шкуре, умудрившись найти баги практически во всём (<a href="http://pecl.php.net/bugs/bug.php?id=16833">APC1</a>, <a href="http://pecl.php.net/bugs/bug.php?id=16814">APC2</a>, <a href="http://bugs.mysql.com/bug.php?id=46622">MySQL</a>, <a href="http://www.lexa.ru/nginx-ru/msg27256.html">nginx</a>, <a href="https://sourceforge.net/projects/xbtt/forums/forum/328824/topic/3395068">xbtt</a>), благо OpenSource, что-то простое можно самим починить.<br/>
 <br/>
<br/>
<h2><strong>Вместо послесловия</strong></h2><br/>
Ну вот, вроде, и всё. Почти неделю печатал… Что осилил, то осилил, за кадром оставил ZFS, распределённые ФС, репликацию и шардинг, ибо это темы для отдельных постов. С грамматикой и пунктуацией у меня всё очень плохо, хоть я конечно и проверил всё несколько раз в ворде и <a href="http://quittance.ru/tautology.php">тавтологии</a>, так что если что найдёте — пишите в <a href="http://savetherbtz.habrahabr.ru/">личку</a>, поправлю.<br/>
 <br/>
Критика в адрес статьи приветствуется, ибо если нашли косяк в посте, то, скорее всего, нашли косяк в одном из моих проектов.</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BFreeBSD%5D" class="tm-article-body__tags-item-link">FreeBSD</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bnginx%5D" class="tm-article-body__tags-item-link">nginx</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BMySQL%5D" class="tm-article-body__tags-item-link">MySQL</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BPostgreSQL%5D" class="tm-article-body__tags-item-link">PostgreSQL</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BPHP%5D" class="tm-article-body__tags-item-link">PHP</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%5D" class="tm-article-body__tags-item-link">оптимизация</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/server_side_optimization/" class="tm-article-body__tags-item-link">
                  Серверная оптимизация
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 375: ↑368 и ↓7</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 375: ↑368 и ↓7" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+361</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    1333
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/70167/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      105
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/SaveTheRbtz/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/b37/3dd/c4b/b373ddc4b2783a8cbe583cd7eeece149.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 638 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    452.1
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0.1</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Алексей</span> <a href="/ru/users/SaveTheRbtz/" class="tm-user-card__nickname">
          @SaveTheRbtz
        </a> <!----></div> <p class="tm-user-card__short-info">SRE</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/70167/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 105 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2019-10-08T12:01:02.000Z" title="2019-10-08, 15:01">8  октября  2019 в 15:01</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/badoo/blog/469615/" class="tm-article-title__link"><span>Время высокой точности: как работать с долями секунды в MySQL и PHP</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 60: ↑59 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 60: ↑59 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+58</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">11K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    87
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/badoo/blog/469615/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      24
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2019-01-14T18:31:30.000Z" title="2019-01-14, 21:31">14  января  2019 в 21:31</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/431818/" class="tm-article-title__link"><span>Сравниваем PHP FPM, PHP PPM, Nginx Unit, React PHP и RoadRunner</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 72: ↑67 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 72: ↑67 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+62</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">39K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    170
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/431818/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      46
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2018-03-02T14:50:07.000Z" title="2018-03-02, 17:50">2  марта  2018 в 17:50</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/350338/" class="tm-article-title__link"><span>Настройка связки proftpd + {mysql/postgresql} с хранением паролей в md5+salt</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 15: ↑12 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 15: ↑12 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+9</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    51
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/350338/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      24
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T09:00:04.000Z" title="2021-09-27, 12:00">вчера в 12:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580060/" class="tm-article-title__link"><span>Арракис, который мы заслужили</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 141: ↑136 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 141: ↑136 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+131</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">20K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    37
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580060/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      107
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T13:03:14.000Z" title="2021-09-27, 16:03">вчера в 16:03</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580124/" class="tm-article-title__link"><span>Электролюминесцентные индикаторы из прошлого</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 68: ↑68 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 68: ↑68 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+68</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    37
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580124/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      11
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T16:41:21.000Z" title="2021-09-27, 19:41">вчера в 19:41</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/lamptest/blog/580228/" class="tm-article-title__link"><span>Идеальная светодиодная лампа за 21 рубль</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 66: ↑64 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 66: ↑64 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+62</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">7.8K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    33
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/lamptest/blog/580228/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      24
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T21:49:14.000Z" title="2021-09-27, 00:49">вчера в 00:49</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580092/" class="tm-article-title__link"><span>30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 48: ↑48 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 48: ↑48 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+48</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">19K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    59
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580092/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      93
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T12:53:02.000Z" title="2021-09-27, 15:53">вчера в 15:53</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580210/" class="tm-article-title__link"><span>PHP Дайджест № 212 (13 – 27 сентября 2021)</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 37: ↑37 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 37: ↑37 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+37</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    10
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580210/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      1
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="70167" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/70167/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/70167/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"70167":{"id":"70167","timePublished":"2009-09-20T13:47:53+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое","leadData":{"textHtml":"\u003Cimg src=\"http:\u002F\u002Fimg84.imageshack.us\u002Fimg84\u002F9446\u002Fbtdmd8.png\" alt=\"Нравится мне эта картинка, у меня, вот никогда такие красивые графики в какти не получались =(\" width=\"500\" height=\"306\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003EВведение\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nС момента написания мной \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fserver_side_optimization\u002F52475\u002F\"\u003Eпредыдущей статьи\u003C\u002Fa\u003E по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи человек на форуме и до 150,000 пиров на трекере уже давно покоится на какой-нить немецкой, свалке, а клуб сменил уже не один сервер. Всё сказанное в ней всё ещё остаётся актуальным, однако есть вещи которые стоит добавить. \u003Cbr\u002F\u003E\r\nСтатья большая, так что будет поделена на логические блоки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E0. Зачем вообще что-то оптимизировать?\n  \n1. Оптимизация ОС (FreeBSD)\n  1.1 Переход на 7.х \n  1.2 Переход на 7.2\n  1.3 Переход на amd64\n  1.4 Разгрузка сетевой подсистемы\n  1.5 FreeBSD и большое кол-во файлов\n  1.6 Softupdates, gjournal и mount options\n  \n2. Оптимизация фронтенда (nginx)\n  2.1 Accept Filters\n  2.2 Кеширование\n  2.3 AIO\n  \n3. Оптимизация бэкенда\n  3.1 APC\n  3.1.1 APC locking\n  3.1.2 APC hints\n  3.1.3 APC fragmentation\n  3.2 PHP 5.3\n  \n4. Оптимизация базы данных\n  4.1 MySQL \n  4.1.1 Переход на 5.1\n  4.1.2 Переход на InnoDB\n  4.1.3 Встроеный кеш MySQL - Query Cache\n  4.1.4 Индексы\n  \n4.2 PostgreSQL\n  4.2.1 Индексы\n  4.2.2 pgBouncer и другие.\n  4.2.3 pgFouine\n  \n4.3 Разгрузка базы данных\n  4.3.1 SphinxQL\n  4.3.2 Не-RDBMS хранилище\n  4.4 Кодировки\n  4.5 Асинхронность\n  \nПриложение. Мелочи.\n  1. SSHGuard или альтернатива.\n  2. xtrabackup\n  3. Перенос почты на другой хост\n  4. Интеграция со сторонним ПО\n  5. Мониторинг\n  \n 6. Минусы оптимизации\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Кому  что-нибудь из этого списка интересно, жмём сюда...","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":452.1,"votesCount":638},"rating":0.1,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"38942","alias":"SaveTheRbtz","fullname":"Алексей","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb37\u002F3dd\u002Fc4b\u002Fb373ddc4b2783a8cbe583cd7eeece149.jpg","speciality":"SRE"},"statistics":{"commentsCount":105,"favoritesCount":1333,"readingCount":37697,"score":361,"votesCount":375},"hubs":[{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"Нравится мне эта картинка, у меня, вот никогда такие красивые графики в какти не получались =(\" height=\"306\" data-src=\"http:\u002F\u002Fimg84.imageshack.us\u002Fimg84\u002F9446\u002Fbtdmd8.png\" data-width=\"500\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003EВведение\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nС момента написания мной \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fserver_side_optimization\u002F52475\u002F\"\u003Eпредыдущей статьи\u003C\u002Fa\u003E по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи человек на форуме и до 150,000 пиров на трекере уже давно покоится на какой-нить немецкой, свалке, а клуб сменил уже не один сервер. Всё сказанное в ней всё ещё остаётся актуальным, однако есть вещи которые стоит добавить. \u003Cbr\u002F\u003E\r\nСтатья большая, так что будет поделена на логические блоки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E0. Зачем вообще что-то оптимизировать?\n  \n1. Оптимизация ОС (FreeBSD)\n  1.1 Переход на 7.х \n  1.2 Переход на 7.2\n  1.3 Переход на amd64\n  1.4 Разгрузка сетевой подсистемы\n  1.5 FreeBSD и большое кол-во файлов\n  1.6 Softupdates, gjournal и mount options\n  \n2. Оптимизация фронтенда (nginx)\n  2.1 Accept Filters\n  2.2 Кеширование\n  2.3 AIO\n  \n3. Оптимизация бэкенда\n  3.1 APC\n  3.1.1 APC locking\n  3.1.2 APC hints\n  3.1.3 APC fragmentation\n  3.2 PHP 5.3\n  \n4. Оптимизация базы данных\n  4.1 MySQL \n  4.1.1 Переход на 5.1\n  4.1.2 Переход на InnoDB\n  4.1.3 Встроеный кеш MySQL - Query Cache\n  4.1.4 Индексы\n  \n4.2 PostgreSQL\n  4.2.1 Индексы\n  4.2.2 pgBouncer и другие.\n  4.2.3 pgFouine\n  \n4.3 Разгрузка базы данных\n  4.3.1 SphinxQL\n  4.3.2 Не-RDBMS хранилище\n  4.4 Кодировки\n  4.5 Асинхронность\n  \nПриложение. Мелочи.\n  1. SSHGuard или альтернатива.\n  2. xtrabackup\n  3. Перенос почты на другой хост\n  4. Интеграция со сторонним ПО\n  5. Мониторинг\n  \n 6. Минусы оптимизации\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E0. Зачем вообще что-то оптимизировать?\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВообще расти можно:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EScale up (Наращивать железо)\u003C\u002Fli\u003E\r\n\u003Cli\u003EScale out (Увеличивать количество фронтендов\u002Fмашин в middle tier)\u003C\u002Fli\u003E\r\n\u003Cli\u003EОптимизируя\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nПервый вариант лучше использовать когда у вас много денег, второй, когда хорошая архитектура. Ну а третий, который буду описывать я, используют когда нет ни первого, ни второго, а хочется выжать максимум из имеющегося железа.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E1. Оптимизация ОС (FreeBSD)\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.1 Переход на 7.х \u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fivoras.sharanet.org\u002Ffreebsd\u002Ffreebsd7.html\"\u003EЧто же мы получим\u003C\u002Fa\u003E при переходе на новую версию FreeBSD? \u003Cbr\u002F\u003E\r\nПо мне самое главное это:\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fpeople.freebsd.org\u002F~kris\u002Fscaling\u002Fmysql.html\"\u003EНовый ULE 3.0 Scheduler\u003C\u002Fa\u003E и \u003Ca href=\"http:\u002F\u002Fwww.freebsd.org\u002Freleases\u002F7.0R\u002Frelnotes.html#USERLAND\"\u003Ejemalloc\u003C\u002Fa\u003E весьма полезны на многоядерных (\u003E=4) системах.\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwww.freebsd.org\u002Freleases\u002F7.0R\u002Frelnotes.html#KERNEL\"\u003EMSI (Message Signaled Interrupts)\u003C\u002Fa\u003E — они же часто упоминаются в драйверах как Fast Interupts.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак что если у вас есть legacy 6.x система, которая начинает прогибаться под нагрузкой, возможно стоит перевести её на 7.х.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.2 Переход на 7.2\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FPage_%28computing%29#Huge_pages\"\u003ESuperpages\u003C\u002Fa\u003E, увеличенный KVA, оптимизированные по-дефолту sysctl'и. Всё это вы получите абсолютно бесплатно просто перейдя на последний релиз ОС.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fivoras.sharanet.org\u002Ffreebsd\u002Ffreebsd8.html\"\u003EПрогресс тоже не стоит на месте\u003C\u002Fa\u003E и вот уже FreeBSD 8.0 готовится к выходу, там нам обещают дальнейшее увеличение производительности. В качестве подтверждения стабильности \u003Ca href=\"http:\u002F\u002Fwww.FreeBSD.org\"\u003Ewww.FreeBSD.org\u003C\u002Fa\u003E был переведён на FreeBSD-CURRENT ещё во времена первых beta-версий. Так что на staging машинах можно её уже начинать гонять.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.3 Переход на amd64\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПереходя на amd64 вы дополнительно получите \u003Ca href=\"http:\u002F\u002Fsvn.freebsd.org\u002Fviewvc\u002Fbase?view=revision&amp;revision=192469\"\u003Eгиганские размеры KVA\u003C\u002Fa\u003E и \u003Ca href=\"http:\u002F\u002Fwww.freebsd.org\u002Freleases\u002F7.2R\u002Frelnotes-detailed.html#KERNEL\"\u003EShared Mem \u003E2Gb\u003C\u002Fa\u003E. Однако это далеко не самое главное...\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗаметьте, что 4 Gb памяти в 2009 году уже во всю ставят на ноутбуки, и ставить столько на сервер с БД довольно смешно. Конечно, для маленькой БД это нормально, но что делать когда она разрастётся и перестанет влезать в память? C i386 ОС доставить ещё памяти будет проблематично, ибо PAE это отдельный глюк. Да и INT64 уже давно много где используется и даёт прирост производительности таким приложениям как, например, базы данных и OpenSSL. (Если у кого есть линки на \u003Cem\u003Eадекватные\u003C\u002Fem\u003E бенчмарки \"***SQL i686 vs amd64\" — кидайте в комменты).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.4 Разгрузка сетевой подсистемы\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nТут во FreeBSD не то что поле, а целый полигон для испытаний.\u003Cbr\u002F\u003E\r\nВсю оптимизацию можно разделить на 2 части: Тюнинг параметров \u003Ccode\u003Eifconfig\u003C\u002Fcode\u003E и настроек \u003Ccode\u003Esysctl.conf\u002Floader.conf\u003C\u002Fcode\u003E, давайте в таком порядке и пойдём.\u003Cbr\u002F\u003E\r\nДля начала нужно посмотреть на что наши сетевухи вообще способны, для этого можно воспользоваться такой командой:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E# ifconfig -m\ncapabilities=399b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_UCAST,WOL_MCAST,WOL_MAGIC\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ случае если у вас хорошая сетевуха класса em (Intel Gigabit) \u002F bge (Broadcom Gigabit) можно попробовать опции ifconfig:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E \u003Ccode\u003Etso\u003C\u002Fcode\u003E (\u003Ccode\u003Etso4\u003C\u002Fcode\u003E, \u003Ccode\u003Etso6\u003C\u002Fcode\u003E) — TCP Segent Offloading\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Ccode\u003Elro\u003C\u002Fcode\u003E — Large Recive Offload\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Ccode\u003Etxcsum\u003C\u002Fcode\u003E, \u003Ccode\u003Erxcsum\u003C\u002Fcode\u003E — RX \u002F TX Checksum Offload\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Ccode\u003Elink0\u003C\u002Fcode\u003E, \u003Ccode\u003Elink1\u003C\u002Fcode\u003E, \u003Ccode\u003Elink2\u003C\u002Fcode\u003E — зависят от драйвера, надо смотреть его код. Иногда включают некоторые оптимизации, иногда просто переключает сетевуху в MASTER на Gigabit линках.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nТакже, на \u003Ccode\u003Eem\u003C\u002Fcode\u003E сетевухах и многоядерных процах можно попробовать \u003Ca href=\"http:\u002F\u002Fpeople.yandex-team.ru\u002F~wawa\u002F\"\u003Eдрайверы от Яндекса\u003C\u002Fa\u003E, которые осуществляют обработку пакетов в несколько потоков. Так же очень много всего про тюнинг сетевой подсистемы можно прочитать на \u003Ca href=\"http:\u002F\u002Fforum.nag.ru\u002Fforum\u002Findex.php?showforum=4\"\u003Enag.ru\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли же у вас третьесортная сетевуха (\u003Ccode\u003Ere\u002Frl\u002Fsk\u002Fnfe\u003C\u002Fcode\u003E...), то вышеописанные опции могут работать неправильно и приводить к зависанию сервера, так что лучше остановиться на \u003Ca href=\"http:\u002F\u002Fwww.cyberciti.biz\u002Ffaq\u002Ffreebsd-device-polling-network-polling-tutorial\u002F\"\u003Epolling\u003C\u002Fa\u003E'e.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу и напоследок рекомендую всем посмотреть обновлённую версию \u003Ca href=\"http:\u002F\u002Fwww.rootconf.ru\u002Fpapers2009\u002F12568.html\"\u003Eтюнинга FreeBSD 7 «по Сысоеву»\u003C\u002Fa\u003E и \u003Ca href=\"http:\u002F\u002Fserverfault.com\u002Fquestions\u002F64356\u002Ffreebsd-configuration-sysctl-tuning\"\u003Eмой лист sysctl'ей\u003C\u002Fa\u003E с комментариями.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.5 FreeBSD и большое кол-во файлов\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВо FreeBSD есть прекрасная технология кеширования имён файлов в директориии. Так, если у вас в одной директории находится множество файлов, то намного лучше использовать поиск по хеш таблице, нежели постоянно пробегать по всему дереву вширь\u002Fвглубь в поисках нужного файла. Однако, макс. кол-во памяти выделенное под \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FDirhash\"\u003Edirhash\u003C\u002Fa\u003E (так называется эта технология) ограничена \u003Ccode\u003Evfs.ufs.dirhash_maxmem\u003C\u002Fcode\u003E и по-умолчанию составляет, вроде, 2Мб, что весьма мало. Рекомендуется увеличивать память до тех пор пока \u003Ccode\u003Evfs.ufs.dirhash_mem\u003C\u002Fcode\u003E не перестанет упираться в «потолок».\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1.6 Softupdates, gjournal и mount options\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nНовые терабайтные винты просто шикарны — стоят дешево, да и производительность у них просто касс. Однако, есть один нюанс: когда в датацентре отрубят электричество, то fsck таких терабайтников может занять не один час. Решить эту проблему можно используя \u003Ca href=\"http:\u002F\u002Fwww.maths.tcd.ie\u002F~dwmalone\u002Fp\u002Fbsdcon01.pdf\"\u003Esoftupdates\u003C\u002Fa\u003E или же прикрутить к системе журналирование через gjournal. Что именно, \u003Ca href=\"http:\u002F\u002Fwww.google.ru\u002Fsearch?hl=ru&amp;amp;client=firefox&amp;amp;rls=org.mozilla%3Aru%3Aofficial&amp;amp;hs=YwF&amp;amp;newwindow=1&amp;amp;q=softupdates+vs+gjournal&amp;amp;btnG=%D0%9F%D0%BE%D0%B8%D1%81%D0%BA&amp;amp;lr=&amp;amp;aq=0&amp;amp;oq=\"\u003Eрешать вам\u003C\u002Fa\u003E. \u003Cbr\u002F\u003E\r\nПара советов по журналированию: чтобы не потерять производительность, лучше журнальный раздел оправить на отдельный диск, а чтобы не ловить паники из-за его переполнения, лучше сделать раздел журнала побольше (например, RAM+swap). \u003Cbr\u002F\u003E\r\n\u003Cs\u003EЕсли же у вас есть raid с BPU,\u003C\u002Fs\u003E или вам просто нечего терять, то можно в \u003Ccode\u003E\u002Fetc\u002Ffstab\u003C\u002Fcode\u003E добавлять опцию \u003Ccode\u003Easync\u003C\u002Fcode\u003E. А такую опцию как \u003Ccode\u003Enoatime\u003C\u002Fcode\u003E можно \u003Ci\u003Eпрактически \u003C\u002Fi\u003Eбез опаски порекомендовать всем. (читать комментарий пользователя \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fusers\u002Fginer\u002F\" class=\"user_link\"\u003Eginer\u003C\u002Fa\u003E вот \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fserver_side_optimization\u002F70167\u002F#comment_2002224\"\u003Eтут\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E2. Оптимизация фронтенда (nginx)\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nНа самом деле, я крайне против чрезмерной и\u002Fили преждевременной оптимизации, к коим относится оптимизация фронтенда. Обычно на веб проектах, где nginx занимается не только статикой, он потребляет 1%-5% CPU в зависимости от характера его использования, остальное же кушает php. \u003Cbr\u002F\u003E\r\nОднако, оптимизация конфига nginx может повлиять на общий response time сайта, так что есть моменты о которых стоит поговорить.\u003Cbr\u002F\u003E\r\nИз стандартных оптимизаций могу порекомендовать \u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\n reset_timedout_connection  on;\n sendfile                   on;\n tcp_nopush                 on;\n tcp_nodelay                on;\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНу и поиграться с количеством воркеров, а не просто ставить их по кол-ву CPU\u002FВинтов. Также рекомендую всем ознакомится с \u003Ca href=\"https:\u002F\u002Fcalomel.org\u002Fnginx.html\"\u003Eэтим документом\u003C\u002Fa\u003E и темой \u003Ca href=\"http:\u002F\u002Fserverfault.com\u002Fquestions\u002F18994\u002Fnginx-best-practices\"\u003ENginx best-practices\u003C\u002Fa\u003E на Serverfault, очень вероятно, что вы узнаете что-то новое.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E2.1 Accept Filters\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВо FreeBSD имеется технология, позволяющая передавать пакет от ядра к процессу только в случае прихода 1) каких либо данных 2) валидного http запроса. Технология эта называется \u003Ca href=\"http:\u002F\u002Fsysoev.ru\u002Ffreebsd\u002Faccept-filters.html\"\u003Eaccept filters\u003C\u002Fa\u003E. Такие фильтры помогут как разгрузить сервер в случае большого кол-ва соединений, так и немного защитить от DDoS'a (Хотя со вторым лучше справляется \u003Ca href=\"http:\u002F\u002Fsysoev.ru\u002Fnginx\u002Fdocs\u002Fhttp\u002Fngx_http_limit_req_module.html\"\u003Engx_http_limit_req_module\u003C\u002Fa\u003E, о котором уже не раз писалось на \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fsearch\u002F?q=limit_req_zone\"\u003Eхабре\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\nЧтобы включить обработку соединений с использованием фильтров, нужно для начала загрузить модуль ядра:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E#ls \u002Fboot\u002Fkernel\u002F|grep acc\n   accf_data.ko\n   accf_http.ko\n#kldload accf_http\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nДалее в конфиге \u003Ccode\u003Enginx.conf\u003C\u002Fcode\u003E включить фильтр \u003Ccode\u003Ehttpready\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003Elisten 80 default accept_filter=httpready;\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E2.2 Кеширование\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВ nginx имеется очень гибкая система кеширования ответов, как от \u003Ca href=\"http:\u002F\u002Fsysoev.ru\u002Fnginx\u002Fdocs\u002Fhttp\u002Fngx_http_fastcgi_module.html#fastcgi_cache\"\u003Efastcgi\u003C\u002Fa\u003E, так и от \u003Ca href=\"http:\u002F\u002Fsysoev.ru\u002Fnginx\u002Fdocs\u002Fhttp\u002Fngx_http_proxy_module.html#proxy_cache\"\u003Eproxy\u003C\u002Fa\u003E backend'ов. Я думаю у каждого прочитавшего документацию в голове сразу возникло несколько сценариев применения кеширования в своём проекте. Я могу дать только общие советы: \u003Cbr\u002F\u003E\r\nНе дай Бог у вас rss отдаётся через php скрипт. Если так, то спокойно можно кешировать ответ на 3-5 минут.\u003Cbr\u002F\u003E\r\nДумаю почти всю версию сайта для гостей можно запихнуть в кеш тоже минут на 5 (ну если конечно у вас не новостной сайт)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКроме серверного кеша существует ещё и кеш клиентский. Я бы рекомендовал на всю статику повесить expire в месяц:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E    \n        location ~* \\.(jpg|jpeg|gif|png)$ {\n    \t   root   \u002Fvar\u002Fnnm-club;\n    \t   expires      30d;\n        }\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E2.3 AIO\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПро введение \u003Ca href=\"http:\u002F\u002Fsysoev.ru\u002Fnginx\u002Fdocs\u002Fhttp\u002Fngx_http_core_module.html#aio\"\u003EAIO в nginx\u003C\u002Fa\u003E уже \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fnginx\u002F68480\u002F\"\u003Eписали на хабре\u003C\u002Fa\u003E, там же имеются довольно интересные обсуждения в комментах. Вкратце, AIO полезен на весьма специфичных нагрузках, а так же помогает сохранить response time при уменьшении количества воркеров.\u003Cbr\u002F\u003E\r\nДля использования aio нужно подгрузить модуь ядра aio.ko:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E#\u003Cstrong\u003Ekldload aio\u003C\u002Fstrong\u003E\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nа затем включить aio и sendfile в \u003Ccode\u003Enginx.conf\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E \n sendfile        on;\n aio             sendfile;\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nНовые версии nginx позволяют использовать aio вместе с sendfile. По поводу такой конфигурации в документации сказано:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E В такой конфигурации используется флаг SF_NODISKIO и sendfile() не блокируется на диске, а сообщает об отсутствии данных в памяти, после чего nginx инициирует асинхронную подгрузку данных, читая только один байт. При этом ядро FreeBSD подгружает в память первые 128K файла, однако при последующих чтениях файл подгружается частями только по 16K. Поэтому этот режим лучше применять для раздачи небольших, до 128K, файлов. \u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nПатч для FreeBSD, для решения этой проблемы \u003Ca href=\"http:\u002F\u002Fcomments.gmane.org\u002Fgmane.comp.web.nginx.russian\u002F27401\"\u003Eтут\u003C\u002Fa\u003E, возможно со временем он войдёт в -CURRENT и будет портирован в 8.0 и 7.х\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E3. Оптимизация бэкенда\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nТут особо много мне расскажешь, у java, например, есть волшебные строки из серии \"-Xms768m -Xmx1280m -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+UseCompressedOops -Djava.net.preferIPv4Stack=true -XX:+DoEscapeAnalysis\", которые способен понять только наш java-программер, а у PHP 50% оптимизации деает \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FList_of_PHP_accelerators\"\u003Eкеширование opcode\u003C\u002Fa\u003E, остальной прирост наблюдается от кеширования ответов от БД. Так что эта часть топика будет весьма скупой.\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E3.1 APC\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПро оптимизацию APC рассказывали разработчики \u003Ca href=\"http:\u002F\u002Fwww.scribd.com\u002Fdoc\u002F88689\u002FApcFacebook\"\u003EFacebook\u003C\u002Fa\u003E. Очень рекомендую почитать, если будет время.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E 3.1.1 APC locking\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСтарый File Locking, это именно тот «тормоз», из-за которого вместо APC начинают использовать eAccelerator. Так, что дефолтный locking часто \u003Ca href=\"http:\u002F\u002Fc7y.phparch.com\u002Fc\u002Fentry\u002F1\u002Fart,apc_facebook\"\u003Eрекомендуют менять\u003C\u002Fa\u003E на spinlock или pthread mutex. Насколько я помню, pthread mutex стал дефолтным начиная с 3.0.16, так что, если у вас есть сервера со старым APC рекомендую его обновить.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E3.1.2 APC hints\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЕсли у вас много .php файлов или вы много кешируете в APC user cache, то весьма вероятно вам придётся поднимать значения \u003Cbr\u002F\u003E\r\n \u003Ccode\u003Eapc.num_files_hint\u003C\u002Fcode\u003E и \u003Ccode\u003Eapc.user_entries_hint\u003C\u002Fcode\u003E соответственно в \u003Ccode\u003Ephp.ini\u003C\u002Fcode\u003E. Эти значения отвечают за размеры hash таблиц APC (на самом деле они ещё удваиваются перед применением), а мы знаем что хеш таблицы работают весьма плохо при \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FHash_table#Load_factor\"\u003Eload factor\u003C\u002Fa\u003E \u003E= 0.75\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E3.1.3 APC fragmentation\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nФрагментация в APC — это такая штука, из-за которой этот самый кеш хочется взять, скомкать и выкинуть в окно. APC не являтеся заменой нормальному key-value по причине его неспособности удалять автоматом записи по TTL или \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FCache_algorithms#Least_Recently_Used\"\u003ELRU\u003C\u002Fa\u003E. То есть, нету никакого GC и записи попавшие в кеш от туда могут уйти только в двух случаях: \u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EКогда к ним обратились после истечения их ttl\u003C\u002Fli\u003E\r\n\u003Cli\u003EВся память кончилась и APC прибег к экстренной мере — сброс всего кеша целиком.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nСуммируя, можно сказать: Высокая фрагментация является признаком того, что вы используете APC не по назначению.\u003Cbr\u002F\u003E\r\nТут нужно добавить заметку, судя по комментам \u003Ca href=\"http:\u002F\u002Fpecl.php.net\u002Fbugs\u002Fbug.php?id=13146\"\u003Eтут\u003C\u002Fa\u003E, в 3.1.х очень многое поправили в плане аллокации памяти, однако судя по \u003Ca href=\"http:\u002F\u002Fpecl.php.net\u002Fbugs\u002Fbug.php?id=16843\"\u003Eэтому\u003C\u002Fa\u003E, 3.1.х работает не у всех.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E3.2 PHP 5.3\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nТут всё кажется простым — \u003Ca href=\"http:\u002F\u002Fwww.google.ru\u002Fsearch?hl=en&amp;client=firefox&amp;rls=org.mozilla%3Aru%3Aofficial&amp;hs=wCe&amp;newwindow=1&amp;q=PHP+5.3+performance&amp;btnG=%D0%9F%D0%BE%D0%B8%D1%81%D0%BA&amp;lr=&amp;aq=f&amp;oq=\"\u003Eобновляем PHP, получаем прирост производительности\u003C\u002Fa\u003E. Однако, посмотрев на список \u003Ca href=\"http:\u002F\u002Fus.php.net\u002Fmanual\u002Fen\u002Fmigration53.deprecated.php\"\u003Edeprecated\u003C\u002Fa\u003E функций в 5.3 можно ужаснутся, благо они пока ещё работают.\u003Cbr\u002F\u003E\r\nНесмотря на всю простоту, думаю, переход от 5.2 до 5.3 будет ойойой каким долгим, особенно в продакшне.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E4. Оптимизация базы данных\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nНа самом деле лучшими оптимизациями БД у нас в клубе признаны:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EНе использование RDBMS вообще (sphinxsearch)\u003C\u002Fli\u003E\r\n\u003Cli\u003EНе использование базы (кеширование)\u003C\u002Fli\u003E\r\n\u003Cli\u003EBatch запросы (where in (...), batch insert\u002Fupdate)\u003C\u002Fli\u003E\r\n\u003Cli\u003EАссинхронная работа с БД (memcacheQ, apacheMQ, AQMP, crontab)\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nОднако, большая часть вышеописанных средств требуют довольно серьёзного переписывания приложения.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4.1 MySQL \u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nМануалов в инете по оптимизации MySQL довольно много, есть \u003Ca href=\"http:\u002F\u002Fwww.mysqlperformanceblog.com\u002F2007\u002F11\u002F01\u002Finnodb-performance-optimization-basics\u002F\"\u003Eграмотные\u003C\u002Fa\u003E, есть не очень. В любом случае, за время жизни любого веб-проекта его база успеет упереться и в память, и в диск, и может даже в процессор, так что простыми howto не обойтись, придётся \u003Ca href=\"http:\u002F\u002Fwww.percona.tv\u002F\"\u003Eсмотреть\u003C\u002Fa\u003E конференции, учится пользоваться профайлерами(oprofile, \u003Ca href=\"http:\u002F\u002Fwww.mysqlperformanceblog.com\u002F2009\u002F09\u002F14\u002Fsystemtap-dtrace-for-linux\u002F\"\u003Esystemtap\u003C\u002Fa\u003E, dtrace) и использовать большое кол-во \u003Ca href=\"http:\u002F\u002Fwww.mysqlperformanceblog.com\u002Ftools\u002F\"\u003Eдополнительного ПО\u003C\u002Fa\u003E. Иными словами, не только понимать, что такое индексы, сортировки и группировки, но так же понимать как MySQL их использует внутри, знать что такое \u003Ca href=\"http:\u002F\u002Fforge.mysql.com\u002Fwiki\u002FTop10SQLPerformanceTips\"\u003EEXPLAIN, Query cache, преимущества и недостатки различных storage engine'ов\u003C\u002Fa\u003E, в общем, быть 100% DBA для своего проекта.\u003Cbr\u002F\u003E\r\nДалее я опишу способы которые помогут с минимальными изменениями кода (а то и вовсе без них), оптимизировать MySQL.\u003Cbr\u002F\u003E\r\nКак я уже говорил в предыдущей части, 50% тюнинга MySQL можно провести в полуавтоматическом режиме всего двумя утилитами: \u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.day32.com\u002FMySQL\u002F\"\u003Etuningprimer\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fblog.mysqltuner.com\u002F\"\u003Emysqltuner\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fhackmysql.com\u002Fmysqlsla\"\u003Emysqlsla\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.1.1 Переход на 5.1\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПереход на 5.1 приносит \u003Ca href=\"http:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F5.1\u002Fen\u002Fmysql-nutshell.html\"\u003Eмножество бонусов\u003C\u002Fa\u003E, мне конкретно были интересны:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EОптимизация оптимизатора (особенно GROUP BY)\u003C\u002Fli\u003E\r\n\u003Cli\u003EInnoDB plugin\u003C\u002Fli\u003E\r\n\u003Cli\u003EPartitioning \u003C\u002Fli\u003E\r\n\u003Cli\u003ERow based replication\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nВсё это может прибавить производительности, так что на 5.1 перелезать стоит. По поводу шума вокруг того что 5.1 не стабильна, то всё это уже не актуально, да и изначально было слишком раздуто (если у кого есть какие противопоказания или bad expirience перехода на 5.1 — прошу в комменты).\u003Cbr\u002F\u003E\r\nСамые экстрималы, конечно, уже давно тестируют \u003Ca href=\"http:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F5.4\u002Fen\u002Fmysql-nutshell.html\"\u003E5.4\u003C\u002Fa\u003E, там говорят производительность очень хорошо подняли (не без помощи патчей от Гугла и Percona, я думаю). Но до продакшна 5.4 ещё далеко.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.1.2 Переход на InnoDB\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВот скажите, если у вас используется MyISAM, то \u003Ca href=\"http:\u002F\u002Fwww.mysqlperformanceblog.com\u002F2009\u002F01\u002F12\u002Fshould-you-move-from-myisam-to-innodb\u002F\"\u003Eпочему\u003C\u002Fa\u003E именно он? Я вообще не понимаю как может продакшн сервер жить на MyISAM (хотя, говорят такие существуют), где нет транзакций (если сервер упадёт во время большого UPDATE, то половина данных будет изменена, а половина нет), есть TABLE LOCK (во время записи в таблицу она блокируется на чтение и vice vresa), а REPAIR после пропадания электричества в датацентре может занимать десятки часов. Единственное, что спасает MyISAM — это наличие Fulltext Index, но даже он вряд ли может конкурировать по качеству и скорости со sphinxsearch.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДа, у InnoDB есть свои недостатки (deadlock'и, бОльшие по размеру индексы, отсутствие FTS), но бонусов, имхо, в разы больше: Во-первых, InnoDB полностью \u003Ca href=\"http:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FACID\"\u003EACID-совместим\u003C\u002Fa\u003E, а значит любая операция, даже такая как дамп базы данных, может быть произведена в одну транзакцию (опция \u003Ccode\u003Emysqldump --single-transaction\u003C\u002Fcode\u003E), а во-вторых, он имеет row-level locking (против TABLE LOCK у myisam), это означает, что данные могут одновременно и читаться \u003Cb\u003Eи писаться\u003C\u002Fb\u003E в несколько потоков не блокируя друг друга.\u003Cbr\u002F\u003E\r\nОпять же, люди совсем озабоченные производительностью сердца своего стартапа могут использовать \u003Ca href=\"http:\u002F\u002Fwww.percona.com\u002Fdocs\u002Fwiki\u002Fpercona-xtradb:start\"\u003EXtraDB\u003C\u002Fa\u003E, говорят оно сильно помогает на I\u002FO-bound workload'ах.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.1.3 Встроеный кеш MySQL — Query Cache\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nQuery Cache — это одна из самых «недопонимаемых» частей MySQL. Многие его ставят в 512Mb и думают, что «щас всё залетает», многие его отключают вообще потому, что «всёравно не работает». Попытаюсь пролить свет на значение этого параметра. Начну с того, что больше, в данном случае, не лучше, так что задирать его не стоит. Далее, надо уточнить, что Query Cache — это полностью не распараллеленная подсистема, так что на кол-ве процессоров \u003E=8 её лучше отключать, ибо будет только тормозить. Ну и последнее, но не самое бесполезное — суть Query Cache в том, что его содержимое, относящееся к какой либо таблице, \u003Cstrong\u003Eполностью сбрасывается при \u003Cem\u003Eлюбом\u003C\u002Fem\u003E изменении этой самой таблицы\u003C\u002Fstrong\u003E. Тоесть, фактически, Query Cache даёт прирост производительности только на \u003Cem\u003Eграмотно\u003C\u002Fem\u003E нормализованных таблицах.\u003Cbr\u002F\u003E\r\nПодробнее о QC можно прочитать \u003Ca href=\"http:\u002F\u002Fwww.realcoding.net\u002Farticles\u002Fmysql-query-cache.html\"\u003Eтут\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.1.4 Индексы\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nКак отсутствие индекса вредно для SELECT'a, так и лишние индексы вредны для INSERT\u002FUPDATE. Часто бывает так, что старый, когда-то сделанный индекс, может жить в базе не один год, занимая драгоценную память и замедляя изменения данных. Тут приходит на помощь простенький SQL \u003Ca href=\"http:\u002F\u002Fpastebin.com\u002Ff6b1c381c\"\u003Eзапрос\u003C\u002Fa\u003E. Полезно? Множество подобных tips'ов можно найти \u003Ca href=\"http:\u002F\u002Fforge.mysql.com\u002Ftools\u002Fsearch.php?sortby=rating&amp;sortorder=desc\"\u003Eтут\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4.2 PostgreSQL\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДля меня Postgres остаётся довольно странной системой: с одной стороны это база Enterprise класса и на нём бегает Skype, с другой настройки по умолчанию такие, что он может запустится даже на моём мобильнике. В общем надо тюнить, а тюнить тут можно практически всё. Из возможных почти 200 параметров, за тюнинг отвечают \u003Ca href=\"http:\u002F\u002Fwww.pgcon.org\u002F2008\u002Fschedule\u002Fattachments\u002F45_guc_tutorial.pdf\"\u003Eосновные 45\u003C\u002Fa\u003E =)\u003Cbr\u002F\u003E\r\nКстати, что ещё поразило, так это то, что при закомменчивании строки в конфиге, PostgreSQL не сбрасывает её на «дефолт», а использует ту, что «запомнил»… Показалось?\u003Cbr\u002F\u003E\r\nПо тюнингу Postgres в инете много всего (часть мануалов устарела, так что обращайте внимание на дату публикации и ключевое слово vacuum_mem, которое заменено на maintenance_mem в новых версиях). Есть что-то типа FAQ: \u003Ca href=\"http:\u002F\u002Fpostgresmen.ru\u002Farticles\u002Fview\u002F38\"\u003Eвскользь о главном\u003C\u002Fa\u003E, есть очень \u003Ca href=\"http:\u002F\u002Fmomjian.us\u002Fmain\u002Fpresentations.html\"\u003Eглубокомысленные трактаты\u003C\u002Fa\u003E для продвинутых администраторов БД… Я расскажу лишь основы которые помогут проекту продержаться на ногах, пока админ с програмером ищут квалифицированного DBA.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.2.1 Индексы\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nТут у некоторых может возникнуть справедливый вопрос: почему, мол, у MySQL индексы были на последнем месте, а у PosgreSQL на первом? Всё просто, ибо возможности его в этом плане \u003Ca href=\"http:\u002F\u002Fwww.postgresql.org\u002Fdocs\u002F8.4\u002Finteractive\u002Findexes.html\"\u003Eнамного выше\u003C\u002Fa\u003E, чем у MySQL. B-tree, hash, GiST, GIN, а также multicolumn, partial и indexes on expressions: во всём этом должен разбираться человек который программирует под PostgerSQL. И не просто знать, что такие существуют, а понимать, в каких случаях нужно использовать одни типы индексов, а в каких другие.\u003Cbr\u002F\u003E\r\nПолезные для мониторинга SQL-запросы (в том числе и статистику по индексам) можно найти \u003Ca href=\"http:\u002F\u002Fwiki.postgresqlrussia.org\u002Findex.php\u002F%D0%9F%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B_%D0%B4%D0%BB%D1%8F_PostgreSQL_DBA\"\u003Eтут\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.2.2 pgBouncer и другие.\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fdeveloper.skype.com\u002FSkypeGarage\u002FDbProjects\u002FPgBouncer\"\u003EpgBouncer\u003C\u002Fa\u003E (или его альтернатива) — первое, что должно быть установлено на сервере с базой данных. Я уже насмотрелся на cacti-графики показывающие \u003Cem\u003Eдесятикратное\u003C\u002Fem\u003E падение нагрузки от простой установки менеджера соединений. Если пулер соединений у вас не установлен, то на каждое соединение с базой у вас запускается отдельный процесс, далее этот процесс отъедает, как минимум, \u003Ccode\u003Ework_mem оперативки\u003C\u002Fcode\u003E и начинает бороться за CPU и жесткий диск с себе подобными выполняя SQL запрос. Всё бы хорошо, но вот когда количество таких процессов зашкаливает за 200-500 серверу, даже очень мощному, становится туго. Очень туго. pgBouncer нас от этого спасает.\u003Cbr\u002F\u003E\r\nТакже список полезных или даже незаменимых приложений для работы с PostgreSQL можно найти на сайте \u003Ca href=\"http:\u002F\u002Fwiki.postgresqlrussia.org\u002Findex.php\u002F%D0%9F%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B-%D1%81%D0%BF%D1%83%D1%82%D0%BD%D0%B8%D0%BA%D0%B8_PostgreSQL\"\u003Epostgresqlrussia.org\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.2.3 pgFouine\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fpgfouine.projects.postgresql.org\u002F\"\u003EpgFouine\u003C\u002Fa\u003E как раз одна из таких незаменимых программ. Это очень продвинутый аналог mysqlsla на php. В комплекте с \u003Ca href=\"https:\u002F\u002Farea51.myyearbook.com\u002Ftrac.cgi\u002Fwiki\u002FPlayr\"\u003EPlayr\u003C\u002Fa\u003E (реплэйер продакшн логов) она позволяет проводить оптимизацию запросов на staging серверах в практически «боевых» условиях.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4.3 Разгрузка базы данных\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКак я уже говорил, лучший способ оптимизировать работу БД и увеличить её производительность — это обращаться к ней как можно реже.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.3.1 SphinxQL\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fserver_side_optimization\u002F52475\u002F\"\u003Eпрошлой статье\u003C\u002Fa\u003E я говорил, про то что мы ввели поиск на основе sphinxsearch. Но не все смогут перерыть тысячи строк кода, чтобы начать использовать SphinxAPI, а потом потратить ещё 1-2 итерации на тестирование и отлов багов. Проблема решилась очень элегантно: SphinxSearch научился притворяться MySQL сервером, то есть для того чтобы начать его использовать необходимо лишь создать \u003Ccode\u003Esphinx.conf\u003C\u002Fcode\u003E, создать записи для indexer'a в cron'e и переключить поиск на другую «как бы mysql» базу. Есть вероятность, что дальнейшей правки кода не понадобиться.\u003Cbr\u002F\u003E\r\nЧто вы получаете при переходе на сфинкс? Кроме улучшений скорости и \u003Cem\u003Eкачества\u003C\u002Fem\u003E поиска, вы сможете избавиться от MyISAM и его FTS, ну и, что очень интересно, так это \u003Cem\u003Eпридумать новые применения вашему поиску\u003C\u002Fem\u003E, мы вот, объединили поиск с RSS, что оказалось весьма удобным.\u003Cbr\u002F\u003E\r\nА вот и пара примеров, в которых можно выиграть от наличия sphinxsearch (придумано почти с ходу, так что сильно не бейте):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E \u003Cstrong\u003EПример 1\u003C\u002Fstrong\u003E: Я давно жду Starcraft 2, я всегда могу добавить в Google Reader RSS вида: rss.php?q=«starcraft 2» и увидеть все сообщения в которых его обсуждают. Так же, я, как участник форума, хочу видеть все посты где упоминается мой ник. Это тоже не проблема, надо всего лишь подправить урл.\u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E \u003Cstrong\u003EПример 1.5\u003C\u002Fstrong\u003E: Пользователь зашёл на сайт увидел строку поиска, ввёл запрос, нечего не нашлось, но появилась ссылка «Подписаться на этот поиск», со ссылкой на RSS для этого запроса. Так просто пользователь от вас не уйдёт =))\u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E \u003Cstrong\u003EПример 2\u003C\u002Fstrong\u003E: Я хочу найти фильм 21, или, не дай Бог, фильм 9 — MySQL не самоубийца, он такой запрос просто откинет, посетовав на то, что \u003Ccode\u003Eft_min_word_len\u003C\u002Fcode\u003E больше, чем длинна запроса. Сфинкс практически мгновенно вернёт результат в виде «Двадцать Одно \u002F 21», а во втором случае даже даст выбор между «Район №9 \u002F District 9» и «Девять \u002F 9».\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E \u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch4\u003E4.3.2 Не-RDBMS хранилище\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСуществует очень много мест в проекте, где можно не использовать реляционную базу данных. Достаточно простого key-value хранилища. Благо таких \u003Ca href=\"http:\u002F\u002Fwww.metabrew.com\u002Farticle\u002Fanti-rdbms-a-list-of-distributed-key-value-stores\u002F\"\u003Eсейчас хватает\u003C\u002Fa\u003E. \u003Cbr\u002F\u003E\r\nТакже есть весьма интересные проекты как, например, \u003Ca href=\"http:\u002F\u002Fhadoop.apache.org\u002Fhive\u002F\"\u003EHive\u003C\u002Fa\u003E (Data Warehouse с SQL-подобным QL и бекендом в виде Hadoop). В общем с хранилищем данных, можно ой как поэкспериментировать, не одним Oracle'ом (MySQL'ем, PostgreSQL'ем, FoxPro, нужное подчеркнуть) живы.\u003Cbr\u002F\u003E\r\nТакже key-value БД из-за своей скорости используются для кешиорвание выборок из реляционных баз. По поводу самого кеширования: после пролистывания презентации, просмотра видео и прочтения полного текста доклада \u003Ca href=\"http:\u002F\u002Fwww.smira.ru\u002F2008\u002F10\u002F08\u002Fhighload-plus-plus-2008\u002F\"\u003Eиз блога Андрея Смирнова\u003C\u002Fa\u003E, мне практически нечего добавить. Лишь пара советов:\u003Cbr\u002F\u003E\r\nЕсли у вас действительно большой проект на PHP, то не забываете про возможность opcode cache хранить custom данные. В нём можно хранить самые часто используемые глобальные переменные: во-первых их не много и они маленькие, так что памяти кушать они будут совсем чуть-чуть, во-вторых скорость выборки будет выше, чем из memcached находящегося на соседней машине. Ну и самое интересное: в больших проектах бывали случаи когда блок глобальных переменных записывали на какую-то одну машину из memcached-фермы, так как эти переменные юзают все бэкенды, то трафик на эту машину возрастал до неприличных размеров и машинка начинала очень сильно тормозить, а вместе с ней и все бэкенды. Выходом из такой ситуации являлось бы либо хранение глобальных переменных в opcode cacher'e типа APC\u002FeAccelerator, либо клонирование переменных на все сервера из memcached-фермы и внесение исключений в алгоритм consistency hashing'а.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4.4 Кодировки\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nНебольшая заметка по поводу кодировок: \u003Cbr\u002F\u003E\r\nUTF-8 хорош всем кроме одного — русский текст в нём занмает ровно в два раза больше места, так что иногда есть над чем задумываться перед тем как его использовать, если у вас целиком одноязычный контингент.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4.5 Асинхронность\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nНа самом деле, далеко не всегда требуется синхронная обработка данных, довольно часто её можно заменить асинхронной. \u003Cbr\u002F\u003E\r\nАсинхронная обработка помогает 1) Улучшить время реакции сайта\u002Fприложения 2) Уменьшить нагрузку на сервер.\u003Cbr\u002F\u003E\r\nЕсли с первым всё понятно, то второе является следствием того, что batch запросы выполняются быстрее одиночных.\u003Cbr\u002F\u003E\r\nАсинхронность можно организовать по разному. В крупных проектах для этого используют очереди сообщений (\u003Ca href=\"http:\u002F\u002Factivemq.apache.org\u002F\"\u003EApacheMQ\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fwww.rabbitmq.com\u002F\"\u003ERabbitMQ\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fwww.zeromq.org\u002F\"\u003EZeroMQ\u003C\u002Fa\u003E. Про AQMP уже несколько раз писалось на \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fwebdev\u002F62502\u002F\"\u003Eхабре\u003C\u002Fa\u003E), в мелких можно обойтись и cron'ом.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003EПриложение. Мелочи.\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E1. SSHGuard\u003C\u002Fstrong\u003E или альтернатива.\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКроме того, что это стандартная практика ставить анти-брутфорс для ssh, так это ещё и дополнительно помогает защитить сервер от резких всплесков Load Avarenge когда на него нападают совсем офигевшие боты и начинают брутфорсить пары логин-пасс десятками тысяч.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E2. xtrabackup\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nLVM снапшоты — \u003Ca href=\"http:\u002F\u002Fwww.mysqlperformanceblog.com\u002F2009\u002F02\u002F05\u002Fdisaster-lvm-performance-in-snapshot-mode\u002F\"\u003Eэто тормоз\u003C\u002Fa\u003E. mysqldump — лочит таблицы и делает текстовые бэкапы, которые могут восстанавливаться неделями. \u003Cem\u003EОчень хорошим\u003C\u002Fem\u003E инструментом для бэкапа MySQL является \u003Ca href=\"https:\u002F\u002Flaunchpad.net\u002Fpercona-xtrabackup\"\u003Extrabackup\u003C\u002Fa\u003E от Percona. Сильно расписывать его не буду, ибо русская часть инета о нём наслышана. Вкратце, xtrabackup это инструмент, позволяющий проводить не блокирующий бинарный бэкап InnoDB\u002FXtraDB таблиц и имеющий \u003Ca href=\"http:\u002F\u002Fwww.percona.com\u002Fdocs\u002Fwiki\u002Fpercona-xtrabackup:xtrabackup_manual\"\u003Eкучу настроек\u003C\u002Fa\u003E. Почему очень хороший, а не отличный? Поскольку самым лучшим инструментом, на мой взгляд, являются клоны в ZFS. Делаются мгновенно, а восстановление базы с них это просто изменение пути к файлам в конфиге мускула, да и при неудачном востановлении можно откатится обратно. Также с клонов можно \u003Ca href=\"http:\u002F\u002Fwiki.opennet.ru\u002F%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BA%D0%BB%D0%BE%D0%BD%D0%BE%D0%B2_%D0%B2_ZFS:_%D0%9E%D1%82%D0%BA%D0%B0%D1%82_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B\"\u003Eвосстанавливать систему целиком\u003C\u002Fa\u003E, например в случае неудачного апгрейда ядра. \u003Cbr\u002F\u003E\r\nА вообще, вроде, в 5.4 нам обещают встроеный online backup\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E3. Перенос почты на другой хост\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДанная оптимизация кажется минорной, однако при большом кол-ве спама льющегося на сервер помогает сильно уменьшить трафик и спасти множество IOPs.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E4. Интеграция со сторонним ПО\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКак-то на хабре проскакивала статья про online игры, мол, для всего нужно использовать наиболее подходящие средства (кто-нибудь помнит как она называлась?). Так, например, для того, чтобы дать возможность пользователям обмениваться почтовыми сообщениями с вложениями, не нужно начинать писать PHP скрипт с бэкендами в виде БД\u002FФС, можно использовать для этого, то что в реальной жизни применяется для обмена текстовыми сообщениями — связку smtp\u002Fimap и написать к ним простенький адаптер. По аналогии, чат для пользователей можно организовать на основе jabber сервера с javascript клиентом, который вообще не будет грузить сервер. Нужно отмечать объекты на на карте? Тут легче лёгкого написать \u003Ca href=\"http:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%9C%D1%8D%D1%88%D0%B0%D0%BF_%28%D0%B2%D0%B5%D0%B1%29\"\u003Emashup\u003C\u002Fa\u003E с использованием Yandex\u002FGoogle карт. Что интересно, так такие системы, написанные на основе адаптера к готовым продуктам зачастую очень хорошо масштабируются, по крайней мере, \u003Cem\u003Eна порядки лучше\u003C\u002Fem\u003E, чем решения на PHP и MySQL.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cstrong\u003E5. Мониторинг\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nНечего оптимизировать, если не знаешь текущего состояния. Метрики производительности, задержек, свободных ресурсов, всё это должно мониториться, логироваться и, желательно, рисоваться на графиках. Благо инструментов хватает: \u003Ca href=\"http:\u002F\u002Fnagios.org\u002F\"\u003ENagios\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FZabbix\"\u003EZabbix\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fsysadm\u002F66602\u002F\"\u003ECacti\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Flinux\u002F30494\u002F\"\u003EMunin\u003C\u002Fa\u003E....\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n Берите любой, ставьте на сервак(и) и наблюдайте за влиянием оптимизаций на нагрузку сервера. Также мониторинг поможет предвидеть появление проблем с производительностью.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003E6. Минусы оптимизации\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nBleeding-edge он, ведь, не случайно так назван. Во время переезда клуба на новый сервер мы это почувствовали на своей шкуре, умудрившись найти баги практически во всём (\u003Ca href=\"http:\u002F\u002Fpecl.php.net\u002Fbugs\u002Fbug.php?id=16833\"\u003EAPC1\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fpecl.php.net\u002Fbugs\u002Fbug.php?id=16814\"\u003EAPC2\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fbugs.mysql.com\u002Fbug.php?id=46622\"\u003EMySQL\u003C\u002Fa\u003E, \u003Ca href=\"http:\u002F\u002Fwww.lexa.ru\u002Fnginx-ru\u002Fmsg27256.html\"\u003Enginx\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fsourceforge.net\u002Fprojects\u002Fxbtt\u002Fforums\u002Fforum\u002F328824\u002Ftopic\u002F3395068\"\u003Exbtt\u003C\u002Fa\u003E), благо OpenSource, что-то простое можно самим починить.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cstrong\u003EВместо послесловия\u003C\u002Fstrong\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nНу вот, вроде, и всё. Почти неделю печатал… Что осилил, то осилил, за кадром оставил ZFS, распределённые ФС, репликацию и шардинг, ибо это темы для отдельных постов. С грамматикой и пунктуацией у меня всё очень плохо, хоть я конечно и проверил всё несколько раз в ворде и \u003Ca href=\"http:\u002F\u002Fquittance.ru\u002Ftautology.php\"\u003Eтавтологии\u003C\u002Fa\u003E, так что если что найдёте — пишите в \u003Ca href=\"http:\u002F\u002Fsavetherbtz.habrahabr.ru\u002F\"\u003Eличку\u003C\u002Fa\u003E, поправлю.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nКритика в адрес статьи приветствуется, ибо если нашли косяк в посте, то, скорее всего, нашли косяк в одном из моих проектов.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"FreeBSD"},{"titleHtml":"nginx"},{"titleHtml":"MySQL"},{"titleHtml":"PostgreSQL"},{"titleHtml":"PHP"},{"titleHtml":"оптимизация"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F70167\u002Fe600762bbe3938ac8fa43603df354129\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F70167\u002Fe600762bbe3938ac8fa43603df354129\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F70167\\\u002F\"},\"headline\":\"Сервер на стероидах: FreeBSD, nginx, MySQL, PostgreSQL, PHP и многое другое\",\"datePublished\":\"2009-09-20T17:47:53+04:00\",\"dateModified\":\"2009-09-26T10:46:53+04:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Алексей\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Введение С момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обс...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F70167\\\u002F#post-content-body\",\"about\":[\"h_server_side_optimization\",\"f_admin\"],\"image\":[\"http:\\\u002F\\\u002Fimg84.imageshack.us\\\u002Fimg84\\\u002F9446\\\u002Fbtdmd8.png\"]}","metaDescription":"Введение\r\nС момента написания мной предыдущей статьи по оптимизации этой связки прошло довольно много времени. Тот многострадальный Pentium 4 c 512Мб памяти, обслуживающий одновременно до тысячи...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"572164":{"id":"572164","timePublished":"2021-09-27T11:37:23+00:00","isCorporative":false,"lang":"ru","titleHtml":"Первые шаги в ОТО: прецессия орбиты Меркурия","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"1832999","alias":"Yermack","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F690\u002F140\u002F823\u002F690140823f555d03574a59d46f648d24.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":23,"readingCount":2796,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"18840","alias":"julia","type":"collective","title":"Julia","titleHtml":"Julia","isProfiled":true},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21968","alias":"physics","type":"collective","title":"Физика","titleHtml":"Физика","isProfiled":false},{"relatedData":null,"id":"22022","alias":"astronomy","type":"collective","title":"Астрономия","titleHtml":"Астрономия","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКогда речь заходит о теории относительности, частенько на ровном месте разрастаются споры, которые были занесены в почву непонимания и обильно удобрены мифами, недосказанностью и недостаточной математической подготовкой. Даже на лекциях от некоторых профессоров можно услышать, что детище гения Эйнштейна не имеет практической пользы, а на робкие попытки пролепетать что-то про спутниковые системы навигации они пренебрежительно отмахиваются, дескать, там все сложно и двояко. \u003C\u002Fp\u003E\u003Cp\u003EТак что совершенно естественно желание попробовать провести некоторые расчеты самолично, потрогать формулы, покрутить параметры, чтобы постепенно заложить интуицию в столь горячей теме.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa9f\u002Ff59\u002Fb65\u002Fa9ff59b65da6e8b1e6f59314aadb8e3d.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa9f\u002Ff59\u002Fb65\u002Fa9ff59b65da6e8b1e6f59314aadb8e3d.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"прецессия"},{"titleHtml":"меркурий"},{"titleHtml":"теория относительности"},{"titleHtml":"уравнения эйнштейна"},{"titleHtml":"метрики"},{"titleHtml":"спасибо scihub"},{"titleHtml":"спасибо mathpix"},{"titleHtml":"астрология_точная_наука"}]},"579772":{"id":"579772","timePublished":"2021-09-27T05:32:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сливы процветают. Эксперт-«параноик» Майкл Баззель о защите личных данных","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Bazzell","originalUrl":"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F"}}],"author":{"id":"2297567","alias":"SearchInform_team","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":7,"readingCount":2343,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"22418","alias":"searchinform","type":"corporative","title":"Блог компании SearchInform","titleHtml":"Блог компании SearchInform","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНаш очередной пост из серии «интересное на иностранном языке» – рассказ Майкла Баззеля о том, как сберечь свои персональные данные от утечек. Майкл – знаковая фигура в сфере OSINT, работал в правительстве США и ФБР, его приглашали в качестве технического эксперта в сериал «Мистер Робот», который считают достойным с точки зрения достоверности. В личной жизни эксперт придерживается настолько жестких правил в отношении информационной гигиены, что некоторые считают его «неадекватом». Так ли это – может быть несколько мнений. \u003C\u002Fp\u003E\u003Cp\u003EОдин из факторов, который убеждает в правильном подходе Майкла, – что риски обнаружить свои данные в интернете стали существенно выше, потому что шифровальщики без разбору сливают в сеть все, до чего дотягиваются при атаках на бизнес. Приводим перевод \u003Ca href=\"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F\"\u003Eпоста Майкла Баззеля\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EАтакуют корпорации, а страдают люди\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EБольшинство людей не задумываются о том, как их касается проблема распространения вирусов-шифровальщиков. Логика такова: речь идет о проблемах компаний, это они вынуждены платить выкуп. При чем тут, казалось бы, обычные люди?! \u003C\u002Fp\u003E\u003Cp\u003EА при том, что преступники сменили тактику: сейчас они не просто шифруют данные, но и скачивают их, выкладывают в открытый доступ, если компании не платят им выкуп. Теперь давайте подумаем, что в этих слитых базах? Множество данных о сотрудниках, клиентах, контрагентах, с которыми компания-жертва работает.\u003C\u002Fp\u003E\u003Cp\u003EХочу сразу уточнить: я это пишу не потому что выступаю за уплату выкупа. Я за то, чтобы сопротивляться избыточному сбору данных там, где это не обязательно. Мы халатно относимся к своим ПДн, раздавая их по первому требованию.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"персональные данные"},{"titleHtml":"пдн"},{"titleHtml":"сёрчинформ"},{"titleHtml":"Майкл Баззел"},{"titleHtml":"утечки информации"}]},"579854":{"id":"579854","timePublished":"2021-09-27T06:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Видишь уязвимости? А они есть! Наше исследование популярных CMS-систем","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2684283","alias":"Solar_Pentest","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":8,"favoritesCount":22,"readingCount":3825,"score":27,"votesCount":29},"hubs":[{"relatedData":null,"id":"20826","alias":"solarsecurity","type":"corporative","title":"Блог компании Ростелеком-Солар","titleHtml":"Блог компании Ростелеком-Солар","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛьвиная доля всех работ по анализу защищенности внешнего периметра – это тестирование веб-приложений. Здесь могут быть как корпоративные решения, так и «домашние» разработки на базе различных публичных систем управления контентом (CMS). Мы всегда проводим глубокий анализ подобных решений на тестовых стендах и зачастую находим уязвимости нулевого дня. Собственно, из опыта таких проектов и родилась идея собрать исследовательскую команду и провести глубокий анализ популярных CMS-систем и различных плагинов для них. В этом посте мы поделимся результатами нашего исследования, а также продемонстрируем примеры уязвимого кода наиболее интересных, на наш взгляд, уязвимостей и примеры их эксплуатации. Конечно все эти уязвимости уже исправлены и описываются здесь с разрешения владельцев систем.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","buttonTextHtml":"Не всё то в безопасности, что с Bug Bounty","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"cms"},{"titleHtml":"уязвимости"},{"titleHtml":"уязвимости и их эксплуатация"},{"titleHtml":"уязвимость нулевого дня"}]},"580008":{"id":"580008","timePublished":"2021-09-27T06:30:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"Летний Магнитогорск","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2614609","alias":"city_scraper","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8f8\u002Fd6c\u002F328\u002F8f8d6c328ec3a513103b6757c2c21610.png","speciality":"Пользователь"},"statistics":{"commentsCount":6,"favoritesCount":3,"readingCount":3679,"score":14,"votesCount":20},"hubs":[{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМагнитогорск Челябинской области – один из крупнейших мировых центров чёрной металлургии. В России это шестой из крупнейших городов, которые не являются центрами субъектов страны. \u003C\u002Fp\u003E\u003Cp\u003EСовсем недавно город был одним из наиболее неблагополучных с точки зрения загрязнения атмосферного воздуха, но в 2021 году был зафиксирован «повышенный» уровень – то есть не «высокий» или «очень высокий», как раньше. \u003C\u002Fp\u003E\u003Cp\u003EКак этот город выглядит летом? Где и как его жители могут проводить время?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Магнитогорск"},{"titleHtml":"промышленность"},{"titleHtml":"промышленные города"},{"titleHtml":"урбанизм\u002Fурбания"},{"titleHtml":"урбанистика"},{"titleHtml":"города России"},{"titleHtml":"города"}]},"580050":{"id":"580050","timePublished":"2021-09-27T10:23:25+00:00","isCorporative":false,"lang":"ru","titleHtml":"Один человек ответил на 85+ тысяч вопросов на Stack Overflow (24,1 ответа в день)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1585037","alias":"sahsAGU","fullname":"Александр Гуреев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F43c\u002F6c7\u002F0ab\u002F43c6c70ab024d45474e6abe8db797573.jpg","speciality":"Автор"},"statistics":{"commentsCount":34,"favoritesCount":9,"readingCount":10538,"score":11,"votesCount":17},"hubs":[{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"relatedData":null,"id":"306","alias":"mysql","type":"collective","title":"MySQL","titleHtml":"MySQL","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true},{"relatedData":null,"id":"7152","alias":"data_mining","type":"collective","title":"Data Mining","titleHtml":"Data Mining","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003EВ среднем 24,1 ответа в день (если все 365 дней в году считать рабочими) на протяжении почти 10 лет.\u003C\u002Fstrong\u003E \u003C\u002Fp\u003E\u003Cp\u003EНесколько дней назад на некоторых англоязычных ресурсах началось обсуждение одного очень необычного пользователя Stack Overflow. Его зовут Гордон Линофф (Gordon Linoff), он из Нью-Йорка, и за 9 лет и 8 месяцев своего присутствия на платформе он дал 85,201 ответов на различные вопросы, в основном связанные с SQL и дата-майнингом (цифра актуальна на 27.09.2021). \u003C\u002Fp\u003E\u003Cp\u003EЧто это за маг?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F396\u002F5ac\u002Fef4\u002F3965acef48ae14917c514fa091f60d1a.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F396\u002F5ac\u002Fef4\u002F3965acef48ae14917c514fa091f60d1a.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"sql"},{"titleHtml":"mysql"},{"titleHtml":"stackoverflow"},{"titleHtml":"базы данных"},{"titleHtml":"дата майнинг"},{"titleHtml":"data mining"}]},"580060":{"id":"580060","timePublished":"2021-09-27T09:00:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Арракис, который мы заслужили","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"238277","alias":"Zelenyikot","fullname":"Виталий Егоров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F22b\u002F2d7\u002F7a5\u002F22b2d77a57b687aae24784a3e53089c9.jpg","speciality":"Популяризатор космонавтики"},"statistics":{"commentsCount":107,"favoritesCount":37,"readingCount":19848,"score":131,"votesCount":141},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false},{"relatedData":null,"id":"21984","alias":"sci-fi","type":"collective","title":"Научная фантастика","titleHtml":"Научная фантастика","isProfiled":false},{"relatedData":null,"id":"22014","alias":"futurenow","type":"collective","title":"Будущее здесь","titleHtml":"Будущее здесь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580060\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fk0\u002Fds\u002Fy5\u002Fk0dsy5npxclyjdytiroqga7-leu.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nВо вселенной писателя-фантаста Фрэнка Герберта, Дюна, она же Арракис &mdash; это пустынная и маловодная планета с двумя лунами. По сюжету, она находится за пределами Солнечной системы, но если мы захотим поискать ближайшую схожую параллель,&nbsp;то больше всего подходит планета Марс. Предлагаю воспользоваться возможностями, которые даёт современная космонавтика, и совершить воображаемую прогулку на нашу Дюну.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Марс"},{"titleHtml":"Дюна"},{"titleHtml":"MRO"},{"titleHtml":"Curiosity"},{"titleHtml":"марсоход"},{"titleHtml":"ruvds_статьи"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":5,"favoritesCount":15,"readingCount":1270,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Sergey Prosin","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Веду команды к релизам, пишу статьи, выступаю."},"statistics":{"commentsCount":6,"favoritesCount":102,"readingCount":5904,"score":20,"votesCount":20},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":93,"favoritesCount":59,"readingCount":19413,"score":48,"votesCount":48},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]},"580094":{"id":"580094","timePublished":"2021-09-26T22:35:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"206414","alias":"PoltoS","fullname":"Сергей Полторак","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5cf\u002F03a\u002Fc7f\u002F5cf03ac7fe60ea8a6686bd4c57627ddc.png","speciality":""},"statistics":{"commentsCount":100,"favoritesCount":28,"readingCount":15240,"score":32,"votesCount":54},"hubs":[{"relatedData":null,"id":"118","alias":"crypto","type":"collective","title":"Криптография","titleHtml":"Криптография","isProfiled":true},{"relatedData":null,"id":"210","alias":"it_testing","type":"collective","title":"Тестирование IT-систем","titleHtml":"Тестирование IT-систем","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИнтересно наблюдать, как дискредитируется термин блокчейна на выборах в госдуму. Вроде голосование было на блокчейне, но его якобы подделали. Т.е. блокчейн можно подделать или ЦИК и ДИТ нам подсунули какой-то лохчейн вместо блокчейна?!? И мало кто обсуждает происходящее по существу без эмоций, связанных с результатами партий и кандидатов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Криптография"},{"titleHtml":"блокчейн"},{"titleHtml":"открытые данные"},{"titleHtml":"электронное голосование"},{"titleHtml":"выборы"},{"titleHtml":"выборы в госдуму"},{"titleHtml":"дэг"},{"titleHtml":"дэг 2021"}]},"580124":{"id":"580124","timePublished":"2021-09-27T13:03:14+00:00","isCorporative":true,"lang":"ru","titleHtml":"Электролюминесцентные индикаторы из прошлого","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"146371","alias":"radiolok","fullname":"Артем Кашканов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fa46\u002Fc6a\u002F151\u002Fa46c6a15193f7c0cac79d2736b107358.jpg","speciality":"Релейно-декатронный маньяк"},"statistics":{"commentsCount":11,"favoritesCount":37,"readingCount":4467,"score":68,"votesCount":68},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Сегодня речь пойдёт об электролюминесцентных индикаторах. Но, не о тех, которые окружают вас повсюду и к которым вы привыкли, а о других — получивших огромную популярность в 60-е годы прошлого века, и так же стремительно канувших в небытие. Заодно запущу свою коллекцию индикаторов, как серийно выпускавшихся, так и уникальных опытных и даже — лабораторных образцов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F523004\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F94e\u002F51f\u002F459\u002F94e51f459ae59c9d2fe6c448cb07bcca.gif\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Индикатор"},{"titleHtml":"электролюминесцентность"},{"titleHtml":"ruvds_статьи"}]},"580150":{"id":"580150","timePublished":"2021-09-27T10:50:03+00:00","isCorporative":true,"lang":"ru","titleHtml":"Топ-5 когнитивных искажений при планировании в IT","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2794469","alias":"KM_QA","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":7,"favoritesCount":48,"readingCount":5064,"score":35,"votesCount":37},"hubs":[{"relatedData":null,"id":"14332","alias":"oleg-bunin","type":"corporative","title":"Блог компании Конференции Олега Бунина (Онтико)","titleHtml":"Блог компании Конференции Олега Бунина (Онтико)","isProfiled":false},{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false},{"relatedData":null,"id":"21990","alias":"brain","type":"collective","title":"Мозг","titleHtml":"Мозг","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта статья подходит для тимлидов и их подопечных, а также для всех, кто оценивает проекты и задачи. Я расскажу, как и почему мы делаем ошибки из-за когнитивных искажений. Попадаем в них мы почти все, просто потому что мы живые люди. И на примере одного дня из жизни тимлида я хочу показать, в какие искажения чаще всего влетают в IT, и&nbsp; — самое полезное&nbsp; —&nbsp; как из них можно выходить.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЗамечу, что искать когнитивные искажения стоит, в первую очередь, у себя, а не у коллег. \u003C\u002Fstrong\u003EИ что рассказывать про искажения намного проще, чем не влетать в их на практике, однако, если этому научиться, то в перспективе это изрядно окупается, потому что экономит и время, и деньги, помогая и нам, и команде.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"когнитивные искажения"},{"titleHtml":"нейрофизиология"},{"titleHtml":"мозг"},{"titleHtml":"психология"},{"titleHtml":"тимлидство"},{"titleHtml":"тимлид"},{"titleHtml":"управление людьми"},{"titleHtml":"управление проектами и командой"},{"titleHtml":"управление командой"},{"titleHtml":"управление персоналом"}]},"580172":{"id":"580172","timePublished":"2021-09-27T11:45:49+00:00","isCorporative":true,"lang":"ru","titleHtml":"Небинарный ngIf*","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1050218","alias":"Waterplea","fullname":"Александр Инкин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fa70\u002F569\u002Ff31\u002Fa70569f31346559ce2b8b875e7f97480.jpg","speciality":"Google Developer Expert | Angular"},"statistics":{"commentsCount":1,"favoritesCount":11,"readingCount":854,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"17420","alias":"tinkoff","type":"corporative","title":"Блог компании TINKOFF","titleHtml":"Блог компании TINKOFF","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"18109","alias":"angular","type":"collective","title":"Angular","titleHtml":"Angular","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВам когда-нибудь хотелось отобразить состояние загрузки, пока \u003Ccode\u003EngIf\u003C\u002Fcode\u003E ждет ответа от \u003Ccode\u003Easync\u003C\u002Fcode\u003E-пайпа? Или, может, вы мечтали передать в \u003Ccode\u003EngFor\u003C\u002Fcode\u003E шаблон для пустого массива? Возможно, вы бросили это, потому что вам не хотелось реализовывать базовую логику этих директив самому. На самом деле в этом нет нужды! Один и тот же селектор может подцепить несколько директив, что позволяет расширить функциональность встроенных директив дополнительной логикой.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F846\u002F786\u002F3e2\u002F8467863e2df65db32cb31f4b16c822ef.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F846\u002F786\u002F3e2\u002F8467863e2df65db32cb31f4b16c822ef.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"template"},{"titleHtml":"directive"},{"titleHtml":"angular"},{"titleHtml":"structural"}]},"580194":{"id":"580194","timePublished":"2021-09-27T12:36:12+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сотрудники на карте: отвечаем на 10 важных вопросов о трекинге","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1254716","alias":"Axelus","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F118\u002Fc4f\u002F08f\u002F118c4f08ffa66438ad6be22e205d563d.png","speciality":"Разработчик"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":1000,"score":13,"votesCount":15},"hubs":[{"relatedData":null,"id":"20758","alias":"regionsoft","type":"corporative","title":"Блог компании RegionSoft","titleHtml":"Блог компании RegionSoft","isProfiled":false},{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"12365","alias":"saas","type":"collective","title":"SaaS \u002F S+S","titleHtml":"SaaS \u002F S+S","isProfiled":true},{"relatedData":null,"id":"17783","alias":"geo","type":"collective","title":"Геоинформационные сервисы","titleHtml":"Геоинформационные сервисы","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛюбой контроль сотрудников — опасный и болезненный вопрос, особенно в небольших компаниях. Часто в дружеские и открытые отношения компании не вписывается ни одна из форм контроля, рассчитывать можно только на доверие. Но пресловутый ковид и здесь внёс свои коррективы: расширение удалённой работы, увеличение штата мобильных сотрудников, частичная занятость пополнили ряды полевых сисадминов, аутсорсеров поддержки и остальных «разъездных» работников. Увы, люди разные и вслед за приятными плодами и бонусами удалёнки пришли негативные истории про поведение курьеров, опоздания и откровенные нарушения сотрудников на территории клиентов, неявки на работу или к заказчику и т.д. С этим столкнулись и ритейл, и ИТ, и любая сфера с мобильными сотрудниками. Очень хочется верить в лучшее, но без минимального контроля можно просто потерять бизнес — и тогда пострадают коллеги нерадивых сотрудников.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4a\u002F5b9\u002Fa9d\u002Fe4a5b9a9d62c342fa897f4531ec9301b.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4a\u002F5b9\u002Fa9d\u002Fe4a5b9a9d62c342fa897f4531ec9301b.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"geomonitor"},{"titleHtml":"геолокация"},{"titleHtml":"геозона"},{"titleHtml":"трекинг"}]},"580196":{"id":"580196","timePublished":"2021-09-27T12:28:15+00:00","isCorporative":true,"lang":"ru","titleHtml":"Зачем нужен динамический анализ кода, на примере проекта PVS-Studio","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2302295","alias":"MrROBUST","fullname":"Алексей Говоров","avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":3,"readingCount":626,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"18095","alias":"pvs-studio","type":"corporative","title":"Блог компании PVS-Studio","titleHtml":"Блог компании PVS-Studio","isProfiled":false},{"relatedData":null,"id":"559","alias":"cpp","type":"collective","title":"C++","titleHtml":"C++","isProfiled":true},{"relatedData":null,"id":"11606","alias":"vs","type":"collective","title":"Visual Studio","titleHtml":"Visual Studio","isProfiled":true},{"relatedData":null,"id":"21456","alias":"win_dev","type":"collective","title":"Разработка под Windows","titleHtml":"Разработка под Windows","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ разговоре с Маршаллом Клоу на подкасте CppCast #300 ABI Stability была затронута достаточно давняя новость о поддержке компиляторами Visual Studio инструмента AddressSanitizer (ASan). Мы уже достаточно давно внедрили ASan в свою систему тестирования и хотим рассказать о паре интересных ошибок, которые он помог найти.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F7ef\u002F2db\u002F210\u002F7ef2db210d677f9a8c07026d4361d3ba.png\" alt=\"0868_PVS-Studio_ASan_ru\u002Fimage2.png\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"pvs-studio"},{"titleHtml":"clang"},{"titleHtml":"asan"},{"titleHtml":"sanitizer"},{"titleHtml":"динамический анализ кода"}]},"580206":{"id":"580206","timePublished":"2021-09-27T12:51:03+00:00","isCorporative":false,"lang":"ru","titleHtml":"МТС отказался от скрытых мобильных подписок?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2467147","alias":"Plusodin","fullname":"Владимир","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F343\u002Fb77\u002Fd12\u002F343b77d12f047368849a9880276f936e.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":8,"favoritesCount":4,"readingCount":4420,"score":13,"votesCount":13},"hubs":[{"relatedData":null,"id":"22008","alias":"cellular","type":"collective","title":"Сотовая связь","titleHtml":"Сотовая связь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПривет, Хабр!\u003C\u002Fp\u003E\u003Cp\u003EНу что, подходит к концу первый сезон сериала «О скрытых мобильных подписках и операторах связи». Предыдущие три серии: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F550448\u002F\" rel=\"noopener noreferrer nofollow\"\u003EМегафон\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F563260\u002F\" rel=\"noopener noreferrer nofollow\"\u003EБилайн\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F571256\u002F\" rel=\"noopener noreferrer nofollow\"\u003ETele2\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EНу и вишенка на этом торте – МТС.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"мтс"},{"titleHtml":"мобильные подписки"},{"titleHtml":"подписки"},{"titleHtml":"оператор связи"},{"titleHtml":"теле2"},{"titleHtml":"мегафон"},{"titleHtml":"билайн"}]},"580208":{"id":"580208","timePublished":"2021-09-27T12:52:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Основная проблема образования","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"2270142","alias":"Chronicler","fullname":"Пушиз де Хрониклер","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Faa3\u002F149\u002Fdb0\u002Faa3149db0de5f6c071dfade7285fcb99.jpg","speciality":"Исследователь ближнего заполярья, почетный манул"},"statistics":{"commentsCount":12,"favoritesCount":12,"readingCount":2185,"score":8,"votesCount":20},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"17189","alias":"itstandarts","type":"collective","title":"IT-стандарты","titleHtml":"IT-стандарты","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНа днях на Хабре появилась \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F579998\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eкритическая статья\u003C\u002Fa\u003E о бакалавриате, что называется \"из первых уст\", от очередного первохода. Статья далеко не лишена смысла, однако главная проблема не была в ней затронута. А заключается она вовсе не в обилии посторонних дисциплин и даже не в том, что в учебных заведениях так мало разъясняют суровую конкретику жизни \"научиться штамповать JavaScript сайты за месяц\".  Да, эти проблемы присутствуют, наряду с плохой подготовкой педагогов и отношением к студентам, но не они на корню обесценивают нынешнее образование.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Что же на самом деле не так?","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"программирование"},{"titleHtml":"образование"},{"titleHtml":"курсы не нужны"},{"titleHtml":"вуз"}]},"580210":{"id":"580210","timePublished":"2021-09-27T12:53:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"PHP Дайджест № 212 (13 – 27 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"100489","alias":"pronskiy","fullname":"Роман Пронский","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F27f\u002Fb99\u002Feb3\u002F27fb99eb3e30e3221c5839e88be02395.jpg","speciality":"PHP"},"statistics":{"commentsCount":1,"favoritesCount":10,"readingCount":3275,"score":37,"votesCount":37},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"relatedData":null,"id":"477","alias":"symfony","type":"collective","title":"Symfony","titleHtml":"Symfony","isProfiled":true},{"relatedData":null,"id":"9554","alias":"yii","type":"collective","title":"Yii","titleHtml":"Yii","isProfiled":true},{"relatedData":null,"id":"18812","alias":"laravel","type":"collective","title":"Laravel","titleHtml":"Laravel","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fek\u002F6r\u002Fr1\u002Fek6rr1odvyzb89tfv0lq4cmfxi4.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nПодборка свежих новостей и материалов из мира PHP.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВышел PHP 8.1 RC2 и уже доступен первый пакет с использованием перечислений, будет сделан форк Magento, новый тип стандартов PER в дополнение к PSR, стартовала PhpStorm 2021.3 EAP, Symfony 6 будет полностью типизирован — как обновляться?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДля PHP 8.2 предложены новые оптимизированные структуры данных.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nТакже в выпуске порция инструментов, полезные статьи, видео и анонсы двух митапов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПриятного чтения!\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"php-дайджест"},{"titleHtml":"PHP"},{"titleHtml":"Symfony"},{"titleHtml":"Laravel"},{"titleHtml":"Magento"},{"titleHtml":"PHPUnit"},{"titleHtml":"PHP 8.1"},{"titleHtml":"PHP 8.2"}]},"580228":{"id":"580228","timePublished":"2021-09-27T16:41:21+00:00","isCorporative":true,"lang":"ru","titleHtml":"Идеальная светодиодная лампа за 21 рубль","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"108988","alias":"AlexeyNadezhin","fullname":"Алексей Надежин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffdc\u002F3ac\u002F9a2\u002Ffdc3ac9a2dc0107cc956f1bd0cf5fc2b.jpg","speciality":"Блогер"},"statistics":{"commentsCount":24,"favoritesCount":33,"readingCount":7819,"score":62,"votesCount":66},"hubs":[{"relatedData":null,"id":"21646","alias":"lamptest","type":"corporative","title":"Блог компании LampTest","titleHtml":"Блог компании LampTest","isProfiled":false},{"relatedData":null,"id":"21894","alias":"gadgets","type":"collective","title":"Гаджеты","titleHtml":"Гаджеты","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Удивительно осознавать, что достаточно сложное электронное устройство, которым является светодиодная лампочка, может стоить 21 рубль. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЕщё сложнее поверить, что эта лампочка безукоризненна по всем параметрам.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F20f\u002F849\u002Ffcd\u002F20f849fcd6a3891f506676fc87223bdf.jpg\"\u003E\u003C\u002Fdiv\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"led"},{"titleHtml":"светодиодные лампы"},{"titleHtml":"тест"}]},"580304":{"id":"580304","timePublished":"2021-09-27T18:31:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как сделать 248MP фотографию Солнца","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Simon Tang","originalUrl":"https:\u002F\u002Fpetapixel.com\u002F2021\u002F09\u002F15\u002Fa-closer-look-how-i-created-a-248mp-photo-of-the-sun\u002F"}}],"author":{"id":"2192534","alias":"Itelma","fullname":"T-800","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc3a\u002Fd1e\u002F43d\u002Fc3ad1e43d500046c3228c9494b510912.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":4,"favoritesCount":3,"readingCount":882,"score":7,"votesCount":7},"hubs":[{"relatedData":null,"id":"22356","alias":"itelma","type":"corporative","title":"Блог компании НПП ИТЭЛМА","titleHtml":"Блог компании НПП ИТЭЛМА","isProfiled":false},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21932","alias":"photo","type":"collective","title":"Фототехника","titleHtml":"Фототехника","isProfiled":false},{"relatedData":null,"id":"22022","alias":"astronomy","type":"collective","title":"Астрономия","titleHtml":"Астрономия","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe02\u002F643\u002Fa55\u002Fe02643a550e20aa10c366e20956e4b40.jpg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ci\u003EЭто изображение диска нашего Солнца создано с помощью большого рефракторного (линзового) телескопа и высокоскоростной монохромной CMOS-камеры.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКаждый день над нашими головами висит большой шар света. Он там всегда, и никто не обращает на него внимания. Разумеется, мы не советуем вам долго смотреть на него и при этом ослепнуть, тем не менее, наука дала нам возможность смотреть прямо на солнце совершенно безопасно.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку техника стала более доступной, обычный человек может заглянуть в многочисленные слои Солнца с помощью специального оборудования, которое может купить в любом хорошем магазине телескопов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ этой статье мы подробно рассмотрим слой, известный как хромосфера: область Солнца, видимая в оранжево-красном спектре. При помощи специального фильтра это устройство блокирует весь нежелательный свет, пропуская при этом определенный диапазон частот, который нас интересует.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"обработка изображений"},{"titleHtml":"фототехника"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580060","580124","580228","580092","580210","580150","580094","579854","580090","580088","572164","580172","580008","580206","580194","580050","580196","579772","580208","580304"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":3},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["469615","431818","350338"],"similarListRefs":{"350338":{"id":"350338","timePublished":"2018-03-02T14:50:07+00:00","isCorporative":false,"lang":"ru","titleHtml":"Настройка связки proftpd + {mysql\u002Fpostgresql} с хранением паролей в md5+salt","editorVersion":"1.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"1240162","alias":"yukh975","fullname":"Юрий Хачатурян","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc34\u002F5d1\u002F3d6\u002Fc345d13d61af09f11319c1d71d18cc73.jpg","speciality":"Системный администратор"},"statistics":{"commentsCount":24,"favoritesCount":51,"readingCount":4428,"score":9,"votesCount":15},"hubs":[{"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"Давно мне не давал покоя тот факт, что пароли пользователей у меня в БД хранятся в открытом виде. Также очень неудобно было вручную добавлять\u002Fудалять пользователей и менять им пароли.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ результате, настроил связку proftpd + mod_sql + mod_sql_passwd c хранением паролей в виде md5 + salt, а также написал три скрипта для добавления, удаления и смены пароля пользователей.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВвиду того, что на разных серверах у меня используется где-то PostgreSQL, а где-то MySQL, выкладываю описание настроек для обеих СУБД.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСервера работают под управлением ОС ALT Linux Sisyphus.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null},"431818":{"id":"431818","timePublished":"2019-01-14T18:31:30+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравниваем PHP FPM, PHP PPM, Nginx Unit, React PHP и RoadRunner","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1012434","alias":"mrsuh","fullname":"Anton Sukhachev","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1c8\u002F6e2\u002F315\u002F1c86e2315ac2204ccb56030444286fad.jpg","speciality":"Web Developer"},"statistics":{"commentsCount":46,"favoritesCount":170,"readingCount":39311,"score":62,"votesCount":72},"hubs":[{"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true},{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"id":"19279","alias":"web_testing","type":"collective","title":"Тестирование веб-сервисов","titleHtml":"Тестирование веб-сервисов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ffk\u002Fhu\u002F2y\u002Ffkhu2yx-ka6-lgomyrmgvgsqzvm.png\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nТестирование производилось с помощью Yandex Tank.\u003Cbr\u003E\r\nВ качестве приложения использовались Symfony 4 и PHP 7.2.\u003Cbr\u003E\r\nЦелью являлось сравнение характеристик сервисов при разных нагрузках и нахождение оптимального варианта.\u003Cbr\u003E\r\nДля удобства все собрано в docker-контейнеры и поднимается с помощью docker-compose.\u003Cbr\u003E\r\nПод катом много таблиц и графиков.","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null},"469615":{"id":"469615","timePublished":"2019-10-08T12:01:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Время высокой точности: как работать с долями секунды в MySQL и PHP","editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"16845","alias":"bikutoru","fullname":"Виктор Пряжников","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F514\u002F238\u002Fd16\u002F514238d162bc950bbbf470c466378807.png","speciality":"Пользователь"},"statistics":{"commentsCount":24,"favoritesCount":87,"readingCount":10793,"score":58,"votesCount":60},"hubs":[{"id":"13276","alias":"badoo","type":"corporative","title":"Блог компании Badoo","titleHtml":"Блог компании Badoo","isProfiled":false},{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"id":"306","alias":"mysql","type":"collective","title":"MySQL","titleHtml":"MySQL","isProfiled":true},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"id":"9554","alias":"yii","type":"collective","title":"Yii","titleHtml":"Yii","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fuu\u002F43\u002F0k\u002Fuu430kx8xpmnjcelv7obc41muik.jpeg\"\u003E\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EОднажды я поймал себя на мысли, что при работе со временем в базах данных почти всегда использую время с точностью до секунды просто потому, что я к этому привык и что именно такой вариант описан в документации и огромном количестве примеров. Однако сейчас такой точности достаточно далеко не для всех задач. Современные системы сложны — они могут состоять из множества частей, иметь миллионы пользователей, взаимодействующих с ними, — и во многих случаях удобнее использовать бОльшую точность, поддержка которой уже давно существует.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EВ этой статье я расскажу про способы использования времени с дробными частями секунды в MySQL и PHP. Она задумывалась как туториал, поэтому материал рассчитан на широкий круг читателей и местами повторяет документацию. Основную ценность должно представлять то, что я собрал в одном тексте всё, что нужно знать для работы с таким временем в MySQL, PHP и фреймворке Yii, а также добавил описания неочевидных проблем, с которыми можно столкнуться.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EЯ буду использовать термин «время высокой точности». В документации MySQL вы увидите термин “fractional seconds”, но его дословный перевод звучит странно, а другого устоявшегося перевода я не нашёл.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"savetherbtz":{"scoreStats":{"score":452.1,"votesCount":638},"rating":0.1,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"38942","alias":"SaveTheRbtz","fullname":"Алексей","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb37\u002F3dd\u002Fc4b\u002Fb373ddc4b2783a8cbe583cd7eeece149.jpg","speciality":"SRE"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
