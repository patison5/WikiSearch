<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Всё, что вы хотели знать о Singularity, но боялись спросить / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/31605\/"},"headline":"Всё, что вы хотели знать о Singularity, но боялись спросить","datePublished":"2008-06-13T10:12:19+04:00","dateModified":"2019-04-05T15:02:11+03:00","author":{"@type":"Person","name":"Виталик Гордон"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто н...","url":"https:\/\/habr.com\/ru\/post\/31605\/#post-content-body","about":["h_programming","f_develop"],"image":["http:\/\/www.onlinekosten.de\/news\/bilder\/microsoft-singularity.jpg"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Всё, что вы хотели знать о Singularity, но боялись спросить" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Всё, что вы хотели знать о Singularity, но боялись спросить" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Всё, что вы хотели знать о Singularity, но боялись спросить" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="31605" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2008-06-13T06:12:19.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/31605/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/31605/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/31605/1a3f68ddb6c9a7d8dc1afde6d9d8dac4/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/alex_blank/" title="alex_blank" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/e9d/510/841/e9d510841079e37e6cafb6a0325aa92f.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/alex_blank/" class="tm-user-info__username">
      alex_blank
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2008-06-13T06:12:19.000Z" title="2008-06-13, 10:12">13  июня  2008 в 10:12</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Всё, что вы хотели знать о Singularity, но боялись спросить</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-page-article__origin"><a href="http://mikehearn.wordpress.com/" target="_blank" class="tm-page-article__origin-link">
                Автор оригинала:
                <span class="tm-page-article__origin-value">
                  Mike Hearn
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="http://www.onlinekosten.de/news/bilder/microsoft-singularity.jpg" data-src="http://www.onlinekosten.de/news/bilder/microsoft-singularity.jpg" data-blurred="true"/><br/>
<br/>
<p>Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные публикации.</p><br/>
<a name="habracut"></a><br/>
<br/>
<br/>
<br/>
<h1>Что это такое</h1><br/>
<p>Singularity — это исследовательский проект по разработке операционной системы. Это команда умных людей, которым сказали: «Как бы вы сделали операционную систему, изначально ориентированную на надёжность?».</p><br/>
<br/>
<p>Люди на популярных форумах вроде Slashdot или OSNews уже <em>годами</em> мечтают о том, чтобы Microsoft отказалась от Windows и начала всё с чистого листа — чтобы побороть проблемы ненадёжности или вредоносного кода (malware). Обычно мечтания всех этих людей крутятся вокруг идеи переноса Windows на какой-нибудь UNIX — но это говенная идея, это не решило бы основных проблем. Если вы хотите решить проблемы, вызванные фундаментальными особенностями дизайна, вам следует начать с дизайна. Что и делается в Singularity.</p><br/>
<br/>
<p>Надёжность — это довольно обширный вопрос. Как минимум, это означает, что приложения не падают и что они безопасны. Но несмотря на то, что разработка Singularity затрагивает множество областей, у разработчиков нет задачи сделать полноценную ОС — к примеру, они не занимаются разработками GUI.</p><br/>
<br/>
<br/>
<br/>
<h1>В чём разница?</h1><br/>
<p>Собственно, это то, о чём я буду говорить здесь.</p><br/>
<br/>
<p>Singularity — это микроядерный дизайн, а также высокая производительность, единое адресное пространство, статическая верификация типов и гибкое управление правами доступа.</p><br/>
<br/>
<p>О да, в предыдущем предложении была целая куча пугающих академических терминов. Давайте попробуем разобраться в них. Это будет непросто, потому что Singularity довольно далека от стандартных дизайнов OS из учебников.</p><br/>
<br/>
<p>Singularity — <em>высокопроизводительна</em>. Вообще-то, производительность не была целью проекта, но разработчики оказались достаточно умны для осознания того, что без этого их разработка «улетит в облака» и станет совершенно некоммерциализируемой. Это косвенно указывает на то, что Microsoft планирует когда-нибудь использовать эту разработку в реальных продуктах, так что ей необходимо быть быстрой (об этом немного попозже).</p><br/>
<br/>
<p>А еще Singularity — это микроядро. Давайте сейчас сфокусируемся на том, что это такое. Мы поговорим об остальных вещах позже. Прокрутите вниз, если вы уже в курсе всего этого — в таком случае будем считать, что вы совершенно точно знаете, что такое микроядро и почему оно считается медленным.</p><br/>
<br/>
<br/>
<br/>
<h1>Э-э-э… микро-что?</h1><br/>
<p>Исторически сложились два способа спроектировать операционную систему, два способа сделать одно и то же, используя разные соотношения затрат и результатов: микроядро или монолитное ядро. Заметьте, мы сейчас говорим о низкоуровневом дизайне… это не влияет на то, используете ли вы taskbar или dock в своём UI.</p><br/>
<br/>
<p>В микроядерном дизайне подсистемы вроде файловой системы или сетевых драйверов работают как более-менее обычные программы вне самого ядра (которое отличается от других программ тем, что работает в специальном режиме процессора). Ядро отвечает лишь за создание процессов/потоков, пересылку сообщений между ними и за некоторые другие мелкие вещи, типа распределения ресурсов CPU. Истинных микроядер на сегодняшний день практически нигде не встретишь. Скорее всего, вы использовали его, даже не подозревая об этом. К примеру, QNX — операционная система, разработанная для встроенных приложений, вроде роутеров Cisco. QNX — это чистое микроядро.</p><br/>
<br/>
<blockquote><h3>Хозяйке на заметку</h3><br/>
<p>Вот краткий обзор виртуальной памяти. Когда ваш код читает что-то из памяти, CPU внутри преобразовывает ваш адрес из виртуального адреса в физический адрес, который он может скормить контроллерам памяти. На 32-х битном CPU они оба являются 32-х битными указателями, и вы, скорее всего, никогда не увидите непосредственный физический адрес, если только вы не ядерный разработчик. Это преобразование делается компонентом процессора, который называется MMU (memory management unit) — он также реализует контроль доступа. Память разбивается на «страницы» по 4 килобайта (в чипах Intel/AMD) и для каждой страницы заводится своё отображение (mapping). У страницы отображения есть биты доступа — read/write/execute — прямо как у файлов в UNIX.</p><br/>
<br/>
<p>Такое отображение памяти является основой безопасности во всех операционных системах. Оно не даёт глючащей программе гадить в память других программ, и — поскольку лишь ядро может обновлять таблицы страниц памяти, плюс весь доступ к железу происходит через ядро — такая программа, работающая в пользовательском режиме процессора, ничего «интересного» сделать не сможет, пока ядро не позволяет это делать. А поскольку MMU не позволяет вам читать память ядра, вы не можете получить доступ к ней. Это также означает, что мы можем использовать своп-файлы для использования диска, как чипа RAM — просто выгрузите отображение части адресного пространства процесса, поймайте ошибку чтения из него — и загрузите отображение вновь.</p><br/>
<br/>
<p>Виртуальная память — отличная штука, одно из самых больших улучшений надежности компьютеров за последние 13 лет. Windows 3.1 не использовала её, в отличие о Windows 95 — и вот почему так много людей обновили свою OС. Преимущества микроядра здесь очевидны — глючные компоненты ядра не могут отправить компьютер в BSOD aka «blue screen of death» — как они делают это сегодня. Если ваша файловая система обрушилась — просто перезапустите её!</p></blockquote><br/>
<br/>
<p>В монолитном дизайне файловые системы, драйверы и даже веб-серверы загружаются прямо в ядро и работают в привилегированном режиме процессора. Ядро всё еще предоставляет систему обмена сообщениями (message-passing) для процессов пользовательского режима — но это нигде особо не используется. Сегодня монолитной является любая популярная серверная или десктопная ОС — Windows, Linux и MacOS. Заметьте, что Linux всегда был монолитным, Windows NT изначально была микроядерной, а MacOS — будучи основанной на Mach — теоретически микроядерна. Впрочем, я не знаю никого, кто бы в это верил.</p><br/>
<br/>
<p>Вероятно, трудно сказать, действительно ли какая-либо операционная система микроядерна или монолитна, потому что это не бинарная логика «да/нет» — к примеру, в Linux графическая подсистема работает в отдельном процессе (X Server), тогда как в Windows <em>когда-то было так</em> — но не сегодня. Так или иначе, никто не спорит, что Linux — это не микроядро. Хороший критерий оценки это то, работает ли файловая система в режиме ядра или нет — может, графические системы и находятся в серой области, но не файловые системы.</p><br/>
<br/>
<p>В любом случае, то, что в Singularity применяется микроядерный дизайн, выглядит довольно странно, потому что исторически в академической среде побеждало микроядро, а вот на рынке всегда побеждало монолитное ядро — в основном из-за проблем с производительностью. Эти споры разгорались в 80-х — <a href="http://www.oreilly.com/catalog/opensources/book/appa.html">вот здесь вы можете прочитать знаменитый спор Торвальдса и Таненбаума</a>. Итак, на первый взгляд может показаться, что Singularity это очередное академическая разработка теоретически чистой, но практически неюзабельной вещи… но это не так.</p><br/>
<br/>
<br/>
<br/>
<h1>Почему микроядро медленнее?</h1><br/>
<p>Микроядра типично медленнее, чем монолитные ядра — из-за накладных расходов на переключения между режимами процессора (user-mode в kernel-mode и обратно). Кроме того, существуют еще и расходы на переключение процессора между двумя процессами пользовательского режима (переключение контекста).</p><br/>
<br/>
<p>Эти расходы малы, но реальны, и когда вы делаете стопятьсот таких переключений в секунду — приводит к тому, что вся работа процессора сводится к переключениям туда-сюда-обратно, а на реальную работу времени не остаётся. И измерить эти расходы довольно трудно, хотя команда Singularity сделала это.</p><br/>
<br/>
<p>Причина, по которой эти переключения отнимают драгоценное время заключается в том, что CPU приходится делать необычную для него работу, а поскольку большую часть времени процессор проводит <em>не делая</em> эту работу — она не очень хорошо оптимизирована. Это изменилось в последних поколениях чипов x86, но в целом, всё остаётся так же.</p><br/>
<br/>
<p>К примеру, делая syscall чтобы заставить ядро сделать что-то, вы используете специальную инструкцию процессора. Обычно это «int 80» на Linux, но сегодня вы можете использовать опкод «sysenter» на ядрах и процессорах, поддерживающих его (практически все умеют). При этом управление переходит в ядро. Это довольно быстро на современных компьютерах, но это не всегда было так — к примеру, ранние версии Windows применяли некорректную инструкцию процессора, так как разработчики обнаружили, что выброс исключения CPU оказался более быстрым способом попасть в режим ядра, чем использование прерывания («официальный» способ). В Intel исправили это :)</p><br/>
<br/>
<p>Переключение контекста более затратно; во-первых, потому что это очевидно вызывает переход в режим ядра, а еще потому что переконфигурирование таблиц отображения памяти — штука небыстрая.</p><br/>
<br/>
<p>Небыстрая она из-за того, что это, опять же, необычная операция (для этого нужно использовать специальные регистры в x86 чипах), но в основном из-за того что это требует сброса так называемых «translation lookaside буферов» (TLB). Эти буферы хранят результат запросов MMU. Ведь даже если MMU и являются специализированным для своей задачи железом, его использование не бесплатно — а трансляцию адресов памяти надо делать каждый раз при обращении кода к памяти (что происходит постоянно) — и здесь кэширование просто необходимо.</p><br/>
<br/>
<p>Из-за этого трудно измерить, насколько дорого обходится переключение контекста. Мы знаем, что это чего-то там стоит — из-за фундаментальных особенностей дизайна CPU. Но реальная стоимость размазывается по коду запущенного процесса. Сразу после переключения контекста ваш компьютер работает немного медленнее и набирает ход по мере заполнения TLB.</p><br/>
<br/>
<p>Итак, мы имеем два конфликтующих приоритета. С одной стороны, использование виртуальной памяти для разделения адресных пространств может улучшить надёжность отделением программ друг от друга (что хорошо), но, с другой стороны, это обходится нам сложноизмеримой потерей производительности — что плохо. Еще хуже то, что хоть процессоры и становятся быстрее время от времени — они становятся быстрее в исполнении кода, но не в манипуляциях с адресным пространством, так что мы не можем положиться на помощь закона Мура в этот раз.</p><br/>
<br/>
<br/>
<br/>
<h1>Обмен сообщениями</h1><br/>
<p>Микро-ядра основаны на идее пересылки сообщений между процессами в разных адресных пространствах. Так, чтобы прочитать файл, вам нужно послать сообщение из вашей программы в сервер файловой системы. Вы формируете сообщение в вашей памяти (это быстро), делаете syscall «послать сообщение» (уже не так быстро), потом ядро копирует сообщение в своё собственное адресное пространство (довольно медленно), переключает контекст на сервер файловой системы (медленно), и потом копирует сообщение в память сервера файловой системы перед тем, как покинуть режим ядра.</p><br/>
<br/>
<p>Когда файловая система прочитает искомый файл, вам нужно повторить всю эту жесть в обратном порядке, в этот раз копируя данные в обратное сообщение… и поскольку стоимость пересылки сообщения растет вместе с его размером — это еще медленнее чем начальный запрос!</p><br/>
<br/>
<p>Совсем иначе это выглядит в монолитном дизайне: вы формируете ваш запрос (это быстро), делаете syscall (не так быстро), ждёте, пока файловая система не получит ваши данные, потом ядро копирует данные прямо в ваше адресное пространство (или это сделает железо, если вы используете DMA), возвращая управление в пользовательский режим… wow, это проще и быстрее! Недостаток здесь в том, что если файловая система заглючит, то вся ОС порушится в BSOD и вы потеряете всё.</p><br/>
<br/>
<p>Около 80% крэшей в Windows вызвано кривыми драйверами. Итак, если бы мы смогли предотвратить крэши системы из-за драйверов таким же образом, как мы предотвратили крэши из-за глючных программ — мы предотвратили бы 80% всех BSOD'ов в мире! Это довольно круто! Это также означает, что с драйверами могут работать механизмы безопасности. Если вы сегодня установите стороннюю файловую систему, кто знает, что вы на самом деле получите? Пока вы не просмотрите и не скомпилируете код сами — вам приходится доверять тому, кто дал вам его. Даже если с этим всё в порядке, баг в новом драйвере может открыть дыру для руткита, нагибая всю систему безопасности :(</p><br/>
<br/>
<p>Наверное, это не удивительно, что академики предпочли медленное, но надёжное решение — а разработчики десктопных ОС предпочли быстрое, но нестабильное. Но не надо думать, что они не пытались сделать иначе! Windows NT разрабатывалась как чисто микроядерное решение, но даже с супер-оптимизированным межпроцессовым взаимодействием они однажды сдались и «переехали» в ядро вместе с GUI — за что получили массу критики, но это сделало Windows отзывчивой, а юзеров счастливыми.</p><br/>
<br/>
<br/>
<br/>
<h1>Singularity</h1><br/>
<p>Singularity умудряется «и сесть и съесть» — получить все преимущества микроядра и даже более высокую производительность, чем монолитное ядро. Круто!</p><br/>
<br/>
<br/>
<br/>
<h1>Как это работает?</h1><br/>
<p>Singularity впечатляет тем, что, обладая чистым микроядерным дизайном, на ~30% быстрее традиционного подхода и на 10% быстрее монолитного (в бенчмарке тяжёлого файлового I/O). Как же она это делает?</p><br/>
<br/>
<p>Трюк очень прост — они просто отказались от аппаратной защиты памяти, полностью. В Singularity всё работает в режиме ядра и всё работает в едином адресном пространстве. Иными словами, MMU ничего не делает. И тут нет «процессов» в традиционном понимании.</p><br/>
<br/>
<p>Разумеется, если бы это было единственной вещью, которую они сделали, это не было бы так интересно. Восемьдесят процентов крэшей Windows вызвано глюкавыми драйверами, а не ошибками в ядре (подозреваю, что остальные 20% вызваны сбоями в железе). Бессчётные уязвимости, позволяющие эскалировать привилегии вызваны глюками в драйверах. Каждая такая уязвимость — подарок «плохим ребятам». Защита от программных ошибок — вот, что делает микроядра полезными.</p><br/>
<br/>
<p>Программы в Singularity <em>изолированы</em> друг от друга — но изоляция делается целиком и полностью программно, с помощью теории типов, а не кремния. Это возможно благодаря тому, что в Singularity программы написаны на потомке C#, названном Sing# (теоретически, вы можете использовать любой язык для .NET — Singularity использует совсем немного фич, добавленных в C#, так что любой другой язык потребует лишь этих немногих изменений).</p><br/>
<br/>
<p>Вы наверняка уже знаете, что в большинстве современных языков — вроде Java или C# — у вас нет прямого доступа к памяти. Грубо говоря, нельзя написать подобный C-код на Java:</p><br/>
<br/>
<p><blockquote><code>*((<font color="blue">char</font> *)0x1234) = <font color="#770000">‘X’</font>; <font color="green">// записать байт по адресу 1234</font></code><br/>
</blockquote></p><br/>
<br/>
<p>И дело не в том, что синтаксиса для этого нет. Просто компиляторы Java/C# производят байт-код, который может быть проверен математическими методами, чтобы удостовериться, что код не делает этого. И, будучи проверенными, эти опкоды JVM/MSIL транслируются в «настоящий код», который скармливается процессору, и мы уверены в том, что передав в этот код ссылку на объект, код не будет читать/писать в него. И это не только обеспечивает надёжность — мы можем построить целую систему безопасности поверх этого!</p><br/>
<br/>
<br/>
<br/>
<h1>Но не всё так просто</h1><br/>
<p>Окей, это было в теории. А на практике это не совсем так. Точно так же, как теоретически изолированные программы на C могут нарушить изоляцию, используя уязвимости в ядре — так же и программы на Java/.NET могут использовать уязвимости в среде исполнения или нативных библиотеках классов (написанных на C++) и таким образом обойти систему безопасности.</p><br/>
<br/>
<p>А еще хуже то, что в некоторых случаях, механизмы вроде reflection (интроспекция) могут быть использованы для доступа к объектам тогда, когда такое поведение не ожидается.</p><br/>
<br/>
<p>Обе этих проблемы служили причиной для эксплойтов в JVM-апплетах в прошлом. Учитывая то, насколько огромны современные JRE — это совсем не удивительно.</p><br/>
<br/>
<br/>
<br/>
<h1>Решение</h1><br/>
<p>Подход Singularity снова очень прост — вся система написана целиком на C#, лишь малая часть написана на C++ и ассемблере. Это автоматически делает ядро устойчивым к распространенным видам атак. Но Microsoft на этом не останавливается — они работают над исследованиями, которые помогут доказать безопасность и того оставшегося небольшого объема небезопасного кода.</p><br/>
<br/>
<p>Основной строительный блок Singularity — это SIP, software isolated process или «программно изолированный процесс». Singularity придерживается идеи процесса, как чего-то, что обладает собственными ресурсами, своим адресным пространством и независимо шедулится на исполнение — но это всё обеспечивается исключительно математикой.</p><br/>
<br/>
<p>SIP обладает собственной кучей (heap), собственным сборщиком мусора (вы можете выбрать из нескольких разных предоставляемых системой GC, принимая во внимание тот факт, что ни один GC не подходит для всех ситуаций) и своими собственными страницами памяти. Так что SIP более изолирован, чем в некоторых других решениях (типа KaffeOS), в которых весь код загружается в единую среду исполнения и объекты могут быть разделены между разными программами. Недостаток в том, что вы не можете с легкостью обмениваться объектами между двумя SIP. А объективное преимущество в том, что SIP могут сильно отличаться друг от друга — используя не только разные сборщики мусора, но и разные языковые среды исполнения и разные модели данных. Это также означает, что они могут быть быстро уничтожены, без прогонки GC по всему хипу, что может быть невероятно медленно.</p><br/>
<br/>
<p>Мы больше не используем различные режимы CPU — и теперь неясно, как определить, что является «ядром». В Singularity «ядро» это программный компонент, который связывает SIP'ы вместе, управляет памятью, загружает новые SIP'ы и делает некоторые другие задачи. Логически, оно также включает в себя доверенные/небезопасные части системы, написанные на C++ или ассемблере. Некоторые из них привязываются к SIP (сборщики мусора), но, поскольку они считаются безопасными, они могут считаться частью ядра.</p><br/>
<br/>
<p>SIP'ы обращаются к ядру, просто делая обычный вызов функции. Вам нужно пометить стек, чтобы GC ядра не пересекался с собственным сборщиком SIP'а — но это просто и быстро. Поэтому обычных для syscall накладных расходов здесь просто нет.</p><br/>
<br/>
<p>SIP'ы общаются через так называемые «каналы». Каналы — это основанные на сообщениях пайпы, вроде UNIX'овых сокетов, но строго типизированных и быстрых. Канал это, по сути, математическая абстракция — пересылка сообщения через такой пайп не вызывает копирования чего-либо или использования всяких железячных трюков. Пересылка сводится к обновлению пары указателей в памяти. И поэтому пересылка даже больших объемов данных между SIP'ами (к примеру, между сетевым драйвером и веб-сервером) очень быстра.</p><br/>
<br/>
<br/>
<br/>
<h1>Обеспечение безопасности</h1><br/>
<p>Может показаться диким то, что обращение к ядру сводится к простому вызову функции. Это ведь невозможно? Что мешает SIP'у просто вызвать функции для управления жестким диском?</p><br/>
<br/>
<p>Ответ в том, что SIP поставляется (скажем, на CD), как набор MSIL-инструкций. Эти файлы не компилируются при исполнении (just-in-time, JIT) так же, как в обычной среде Java или .NET. Вместо этого, при установке программы она компилируется и статически проверяется различными анализаторами. Установка программ это привилегированная операция в Singularity — она производится самим ядром. Лишь программы установленные ядром допускаются к исполнению.</p><br/>
<br/>
<p>Поскольку вы не можете определить в безопасном MSIL такие специфичные для CPU инструкции, как «записать в этот I/O порт» или «вызвать это прерывание», единственный способ сделать это — слинковаться с какой-нибудь доверенной нативной библиотекой, которая сделает это для вас. Поскольку ядро управляет установкой программ, оно может удостовериться, что лишь определенные программы связаны с такими библиотеками, и что связаны они лишь определенным образом. Так ядро может управлять доступом к ресурсам железа, не полагаясь на аппаратные проверки — контролируя доступ к CPU еще при установке приложения.</p><br/>
<br/>
<br/>
<br/>
<h1>Манифесты</h1><br/>
<p>В обычной OS процесс более-менее соответствует программе. Лишь некоторые программы заводят несколько процессов: к примеру, iTunes устанавливает процесс, который ждет, пока вы не вставите iPod. Но, в общем-то, практически всегда на одну программу приходится лишь один процесс, и довольно часто процесс содержит несколько программ — например, веб-браузер, запускающий внутри себя плагины.</p><br/>
<br/>
<p>Поскольку SIP'ы такие дешёвые, имеет смысл (и даже нужно) разбивать программы на несколько сообщающихся SIP'ов. И тут мы сталкиваемся с проблемой — как запустить программу? Что <em>вообще</em> такое программа, в таком случае?</p><br/>
<br/>
<p>Программа в Singularity описывается манифестом. Манифест это, как в .NET, XML-файл, описывающий SIP'ы из которых состоит программа, и их соединения. Манифест практически полностью генерируется автоматически из метаданных в коде. Запуская программу вы, фактически, вызываете манифест.</p><br/>
<br/>
<br/>
<br/>
<h1>Драйверы в Singularity</h1><br/>
<p>Драйверы это важная тема для нас, поскольку:<br/>
<br/>
<blockquote><ol>
<li>Около 80% всех крэшей в Windows вызваны глюками в драйверах.<br/>
 </li>
<li>Анализ кода Linux показал, что код драйверов в 7 раз более подвержен ошибкам, чем остальные части ядра.<br/>
 </li>
<li>Когда драйвер падает, он забирает «на тот свет» всю систему, при этом теряются данные пользователя и — как следствие — его доверие.<br/>
 </li>
<li>Если драйвер содержит ошибку, это может быть использовано для эскалации привилегий. А это на руку лишь «плохим ребятам».</li>
</ol></blockquote></p><br/>
<p>Поскольку Singularity это микро-ядерный дизайн, основанный на системе типов, драйвер — это просто набор Sing#-классов (Sing# это слегка «прокачанный» C#), распространяемый в виде верифицируемого MSIL-байткода. Он работает в SIP, как и любая другая программа. Очевидно, что использование C# разом решает огромный класс распространённых ошибок — любой эксплойт, содержащий слово «overflow» в своём названии неприменим при использовании таких языков.</p><br/>
<br/>
<p>В чистом MSIL мы не можем записать специализированные инструкции, необходимые для управления железом, поэтому нам нужно какое-то другое решение. И оно выглядит, как что-то вроде небезопасной DLL, предоставляющее объекты, абстрагирующие инструкции, управляющие железом. Эта DLL (<code>Singularity.DriverRuntime</code>) является частью того, что Microsoft называет «trusted computing base», что делает это похожим на слух на какую-то систему DRM, чем оно не является. Проще представить эту DLL, как логическую часть ядра, даже если оно и не работает непосредственно в контексте основного ядра. Эти классы называются <code>IoPortRange</code>, <code>IoIrqRange</code> (и т.п.) и предоставляют простой объектно-ориентированный интерфейс для программирования железа.</p><br/>
<br/>
<p>Singularity не даст вам создать объекты этих типов самому, поэтому вам нужно использовать специальные статические вызовы методов. И вы даже не можете вызвать их напрямую. Похоже, мы влипли — как мы получим ссылку на такой объект, если мы не можем создать их сами? И в чём смысл этой странности?</p><br/>
<br/>
<p>Singularity требует аннотаций вашего кода метаданными, описывая железо, для которого предназначен ваш драйвер и какие ресурсы он использует. Это делается традиционным для .NET способом — атрибутами, которыми вы помечаете ваши классы и поля. При установке приложения эти метаданные используются для построения XML-манифеста (описывающего ресурсы, необходимые вашему коду) и входных данных для статического преобразования (compile-time transform), заполняющего пустой метод, который вы предоставляете. Это преобразование само является частью ядра и применяется при установке драйвера — оно и добавляет защищенный вызов библиотеки HAL (hardware abstraction layer).</p><br/>
<br/>
<p>Таким образом, Singularity получает точное декларативное описание того, что именно нужно драйверу. Поскольку система гарантирует, что вы не можете получить доступ к необходимым объектам (и работать с железом) без точного указания метаданных — метаданные всегда будут указаны с предельной точностью. Это, в свою очередь, позволяет легко решать проблемы вроде конфликта драйверов и построения порядка загрузки драйверов при старте системы.</p><br/>
<br/>
<br/>
<br/>
<h1>В чём подвох?</h1><br/>
<p>Это всё было бы очень круто, если бы кое-что (и почему всегда есть подвох?). Подвох в том, что любой драйвер, работающий с DMA-железом может обойти систему типов, перезаписывая любые адреса физической памяти.</p><br/>
<br/>
<p>DMA — Direct Memory Access (или прямой доступ к памяти) — оптимизация, позволяющая устройствам писать напрямую в RAM, в обход CPU. Это очень полезная штука и она реально ускоряет работу, особенно при пересылке больших объемов данных между графическими ускорителями, жесткими дисками, сетевыми картами и так далее. К сожалению, DMA идёт не только в обход CPU, но и в обход MMU, так что драйвер, контролирующий DMA-железку может контролировать и содержимое физической памяти. В обычной операционной системе это неважно, поскольку драйверы работают в режиме ядра и им полностью доверяют. Но в Singularity это проблема.</p><br/>
<br/>
<p>К счастью для нас, на помощь приходит DRM! Да, я не шучу! Новейшие архитектуры CPU, разрабатываемые в Intel и AMD, обладают кое-чем, называющимся (довольно удачно) IOMMU. Эта штуковина делает для железа то, что обычный MMU делает для процессора — регулирует доступ к памяти, проецируя чтение/запись по DMA через таблицы страниц. Работая с IOMMU, вы можете предотвратить несанкционированный доступ к памяти по DMA. Эта фича изначально разрабатывалась для предотвращения доступа к адресному пространству ядра через подключение железок (что является головной болью для лоббистов DRM-защиты). Ну и, разумеется, это защищает систему от глючного железа, что не такая уж и редкость.</p><br/>
<br/>
<p>Это также огромное подспорье для нас, потому что это закрывает дыру, через которую DMA-драйверы могли бы выбраться из своей типо-безопасной «тюрьмы».</p><br/>
<br/>
<br/>
<br/>
<h1>Как это укрепляет безопасность?</h1><br/>
<p>В 2001-м году идея Microsoft об ограничениях на установку драйверов казалась нелепой. К тому моменту война браузеров подходила к концу, широкополосный Интернет только начинал распространяться и проблемы ботнетов еще не существовало. Слишком велика была вероятность неприятия а преимущества были совсем неочевидны — но, несмотря на всё это, проблема глючных драйверов была столь велика, что инициатива подписывания драйверов не могла не появиться. Microsoft предоставила бы вам пакет unit-тестов, и после успешного прохождения, этот пакет подписал бы вам драйвер. Пакет проверял множество распространенных проблем и не требовал передачи кода в Microsoft. Выглядит неплохо?</p><br/>
<br/>
<p>Ну, разумеется, это было спорно. Хуже, это не работало. Вместо того, чтобы проходить все тесты, некоторые разработчики сжульчинали. Чтобы не сорвать сроки или не платить $250 за верификацию, некоторые из них программно нажимали на кнопку «OK» в окошке предупреждения о неподписанном драйвере. Упс.</p><br/>
<br/>
<p>Мы могли бы поступить жёстче и требовать обязательного подписывания для некоторых вещей. Это привело бы к тому, что каждый драйвер должен быть подписан — но во многих случаях этого можно избежать.</p><br/>
<br/>
<p>К примеру, благодаря декларативным метаданным, мы можем статически исследовать драйвер и сказать: «Ну, да, этот драйвер применим лишь для устройств класса “звуковая карта”, не использует DMA, не обращается к файлам (мы знаем это, поскольку можем статически проверить, что драйвер устанавливает соединения с файловой системой)». Что может такой драйвер сделать, кроме как накосячить со звуковой картой? Да ничего. Хоть он и может подвесить систему, неправильно программируя железо, такие баги очень редки. Он не может отправить нас в BSOD, потому что он не работает в ядре. Если он обрушится, то худшее, что может случиться — звук пропадёт до тех пор, пока драйвер не перезапустится и программы не возобновят свои соединения с драйвером.</p><br/>
<br/>
<p>В целом, мы можем определить некий набор привилегий (в Singularity это набор соединений, доступных SIP'у), которые могут быть опасны — и требовать подписывания только таких драйверов. Что это может быть? Доступ к системным или конфигурационным файлам, очевидно. Еще один случай это сетевые драйверы (как заDoS'ить что-то в обход файрвола? стать сетевым драйвером). К счастью, это редкость, когда драйверам требуется доступ к чему-то еще кроме железа и собственных конфигурационных данных, а сетевые драйверы неинтересны, поскольку стандартных драйверов достаточно большинству людей. Поэтому основная масса драйверов может быть безопасно написана, распространена и установлена без участия Microsoft, сохраняя при этом безопасность всей системы.</p></div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bsingularity%5D" class="tm-article-body__tags-item-link">singularity</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%8F%D0%B4%D1%80%D0%BE%5D" class="tm-article-body__tags-item-link">микроядро</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BSIP%5D" class="tm-article-body__tags-item-link">SIP</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Berlang%5D" class="tm-article-body__tags-item-link">erlang</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/programming/" class="tm-article-body__tags-item-link">
                  Программирование
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 149: ↑146 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 149: ↑146 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+143</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    97
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/31605/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      197
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/alex_blank/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/e9d/510/841/e9d510841079e37e6cafb6a0325aa92f.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 421 голос " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    118.1
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0.1</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Виталик Гордон</span> <a href="/ru/users/alex_blank/" class="tm-user-card__nickname">
          @alex_blank
        </a> <!----></div> <p class="tm-user-card__short-info">незаслуженный народный артист™</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://github.com/xpl/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Github
    </a><a href="https://medium.com/@xpl" rel="noopener" target="_blank" class="tm-article-author__contact">
      Medium
    </a><a href="https://telegram.me/v_gordon" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/31605/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 197 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-07-21T16:37:19.000Z" title="2021-07-21, 19:37">21  июля   в 19:37</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/568958/" class="tm-article-title__link"><span>SMS через SIP messaging в Asterisk</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 1: ↑1 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 1: ↑1 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    39
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/568958/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-07-19T06:05:01.000Z" title="2021-07-19, 09:05">19  июля   в 09:05</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/stss/blog/551164/" class="tm-article-title__link"><span>Работа SIP/H.323-терминала ВКС с ZOOM и Skype в USB-режиме для ПК</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 8: ↑8 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 8: ↑8 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+8</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    15
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/stss/blog/551164/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-03-22T18:41:33.000Z" title="2021-03-22, 21:41">22  марта   в 21:41</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/543782/" class="tm-article-title__link"><span>Привычный ужас в SIP, или о том, как не надо проектировать сетевые протоколы. Часть 1 — синтаксис и морфология</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 23: ↑23 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 23: ↑23 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+23</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    39
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/543782/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      21
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T10:05:13.000Z" title="2021-09-26, 13:05">вчера в 13:05</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/579980/" class="tm-article-title__link"><span>Источник опорного напряжения — один из принципов и одна из реализаций</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 37: ↑35 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 37: ↑35 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+33</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    45
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/579980/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      2
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T09:06:26.000Z" title="2021-09-26, 12:06">вчера в 12:06</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580018/" class="tm-article-title__link"><span>Сколько стоит замена батарей в электромобилях?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 28: ↑23 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 28: ↑23 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+18</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">24K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    17
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580018/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      136
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:00:02.000Z" title="2021-09-26, 22:00">вчера в 22:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/funcorp/blog/579542/" class="tm-article-title__link"><span>Jetpack Compose — как легко построить UI на Android</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 21: ↑18 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 21: ↑18 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+15</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    26
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/funcorp/blog/579542/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T21:49:14.000Z" title="2021-09-27, 00:49">сегодня в 00:49</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580092/" class="tm-article-title__link"><span>30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 12: ↑12 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 12: ↑12 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+12</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    13
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580092/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      8
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:37:10.000Z" title="2021-09-26, 22:37">вчера в 22:37</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580086/" class="tm-article-title__link"><span>Термо принтер и JavaScript</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 11: ↑11 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 11: ↑11 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+11</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    17
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580086/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      23
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="31605" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/31605/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/31605/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"31605":{"id":"31605","timePublished":"2008-06-13T06:12:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"Всё, что вы хотели знать о Singularity, но боялись спросить","leadData":{"textHtml":"\u003Cimg src=\"http:\u002F\u002Fwww.onlinekosten.de\u002Fnews\u002Fbilder\u002Fmicrosoft-singularity.jpg\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные публикации.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"читать дальше про микроядерность, виртуальную память и глючные драйверы","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Mike Hearn","originalUrl":"http:\u002F\u002Fmikehearn.wordpress.com\u002F"}}],"author":{"scoreStats":{"score":118.1,"votesCount":421},"rating":0.1,"relatedData":null,"contacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fxpl\u002F","value":"xpl"},{"title":"Medium","url":"https:\u002F\u002Fmedium.com\u002F@xpl","value":"xpl"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fv_gordon","value":"v_gordon"}],"authorContacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fxpl\u002F","value":"xpl"},{"title":"Medium","url":"https:\u002F\u002Fmedium.com\u002F@xpl","value":"xpl"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fv_gordon","value":"v_gordon"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"29854","alias":"alex_blank","fullname":"Виталик Гордон","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe9d\u002F510\u002F841\u002Fe9d510841079e37e6cafb6a0325aa92f.jpg","speciality":"незаслуженный народный артист™"},"statistics":{"commentsCount":197,"favoritesCount":97,"readingCount":6558,"score":143,"votesCount":149},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"http:\u002F\u002Fwww.onlinekosten.de\u002Fnews\u002Fbilder\u002Fmicrosoft-singularity.jpg\" data-src=\"http:\u002F\u002Fwww.onlinekosten.de\u002Fnews\u002Fbilder\u002Fmicrosoft-singularity.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные публикации.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЧто это такое\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity — это исследовательский проект по разработке операционной системы. Это команда умных людей, которым сказали: «Как бы вы сделали операционную систему, изначально ориентированную на надёжность?».\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЛюди на популярных форумах вроде Slashdot или OSNews уже \u003Cem\u003Eгодами\u003C\u002Fem\u003E мечтают о том, чтобы Microsoft отказалась от Windows и начала всё с чистого листа — чтобы побороть проблемы ненадёжности или вредоносного кода (malware). Обычно мечтания всех этих людей крутятся вокруг идеи переноса Windows на какой-нибудь UNIX — но это говенная идея, это не решило бы основных проблем. Если вы хотите решить проблемы, вызванные фундаментальными особенностями дизайна, вам следует начать с дизайна. Что и делается в Singularity.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНадёжность — это довольно обширный вопрос. Как минимум, это означает, что приложения не падают и что они безопасны. Но несмотря на то, что разработка Singularity затрагивает множество областей, у разработчиков нет задачи сделать полноценную ОС — к примеру, они не занимаются разработками GUI.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EВ чём разница?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСобственно, это то, о чём я буду говорить здесь.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity — это микроядерный дизайн, а также высокая производительность, единое адресное пространство, статическая верификация типов и гибкое управление правами доступа.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EО да, в предыдущем предложении была целая куча пугающих академических терминов. Давайте попробуем разобраться в них. Это будет непросто, потому что Singularity довольно далека от стандартных дизайнов OS из учебников.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity — \u003Cem\u003Eвысокопроизводительна\u003C\u002Fem\u003E. Вообще-то, производительность не была целью проекта, но разработчики оказались достаточно умны для осознания того, что без этого их разработка «улетит в облака» и станет совершенно некоммерциализируемой. Это косвенно указывает на то, что Microsoft планирует когда-нибудь использовать эту разработку в реальных продуктах, так что ей необходимо быть быстрой (об этом немного попозже).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EА еще Singularity — это микроядро. Давайте сейчас сфокусируемся на том, что это такое. Мы поговорим об остальных вещах позже. Прокрутите вниз, если вы уже в курсе всего этого — в таком случае будем считать, что вы совершенно точно знаете, что такое микроядро и почему оно считается медленным.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЭ-э-э… микро-что?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИсторически сложились два способа спроектировать операционную систему, два способа сделать одно и то же, используя разные соотношения затрат и результатов: микроядро или монолитное ядро. Заметьте, мы сейчас говорим о низкоуровневом дизайне… это не влияет на то, используете ли вы taskbar или dock в своём UI.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ микроядерном дизайне подсистемы вроде файловой системы или сетевых драйверов работают как более-менее обычные программы вне самого ядра (которое отличается от других программ тем, что работает в специальном режиме процессора). Ядро отвечает лишь за создание процессов\u002Fпотоков, пересылку сообщений между ними и за некоторые другие мелкие вещи, типа распределения ресурсов CPU. Истинных микроядер на сегодняшний день практически нигде не встретишь. Скорее всего, вы использовали его, даже не подозревая об этом. К примеру, QNX — операционная система, разработанная для встроенных приложений, вроде роутеров Cisco. QNX — это чистое микроядро.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ch3\u003EХозяйке на заметку\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВот краткий обзор виртуальной памяти. Когда ваш код читает что-то из памяти, CPU внутри преобразовывает ваш адрес из виртуального адреса в физический адрес, который он может скормить контроллерам памяти. На 32-х битном CPU они оба являются 32-х битными указателями, и вы, скорее всего, никогда не увидите непосредственный физический адрес, если только вы не ядерный разработчик. Это преобразование делается компонентом процессора, который называется MMU (memory management unit) — он также реализует контроль доступа. Память разбивается на «страницы» по 4 килобайта (в чипах Intel\u002FAMD) и для каждой страницы заводится своё отображение (mapping). У страницы отображения есть биты доступа — read\u002Fwrite\u002Fexecute — прямо как у файлов в UNIX.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТакое отображение памяти является основой безопасности во всех операционных системах. Оно не даёт глючащей программе гадить в память других программ, и — поскольку лишь ядро может обновлять таблицы страниц памяти, плюс весь доступ к железу происходит через ядро — такая программа, работающая в пользовательском режиме процессора, ничего «интересного» сделать не сможет, пока ядро не позволяет это делать. А поскольку MMU не позволяет вам читать память ядра, вы не можете получить доступ к ней. Это также означает, что мы можем использовать своп-файлы для использования диска, как чипа RAM — просто выгрузите отображение части адресного пространства процесса, поймайте ошибку чтения из него — и загрузите отображение вновь.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВиртуальная память — отличная штука, одно из самых больших улучшений надежности компьютеров за последние 13 лет. Windows 3.1 не использовала её, в отличие о Windows 95 — и вот почему так много людей обновили свою OС. Преимущества микроядра здесь очевидны — глючные компоненты ядра не могут отправить компьютер в BSOD aka «blue screen of death» — как они делают это сегодня. Если ваша файловая система обрушилась — просто перезапустите её!\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ монолитном дизайне файловые системы, драйверы и даже веб-серверы загружаются прямо в ядро и работают в привилегированном режиме процессора. Ядро всё еще предоставляет систему обмена сообщениями (message-passing) для процессов пользовательского режима — но это нигде особо не используется. Сегодня монолитной является любая популярная серверная или десктопная ОС — Windows, Linux и MacOS. Заметьте, что Linux всегда был монолитным, Windows NT изначально была микроядерной, а MacOS — будучи основанной на Mach — теоретически микроядерна. Впрочем, я не знаю никого, кто бы в это верил.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВероятно, трудно сказать, действительно ли какая-либо операционная система микроядерна или монолитна, потому что это не бинарная логика «да\u002Fнет» — к примеру, в Linux графическая подсистема работает в отдельном процессе (X Server), тогда как в Windows \u003Cem\u003Eкогда-то было так\u003C\u002Fem\u003E — но не сегодня. Так или иначе, никто не спорит, что Linux — это не микроядро. Хороший критерий оценки это то, работает ли файловая система в режиме ядра или нет — может, графические системы и находятся в серой области, но не файловые системы.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ любом случае, то, что в Singularity применяется микроядерный дизайн, выглядит довольно странно, потому что исторически в академической среде побеждало микроядро, а вот на рынке всегда побеждало монолитное ядро — в основном из-за проблем с производительностью. Эти споры разгорались в 80-х — \u003Ca href=\"http:\u002F\u002Fwww.oreilly.com\u002Fcatalog\u002Fopensources\u002Fbook\u002Fappa.html\"\u003Eвот здесь вы можете прочитать знаменитый спор Торвальдса и Таненбаума\u003C\u002Fa\u003E. Итак, на первый взгляд может показаться, что Singularity это очередное академическая разработка теоретически чистой, но практически неюзабельной вещи… но это не так.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EПочему микроядро медленнее?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМикроядра типично медленнее, чем монолитные ядра — из-за накладных расходов на переключения между режимами процессора (user-mode в kernel-mode и обратно). Кроме того, существуют еще и расходы на переключение процессора между двумя процессами пользовательского режима (переключение контекста).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭти расходы малы, но реальны, и когда вы делаете стопятьсот таких переключений в секунду — приводит к тому, что вся работа процессора сводится к переключениям туда-сюда-обратно, а на реальную работу времени не остаётся. И измерить эти расходы довольно трудно, хотя команда Singularity сделала это.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПричина, по которой эти переключения отнимают драгоценное время заключается в том, что CPU приходится делать необычную для него работу, а поскольку большую часть времени процессор проводит \u003Cem\u003Eне делая\u003C\u002Fem\u003E эту работу — она не очень хорошо оптимизирована. Это изменилось в последних поколениях чипов x86, но в целом, всё остаётся так же.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EК примеру, делая syscall чтобы заставить ядро сделать что-то, вы используете специальную инструкцию процессора. Обычно это «int 80» на Linux, но сегодня вы можете использовать опкод «sysenter» на ядрах и процессорах, поддерживающих его (практически все умеют). При этом управление переходит в ядро. Это довольно быстро на современных компьютерах, но это не всегда было так — к примеру, ранние версии Windows применяли некорректную инструкцию процессора, так как разработчики обнаружили, что выброс исключения CPU оказался более быстрым способом попасть в режим ядра, чем использование прерывания («официальный» способ). В Intel исправили это :)\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПереключение контекста более затратно; во-первых, потому что это очевидно вызывает переход в режим ядра, а еще потому что переконфигурирование таблиц отображения памяти — штука небыстрая.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНебыстрая она из-за того, что это, опять же, необычная операция (для этого нужно использовать специальные регистры в x86 чипах), но в основном из-за того что это требует сброса так называемых «translation lookaside буферов» (TLB). Эти буферы хранят результат запросов MMU. Ведь даже если MMU и являются специализированным для своей задачи железом, его использование не бесплатно — а трансляцию адресов памяти надо делать каждый раз при обращении кода к памяти (что происходит постоянно) — и здесь кэширование просто необходимо.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИз-за этого трудно измерить, насколько дорого обходится переключение контекста. Мы знаем, что это чего-то там стоит — из-за фундаментальных особенностей дизайна CPU. Но реальная стоимость размазывается по коду запущенного процесса. Сразу после переключения контекста ваш компьютер работает немного медленнее и набирает ход по мере заполнения TLB.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИтак, мы имеем два конфликтующих приоритета. С одной стороны, использование виртуальной памяти для разделения адресных пространств может улучшить надёжность отделением программ друг от друга (что хорошо), но, с другой стороны, это обходится нам сложноизмеримой потерей производительности — что плохо. Еще хуже то, что хоть процессоры и становятся быстрее время от времени — они становятся быстрее в исполнении кода, но не в манипуляциях с адресным пространством, так что мы не можем положиться на помощь закона Мура в этот раз.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EОбмен сообщениями\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМикро-ядра основаны на идее пересылки сообщений между процессами в разных адресных пространствах. Так, чтобы прочитать файл, вам нужно послать сообщение из вашей программы в сервер файловой системы. Вы формируете сообщение в вашей памяти (это быстро), делаете syscall «послать сообщение» (уже не так быстро), потом ядро копирует сообщение в своё собственное адресное пространство (довольно медленно), переключает контекст на сервер файловой системы (медленно), и потом копирует сообщение в память сервера файловой системы перед тем, как покинуть режим ядра.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКогда файловая система прочитает искомый файл, вам нужно повторить всю эту жесть в обратном порядке, в этот раз копируя данные в обратное сообщение… и поскольку стоимость пересылки сообщения растет вместе с его размером — это еще медленнее чем начальный запрос!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСовсем иначе это выглядит в монолитном дизайне: вы формируете ваш запрос (это быстро), делаете syscall (не так быстро), ждёте, пока файловая система не получит ваши данные, потом ядро копирует данные прямо в ваше адресное пространство (или это сделает железо, если вы используете DMA), возвращая управление в пользовательский режим… wow, это проще и быстрее! Недостаток здесь в том, что если файловая система заглючит, то вся ОС порушится в BSOD и вы потеряете всё.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОколо 80% крэшей в Windows вызвано кривыми драйверами. Итак, если бы мы смогли предотвратить крэши системы из-за драйверов таким же образом, как мы предотвратили крэши из-за глючных программ — мы предотвратили бы 80% всех BSOD'ов в мире! Это довольно круто! Это также означает, что с драйверами могут работать механизмы безопасности. Если вы сегодня установите стороннюю файловую систему, кто знает, что вы на самом деле получите? Пока вы не просмотрите и не скомпилируете код сами — вам приходится доверять тому, кто дал вам его. Даже если с этим всё в порядке, баг в новом драйвере может открыть дыру для руткита, нагибая всю систему безопасности :(\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНаверное, это не удивительно, что академики предпочли медленное, но надёжное решение — а разработчики десктопных ОС предпочли быстрое, но нестабильное. Но не надо думать, что они не пытались сделать иначе! Windows NT разрабатывалась как чисто микроядерное решение, но даже с супер-оптимизированным межпроцессовым взаимодействием они однажды сдались и «переехали» в ядро вместе с GUI — за что получили массу критики, но это сделало Windows отзывчивой, а юзеров счастливыми.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003ESingularity\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity умудряется «и сесть и съесть» — получить все преимущества микроядра и даже более высокую производительность, чем монолитное ядро. Круто!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EКак это работает?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity впечатляет тем, что, обладая чистым микроядерным дизайном, на ~30% быстрее традиционного подхода и на 10% быстрее монолитного (в бенчмарке тяжёлого файлового I\u002FO). Как же она это делает?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТрюк очень прост — они просто отказались от аппаратной защиты памяти, полностью. В Singularity всё работает в режиме ядра и всё работает в едином адресном пространстве. Иными словами, MMU ничего не делает. И тут нет «процессов» в традиционном понимании.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EРазумеется, если бы это было единственной вещью, которую они сделали, это не было бы так интересно. Восемьдесят процентов крэшей Windows вызвано глюкавыми драйверами, а не ошибками в ядре (подозреваю, что остальные 20% вызваны сбоями в железе). Бессчётные уязвимости, позволяющие эскалировать привилегии вызваны глюками в драйверах. Каждая такая уязвимость — подарок «плохим ребятам». Защита от программных ошибок — вот, что делает микроядра полезными.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПрограммы в Singularity \u003Cem\u003Eизолированы\u003C\u002Fem\u003E друг от друга — но изоляция делается целиком и полностью программно, с помощью теории типов, а не кремния. Это возможно благодаря тому, что в Singularity программы написаны на потомке C#, названном Sing# (теоретически, вы можете использовать любой язык для .NET — Singularity использует совсем немного фич, добавленных в C#, так что любой другой язык потребует лишь этих немногих изменений).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВы наверняка уже знаете, что в большинстве современных языков — вроде Java или C# — у вас нет прямого доступа к памяти. Грубо говоря, нельзя написать подобный C-код на Java:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cblockquote\u003E\u003Ccode\u003E*((\u003Cfont color=\"blue\"\u003Echar\u003C\u002Ffont\u003E *)0x1234) = \u003Cfont color=\"#770000\"\u003E‘X’\u003C\u002Ffont\u003E; \u003Cfont color=\"green\"\u003E\u002F\u002F записать байт по адресу 1234\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИ дело не в том, что синтаксиса для этого нет. Просто компиляторы Java\u002FC# производят байт-код, который может быть проверен математическими методами, чтобы удостовериться, что код не делает этого. И, будучи проверенными, эти опкоды JVM\u002FMSIL транслируются в «настоящий код», который скармливается процессору, и мы уверены в том, что передав в этот код ссылку на объект, код не будет читать\u002Fписать в него. И это не только обеспечивает надёжность — мы можем построить целую систему безопасности поверх этого!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EНо не всё так просто\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОкей, это было в теории. А на практике это не совсем так. Точно так же, как теоретически изолированные программы на C могут нарушить изоляцию, используя уязвимости в ядре — так же и программы на Java\u002F.NET могут использовать уязвимости в среде исполнения или нативных библиотеках классов (написанных на C++) и таким образом обойти систему безопасности.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EА еще хуже то, что в некоторых случаях, механизмы вроде reflection (интроспекция) могут быть использованы для доступа к объектам тогда, когда такое поведение не ожидается.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОбе этих проблемы служили причиной для эксплойтов в JVM-апплетах в прошлом. Учитывая то, насколько огромны современные JRE — это совсем не удивительно.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EРешение\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПодход Singularity снова очень прост — вся система написана целиком на C#, лишь малая часть написана на C++ и ассемблере. Это автоматически делает ядро устойчивым к распространенным видам атак. Но Microsoft на этом не останавливается — они работают над исследованиями, которые помогут доказать безопасность и того оставшегося небольшого объема небезопасного кода.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОсновной строительный блок Singularity — это SIP, software isolated process или «программно изолированный процесс». Singularity придерживается идеи процесса, как чего-то, что обладает собственными ресурсами, своим адресным пространством и независимо шедулится на исполнение — но это всё обеспечивается исключительно математикой.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESIP обладает собственной кучей (heap), собственным сборщиком мусора (вы можете выбрать из нескольких разных предоставляемых системой GC, принимая во внимание тот факт, что ни один GC не подходит для всех ситуаций) и своими собственными страницами памяти. Так что SIP более изолирован, чем в некоторых других решениях (типа KaffeOS), в которых весь код загружается в единую среду исполнения и объекты могут быть разделены между разными программами. Недостаток в том, что вы не можете с легкостью обмениваться объектами между двумя SIP. А объективное преимущество в том, что SIP могут сильно отличаться друг от друга — используя не только разные сборщики мусора, но и разные языковые среды исполнения и разные модели данных. Это также означает, что они могут быть быстро уничтожены, без прогонки GC по всему хипу, что может быть невероятно медленно.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМы больше не используем различные режимы CPU — и теперь неясно, как определить, что является «ядром». В Singularity «ядро» это программный компонент, который связывает SIP'ы вместе, управляет памятью, загружает новые SIP'ы и делает некоторые другие задачи. Логически, оно также включает в себя доверенные\u002Fнебезопасные части системы, написанные на C++ или ассемблере. Некоторые из них привязываются к SIP (сборщики мусора), но, поскольку они считаются безопасными, они могут считаться частью ядра.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESIP'ы обращаются к ядру, просто делая обычный вызов функции. Вам нужно пометить стек, чтобы GC ядра не пересекался с собственным сборщиком SIP'а — но это просто и быстро. Поэтому обычных для syscall накладных расходов здесь просто нет.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESIP'ы общаются через так называемые «каналы». Каналы — это основанные на сообщениях пайпы, вроде UNIX'овых сокетов, но строго типизированных и быстрых. Канал это, по сути, математическая абстракция — пересылка сообщения через такой пайп не вызывает копирования чего-либо или использования всяких железячных трюков. Пересылка сводится к обновлению пары указателей в памяти. И поэтому пересылка даже больших объемов данных между SIP'ами (к примеру, между сетевым драйвером и веб-сервером) очень быстра.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EОбеспечение безопасности\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМожет показаться диким то, что обращение к ядру сводится к простому вызову функции. Это ведь невозможно? Что мешает SIP'у просто вызвать функции для управления жестким диском?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОтвет в том, что SIP поставляется (скажем, на CD), как набор MSIL-инструкций. Эти файлы не компилируются при исполнении (just-in-time, JIT) так же, как в обычной среде Java или .NET. Вместо этого, при установке программы она компилируется и статически проверяется различными анализаторами. Установка программ это привилегированная операция в Singularity — она производится самим ядром. Лишь программы установленные ядром допускаются к исполнению.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПоскольку вы не можете определить в безопасном MSIL такие специфичные для CPU инструкции, как «записать в этот I\u002FO порт» или «вызвать это прерывание», единственный способ сделать это — слинковаться с какой-нибудь доверенной нативной библиотекой, которая сделает это для вас. Поскольку ядро управляет установкой программ, оно может удостовериться, что лишь определенные программы связаны с такими библиотеками, и что связаны они лишь определенным образом. Так ядро может управлять доступом к ресурсам железа, не полагаясь на аппаратные проверки — контролируя доступ к CPU еще при установке приложения.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EМанифесты\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ обычной OS процесс более-менее соответствует программе. Лишь некоторые программы заводят несколько процессов: к примеру, iTunes устанавливает процесс, который ждет, пока вы не вставите iPod. Но, в общем-то, практически всегда на одну программу приходится лишь один процесс, и довольно часто процесс содержит несколько программ — например, веб-браузер, запускающий внутри себя плагины.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПоскольку SIP'ы такие дешёвые, имеет смысл (и даже нужно) разбивать программы на несколько сообщающихся SIP'ов. И тут мы сталкиваемся с проблемой — как запустить программу? Что \u003Cem\u003Eвообще\u003C\u002Fem\u003E такое программа, в таком случае?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПрограмма в Singularity описывается манифестом. Манифест это, как в .NET, XML-файл, описывающий SIP'ы из которых состоит программа, и их соединения. Манифест практически полностью генерируется автоматически из метаданных в коде. Запуская программу вы, фактически, вызываете манифест.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EДрайверы в Singularity\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДрайверы это важная тема для нас, поскольку:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Col\u003E\r\n\u003Cli\u003EОколо 80% всех крэшей в Windows вызваны глюками в драйверах.\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003Cli\u003EАнализ кода Linux показал, что код драйверов в 7 раз более подвержен ошибкам, чем остальные части ядра.\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003Cli\u003EКогда драйвер падает, он забирает «на тот свет» всю систему, при этом теряются данные пользователя и — как следствие — его доверие.\u003Cbr\u002F\u003E\r\n \u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли драйвер содержит ошибку, это может быть использовано для эскалации привилегий. А это на руку лишь «плохим ребятам».\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003C\u002Fblockquote\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПоскольку Singularity это микро-ядерный дизайн, основанный на системе типов, драйвер — это просто набор Sing#-классов (Sing# это слегка «прокачанный» C#), распространяемый в виде верифицируемого MSIL-байткода. Он работает в SIP, как и любая другая программа. Очевидно, что использование C# разом решает огромный класс распространённых ошибок — любой эксплойт, содержащий слово «overflow» в своём названии неприменим при использовании таких языков.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ чистом MSIL мы не можем записать специализированные инструкции, необходимые для управления железом, поэтому нам нужно какое-то другое решение. И оно выглядит, как что-то вроде небезопасной DLL, предоставляющее объекты, абстрагирующие инструкции, управляющие железом. Эта DLL (\u003Ccode\u003ESingularity.DriverRuntime\u003C\u002Fcode\u003E) является частью того, что Microsoft называет «trusted computing base», что делает это похожим на слух на какую-то систему DRM, чем оно не является. Проще представить эту DLL, как логическую часть ядра, даже если оно и не работает непосредственно в контексте основного ядра. Эти классы называются \u003Ccode\u003EIoPortRange\u003C\u002Fcode\u003E, \u003Ccode\u003EIoIrqRange\u003C\u002Fcode\u003E (и т.п.) и предоставляют простой объектно-ориентированный интерфейс для программирования железа.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity не даст вам создать объекты этих типов самому, поэтому вам нужно использовать специальные статические вызовы методов. И вы даже не можете вызвать их напрямую. Похоже, мы влипли — как мы получим ссылку на такой объект, если мы не можем создать их сами? И в чём смысл этой странности?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESingularity требует аннотаций вашего кода метаданными, описывая железо, для которого предназначен ваш драйвер и какие ресурсы он использует. Это делается традиционным для .NET способом — атрибутами, которыми вы помечаете ваши классы и поля. При установке приложения эти метаданные используются для построения XML-манифеста (описывающего ресурсы, необходимые вашему коду) и входных данных для статического преобразования (compile-time transform), заполняющего пустой метод, который вы предоставляете. Это преобразование само является частью ядра и применяется при установке драйвера — оно и добавляет защищенный вызов библиотеки HAL (hardware abstraction layer).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТаким образом, Singularity получает точное декларативное описание того, что именно нужно драйверу. Поскольку система гарантирует, что вы не можете получить доступ к необходимым объектам (и работать с железом) без точного указания метаданных — метаданные всегда будут указаны с предельной точностью. Это, в свою очередь, позволяет легко решать проблемы вроде конфликта драйверов и построения порядка загрузки драйверов при старте системы.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EВ чём подвох?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭто всё было бы очень круто, если бы кое-что (и почему всегда есть подвох?). Подвох в том, что любой драйвер, работающий с DMA-железом может обойти систему типов, перезаписывая любые адреса физической памяти.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EDMA — Direct Memory Access (или прямой доступ к памяти) — оптимизация, позволяющая устройствам писать напрямую в RAM, в обход CPU. Это очень полезная штука и она реально ускоряет работу, особенно при пересылке больших объемов данных между графическими ускорителями, жесткими дисками, сетевыми картами и так далее. К сожалению, DMA идёт не только в обход CPU, но и в обход MMU, так что драйвер, контролирующий DMA-железку может контролировать и содержимое физической памяти. В обычной операционной системе это неважно, поскольку драйверы работают в режиме ядра и им полностью доверяют. Но в Singularity это проблема.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EК счастью для нас, на помощь приходит DRM! Да, я не шучу! Новейшие архитектуры CPU, разрабатываемые в Intel и AMD, обладают кое-чем, называющимся (довольно удачно) IOMMU. Эта штуковина делает для железа то, что обычный MMU делает для процессора — регулирует доступ к памяти, проецируя чтение\u002Fзапись по DMA через таблицы страниц. Работая с IOMMU, вы можете предотвратить несанкционированный доступ к памяти по DMA. Эта фича изначально разрабатывалась для предотвращения доступа к адресному пространству ядра через подключение железок (что является головной болью для лоббистов DRM-защиты). Ну и, разумеется, это защищает систему от глючного железа, что не такая уж и редкость.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭто также огромное подспорье для нас, потому что это закрывает дыру, через которую DMA-драйверы могли бы выбраться из своей типо-безопасной «тюрьмы».\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EКак это укрепляет безопасность?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ 2001-м году идея Microsoft об ограничениях на установку драйверов казалась нелепой. К тому моменту война браузеров подходила к концу, широкополосный Интернет только начинал распространяться и проблемы ботнетов еще не существовало. Слишком велика была вероятность неприятия а преимущества были совсем неочевидны — но, несмотря на всё это, проблема глючных драйверов была столь велика, что инициатива подписывания драйверов не могла не появиться. Microsoft предоставила бы вам пакет unit-тестов, и после успешного прохождения, этот пакет подписал бы вам драйвер. Пакет проверял множество распространенных проблем и не требовал передачи кода в Microsoft. Выглядит неплохо?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНу, разумеется, это было спорно. Хуже, это не работало. Вместо того, чтобы проходить все тесты, некоторые разработчики сжульчинали. Чтобы не сорвать сроки или не платить $250 за верификацию, некоторые из них программно нажимали на кнопку «OK» в окошке предупреждения о неподписанном драйвере. Упс.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМы могли бы поступить жёстче и требовать обязательного подписывания для некоторых вещей. Это привело бы к тому, что каждый драйвер должен быть подписан — но во многих случаях этого можно избежать.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EК примеру, благодаря декларативным метаданным, мы можем статически исследовать драйвер и сказать: «Ну, да, этот драйвер применим лишь для устройств класса “звуковая карта”, не использует DMA, не обращается к файлам (мы знаем это, поскольку можем статически проверить, что драйвер устанавливает соединения с файловой системой)». Что может такой драйвер сделать, кроме как накосячить со звуковой картой? Да ничего. Хоть он и может подвесить систему, неправильно программируя железо, такие баги очень редки. Он не может отправить нас в BSOD, потому что он не работает в ядре. Если он обрушится, то худшее, что может случиться — звук пропадёт до тех пор, пока драйвер не перезапустится и программы не возобновят свои соединения с драйвером.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ целом, мы можем определить некий набор привилегий (в Singularity это набор соединений, доступных SIP'у), которые могут быть опасны — и требовать подписывания только таких драйверов. Что это может быть? Доступ к системным или конфигурационным файлам, очевидно. Еще один случай это сетевые драйверы (как заDoS'ить что-то в обход файрвола? стать сетевым драйвером). К счастью, это редкость, когда драйверам требуется доступ к чему-то еще кроме железа и собственных конфигурационных данных, а сетевые драйверы неинтересны, поскольку стандартных драйверов достаточно большинству людей. Поэтому основная масса драйверов может быть безопасно написана, распространена и установлена без участия Microsoft, сохраняя при этом безопасность всей системы.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"singularity"},{"titleHtml":"микроядро"},{"titleHtml":"SIP"},{"titleHtml":"erlang"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F31605\u002F1a3f68ddb6c9a7d8dc1afde6d9d8dac4\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F31605\u002F1a3f68ddb6c9a7d8dc1afde6d9d8dac4\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F31605\\\u002F\"},\"headline\":\"Всё, что вы хотели знать о Singularity, но боялись спросить\",\"datePublished\":\"2008-06-13T10:12:19+04:00\",\"dateModified\":\"2019-04-05T15:02:11+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Виталик Гордон\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто н...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F31605\\\u002F#post-content-body\",\"about\":[\"h_programming\",\"f_develop\"],\"image\":[\"http:\\\u002F\\\u002Fwww.onlinekosten.de\\\u002Fnews\\\u002Fbilder\\\u002Fmicrosoft-singularity.jpg\"]}","metaDescription":"Мне бы хотелось написать что-нибудь про Microsoft Singularity. Это очень клёвая штука, и в IT сегодня все говорят про это. Вот обзор Singularity для тех, кто не хочет читать официальные...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"578296":{"id":"578296","timePublished":"2021-09-26T14:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вектор? Растр? А может — и то, и другое?","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Zach Leatherman","originalUrl":"https:\u002F\u002Fwww.zachleat.com\u002Fweb\u002Fvector-raster-split\u002F"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe36\u002F812\u002Fd3d\u002Fe36812d3de38eb3d479d7a13228717ef.png","speciality":"Пользователь"},"statistics":{"commentsCount":5,"favoritesCount":17,"readingCount":1471,"score":10,"votesCount":10},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"19802","alias":"graph_design","type":"collective","title":"Графический дизайн","titleHtml":"Графический дизайн","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"На этой неделе я столкнулся с интересным классом задач, для решения которых, как я теперь понимаю, можно было использовать гораздо более удачный подход и раньше. Но существует ли такой подход?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F578296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fge\u002Fkf\u002F1n\u002Fgekf1nauxn50imhrqyil4rlzj5m.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EИзображение для верхней части сайта\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРечь идёт о подготовке изображения, рассчитанного на использовании в верхней правой части сайта \u003Ca href=\"https:\u002F\u002Fjamstackconf.com\" rel=\"nofollow noopener noreferrer\"\u003Ejamstackconf.com\u003C\u002Fa\u003E. Мы, в маркетинговой команде Netlify, используем Figma. Первая моя попытка экспорта этого изображения для использования его на сайте оказалась далеко не самой удачной.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"графика"},{"titleHtml":"веб-разработка"},{"titleHtml":"ruvds_перевод"}]},"578794":{"id":"578794","timePublished":"2021-09-26T14:09:00+00:00","isCorporative":true,"lang":"ru","titleHtml":"Открытый проект для поиска генов устойчивости к антибиотикам от специалистов Университета ИТМО","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1111126","alias":"itmo","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1b4\u002F74b\u002Fb85\u002F1b474bb85c46d39a4cfbb9760513a7de.png","speciality":""},"statistics":{"commentsCount":0,"favoritesCount":4,"readingCount":573,"score":3,"votesCount":3},"hubs":[{"relatedData":null,"id":"19683","alias":"spbifmo","type":"corporative","title":"Блог компании Университет ИТМО","titleHtml":"Блог компании Университет ИТМО","isProfiled":false},{"relatedData":null,"id":"18081","alias":"opendata","type":"collective","title":"Открытые данные","titleHtml":"Открытые данные","isProfiled":true},{"relatedData":null,"id":"20696","alias":"study","type":"collective","title":"Учебный процесс в IT","titleHtml":"Учебный процесс в IT","isProfiled":false},{"relatedData":null,"id":"21912","alias":"biotech","type":"collective","title":"Биотехнологии","titleHtml":"Биотехнологии","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВчера мы обсудили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fspbifmo\u002Fblog\u002F579200\u002F\"\u003Eнаши свежие исследования\u003C\u002Fa\u003E и на этот раз возвращаемся к открытым проектам. Ранее мы говорили об инструменте для сравнительного анализа метагеномных данных \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fspbifmo\u002Fblog\u002F568338\u002F\"\u003EMetaFast\u003C\u002Fa\u003E. Сегодня на очереди \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fctlab\u002Fmetacherchant\"\u003EMetaCherchant\u003C\u002Fa\u003E — еще одно программное средство от коллектива МНЦ «Компьютерные технологии» Университета ИТМО для поиска генов устойчивости к антибиотикам.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F96d\u002F01a\u002F202\u002F96d01a202b151e103776472e067787b2.jpeg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F96d\u002F01a\u002F202\u002F96d01a202b151e103776472e067787b2.jpeg","fit":"cover","positionY":66.818181818182,"positionX":1.1538461538462}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"университет итмо"},{"titleHtml":"MetaCherchant"},{"titleHtml":"MetaFast"},{"titleHtml":"мне комьютерные технологии"},{"titleHtml":"анализ метагеномных данных"},{"titleHtml":"изменение микробиома"}]},"579296":{"id":"579296","timePublished":"2021-09-26T10:00:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Упрощаем эмуляцию X86 с помощью Live CD","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"ClassicHasClass","originalUrl":"https:\u002F\u002Fwww.talospace.com\u002F2021\u002F09\u002Fbetter-x8664-emulation-with-live-cds.html"}}],"author":{"id":"2488151","alias":"Bright_Translate","fullname":"Дмитрий Брайт","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff9c\u002Fff9\u002F7d9\u002Ff9cff97d9c0677af28dab451897f88e4.jpg","speciality":"Переводчик"},"statistics":{"commentsCount":7,"favoritesCount":17,"readingCount":1840,"score":8,"votesCount":8},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fmt\u002Fwb\u002F5s\u002Fmtwb5s5gaflvyaymdbaqbremhye.png\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nТипичный подход к эмулированию среды для запуска старых файлов с архитектурой i386 сопряжен со сложностями, в частности с поиском всех необходимых библиотек. Однако этой проблемы можно избежать, воспользовавшись заранее подготовленным образом Live CD, о чем в статье и пойдет речь на примере образа эмулятора Palm OS и игры Shogo: Mobile Armor Division.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruvds_перевод"},{"titleHtml":"QEMU"},{"titleHtml":"pose"},{"titleHtml":"palm"}]},"579482":{"id":"579482","timePublished":"2021-09-26T14:42:08+00:00","isCorporative":false,"lang":"ru","titleHtml":"Flutter: о разработке плагинов с интерфейсом ActivityAware","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"89053","alias":"Alexufo","fullname":"Александр Борисович","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F324\u002F18a\u002Fe1e\u002F32418ae1eab8433a87d3030a0dd78238.png","speciality":"IT анахорет"},"statistics":{"commentsCount":4,"favoritesCount":14,"readingCount":1056,"score":4,"votesCount":6},"hubs":[{"relatedData":null,"id":"375","alias":"java","type":"collective","title":"Java","titleHtml":"Java","isProfiled":true},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"17712","alias":"dart","type":"collective","title":"Dart","titleHtml":"Dart","isProfiled":true},{"relatedData":null,"id":"22176","alias":"flutter","type":"collective","title":"Flutter","titleHtml":"Flutter","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe16\u002F765\u002F973\u002Fe167659734194730d6a29337ffdc6163.gif\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ былые времена клиенты присылали цветные изображения документов со сканера по емейлу. Кто ленился или не мог — отправлял свой загранник по почте. С этим неплохо справлялось решение от ABBYY. Потом появились телефоны и люди стали присылать фотографии паспортов. ABBYY сломался. Перешли на решение от Smart Engines и даже с фотографиями, посланными через WhatsApp особых проблем не было. Но потом пошли умные мобилки с включенными по умолчанию водяными знаками типа «Xiaomi 9T» часто перекрывающими важнейшую часть паспорта. Вдобавок к этому наличие в кадре на фотографии пальцев и бликов тормозило общение с клиентом.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4i\u002Ff-\u002Fu1\u002F4if-u1lokfub1ia_cnk3iahm6fo.jpeg\" alt=\"Примеры паспортов, непригодных к распознаванию\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКогда паспорт распознается в видеопотоке на телефоне клиента, то этой проблемы так остро не стоит. Почему?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EМобильное ядро отображает рамку документа в процессе распознавания, не просто маску поверх видео, а именно рамку документа, находящегося в руках. По моим ощущениям, это дает человеку понимание, где не должно быть его пальцев. Вообще, это интересная тема для отдельного исследования.\u003C\u002Fli\u003E\r\n\u003Cli\u003EСистема использует механизм сатурации данными и готова выдать результат только после определенной уверенности в них.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"flutter"},{"titleHtml":"flutter app"},{"titleHtml":"dart"}]},"579542":{"id":"579542","timePublished":"2021-09-26T19:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Jetpack Compose — как легко построить UI на Android","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2713395","alias":"i15in","fullname":"Иван","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F25f\u002Fe4b\u002Ff94\u002F25fe4bf94867d9647a0ae809abf2e429.jpg","speciality":"Android developer"},"statistics":{"commentsCount":5,"favoritesCount":26,"readingCount":1194,"score":15,"votesCount":21},"hubs":[{"relatedData":null,"id":"18232","alias":"funcorp","type":"corporative","title":"Блог компании FUNCORP","titleHtml":"Блог компании FUNCORP","isProfiled":false},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"9188","alias":"ui","type":"collective","title":"Интерфейсы","titleHtml":"Интерфейсы","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ июле этого года вместе с Android Studio Arctic Fox вышла одна из долгожданных библиотек — Jetpack Compose. Она позволяет создавать пользовательский интерфейс в декларативном стиле и обещает быть революцией в построении UI.\u003C\u002Fp\u003E\u003Cp\u003EРазбираемся, так ли это на самом деле, какие у библиотеки преимущества и недостатки. Подробности — в статье.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка мобильных приложений"},{"titleHtml":"jetpack compose"},{"titleHtml":"ui"},{"titleHtml":"интерфейсы"},{"titleHtml":"android"},{"titleHtml":"kotlin"},{"titleHtml":"android studio"},{"titleHtml":"arctic fox"},{"titleHtml":"пользовательские интерфейсы"}]},"579804":{"id":"579804","timePublished":"2021-09-26T12:06:13+00:00","isCorporative":true,"lang":"ru","titleHtml":"ОС для работы со звуком — что она умеет","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2691015","alias":"mirhifi","fullname":"«Мир Hi-Fi»","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdfb\u002F713\u002Fedb\u002Fdfb713edbeed85de6588bd27d6c43229.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":21,"readingCount":3970,"score":9,"votesCount":11},"hubs":[{"relatedData":null,"id":"18822","alias":"audiomania","type":"corporative","title":"Блог компании Аудиомания","titleHtml":"Блог компании Аудиомания","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21918","alias":"soft","type":"collective","title":"Софт","titleHtml":"Софт","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОдин из предыдущих материалов мы посвятили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575076\u002F\"\u003Eинструментам\u003C\u002Fa\u003E для сборки цифровой звуковой рабочей станции (DAW). Еще мы говорили об \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575892\u002F\"\u003Eopen source проектах\u003C\u002Fa\u003E, в рамках которых можно сделать собственный синтезатор или педалборд.\u003C\u002Fp\u003E\u003Cp\u003EСегодня продолжим тему и расскажем об открытой ОС \u003Cstrong\u003EElk Audio\u003C\u002Fstrong\u003E, построенной на базе Linux. Она заточена под обработку звука на встраиваемых системах.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аудиомания"},{"titleHtml":"звук"},{"titleHtml":"Elk Audio"},{"titleHtml":"операционные системы"},{"titleHtml":"DAW"}]},"579980":{"id":"579980","timePublished":"2021-09-26T10:05:13+00:00","isCorporative":false,"lang":"ru","titleHtml":"Источник опорного напряжения — один из принципов и одна из реализаций","editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"269411","alias":"VT100","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":45,"readingCount":4178,"score":33,"votesCount":37},"hubs":[{"relatedData":null,"id":"21472","alias":"circuit-design","type":"collective","title":"Схемотехника","titleHtml":"Схемотехника","isProfiled":true},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21976","alias":"DIY","type":"collective","title":"DIY или Сделай сам","titleHtml":"DIY или Сделай сам","isProfiled":false},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Как не счесть «алмазов в каменных пещерах» — так не счесть случаев, когда необходимо втиснуть какую-нибудь характеристику «непрерывного» внешнего мира в «дискретное» нутро цифровых алгоритмов или извлечь обратно. Как помнят многие — это делается с помощью аналого-цифровых (АЦП, ADC) и цифро-аналоговых (ЦАП, DAC) преобразователей. Но только более посвящённые — обратят при этом внимание на источник опорного напряжения для преобразований (ИОН, Reference), который во многом определяет стабильность и абсолютную точность полученного результата. Конечно, есть некоторое число случаев, когда можно произвести измерение или генерацию отношения двух токов или напряжений. Тогда достаточно подать большее из них на опорный вход преобразователя. Но это — именно «некоторое число».\u003Cbr\u003E\r\n Желающих ознакомиться с одним из принципов и одной из реализаций температурно-стабильного ИОН — приглашаю под кат. Помощь в этом — предоставит симулятор \u003Ca href=\"https:\u002F\u002Fwww.analog.com\u002Fen\u002Fdesign-center\u002Fdesign-tools-and-calculators\u002Fltspice-simulator.html\" rel=\"nofollow noopener noreferrer\"\u003ELTSPICE\u003C\u002Fa\u003E (несмотря на то, что человек с КДПВ сказал: «My favorite CAD is solder»). Желательно — знание закона Ома, правил Кирхгофа, принципов работы биполярного транзистора (на уровне модели Эберса-Молла) и идеального операционного усилителя.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cb\u003EКДПВ1\u003C\u002Fb\u003E: Robert Allan Pease — the czar of bandgap. «Орденские цепи» — из ИМС стабилизаторов в корпусе TO-3.\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fj9\u002Ffk\u002Fui\u002Fj9fkuinqeb01dhjearz6ekwbahc.jpeg\"\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Источники питания"},{"titleHtml":"АЦП и ЦАП"},{"titleHtml":"схемотехника для чайников."}]},"580018":{"id":"580018","timePublished":"2021-09-26T09:06:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько стоит замена батарей в электромобилях?","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Bryce Gaton","originalUrl":"https:\u002F\u002Fthedriven.io\u002F2021\u002F07\u002F23\u002Fhow-much-are-replacement-batteries-for-electric-vehicles-in-australia\u002F"}}],"author":{"id":"1803585","alias":"GeorgKDeft","fullname":"дима","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F10f\u002Fd61\u002F864\u002F10fd6186430ede52ad4a1567dff9afdc.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":136,"favoritesCount":17,"readingCount":23764,"score":18,"votesCount":28},"hubs":[{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21914","alias":"energy","type":"collective","title":"Энергия и элементы питания","titleHtml":"Энергия и элементы питания","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E Мы приветствуем вопросы читателей об аккумуляторных электромобилях, зарядках и обо всем, что вы хотите узнать. Поэтому, пожалуйста, отправьте их, и мы заставим наших экспертов ответить и пригласить других людей внести свой вклад через раздел комментариев.  \u003C\u002Fp\u003E\u003Cp\u003EСегодняшний вопрос читателя: У меня есть вопрос относительно стоимости замены батареи в BEV, доступной в Австралии, и производитель сообщил срок службы до того, как потребуется замена?  \u003C\u002Fp\u003E\u003Cp\u003EЭта тема является ключевым моментом, который волнует многих покупателей перед покупкой BEV. С уважением, Андрей.\u003C\u002Fp\u003E\u003Cp\u003E Привет, Эндрю, да, вопрос о том, когда заменять аккумулятор электромобиля и о стоимости, важен - но, возможно, не так сильно, как думает широкая публика.  \u003C\u002Fp\u003E\u003Cp\u003EПервое: я разделю вопрос на две части. Какова вероятность того, что аккумулятор потребует замены в течение срока службы автомобиля? Какова стоимость возможной замены батареи? Потребуется ли замена аккумулятора в течение срока службы автомобиля? Чтобы ответить на этот вопрос, необходимо изучить две проблемы: Когда аккумулятор перестанет «подходить по назначению»? а также Как долго длится «жизнь автомобиля»?  \u003C\u002Fp\u003E\u003Cp\u003EВо-первых, значительная часть производителей дает гарантию на свои батареи как минимум на 70% емкости, оставшейся после 8 лет. Для Hyundai Kona с запасом хода 450–500 км по городу это соответствует минимальному диапазону 315–350 км в возрасте 8 лет. Для многих, если не для большинства, это означает зарядку, возможно, два раза в неделю, а не один раз в неделю. То же самое и для дальних путешествий - может быть, пара дополнительных остановок для перезарядки, например, по пути между Сиднеем и Брисбеном.  \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F937\u002F372\u002F95b\u002F93737295b6a08ba7a8b84ab4b0c417e2.jpg","buttonTextHtml":"Далее в цифрах о цене аккумуляторов сейчас","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F937\u002F372\u002F95b\u002F93737295b6a08ba7a8b84ab4b0c417e2.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аккумуляторы"},{"titleHtml":"замена"},{"titleHtml":"электромобили"},{"titleHtml":"цена"}]},"580038":{"id":"580038","timePublished":"2021-09-26T13:35:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"KODI: собираем удобный и функциональный медиацентр для дома. Часть 9. Spotify","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"2644801","alias":"arboozof","fullname":"Роман","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff76\u002F452\u002F3d5\u002Ff764523d55be8ef6fc4307ea3158dadf.png","speciality":"IT\u002FRetail"},"statistics":{"commentsCount":4,"favoritesCount":27,"readingCount":3270,"score":8,"votesCount":8},"hubs":[{"relatedData":null,"id":"36","alias":"linux","type":"collective","title":"Настройка Linux","titleHtml":"Настройка Linux","isProfiled":true},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"21908","alias":"smartphones","type":"collective","title":"Смартфоны","titleHtml":"Смартфоны","isProfiled":false},{"relatedData":null,"id":"21946","alias":"video_tech","type":"collective","title":"Видеотехника","titleHtml":"Видеотехника","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПродолжаем тему интеграции в наш медиацентр онлайн-сервисов прослушивания музыки. Ранее мы уже «подружили» медиацентр KODI с сервисом Яндекс.Музыка. Сегодня на очереди не менее популярный сервис – Spotify.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","buttonTextHtml":"Читать дальше &rarr;","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","fit":"cover","positionY":0,"positionX":14.74358974359}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"kodi"},{"titleHtml":"xbmc"},{"titleHtml":"ubuntu"},{"titleHtml":"kubuntu"},{"titleHtml":"music"},{"titleHtml":"spotify"},{"titleHtml":"addons"},{"titleHtml":"дополнения"},{"titleHtml":"тв"}]},"580046":{"id":"580046","timePublished":"2021-09-26T14:14:11+00:00","isCorporative":true,"lang":"ru","titleHtml":"Дайджест интересных материалов для мобильного разработчика #412 (20 — 26 сентября)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1327826","alias":"ProductivityInside","fullname":"Productivity Inside","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe7d\u002Fd1f\u002F7ae\u002Fe7dd1f7ae26609981edce6deabc5d751.png","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":5,"readingCount":784,"score":3,"votesCount":5},"hubs":[{"relatedData":null,"id":"20886","alias":"productivity_inside","type":"corporative","title":"Блог компании Productivity Inside","titleHtml":"Блог компании Productivity Inside","isProfiled":false},{"relatedData":null,"id":"548","alias":"ios_dev","type":"collective","title":"Разработка под iOS","titleHtml":"Разработка под iOS","isProfiled":true},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"В этой подборке 0-day уязвимости в iOS и скорость сборки для нее же, StoreKit 2 и Swift 5.5, тестовая ферма и правильная валидация для Android, битва снифферов, игры со шрифтами, подготовка к FAANG, релизные циклы и многое другое!\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fox\u002Fbt\u002Ft8\u002Foxbtt83_xsb4ypx5ozls33guvjy.jpeg\"\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест разработчика"},{"titleHtml":"uix"},{"titleHtml":"аналитика"},{"titleHtml":"макетинг мобильных приложений"}]},"580048":{"id":"580048","timePublished":"2021-09-26T14:22:36+00:00","isCorporative":false,"lang":"ru","titleHtml":"Будь строже к себе: как ограничения помогают сделать код лучше","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"2787821","alias":"ZeBrains_team","fullname":"Станислав Маслов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fae3\u002F3ee\u002F4f1\u002Fae33ee4f1a117aeeab42ec5a9e2eba25.jpg","speciality":"директор продакшена в IT-компании"},"statistics":{"commentsCount":10,"favoritesCount":33,"readingCount":2357,"score":5,"votesCount":13},"hubs":[{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true},{"relatedData":null,"id":"20726","alias":"productpm","type":"collective","title":"Управление продуктом","titleHtml":"Управление продуктом","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EЕсли вам приходилось задумываться о построении эффективной экосистемы проекта и определении ролей тимлида и разработчика — статья Артема Прозорова из ZeBrains для вас. \u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EПредлагаю вам задуматься над одним вопросом. Но не спешите с ответом, потому что он не так очевиден, как может показаться:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКакая из команд может реализовать более технически стабильный продукт?&nbsp;\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №1:\u003C\u002Fstrong\u003E Проектный менеджер, аналитик, тестировщик и несколько разработчиков, у каждого из которых за плечами минимум три года опыта. Все работают в одном офисе, посвящая свое время одному проекту в режиме fulltime.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №2:\u003C\u002Fstrong\u003E Один сильный разработчик. Ему помогают множество не знакомых между собой людей из разных часовых поясов. У каждого — свой набор компетенций и уровень опыта. Работой над проектом участники занимаются в свободном режиме, по несколько часов в неделю.\u003C\u002Fp\u003E\u003Cp\u003E* * *\u003C\u002Fp\u003E\u003Cp\u003EОтвет на этот вопрос получим к концу статьи.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fefe\u002F413\u002Feb2\u002Fefe413eb27c391cfcfef0484e6997aab.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"управление проектами"},{"titleHtml":"управление продуктом"},{"titleHtml":"управление командой разработки"},{"titleHtml":"управление командами разработчиков"},{"titleHtml":"тимлид"},{"titleHtml":"тимлиды и разработчики"}]},"580052":{"id":"580052","timePublished":"2021-09-26T15:29:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Почему экология не может быть плохой?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2568695","alias":"phanerozoi_evidence","fullname":"Фанерозой","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdcc\u002F862\u002F561\u002Fdcc862561429f2ed85090ac53e39cf7d.jpg","speciality":"Биологи, врач, научный популяризатор, палеонтолог"},"statistics":{"commentsCount":33,"favoritesCount":15,"readingCount":2743,"score":5,"votesCount":21},"hubs":[{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22750","alias":"biology","type":"collective","title":"Биология","titleHtml":"Биология","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cem\u003EСо второй половины ХХ в мы всё чаще слышим из средств массовой информации выражения «плохая экология», «сохранить экологию», «экология строительных материалов». Но, к сожалению, не многие знают, что такое «экология» на самом деле. Для разгадки тайн экологии нам предстоит окунуться в удивительный мир науки...\u003C\u002Fem\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","fit":"cover","positionY":29.545454545455,"positionX":1.4102564102564}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"виды"},{"titleHtml":"охрана окружающей среды"},{"titleHtml":"мифы"},{"titleHtml":"экосистема"},{"titleHtml":"биогеоценоз"},{"titleHtml":"экология"},{"titleHtml":"экосистемы"},{"titleHtml":"биоценозы"},{"titleHtml":"биология"},{"titleHtml":"вирусы"}]},"580058":{"id":"580058","timePublished":"2021-09-26T16:31:38+00:00","isCorporative":false,"lang":"ru","titleHtml":"FOSS News №90 — дайджест материалов о свободном и открытом ПО за 20—26 сентября 2021 года","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1515607","alias":"Gim6626","fullname":"Дмитрий Винокуров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F390\u002F2c3\u002F669\u002F3902c3669d69c0b80b41b876d772a113.jpg","speciality":"Инженер-программист"},"statistics":{"commentsCount":5,"favoritesCount":1,"readingCount":1210,"score":3,"votesCount":5},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjh\u002Fie\u002Fz5\u002Fjhiez5jcobuwxp87xogmfnk_o1g.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Cp\u003EВсем привет!\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EПродолжаем дайджесты новостей и других материалов о свободном и открытом ПО и немного о железе. Всё самое главное про пингвинов и не только, в России и мире. \u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EГлавные темы нового выпуска:\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EВ Linux Foundation отмечают острый спрос компаний на профессиональных опенсорс-разработчиков.\u003C\u002Fli\u003E\r\n\u003Cli\u003EСрок поддержки Ubuntu 14.04 и 16.04 увеличен до 10 лет.\u003C\u002Fli\u003E\r\n\u003Cli\u003E1 октября в Москве состоится конференция Russian Open Source Summit.\u003C\u002Fli\u003E\r\n\u003Cli\u003EHackerOne реализовал выплату вознаграждений за выявление уязвимостей в открытом ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EGoogle меняет модель развития Android на более близкую к ядру Linux.\u003C\u002Fli\u003E\r\n\u003Cli\u003EArm разработал архитектуру и инструменты для транспортных средств со значительной ролью ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредложения экспертов «Базальт СПО» включены в проект государственной стратегии развития СПО в России.\u003C\u002Fli\u003E\r\n\u003Cli\u003EМихаил Мишустин «анонсировал» российский аналог GitHub.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредставлен модуль ядра, способный в разы ускорить OpenVPN.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПроект Waydroid развивает пакет для запуска Android в дистрибутивах GNU\u002FLinux.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u003E\r\n\u003Cp\u003EИ многое другое…\u003C\u002Fp\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"новости"},{"titleHtml":"open source"},{"titleHtml":"free software"},{"titleHtml":"linux"},{"titleHtml":"foss news"}]},"580066":{"id":"580066","timePublished":"2021-09-26T18:12:37+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько мы переплачиваем за сервера используя Ruby on Rails","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"941194","alias":"motoroller95","fullname":"Искандар Гохар","avatarUrl":"","speciality":"Ruby on Rails developer at IT-territory"},"statistics":{"commentsCount":32,"favoritesCount":2,"readingCount":2045,"score":7,"votesCount":9},"hubs":[{"relatedData":null,"id":"224","alias":"ruby","type":"collective","title":"Ruby","titleHtml":"Ruby","isProfiled":true},{"relatedData":null,"id":"8279","alias":"ror","type":"collective","title":"Ruby on Rails","titleHtml":"Ruby on Rails","isProfiled":true},{"relatedData":null,"id":"17822","alias":"parallel_programming","type":"collective","title":"Параллельное программирование","titleHtml":"Параллельное программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F577948\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпрошлой\u003C\u002Fa\u003E статье я разбирался с тем как работает GIL, а сегодня меня захватила идея узнать насколько дорого обходится этот GIL для кода, который исполняется у нас на бэкенде. Для этого я решил пропатчить MRI и добавить пару переменных, в которые буду засекать сколько времени поток реально выполнял код, а сколько ничего не делал и ждал пока ему удастся завладеть локом. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruby"},{"titleHtml":"gil"}]},"580080":{"id":"580080","timePublished":"2021-09-26T19:12:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Дайджест свежих материалов из мира фронтенда за последнюю неделю №486 (20 — 26 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"59347","alias":"alexzfort","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd2a\u002Fe8a\u002F5ac\u002Fd2ae8a5ac9876f838ebdd45f3ea3bc3b.png","speciality":""},"statistics":{"commentsCount":1,"favoritesCount":9,"readingCount":1086,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"307","alias":"css","type":"collective","title":"CSS","titleHtml":"CSS","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"17103","alias":"html5","type":"collective","title":"HTML","titleHtml":"HTML","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Предлагаем вашему вниманию подборку с ссылками на новые материалы из области фронтенда и около него.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fec\u002F0x\u002Fkx\u002Fec0xkxfr5jd-rci1wjo9bmr4cns.jpeg\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"фронтенд"},{"titleHtml":"css"},{"titleHtml":"js"},{"titleHtml":"es6"},{"titleHtml":"vue"},{"titleHtml":"react"},{"titleHtml":"angular"},{"titleHtml":"ember"},{"titleHtml":"html5"},{"titleHtml":"браузеры"},{"titleHtml":"ссылки"}]},"580084":{"id":"580084","timePublished":"2021-09-26T19:30:13+00:00","isCorporative":false,"lang":"ru","titleHtml":"Telegram Bots vs Google Forms","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2705023","alias":"dm_aq","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":1,"favoritesCount":8,"readingCount":1251,"score":2,"votesCount":2},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EGoogle forms отличный инструмент для решения простых организационных задач, например, сбор информации для регистрации людей на небольшое мероприятие. Но что если мы попытаемся решить эту задачу по другому? Например через telegram.&nbsp;\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"telegrambot"},{"titleHtml":"telegram"},{"titleHtml":"kotlin"},{"titleHtml":"spring"}]},"580086":{"id":"580086","timePublished":"2021-09-26T19:37:10+00:00","isCorporative":false,"lang":"ru","titleHtml":"Термо принтер и JavaScript","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"1709955","alias":"IIIarp","fullname":"Сергей Шарпов","avatarUrl":"","speciality":"Веб разработчик"},"statistics":{"commentsCount":23,"favoritesCount":17,"readingCount":2191,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"84","alias":"crazydev","type":"collective","title":"Ненормальное программирование","titleHtml":"Ненормальное программирование","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПриобрел я на днях термопринтер (кассовый аппарат, если изволите) жене для магазина и решил что смогу его обуздать как истинный программист и сделать свою веб кассу, вместо того, что-бы использовать платные решения, ведь задача простая, печатать чеки, но это оказалось не так то и просто...\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"термопринтер"},{"titleHtml":"javascript"},{"titleHtml":"webusb"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":239,"score":4,"votesCount":4},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Сергей Просин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Инженер. Энтузиаст"},"statistics":{"commentsCount":0,"favoritesCount":17,"readingCount":705,"score":7,"votesCount":7},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":8,"favoritesCount":13,"readingCount":1984,"score":12,"votesCount":12},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["579980","580018","579542","580092","580086","580080","578296","579804","580038","579296","580090","580066","580052","580048","580088","579482","580058","580046","578794","580084"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":2},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["568958","551164","543782"],"similarListRefs":{"543782":{"id":"543782","timePublished":"2021-03-22T18:41:33+00:00","isCorporative":false,"lang":"ru","titleHtml":"Привычный ужас в SIP, или о том, как не надо проектировать сетевые протоколы. Часть 1 — синтаксис и морфология","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"88375","alias":"netch80","fullname":"Valentin Nechayev","avatarUrl":null,"speciality":"Программист (backend\u002Fсети)"},"statistics":{"commentsCount":21,"favoritesCount":39,"readingCount":8375,"score":23,"votesCount":23},"hubs":[{"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true},{"id":"17189","alias":"itstandarts","type":"collective","title":"IT-стандарты","titleHtml":"IT-стандарты","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЗдравствуйте, меня зовут Валентин, и я задолбался. Нет-нет, вы всё ещё на Хабре.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003C\u002Fp\u003E\u003Cp\u003EВсе технологии телефонии ужасны.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nБольшинство технологий разработки IETF ужасны. Может, не ужасны-ужасны, как ISO…\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКогда они смешиваются… ну вы в курсе. Или ещё нет? Получается SIP.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EЭто пост ворчания, техническая суть которого может быть полезна паре сотен человек. Но, to grumble is human.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fw8\u002Fx9\u002F_z\u002Fw8x9_zm8-zggul9elrtycef_1wk.png\"\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"551164":{"id":"551164","timePublished":"2021-07-19T06:05:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Работа SIP\u002FH.323-терминала ВКС с ZOOM и Skype в USB-режиме для ПК","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"86534","alias":"Usikoff","fullname":"Кирилл","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F895\u002F51a\u002Fb66\u002F89551ab66f8923c3c03ca0ca5cc7d060.jpg","speciality":"Видеонаблюдение и видеоконференцсвязь"},"statistics":{"commentsCount":0,"favoritesCount":15,"readingCount":1872,"score":8,"votesCount":8},"hubs":[{"id":"19691","alias":"stss","type":"corporative","title":"Блог компании STSS","titleHtml":"Блог компании STSS","isProfiled":false},{"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"id":"21898","alias":"hardware","type":"collective","title":"Компьютерное железо","titleHtml":"Компьютерное железо","isProfiled":false},{"id":"21946","alias":"video_tech","type":"collective","title":"Видеотехника","titleHtml":"Видеотехника","isProfiled":false},{"id":"22294","alias":"video_conferencing","type":"collective","title":"Видеоконференцсвязь","titleHtml":"Видеоконференцсвязь","isProfiled":false}],"flows":[{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп","titleHtml":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта статья познакомит Вас с полезным и востребованным функционалом терминалов Yealink серии MeetingEye - работа с ZOOM, Skype и прочими программными решениями ВКС в USB-режиме для ПК. Сами терминалы вызывают не меньший интерес, и будут описаны подробно в следующих статьях. А сейчас рассмотрим только BYOD-режим и его возможности.\u003C\u002Fp\u003E\u003Cp\u003EСуть этого функционала заключается в том, что классический SIP\u002FH.323-терминал ВКС в один клик превращается в USB-периферию для ПК.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb0f\u002F0ba\u002F441\u002Fb0f0ba441f3aa9755281326704ba3cbc.png","buttonTextHtml":"Далее к описанию","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb0f\u002F0ba\u002F441\u002Fb0f0ba441f3aa9755281326704ba3cbc.png","fit":"cover","positionY":22.954545454545,"positionX":100}},"status":"published","plannedPublishTime":null,"checked":null},"568958":{"id":"568958","timePublished":"2021-07-21T16:37:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"SMS через SIP messaging в Asterisk","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"1793533","alias":"HellKaim","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":5,"favoritesCount":39,"readingCount":2549,"score":1,"votesCount":1},"hubs":[{"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"id":"17707","alias":"asterisk","type":"collective","title":"Asterisk","titleHtml":"Asterisk","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПо немногочисленным просьбам трудящихся я расскажу как заворачивать GSM SMS из sip_dongle модуля для Asterisk в sip messaging с последующей маршрутизацией.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cu\u003EНемного ТЗ\u003C\u002Fu\u003E\u003C\u002Fp\u003E\u003Cp\u003EЕсть центральный узел Asterisk, на котором живет логика и пользователи (extensions). К нему подключаются через PJSIP другие оконечные Asterisk`и на которых висит по несколько GSM модемов.\u003Cbr\u003E\u003Cbr\u003E- Одна из задач: принимать и отправлять GSM SMS сообщения правильно маршрутизируя их по номеру получателя.\u003Cbr\u003E\u003Cbr\u003E- Вторая подзадача: дать нашим пользователям (extensions) возможность слать друг другу текстовые сообщения.\u003C\u002Fp\u003E\u003Cp\u003EИтак. \u003Cu\u003EЧто тут сложного и в чем подвох?\u003C\u002Fu\u003E\u003C\u002Fp\u003E\u003Cp\u003EКогда у вас 1 модем и 1 extension все очень просто. Когда у вас 2 модема и 1 extension задача все еще простая.\u003Cbr\u003E\u003Cbr\u003EКогда у вас “многое ко многим” — вот тут и кроется основна сложность. Т.е. нам нужно не просто понимать на какой конкретно модем какому конкретно Asterisk`у передать исходящее SMS, но и куда направить входящее из GSM сети сообщение. А так же что делать, если мы внутри себя не можем сообщения доставить.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cem\u003EОбозначения:\u003Cbr\u003E\u003C\u002Fem\u003E\u003Cbr\u003E - gsmru 10.8.0.11 — оконечный сервер Asterisk на котором живут модемы\u003Cbr\u003E - 10.8.0.10 — центральный сервер Asterisk на котором крутится вся логика\u003Cbr\u003E - 101;102;103 - пользователи (\u003Cem\u003Eextensions)\u003C\u002Fem\u003E\u003Cbr\u003E - sip - протокол ходит по 80му порту (так исторически сложилось)\u003C\u002Fp\u003E\u003Cp\u003EНачнем разворачивать цепочку от оконечного Asterisk (gsmru) с модемами в сторону центрального сервера. Это канал приема сообщений и проще его объяснять именно так.\u003C\u002Fp\u003E\u003Cp\u003EРаботать с SMS можно по разному, но в моем случае я использую sqlite, который у меня \u003Cem\u003E\u002Fvar\u002Flib\u002Fasterisk\u002Fsmsdb.sqlite3.\u003C\u002Fem\u003E Это сделано так чтобы можно было легко оперировать сообщениями, создавать очереди доставки в обе стороны и не переживать за всякие проблемы вида «я записал что-то в файл и мне нужно успеть это вычитать пока туда не записалось следующее, а заодно проверить что там нет «патча Бармина».\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F26f\u002Fd70\u002F9ab\u002F26fd709aba7f56aba229c8eb7f1415a9.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F26f\u002Fd70\u002F9ab\u002F26fd709aba7f56aba229c8eb7f1415a9.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"alex_blank":{"scoreStats":{"score":118.1,"votesCount":421},"rating":0.1,"relatedData":null,"contacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fxpl\u002F","value":"xpl"},{"title":"Medium","url":"https:\u002F\u002Fmedium.com\u002F@xpl","value":"xpl"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fv_gordon","value":"v_gordon"}],"authorContacts":[{"title":"Github","url":"https:\u002F\u002Fgithub.com\u002Fxpl\u002F","value":"xpl"},{"title":"Medium","url":"https:\u002F\u002Fmedium.com\u002F@xpl","value":"xpl"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fv_gordon","value":"v_gordon"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"29854","alias":"alex_blank","fullname":"Виталик Гордон","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe9d\u002F510\u002F841\u002Fe9d510841079e37e6cafb6a0325aa92f.jpg","speciality":"незаслуженный народный артист™"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
