<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Разработка модуля для Apache 2.x / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/50909\/"},"headline":"Разработка модуля для Apache 2.x","datePublished":"2009-02-02T18:51:47+03:00","dateModified":"2009-02-02T20:01:49+03:00","author":{"@type":"Person","name":"Михаил Стадник"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Предисловие  Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в п...","url":"https:\/\/habr.com\/ru\/post\/50909\/#post-content-body","about":["h_webdev","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/50909\/07d6febf55a1024acedf77f9a405f480\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Разработка модуля для Apache 2.x" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Разработка модуля для Apache 2.x" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Разработка модуля для Apache 2.x" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Предисловие

Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Предисловие

Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Предисловие

Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Предисловие

Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Предисловие

Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="50909" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2009-02-02T15:51:47.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/50909/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/50909/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/50909/07d6febf55a1024acedf77f9a405f480/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Mikhus/" title="Mikhus" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/6e4/8eb/cc7/6e48ebcc7a0a442dd08af1ecd52e5ee6.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/Mikhus/" class="tm-user-info__username">
      Mikhus
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2009-02-02T15:51:47.000Z" title="2009-02-02, 18:51">2  февраля  2009 в 18:51</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Разработка модуля для Apache 2.x</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/webdev/" class="tm-article-snippet__hubs-item-link"><span>Разработка веб-сайтов</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><h2>Предисловие</h2><br/>
<br/>
Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я столкнулся с тем фактом, что по-русски об этом мало кто рассказывает. Поэтому и возникла идея написать эту статью. Ниже я постараюсь как можно подробнее поделиться накопленным опытом, пошагово описать этапы создания модуля и приведу различные полезные ссылки по данной теме.<br/>
<br/>
<a name="habracut"></a><br/>
<br/>
<h2>Введение</h2><br/>
<br/>
Первое, с чем сталкивается разработчик-новичок, никогда не сталкивавшийся с написанием модулей для Apache, это вопрос — «С чего же начать?».<br/>
<br/>
Начните с осознания того факта, что, без лишних телодвижений, вам придется иметь дело с чистым языком C безо всяких ++. И, возможно, это и к лучшему.<br/>
<br/>
Далее проверьте, установлен ли в вашей системе APXS, если нет — установите. В системах Debian (Ubuntu) Linux это можно сделать достаточно просто, достаточно запустить команду:<br/>
<br/>
<pre>apt-get install apache2-threaded-dev</pre><br/>
<br/>
или<br/>
<br/>
<pre>apt-get install apache2-prefork-dev</pre><br/>
в зависимости от соответствующей версии Apache, которую вы используете.<br/>
<br/>
Это вам понадобиться для сборки и компиляции модуля.<br/>
<br/>
Теперь все готово, и можно приступить непосредственно к разработке самого модуля. Мы будем изучать все на примере, поэтому давайте создадим небольшой модуль, который приводит все тэги HTML-страниц, которые отдает веб-сервер, к верхнему регистру.<br/>
<br/>
Итак, назовем наш модуль без лишних хитройстей — uptags. Создадим одноименную папку и в ней исходный файл mod_uptags.c, а также файлы README и config.m4. Вот так будет выглядеть наша структура файлов:<br/>
<br/>
<pre>uptags/
    config.m4
    mod_uptags.c
    README</pre><br/>
<br/>
Можете сразу расположить данные файлы в исходниках Apache, а можете сделать это и после, действуйте по своему усмотрению.<br/>
<br/>
В принципе, для успешного создания модуля нам бы хватило лишь файла с исходным кодом C, тем не менее README будет, как минимум, хорошим тоном, а config.m4 пригодится для автоматической сборки модуля при компиляции всего веб-сервера.<br/>
<br/>
API к модулям Apache предполагает реализацию нескольких функций и структур, которые логически можно отнести к нескольким группам, которые рассмотрены ниже.<br/>
<br/>
Однако прежде, чем мы приступим к разбору функций, следует подключить необходимые библиотеки и объявить сам модуль в нашем исходнике mod_uppertags.c:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black">#include <font color="#A31515">"apr_general.h"</font><br/>
#include <font color="#A31515">"apr_lib.h"</font><br/>
#include <font color="#A31515">"apr_buckets.h"</font><br/>
#include <font color="#A31515">"apr_strings.h"</font><br/>
#include <font color="#A31515">"ap_config.h"</font><br/>
#include <font color="#A31515">"util_filter.h"</font><br/>
#include <font color="#A31515">"httpd.h"</font><br/>
#include <font color="#A31515">"http_config.h"</font><br/>
#include <font color="#A31515">"http_request.h"</font><br/>
#include <font color="#A31515">"http_core.h"</font><br/>
#include <font color="#A31515">"http_protocol.h"</font><br/>
#include <font color="#A31515">"http_log.h"</font><br/>
#include <font color="#A31515">"http_main.h"</font><br/>
#include <font color="#A31515">"util_script.h"</font><br/>
#include <font color="#A31515">"http_core.h"</font><br/>
#include &lt;<font color="#0000ff">string</font>.h><br/>
#include &lt;stdio.h><br/>
#include &lt;ctype.h><br/>
#include &lt;sys/stat.h><br/>
<br/>
module AP_MODULE_DECLARE_DATA uptags_module;</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<h2>Функции управления конфигурацией</h2><br/>
Как вы знаете, Apache — гибко настраиваемый веб-сервер.<br/>
<br/>
С точки зрения системного администратора существуют несколько типов директив, которые могут быть определены в различных областях видимости, таких как глобальный конфиг сервера, &lt;VirtualHost>, &lt;Directory> (а также &lt;Files> или &lt;Location>) и файлы .htaccess.<br/>
<br/>
Конфликты директив, определенные в различных областях видимости, по-умолчанию разбираются самим сервером по таким правилам:<br/>
<br/>
<ul>
<li><strong>Основной конфиг</strong><br/>
Директивы в данном файле (за исключением определенных в некоторых контейнерах) применяются глобально. Большинство директив могут быть использованы здесь.</li>
<li><strong>Виртуальный хост &lt;VirtualHost></strong><br/>
Каждый виртуальный хост может иметь свой (виртуальный) серверный конфиг внутри контейнера &lt;VirtualHost>. Директивы, который могут быть использованы в глобальном конфиге, могут быть использованы и здесь и наоборот.</li>
<li><strong>Директория</strong><br/>
Контейнеры &lt;Directory>, &lt;Files> и &lt;Location> определяют на разных уровнях как могут быть переопределены глобальные настройки. В данной статье именно на них мы будем ссылаться как на конфиги директорий.</li>
<li><strong>Файлы .htaccess</strong><br/>
Также относятся к настройкам директорий. В данных файлах пользователи могут определять настройки директив самостоятельно, на основе значения директивы AllowOverride, установленной для каждого из них администратором сервера.</li>
</ul><br/>
<br/>
При написании модуля, вам под силу самостоятельно определять директивы и контейнеры, определять области их видимости и изменять правила их переопределения.<br/>
<br/>
Для этого, в первую очередь, вам необходимо создать соответствующие структуры, в которых данные конфигурации будут храниться в памяти. Следует отметить, что в общем случае, вы можете задавать отдельные структуры для серверной конфигурации и конфигурации директорий. Делать это следует в том случае, если наборы директив отличаются. В противном случае, вы можете воспользоваться одной и той же структурой для хранения настроек.<br/>
<br/>
Поскольку модуль, который мы создаем достаточно прост и будет обладать минимальными настройками, мы пойдем по простому пути, и объединим оба типа настроек (серверную и для директорий) в одну структуру данных. Давайте определим флаг, позволяющий включать и выключать работу нашего модуля:<br/>
<br/>
<blockquote>engine = On/Off — будет позволять включать/выключать работу всего модуля.<br/>
</blockquote><br/>
<br/>
Т.е., наша структура будет выглядеть следубщим образом:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black">typedef <font color="#0000ff">struct</font> uptags_cfg {<br/>
  <font color="#0000ff">int</font> engine;<br/>
} uptags_cfg;</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Теперь для каждого отдельного типа конфигурации нам нужно написать функции получения данных:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Данная функция возвращет структуру конфигурации директории</font><br/>
<font color="#008000"> * данного модуля для текущего запроса</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> uptags_cfg *uptags_dconfig( <font color="#0000ff">const</font> request_rec *r) {<br/>
  <font color="#0000ff">return</font> (uptags_cfg *) ap_get_module_config( r->per_dir_config, &amp;uptags_module);<br/>
}<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Данная функция возвращет структуру конфигурации сервера</font><br/>
<font color="#008000"> * данного модуля</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> uptags_cfg *uptags_sconfig( <font color="#0000ff">const</font> server_rec *s) {<br/>
  <font color="#0000ff">return</font> (uptags_cfg *) ap_get_module_config( s->module_config, &amp;uptags_module);<br/>
}<br/>
</font><br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Теперь самое время позаботиться о настройках по-умолчанию. Для этого напишем две следующие функции:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Инициализация настроек по-умолчанию для директории</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> *uptags_create_dir_config( apr_pool_t *p, <font color="#0000ff">char</font> *dirspec) {<br/>
  uptags_cfg *cfg;<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Выделим память в пуле соединения для структуры настроек</font><br/>
<font color="#008000">   */</font><br/>
  cfg = (uptags_cfg *) apr_pcalloc( p, <font color="#0000ff">sizeof</font>( uptags_cfg));<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Теперь определим значения по умолчанию для наших настроек</font><br/>
<font color="#008000">   */</font><br/>
  cfg->engine = 1;<br/>
<br/>
  <font color="#0000ff">return</font> (<font color="#0000ff">void</font> *) cfg;<br/>
}<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Для серверных настроек определим аналогичную функцию</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> *uptags_create_server_config( apr_pool_t *p, server_rec *s) {<br/>
  uptags_cfg *cfg;<br/>
  cfg = (uptags_cfg *) apr_pcalloc( p, <font color="#0000ff">sizeof</font>( uptags_cfg));<br/>
<br/>
  cfg->engine = 1;<br/>
<br/>
  <font color="#0000ff">return</font> (<font color="#0000ff">void</font> *) cfg;<br/>
}</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Поскольку в структуре веб-сервера может существовать, фактически, несколько конфигураций в разных блоках (например, для конфигурации директории в структуре виртуального хоста может быть создана запись в блоке &lt;Directory>&lt;/Directory>, &lt;Files>&lt;/Files> или &lt;Location>&lt;/Location>, и, одновременно, может быть создан файл .htaccess), нам может понадобиться определить собственные правила объединения данных конфигов. Слава богу, API Apache позволяет нам это сделать достаточно просто, определив правила мерджинга серверных настроек и настроек директорий. Для этого достаточно определить следующие функции:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Данная функция будет вызвана для объединения конфигураций директории</font><br/>
<font color="#008000"> * Именно с помощью этой функции вы можете определить свои собственные</font><br/>
<font color="#008000"> * правила объединения</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> *uptags_merge_dir_config( apr_pool_t *p, <font color="#0000ff">void</font> *parent_conf, <font color="#0000ff">void</font> *newloc_conf) {<br/>
  uptags_cfg *megred_conf = (uptags_cfg *) apr_pcalloc( p, <font color="#0000ff">sizeof</font>( uptags_cfg));<br/>
  uptags_cfg *pconf = (uptags_cfg *) parent_conf;<br/>
  uptags_cfg *nconf = (uptags_cfg *) newloc_conf;<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">  * ...</font><br/>
<font color="#008000">  * Здесь следует определить правила объединения конфигов</font><br/>
<font color="#008000">  */</font> <br/>
<br/>
  <font color="#0000ff">return</font> (<font color="#0000ff">void</font> *) merged_conf;<br/>
}<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Аналогично для серверной конфигурации</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> *uptags_merge_server_config( apr_pool_t *p, <font color="#0000ff">void</font> *srv1conf, <font color="#0000ff">void</font> *srv2conf) {<br/>
  uptags_cfg *merged_config = (uptags_cfg *) apr_pcalloc( p, <font color="#0000ff">sizeof</font>( uptags_cfg));<br/>
  uptags_cfg *s1conf = (uptags_cfg *) srv1conf;<br/>
  uptags_cfg *s2conf = (uptags_cfg *) srv2conf;<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">  * ...</font><br/>
<font color="#008000">  * Здесь следует определить правила объединения конфигов</font><br/>
<font color="#008000">  */</font> <br/>
<br/>
  <font color="#0000ff">return</font> (<font color="#0000ff">void</font> *) merged_config;<br/>
}</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Тем не менее, учтите, что правила объединения следует применять только в том случае, если правила сервера по-умолчанию вас не устраивают, т.е. вы хотите их изменить. В противном случае, просто не пишите данные функции и все произойдет само собой.<br/>
<br/>
<h2>Определение директив (команд) конфигурации</h2><br/>
<br/>
После того, как мы определили структуру нашей конфигурации и функции для ее наполнения, объединения о обработки, совсем не лишним будет определить сами директивы так, так они должны будут задаваться в конфигах:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#0000ff">static</font> command_rec uptags_directives[] = {<br/>
  AP_INIT_FLAG(<br/>
    <font color="#A31515">"UptagsEngine"</font>,<br/>
    ap_set_flag_slot,<br/>
    (<font color="#0000ff">void</font> *) APR_OFFSETOF( uptags_cfg, engine),<br/>
    OR_OPTIONS,<br/>
    <font color="#A31515">"uptags module switcher"</font><br/>
  ),<br/>
<br/>
  {NULL}<br/>
};</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Здесь мы немного остановимся для того, чтобы рассмотреть различные возможности, которые предоставляет API веб-сервера Apache для обработки директив конфигурации.<br/>
<br/>
Определение структуры директив всегда заканчивается NULL-структурой, а макросы реализации определены в файле http_config.h. AP_INIT_FLAG — один из многих таких макросов, в целом же не-NULL структура содержит следующие элементы:<br/>
<br/>
<ul>
<li>Имя директивы — это то, как директива будет задаваться в конфигах (по сути маппинг строк из конфигов и созданной нами ранее структуры в памяти — это именно это место)</li>
<li>Функция, реализующая директиву. ap_set_flag_slot — стандартная функция Apache API, которая разбирает параметр-выключатель или флаг (как раз то, что нам подходит — On/Off)</li>
<li>Указатель на структуру данных (с помощью APR_OFFSETOF мы маппим данные в определенную нами структуру)</li>
<li>Макрос, определяющий, где разрешена директива (OR_OPTIONS — директива разрешена для директорий и файлов .htaccess, если значение директивы AllowOverride установлено администратором с тегом Options)</li>
<li>Описание директивы для функций помощи.</li>
</ul><br/>
<br/>
Зачастую стандартных функций, реализующих команду, которые предоставляет Apache API вполне достаточно для решения задачи. Данные функции также описаны в файле http_config.h. Вот они:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Возвращает значение установленного строкового параметра директивы</font><br/>
<font color="#008000"> */</font><br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_string_slot( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Возвращает значение установленного целочисленного параметра директивы</font><br/>
<font color="#008000"> */</font><br/>
<br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_int_slot( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Возвращает значение установленного строкового параметра директивы, приведенного к нижнему регистру</font><br/>
<font color="#008000"> */</font><br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_string_slot_lower( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Возвращает значение установленного опционального параметра директивы (флаг On/Off)</font><br/>
<font color="#008000"> */</font><br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_flag_slot( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Возвращает значение установленного строкового параметра директивы, где строка - путь к файлу</font><br/>
<font color="#008000"> */</font><br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_file_slot( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Обрабатывает директиву как запрещенную к использованию, например:</font><br/>
<font color="#008000"> * AP_INIT_RAW_ARGS("Foo", ap_set_deprecated, NULL, OR_ALL,</font><br/>
<font color="#008000"> *     "Директива Foo больше не поддерживается, используйте директиву Bar")</font><br/>
<font color="#008000"> */</font><br/>
AP_DECLARE_NONSTD(<font color="#0000ff">const</font> <font color="#0000ff">char</font> *) ap_set_deprecated( cmd_parms *cmd, <font color="#0000ff">void</font> *struct_ptr, <font color="#0000ff">const</font> <font color="#0000ff">char</font> *arg);</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Макросы, определяющие тип данных директивы могут быть следующими:<br/>
<br/>
<ul>
<li><strong>AP_INIT_NO_ARGS</strong> — директива без аргументов</li>
<li><strong>AP_INIT_FLAG </strong> — директива выключатель (On/Off)</li>
<li><strong>AP_INIT_TAKE1</strong> — один аргумент — строка</li>
<li><strong>AP_INIT_TAKE2</strong>, <strong>AP_INIT_TAKE3</strong>, <strong>AP_INIT_TAKE12</strong> — директивы принимают несколько различных аргументов</li>
<li><strong>AP_INIT_ITERATE</strong> — к каждому аргументу диретивы будет применена функция</li>
<li><strong>AP_INIT_ITERATE2</strong> — функция будет вызвана с передачей в нее двух аргументов</li>
<li><strong>AP_INIT_RAW_ARGS</strong> — будет вызвана функция с передачей в нее всех аргументов директивы</li>
</ul><br/>
<br/>
Макросы, определяющие область видимости директивы такие:<br/>
<br/>
<ul>
<li><strong>OR_NONE</strong> — недоступно нигде в конфиге</li>
<li><strong>OR_LIMIT</strong> — в конфигах сервера внутри контейнеров &lt;Directory> или &lt;Location> и внутри .htaccess-файлов, если директива AllowOverride имеет ключевое слово Limit</li>
<li><strong>OR_OPTIONS</strong> — где угодно, включая .htaccess, если директива AllowOverride имеет ключевое слово Options</li>
<li><strong>OR_FILEINFO</strong> — где угодно, включая .htaccess, если директива AllowOverride имеет ключевое слово FileInfo</li>
<li><strong>OR_AUTHCFG</strong> — в конфигах сервера внутри контейнеров &lt;Directory> или &lt;Location> и в файлах .htaccess, если диретива AllowOverride имеет ключевое слово AuthConfig</li>
<li><strong>OR_INDEXES</strong> — где угодно, включая файлы .htaccess, если директива AllowOverride имеет ключевое слово Indexes</li>
<li><strong>OR_UNSET</strong> — удаление директивы в Allow</li>
<li><strong>ACCESS_CONF</strong> — в серверных конфигах внутри контейнеров &lt;Directory> или &lt;Location></li>
<li><strong>RSRC_CONF</strong> — в серверных конфигах за пределами контейнеров &lt;Directory> или &lt;Location></li>
<li><strong>EXEC_ON_READ</strong> — принуждает директиву выполнять внешнюю команду, которая изменит конфигурацию (как подключение внешнего файла или IFModule)</li>
<li><strong>OR_ALL</strong> — директива разрешена где угодно</li>
</ul><br/>
<br/>
Теперь, когда мы определились с конфигурированием нашего модуля можно приступать непосредственно к разработке его функциональности.<br/>
<br/>
<h2>Обработчики запросов</h2><br/>
<br/>
Вы можете создавать собственные обработчики запросов к Apache, которые будут выдавать соответствующие документы на соответствующий запрос используя директивы SetHandler и AddHandler.<br/>
<br/>
Поскольку данные обработчики отсылают данные непосредственно в вывод, вам необходимо позаботиться о том, чтобы заголовки ответа были отправлены прежде, чем будет осуществлен вывод содержимого. Это может быть осуществлено с помощью функции send_http_header(). Также вы можете задавать собственные заголовки.<br/>
<br/>
Любая функция-обработчик принимает, как аргумент, указатель на структуру запроса. Возвращаемыми значениями могут быть:<br/>
<br/>
<ul>
<li>OK — все в порядке, мы успешно обработали запрос</li>
<li>DECLINED — запрос отклонен</li>
<li>HTTP_[код_ошибки] — рапортуем об ошибке HTTP-протокола, например HTTP_401 — Требуется авторизация</li>
</ul><br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#0000ff">static</font> <font color="#0000ff">int</font> uptags_handler( request_rec *r) {<br/>
  <font color="#0000ff">if</font> (strcmp( r->handler, <font color="#A31515">"uptags-handler"</font>)) {<br/>
    <font color="#0000ff">return</font> DECLINED;<br/>
  }<br/>
<br/>
  r->content_type = <font color="#A31515">"text/html"</font>;<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Если мы отправляем заголовок - это как раз то место</font><br/>
<font color="#008000">   */</font><br/>
  <font color="#0000ff">if</font> (r->header_only) {<br/>
    <font color="#0000ff">return</font> OK;<br/>
  }<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Заголовки отправлены, начинаем выводить содержимое:</font><br/>
<font color="#008000">   */</font><br/>
  ap_rputs( DOCTYPE_HTML_4_0_STRICT, r);<br/>
  ap_rputs( <font color="#A31515">"&lt;HTML>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;HEAD>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;TITLE>Example Title&lt;/TITLE>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;/HEAD>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;BODY>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;H1>Example content&lt;/H1>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;P>Example text&lt;/P>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">" &lt;/BODY>\n"</font>, r);<br/>
  ap_rputs( <font color="#A31515">"&lt;/HTML>\n"</font>, r);<br/>
<br/>
  <font color="#0000ff">return</font> OK;<br/>
}</font><br/>
<br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Теперь мы можем в конфиг веб-сервера добавить наш обработчик:<br/>
<br/>
<pre>
&lt;Location /uptags-handler-example>
        SetHandler uptags-handler
&lt;/Location>
</pre><br/>
<br/>
По сути, к модулю, который мы пишем это не имеет никакого отношения, поэтому данная функциональность нам не нужна. Мы лишь рассмотрели пример написания своего обработчика. Данная задача, возможно, возникнет, если вы захотите, например, написать свою систему управления содержимым веб-сайта, как модуль к веб-серверу. Или же будете встраивать свой интерпретируемый язык.<br/>
<br/>
Для решения же поставленной нами задачи больше подходит работа с фильтрами, что мы и рассмотрим в следующем разделе.<br/>
<br/>
<h2>Фильтры</h2><br/>
<br/>
Фильтры позволяют производить манипуляции над текущим содержимым, которое Apache отдает по запросу. Как раз подходящее место для решения нашей задачи.<br/>
<br/>
Здесь следует немного отклониться от самого решения и поговорить немного о принципах функционирования веб-сервера и о том, как он обрабатывает и отдает данные.<br/>
<br/>
Архитектура фильтров Apache 2 — основная инновация данного веб-сервера, которая наряду со своей мощностью и универсальностью имеет отрицательный оттенок в вопросе изучения и понимания концепции «корзин» и «бригад» (buckets and brigades).<br/>
<br/>
Низкоуровневое API Apache позволяет манипулировать «корзинами» и «бригадами» напрямую. Ниже мы рассмотрим принципы того, как это делается.<br/>
<br/>
<h3>Что же такое «корзины» и «бригады»?</h3><br/>
<br/>
<strong>Корзина</strong> — это контейнер данных, который может содержать данные любого типа. Тем не менее наиболее распространенным типом является блок памяти, который уже может содержать как файл на диске так и поток данных передаваемых от одного источника к другому, к такому, например, как отдельная программа.<br/>
<br/>
В принципе, существуют несколько различных типов «корзин» — с различными типами данных, а также «корзины» с метаданными, такими как признак конца данных (EOS) или FLUSH-«корзина», которая сбрасывает буфер данных в выходной поток.<br/>
<br/>
<strong>Бригада</strong> — это контейнер, объединяющий цикл «корзин», и подразделение, которое передается от фильтра к фильтру.<br/>
<br/>
«Корзины» и «бригады» обеспечивают эффективное манипулирование блоками памяти, типичных для приложений-фильтров.<br/>
<br/>
Для манипулирования «корзинами» и «бригадами» Apache 2 предоставляет нам набор типов данных, структур, макросов и функций API, описанных в файле apr_buckets.h. Их описание можно найти <a href="http://apr.apache.org/docs/apr-util/0.9/group__APR__Util__Bucket__Brigades.html">здесь</a>.<br/>
<br/>
Следует учесть, что для решения поставленной задачи, нам необходимо создать два фильтра — входной (in) и выходной (out):<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Входной фильтр</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> uptags_in_filter( request_rec *r) {<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * На входе нам не нужно ничего делать, просто добавляем выходной фильтр к стеку фильтров</font><br/>
<font color="#008000">   */</font><br/>
  ap_add_output_filter( <font color="#A31515">"Uptags"</font>, NULL, r, r->connection);<br/>
}<br/>
<br/>
<font color="#008000">/**</font><br/>
<font color="#008000"> * Выходной фильтр - именно он будет делать все полезную работу</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> apr_status_t uptags_out_filter( ap_filter_t *f, apr_bucket_brigade *pbbIn) {<br/>
<br/>
  request_rec    *r = f->r;<br/>
  conn_rec      *c = r->connection;<br/>
  apr_bucket     *pbktIn;<br/>
  apr_bucket_brigade *pbbOut;<br/>
  uptags_cfg     *cfg = uptags_dconfig( f->r);<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Проверяем, включена ли работа фильтра в настройках. Если нет - ничего не делаем с исходными данными</font><br/>
<font color="#008000">   * Также не следует ничего делать, если данный контент не является HTML</font><br/>
<font color="#008000">   */</font><br/>
  <font color="#0000ff">if</font> (!cfg->engine || strcmp( r->content_type, <font color="#A31515">"text/html"</font>) != 0) {<br/>
    <font color="#0000ff">return</font> ap_pass_brigade( f->next, pbbIn);<br/>
  }<br/>
<br/>
  <font color="#008000">/* инициализируем пустую выходную бригаду */</font><br/>
  pbbOut = apr_brigade_create( r->pool, c->bucket_alloc);<br/>
<br/>
  <font color="#008000">/**</font><br/>
<font color="#008000">   * Читаем корзины данных из входящей бригады</font><br/>
<font color="#008000">   */</font><br/>
  <font color="#0000ff">for</font> (pbktIn = APR_BRIGADE_FIRST( pbbIn); pbktIn != APR_BRIGADE_SENTINEL( pbbIn); pbktIn = APR_BUCKET_NEXT( pbktIn)) {<br/>
    <font color="#0000ff">const</font> <font color="#0000ff">char</font> *data;<br/>
    apr_size_t len;<br/>
    <font color="#0000ff">char</font> *buf;<br/>
    apr_bucket *pbktOut;<br/>
<br/>
    <font color="#008000">/* если текущая "корзина" - это метаданные-признак конца - просто перемещаем корзину в конец бригады и продолжаем обход данных */</font><br/>
    <font color="#0000ff">if</font>(APR_BUCKET_IS_EOS( pbktIn)) {<br/>
      apr_bucket *pbktEOS = apr_bucket_eos_create( c->bucket_alloc);<br/>
      APR_BRIGADE_INSERT_TAIL( pbbOut,pbktEOS);<br/>
      <font color="#0000ff">continue</font>;<br/>
    }<br/>
<br/>
    <font color="#008000">/* читаем данные */</font><br/>
    apr_bucket_read( pbktIn, &amp;data, &amp;len, APR_NONBLOCK_READ);<br/>
<br/>
    <font color="#008000">/**</font><br/>
<font color="#008000">     * производим полезную работу над данными</font><br/>
<font color="#008000">     * ВАЖНО! Не меняйте исходные данные напрямую - это может привести к неожиданным результатам.</font><br/>
<font color="#008000">     * Действуйте через промежуточный буфер.</font><br/>
<font color="#008000">     */</font><br/>
    buf = apr_bucket_alloc( len, c->bucket_alloc);<br/>
    memset( buf, 0, <font color="#0000ff">sizeof</font>( buf));<br/>
<br/>
    uptags_tags_to_uppercase( data, buf);<br/>
<br/>
    <font color="#008000">/* записываем новые данные */</font><br/>
    pbktOut = apr_bucket_heap_create( buf, len, apr_bucket_free, c->bucket_alloc);<br/>
    APR_BRIGADE_INSERT_TAIL( pbbOut, pbktOut);<br/>
  }<br/>
<br/>
  apr_brigade_cleanup( pbbIn);<br/>
  <font color="#0000ff">return</font> ap_pass_brigade( f->next, pbbOut);<br/>
}<br/>
</font><br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Естественно. нам необходимо реализовать также нашу функцию uptags_tags_to_uppercase(), которая, собственно, и проделывает все необходимые манипуляции над данными, и поместить ее объявление перед объявлением фильтров:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Функция преобразует тэги в строке к верхнему регистру</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">void</font> uptags_tags_to_uppercase( <font color="#0000ff">const</font> <font color="#0000ff">char</font> *data, <font color="#0000ff">char</font> *str) {<br/>
  <font color="#0000ff">int</font> i, s = strlen( data), tag_opened = 0;<br/>
  <font color="#0000ff">for</font> (i = 0; i &lt; s; i++) {<br/>
    str[i] = data[i];<br/>
    <font color="#0000ff">if</font> (str[i] == <font color="#A31515">'&lt;'</font>) {<br/>
      tag_opened = 1;<br/>
    } <font color="#0000ff">else</font> <font color="#0000ff">if</font> (str[i] == <font color="#A31515">'>'</font>) {<br/>
      tag_opened = 0;<br/>
    }<br/>
    <font color="#0000ff">if</font> (tag_opened &amp;&amp; str[i] != <font color="#A31515">'\0'</font>) {<br/>
      str[i] = apr_toupper( str[i]);<br/>
    }<br/>
  }<br/>
}<br/>
</font><br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Мы написали достаточно простую функцию, которая в реальной жизни не всегда будет вести себя так как нужно. Но наша задача достаточно проста, поэтому в целях тестирования она нам вполне подойдет.<br/>
<br/>
На этом разработку фильтров для нашего модуля можно считать завершенной и мы можем перейти к заключительному этапу.<br/>
<br/>
<h2>Определение модуля</h2><br/>
<br/>
После того, как мы определили все функции нашего модуля, нам необходимо «объяснить» веб-серверу, как их следует использовать.<br/>
<br/>
Для этого достаточно перечислить их в соответствующих ячейках структуры модуля Apache:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Описываем структуру модуля Apache</font><br/>
<font color="#008000"> */</font><br/>
module AP_MODULE_DECLARE_DATA uptags_module = {<br/>
  STANDARD20_MODULE_STUFF,<br/>
  uptags_create_dir_config,   <font color="#008000">/* создание конфигурации директории */</font><br/>
  NULL,             <font color="#008000">/* объединение конфигураций директории */</font><br/>
  uptags_create_server_config,  <font color="#008000">/* создание серверной конфигурации */</font><br/>
  NULL,             <font color="#008000">/* объединение серверной конфигурации */</font><br/>
  uptags_directives,       <font color="#008000">/* маппинг директив конфигурации */</font><br/>
  uptags_register_hooks     <font color="#008000">/* регистрируем обработчики */</font><br/>
};<br/>
</font><br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Как мы видим, нам не хватает лишь небольшой функции uptags_register_hooks, которая возмет на себя работу по регистрации всех нужных нам обработчиков для данного модуля.<br/>
<br/>
Давайте ее напишем:<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><font color="#008000">/**</font><br/>
<font color="#008000"> * Регистрируем фильтры модуля в обработчиках</font><br/>
<font color="#008000"> */</font><br/>
<font color="#0000ff">static</font> <font color="#0000ff">void</font> uptags_register_hooks( apr_pool_t *p) {<br/>
  ap_hook_insert_filter( uptags_in_filter, NULL, NULL, APR_HOOK_MIDDLE);<br/>
  ap_register_output_filter( <font color="#A31515">"Uptags"</font>, uptags_out_filter, NULL, AP_FTYPE_RESOURCE);<br/>
}<br/>
</font><br/>
<font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Вы можете скачать полный исходник модуля <a href="http://mikhailstadnik.com/src/uptags/mod_uptags.c">отсюда</a>.<br/>
<br/>
<h2>Компиляция и сборка модуля</h2><br/>
<br/>
Самый простой способ скомпилировать и подключить модуль — это собрать его как DSO (Dynamically Shared Object). Чтобы сделать это запустите команду в директории с исходником:<br/>
<br/>
<pre>apxs2 -c mod_uppertags.c</pre><br/>
<br/>
Если компиляция прошла успешно, должна появиться папка .libs, а в ней файл mod_uptegs.so. Следует скопировать данный файл в директорию с подгружаемыми модулями Apache. В Debian (Ubuntu) Linux это, как правило, директория /usr/lib/apache2/modules/<br/>
<br/>
Теперь в основной конфиг Apache вам нужно вписать директивы:<br/>
<br/>
<pre>
LoadModule uptags_module /usr/lib/apache2/modules/mod_uptags.so

&lt;IfModule mod_uptags.c>
    UptagsEngine On
&lt;/IfModule>
</pre><br/>
<br/>
Далее следует перезагрузить веб-сервер:<br/>
<br/>
<pre>
/etc/init.d/apache2 restart
</pre><br/>
<br/>
Теперь можете проверить результат, просмотрев любую страницу, которую выдает ваш веб-сервер.<br/>
<br/>
Также нелишним будет написать содержимое файла config.m4:<br/>
<br/>
<pre>
APACHE_MODPATH_INIT(uptags)
APACHE_MODULE(uptags, reformatting all HTML tags to upercase, , , no)
APACHE_MODPATH_FINISH
</pre><br/>
<br/>
Это позволит автоматически скомпилировать модуль при общей сборке Apache. Для того, чтобы собрать модуль статически при сборке всего веб-сервера теперь достаточно указать опцию --enable-uptags при запуске команды ./configure:<br/>
<br/>
<pre>
./configure --enable-uptags
</pre><br/>
<br/>
И, конечно же, не забудьте дать другим людям необходимые инструкции, описав их в файле README.<br/>
<br/>
<h2>Ссылки (на английском)</h2><br/>
<br/>
<a href="http://www.apachetutor.org/dev/config">Configuration for Modules</a><br/>
<a href="http://www.apachetutor.org/dev/brigades">Introduction to Buckets and Brigades</a><br/>
<a href="http://www.apachetutor.org/dev/pools">Basic Resource Management in Apache: the APR Pools</a><br/>
<a href="http://www.apachetutor.org/dev/request">Request Processing in Apache</a><br/>
<a href="http://apr.apache.org/docs/apr/1.3/">Apache Portable Runtime (APR) Documentation</a><br/>
<br/>
<h2>Заключение</h2><br/>
<br/>
Как мы увидели, разработка собственных модулей для веб-сервера Apache не такое уж и сложное дело. Достаточно вооружиться терпением и ссылками на соответствующую документацию, и задача становиться вполне разрешимой.<br/>
<br/>
Я же надеюсь, что данное руководство поможет читателю ближе познакомиться с Apache API для написания модулей и станет начальной отправной точкой в этом интересном деле.<br/>
<br/>
Удачи в девелопменте!<br/>
<br/>
P.S. Это кросс-постинг <a href="http://mikhailstadnik.com/developing-apache-module">оригинальной статьи</a> с моего блога.</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bapache%5D" class="tm-article-body__tags-item-link">apache</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bc%5D" class="tm-article-body__tags-item-link">c</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdevelopment%5D" class="tm-article-body__tags-item-link">development</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bfilter%5D" class="tm-article-body__tags-item-link">filter</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmodule%5D" class="tm-article-body__tags-item-link">module</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%5D" class="tm-article-body__tags-item-link">веб-сервер</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C%5D" class="tm-article-body__tags-item-link">модуль</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%5D" class="tm-article-body__tags-item-link">разработка</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%84%D0%B8%D0%BB%D1%8C%D1%82%D1%80%5D" class="tm-article-body__tags-item-link">фильтр</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/webdev/" class="tm-article-body__tags-item-link">
                  Разработка веб-сайтов
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 94: ↑93 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 94: ↑93 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+92</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    107
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/50909/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      24
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Mikhus/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/6e4/8eb/cc7/6e48ebcc7a0a442dd08af1ecd52e5ee6.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 144 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    122.7
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Михаил Стадник</span> <a href="/ru/users/Mikhus/" class="tm-user-card__nickname">
          @Mikhus
        </a> <!----></div> <p class="tm-user-card__short-info">Software Engineer</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/50909/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 24 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-11T14:17:55.000Z" title="2021-09-11, 17:17">11  сентября   в 17:17</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/news/t/577422/" class="tm-article-title__link"><span>Исследование: более 2 млн веб-серверов Microsoft работают на уязвимых версиях IIS</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 10: ↑10 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 10: ↑10 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+10</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    2
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/news/t/577422/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      31
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-05-13T03:55:43.000Z" title="2021-05-13, 06:55">13  мая   в 06:55</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/557126/" class="tm-article-title__link"><span>Запуск домашнего веб-сервера без статического IP с помощью Python</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 14: ↑10 и ↓4</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑10 и ↓4" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+6</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">27K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    134
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/557126/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      30
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-03-23T07:30:40.000Z" title="2021-03-23, 10:30">23  марта   в 10:30</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/cloud4y/blog/548238/" class="tm-article-title__link"><span>Продолжение. Частые ошибки в настройках Nginx, из-за которых веб-сервер становится уязвимым</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 17: ↑15 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 17: ↑15 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+13</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">14K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    146
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/cloud4y/blog/548238/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      1
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T09:00:04.000Z" title="2021-09-27, 12:00">сегодня в 12:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580060/" class="tm-article-title__link"><span>Арракис, который мы заслужили</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 67: ↑64 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 67: ↑64 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+61</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    21
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580060/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      10
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T21:49:14.000Z" title="2021-09-27, 00:49">сегодня в 00:49</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580092/" class="tm-article-title__link"><span>30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 41: ↑41 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 41: ↑41 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+41</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">14K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    44
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580092/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      76
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:37:10.000Z" title="2021-09-26, 22:37">вчера в 22:37</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580086/" class="tm-article-title__link"><span>Термо принтер и JavaScript</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 40: ↑39 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 40: ↑39 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+38</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">7.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    33
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580086/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      46
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:00:02.000Z" title="2021-09-26, 22:00">вчера в 22:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/funcorp/blog/579542/" class="tm-article-title__link"><span>Jetpack Compose — как легко построить UI на Android</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 39: ↑35 и ↓4</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 39: ↑35 и ↓4" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+31</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    49
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/funcorp/blog/579542/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      8
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T22:35:26.000Z" title="2021-09-27, 01:35">сегодня в 01:35</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580094/" class="tm-article-title__link"><span>Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 45: ↑35 и ↓10</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 45: ↑35 и ↓10" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+25</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">11K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    19
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580094/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      77
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="50909" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/50909/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/50909/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"50909":{"id":"50909","timePublished":"2009-02-02T15:51:47+00:00","isCorporative":false,"lang":"ru","titleHtml":"Разработка модуля для Apache 2.x","leadData":{"textHtml":"\u003Ch2\u003EПредисловие\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНедавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я столкнулся с тем фактом, что по-русски об этом мало кто рассказывает. Поэтому и возникла идея написать эту статью. Ниже я постараюсь как можно подробнее поделиться накопленным опытом, пошагово описать этапы создания модуля и приведу различные полезные ссылки по данной теме.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":122.7,"votesCount":144},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"46773","alias":"Mikhus","fullname":"Михаил Стадник","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F6e4\u002F8eb\u002Fcc7\u002F6e48ebcc7a0a442dd08af1ecd52e5ee6.jpg","speciality":"Software Engineer"},"statistics":{"commentsCount":24,"favoritesCount":107,"readingCount":9848,"score":92,"votesCount":94},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Ch2\u003EПредисловие\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНедавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я столкнулся с тем фактом, что по-русски об этом мало кто рассказывает. Поэтому и возникла идея написать эту статью. Ниже я постараюсь как можно подробнее поделиться накопленным опытом, пошагово описать этапы создания модуля и приведу различные полезные ссылки по данной теме.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EВведение\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервое, с чем сталкивается разработчик-новичок, никогда не сталкивавшийся с написанием модулей для Apache, это вопрос — «С чего же начать?».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНачните с осознания того факта, что, без лишних телодвижений, вам придется иметь дело с чистым языком C безо всяких ++. И, возможно, это и к лучшему.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее проверьте, установлен ли в вашей системе APXS, если нет — установите. В системах Debian (Ubuntu) Linux это можно сделать достаточно просто, достаточно запустить команду:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003Eapt-get install apache2-threaded-dev\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nили\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003Eapt-get install apache2-prefork-dev\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nв зависимости от соответствующей версии Apache, которую вы используете.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто вам понадобиться для сборки и компиляции модуля.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь все готово, и можно приступить непосредственно к разработке самого модуля. Мы будем изучать все на примере, поэтому давайте создадим небольшой модуль, который приводит все тэги HTML-страниц, которые отдает веб-сервер, к верхнему регистру.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, назовем наш модуль без лишних хитройстей — uptags. Создадим одноименную папку и в ней исходный файл mod_uptags.c, а также файлы README и config.m4. Вот так будет выглядеть наша структура файлов:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003Euptags\u002F\n    config.m4\n    mod_uptags.c\n    README\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМожете сразу расположить данные файлы в исходниках Apache, а можете сделать это и после, действуйте по своему усмотрению.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ принципе, для успешного создания модуля нам бы хватило лишь файла с исходным кодом C, тем не менее README будет, как минимум, хорошим тоном, а config.m4 пригодится для автоматической сборки модуля при компиляции всего веб-сервера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAPI к модулям Apache предполагает реализацию нескольких функций и структур, которые логически можно отнести к нескольким группам, которые рассмотрены ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако прежде, чем мы приступим к разбору функций, следует подключить необходимые библиотеки и объявить сам модуль в нашем исходнике mod_uppertags.c:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E#include \u003Cfont color=\"#A31515\"\u003E\"apr_general.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"apr_lib.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"apr_buckets.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"apr_strings.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"ap_config.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"util_filter.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"httpd.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_config.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_request.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_core.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_protocol.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_log.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_main.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"util_script.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include \u003Cfont color=\"#A31515\"\u003E\"http_core.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n#include &lt;\u003Cfont color=\"#0000ff\"\u003Estring\u003C\u002Ffont\u003E.h\u003E\u003Cbr\u002F\u003E\r\n#include &lt;stdio.h\u003E\u003Cbr\u002F\u003E\r\n#include &lt;ctype.h\u003E\u003Cbr\u002F\u003E\r\n#include &lt;sys\u002Fstat.h\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nmodule AP_MODULE_DECLARE_DATA uptags_module;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EФункции управления конфигурацией\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nКак вы знаете, Apache — гибко настраиваемый веб-сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nС точки зрения системного администратора существуют несколько типов директив, которые могут быть определены в различных областях видимости, таких как глобальный конфиг сервера, &lt;VirtualHost\u003E, &lt;Directory\u003E (а также &lt;Files\u003E или &lt;Location\u003E) и файлы .htaccess.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонфликты директив, определенные в различных областях видимости, по-умолчанию разбираются самим сервером по таким правилам:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EОсновной конфиг\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nДирективы в данном файле (за исключением определенных в некоторых контейнерах) применяются глобально. Большинство директив могут быть использованы здесь.\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EВиртуальный хост &lt;VirtualHost\u003E\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nКаждый виртуальный хост может иметь свой (виртуальный) серверный конфиг внутри контейнера &lt;VirtualHost\u003E. Директивы, который могут быть использованы в глобальном конфиге, могут быть использованы и здесь и наоборот.\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EДиректория\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nКонтейнеры &lt;Directory\u003E, &lt;Files\u003E и &lt;Location\u003E определяют на разных уровнях как могут быть переопределены глобальные настройки. В данной статье именно на них мы будем ссылаться как на конфиги директорий.\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EФайлы .htaccess\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nТакже относятся к настройкам директорий. В данных файлах пользователи могут определять настройки директив самостоятельно, на основе значения директивы AllowOverride, установленной для каждого из них администратором сервера.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри написании модуля, вам под силу самостоятельно определять директивы и контейнеры, определять области их видимости и изменять правила их переопределения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля этого, в первую очередь, вам необходимо создать соответствующие структуры, в которых данные конфигурации будут храниться в памяти. Следует отметить, что в общем случае, вы можете задавать отдельные структуры для серверной конфигурации и конфигурации директорий. Делать это следует в том случае, если наборы директив отличаются. В противном случае, вы можете воспользоваться одной и той же структурой для хранения настроек.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоскольку модуль, который мы создаем достаточно прост и будет обладать минимальными настройками, мы пойдем по простому пути, и объединим оба типа настроек (серверную и для директорий) в одну структуру данных. Давайте определим флаг, позволяющий включать и выключать работу нашего модуля:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003Eengine = On\u002FOff — будет позволять включать\u002Fвыключать работу всего модуля.\u003Cbr\u002F\u003E\r\n\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТ.е., наша структура будет выглядеть следубщим образом:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003Etypedef \u003Cfont color=\"#0000ff\"\u003Estruct\u003C\u002Ffont\u003E uptags_cfg {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E engine;\u003Cbr\u002F\u003E\r\n} uptags_cfg;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь для каждого отдельного типа конфигурации нам нужно написать функции получения данных:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Данная функция возвращет структуру конфигурации директории\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * данного модуля для текущего запроса\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E uptags_cfg *uptags_dconfig( \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E request_rec *r) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (uptags_cfg *) ap_get_module_config( r-\u003Eper_dir_config, &amp;uptags_module);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Данная функция возвращет структуру конфигурации сервера\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * данного модуля\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E uptags_cfg *uptags_sconfig( \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E server_rec *s) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (uptags_cfg *) ap_get_module_config( s-\u003Emodule_config, &amp;uptags_module);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь самое время позаботиться о настройках по-умолчанию. Для этого напишем две следующие функции:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Инициализация настроек по-умолчанию для директории\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *uptags_create_dir_config( apr_pool_t *p, \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *dirspec) {\u003Cbr\u002F\u003E\r\n  uptags_cfg *cfg;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Выделим память в пуле соединения для структуры настроек\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  cfg = (uptags_cfg *) apr_pcalloc( p, \u003Cfont color=\"#0000ff\"\u003Esizeof\u003C\u002Ffont\u003E( uptags_cfg));\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Теперь определим значения по умолчанию для наших настроек\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  cfg-\u003Eengine = 1;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *) cfg;\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Для серверных настроек определим аналогичную функцию\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *uptags_create_server_config( apr_pool_t *p, server_rec *s) {\u003Cbr\u002F\u003E\r\n  uptags_cfg *cfg;\u003Cbr\u002F\u003E\r\n  cfg = (uptags_cfg *) apr_pcalloc( p, \u003Cfont color=\"#0000ff\"\u003Esizeof\u003C\u002Ffont\u003E( uptags_cfg));\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  cfg-\u003Eengine = 1;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *) cfg;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоскольку в структуре веб-сервера может существовать, фактически, несколько конфигураций в разных блоках (например, для конфигурации директории в структуре виртуального хоста может быть создана запись в блоке &lt;Directory\u003E&lt;\u002FDirectory\u003E, &lt;Files\u003E&lt;\u002FFiles\u003E или &lt;Location\u003E&lt;\u002FLocation\u003E, и, одновременно, может быть создан файл .htaccess), нам может понадобиться определить собственные правила объединения данных конфигов. Слава богу, API Apache позволяет нам это сделать достаточно просто, определив правила мерджинга серверных настроек и настроек директорий. Для этого достаточно определить следующие функции:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Данная функция будет вызвана для объединения конфигураций директории\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Именно с помощью этой функции вы можете определить свои собственные\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * правила объединения\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *uptags_merge_dir_config( apr_pool_t *p, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *parent_conf, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *newloc_conf) {\u003Cbr\u002F\u003E\r\n  uptags_cfg *megred_conf = (uptags_cfg *) apr_pcalloc( p, \u003Cfont color=\"#0000ff\"\u003Esizeof\u003C\u002Ffont\u003E( uptags_cfg));\u003Cbr\u002F\u003E\r\n  uptags_cfg *pconf = (uptags_cfg *) parent_conf;\u003Cbr\u002F\u003E\r\n  uptags_cfg *nconf = (uptags_cfg *) newloc_conf;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  * ...\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  * Здесь следует определить правила объединения конфигов\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  *\u002F\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *) merged_conf;\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Аналогично для серверной конфигурации\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *uptags_merge_server_config( apr_pool_t *p, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *srv1conf, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *srv2conf) {\u003Cbr\u002F\u003E\r\n  uptags_cfg *merged_config = (uptags_cfg *) apr_pcalloc( p, \u003Cfont color=\"#0000ff\"\u003Esizeof\u003C\u002Ffont\u003E( uptags_cfg));\u003Cbr\u002F\u003E\r\n  uptags_cfg *s1conf = (uptags_cfg *) srv1conf;\u003Cbr\u002F\u003E\r\n  uptags_cfg *s2conf = (uptags_cfg *) srv2conf;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  * ...\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  * Здесь следует определить правила объединения конфигов\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E  *\u002F\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *) merged_config;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТем не менее, учтите, что правила объединения следует применять только в том случае, если правила сервера по-умолчанию вас не устраивают, т.е. вы хотите их изменить. В противном случае, просто не пишите данные функции и все произойдет само собой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EОпределение директив (команд) конфигурации\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того, как мы определили структуру нашей конфигурации и функции для ее наполнения, объединения о обработки, совсем не лишним будет определить сами директивы так, так они должны будут задаваться в конфигах:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E command_rec uptags_directives[] = {\u003Cbr\u002F\u003E\r\n  AP_INIT_FLAG(\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#A31515\"\u003E\"UptagsEngine\"\u003C\u002Ffont\u003E,\u003Cbr\u002F\u003E\r\n    ap_set_flag_slot,\u003Cbr\u002F\u003E\r\n    (\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *) APR_OFFSETOF( uptags_cfg, engine),\u003Cbr\u002F\u003E\r\n    OR_OPTIONS,\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#A31515\"\u003E\"uptags module switcher\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  ),\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  {NULL}\u003Cbr\u002F\u003E\r\n};\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь мы немного остановимся для того, чтобы рассмотреть различные возможности, которые предоставляет API веб-сервера Apache для обработки директив конфигурации.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОпределение структуры директив всегда заканчивается NULL-структурой, а макросы реализации определены в файле http_config.h. AP_INIT_FLAG — один из многих таких макросов, в целом же не-NULL структура содержит следующие элементы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EИмя директивы — это то, как директива будет задаваться в конфигах (по сути маппинг строк из конфигов и созданной нами ранее структуры в памяти — это именно это место)\u003C\u002Fli\u003E\r\n\u003Cli\u003EФункция, реализующая директиву. ap_set_flag_slot — стандартная функция Apache API, которая разбирает параметр-выключатель или флаг (как раз то, что нам подходит — On\u002FOff)\u003C\u002Fli\u003E\r\n\u003Cli\u003EУказатель на структуру данных (с помощью APR_OFFSETOF мы маппим данные в определенную нами структуру)\u003C\u002Fli\u003E\r\n\u003Cli\u003EМакрос, определяющий, где разрешена директива (OR_OPTIONS — директива разрешена для директорий и файлов .htaccess, если значение директивы AllowOverride установлено администратором с тегом Options)\u003C\u002Fli\u003E\r\n\u003Cli\u003EОписание директивы для функций помощи.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗачастую стандартных функций, реализующих команду, которые предоставляет Apache API вполне достаточно для решения задачи. Данные функции также описаны в файле http_config.h. Вот они:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Возвращает значение установленного строкового параметра директивы\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_string_slot( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Возвращает значение установленного целочисленного параметра директивы\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_int_slot( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Возвращает значение установленного строкового параметра директивы, приведенного к нижнему регистру\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_string_slot_lower( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Возвращает значение установленного опционального параметра директивы (флаг On\u002FOff)\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_flag_slot( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Возвращает значение установленного строкового параметра директивы, где строка - путь к файлу\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_file_slot( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Обрабатывает директиву как запрещенную к использованию, например:\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * AP_INIT_RAW_ARGS(\"Foo\", ap_set_deprecated, NULL, OR_ALL,\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *     \"Директива Foo больше не поддерживается, используйте директиву Bar\")\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nAP_DECLARE_NONSTD(\u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *) ap_set_deprecated( cmd_parms *cmd, \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E *struct_ptr, \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *arg);\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМакросы, определяющие тип данных директивы могут быть следующими:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_NO_ARGS\u003C\u002Fstrong\u003E — директива без аргументов\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_FLAG \u003C\u002Fstrong\u003E — директива выключатель (On\u002FOff)\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_TAKE1\u003C\u002Fstrong\u003E — один аргумент — строка\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_TAKE2\u003C\u002Fstrong\u003E, \u003Cstrong\u003EAP_INIT_TAKE3\u003C\u002Fstrong\u003E, \u003Cstrong\u003EAP_INIT_TAKE12\u003C\u002Fstrong\u003E — директивы принимают несколько различных аргументов\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_ITERATE\u003C\u002Fstrong\u003E — к каждому аргументу диретивы будет применена функция\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_ITERATE2\u003C\u002Fstrong\u003E — функция будет вызвана с передачей в нее двух аргументов\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EAP_INIT_RAW_ARGS\u003C\u002Fstrong\u003E — будет вызвана функция с передачей в нее всех аргументов директивы\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМакросы, определяющие область видимости директивы такие:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_NONE\u003C\u002Fstrong\u003E — недоступно нигде в конфиге\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_LIMIT\u003C\u002Fstrong\u003E — в конфигах сервера внутри контейнеров &lt;Directory\u003E или &lt;Location\u003E и внутри .htaccess-файлов, если директива AllowOverride имеет ключевое слово Limit\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_OPTIONS\u003C\u002Fstrong\u003E — где угодно, включая .htaccess, если директива AllowOverride имеет ключевое слово Options\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_FILEINFO\u003C\u002Fstrong\u003E — где угодно, включая .htaccess, если директива AllowOverride имеет ключевое слово FileInfo\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_AUTHCFG\u003C\u002Fstrong\u003E — в конфигах сервера внутри контейнеров &lt;Directory\u003E или &lt;Location\u003E и в файлах .htaccess, если диретива AllowOverride имеет ключевое слово AuthConfig\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_INDEXES\u003C\u002Fstrong\u003E — где угодно, включая файлы .htaccess, если директива AllowOverride имеет ключевое слово Indexes\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_UNSET\u003C\u002Fstrong\u003E — удаление директивы в Allow\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EACCESS_CONF\u003C\u002Fstrong\u003E — в серверных конфигах внутри контейнеров &lt;Directory\u003E или &lt;Location\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003ERSRC_CONF\u003C\u002Fstrong\u003E — в серверных конфигах за пределами контейнеров &lt;Directory\u003E или &lt;Location\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EEXEC_ON_READ\u003C\u002Fstrong\u003E — принуждает директиву выполнять внешнюю команду, которая изменит конфигурацию (как подключение внешнего файла или IFModule)\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cstrong\u003EOR_ALL\u003C\u002Fstrong\u003E — директива разрешена где угодно\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь, когда мы определились с конфигурированием нашего модуля можно приступать непосредственно к разработке его функциональности.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EОбработчики запросов\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете создавать собственные обработчики запросов к Apache, которые будут выдавать соответствующие документы на соответствующий запрос используя директивы SetHandler и AddHandler.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоскольку данные обработчики отсылают данные непосредственно в вывод, вам необходимо позаботиться о том, чтобы заголовки ответа были отправлены прежде, чем будет осуществлен вывод содержимого. Это может быть осуществлено с помощью функции send_http_header(). Также вы можете задавать собственные заголовки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЛюбая функция-обработчик принимает, как аргумент, указатель на структуру запроса. Возвращаемыми значениями могут быть:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EOK — все в порядке, мы успешно обработали запрос\u003C\u002Fli\u003E\r\n\u003Cli\u003EDECLINED — запрос отклонен\u003C\u002Fli\u003E\r\n\u003Cli\u003EHTTP_[код_ошибки] — рапортуем об ошибке HTTP-протокола, например HTTP_401 — Требуется авторизация\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E uptags_handler( request_rec *r) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (strcmp( r-\u003Ehandler, \u003Cfont color=\"#A31515\"\u003E\"uptags-handler\"\u003C\u002Ffont\u003E)) {\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E DECLINED;\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  r-\u003Econtent_type = \u003Cfont color=\"#A31515\"\u003E\"text\u002Fhtml\"\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Если мы отправляем заголовок - это как раз то место\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (r-\u003Eheader_only) {\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E OK;\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Заголовки отправлены, начинаем выводить содержимое:\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  ap_rputs( DOCTYPE_HTML_4_0_STRICT, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\"&lt;HTML\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;HEAD\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;TITLE\u003EExample Title&lt;\u002FTITLE\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;\u002FHEAD\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;BODY\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;H1\u003EExample content&lt;\u002FH1\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;P\u003EExample text&lt;\u002FP\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\" &lt;\u002FBODY\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n  ap_rputs( \u003Cfont color=\"#A31515\"\u003E\"&lt;\u002FHTML\u003E\\n\"\u003C\u002Ffont\u003E, r);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E OK;\u003Cbr\u002F\u003E\r\n}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь мы можем в конфиг веб-сервера добавить наш обработчик:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\n&lt;Location \u002Fuptags-handler-example\u003E\n        SetHandler uptags-handler\n&lt;\u002FLocation\u003E\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПо сути, к модулю, который мы пишем это не имеет никакого отношения, поэтому данная функциональность нам не нужна. Мы лишь рассмотрели пример написания своего обработчика. Данная задача, возможно, возникнет, если вы захотите, например, написать свою систему управления содержимым веб-сайта, как модуль к веб-серверу. Или же будете встраивать свой интерпретируемый язык.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля решения же поставленной нами задачи больше подходит работа с фильтрами, что мы и рассмотрим в следующем разделе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EФильтры\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФильтры позволяют производить манипуляции над текущим содержимым, которое Apache отдает по запросу. Как раз подходящее место для решения нашей задачи.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь следует немного отклониться от самого решения и поговорить немного о принципах функционирования веб-сервера и о том, как он обрабатывает и отдает данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАрхитектура фильтров Apache 2 — основная инновация данного веб-сервера, которая наряду со своей мощностью и универсальностью имеет отрицательный оттенок в вопросе изучения и понимания концепции «корзин» и «бригад» (buckets and brigades).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНизкоуровневое API Apache позволяет манипулировать «корзинами» и «бригадами» напрямую. Ниже мы рассмотрим принципы того, как это делается.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EЧто же такое «корзины» и «бригады»?\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EКорзина\u003C\u002Fstrong\u003E — это контейнер данных, который может содержать данные любого типа. Тем не менее наиболее распространенным типом является блок памяти, который уже может содержать как файл на диске так и поток данных передаваемых от одного источника к другому, к такому, например, как отдельная программа.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ принципе, существуют несколько различных типов «корзин» — с различными типами данных, а также «корзины» с метаданными, такими как признак конца данных (EOS) или FLUSH-«корзина», которая сбрасывает буфер данных в выходной поток.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EБригада\u003C\u002Fstrong\u003E — это контейнер, объединяющий цикл «корзин», и подразделение, которое передается от фильтра к фильтру.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n«Корзины» и «бригады» обеспечивают эффективное манипулирование блоками памяти, типичных для приложений-фильтров.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля манипулирования «корзинами» и «бригадами» Apache 2 предоставляет нам набор типов данных, структур, макросов и функций API, описанных в файле apr_buckets.h. Их описание можно найти \u003Ca href=\"http:\u002F\u002Fapr.apache.org\u002Fdocs\u002Fapr-util\u002F0.9\u002Fgroup__APR__Util__Bucket__Brigades.html\"\u003Eздесь\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСледует учесть, что для решения поставленной задачи, нам необходимо создать два фильтра — входной (in) и выходной (out):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Входной фильтр\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E uptags_in_filter( request_rec *r) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * На входе нам не нужно ничего делать, просто добавляем выходной фильтр к стеку фильтров\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  ap_add_output_filter( \u003Cfont color=\"#A31515\"\u003E\"Uptags\"\u003C\u002Ffont\u003E, NULL, r, r-\u003Econnection);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Выходной фильтр - именно он будет делать все полезную работу\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E apr_status_t uptags_out_filter( ap_filter_t *f, apr_bucket_brigade *pbbIn) {\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  request_rec    *r = f-\u003Er;\u003Cbr\u002F\u003E\r\n  conn_rec      *c = r-\u003Econnection;\u003Cbr\u002F\u003E\r\n  apr_bucket     *pbktIn;\u003Cbr\u002F\u003E\r\n  apr_bucket_brigade *pbbOut;\u003Cbr\u002F\u003E\r\n  uptags_cfg     *cfg = uptags_dconfig( f-\u003Er);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Проверяем, включена ли работа фильтра в настройках. Если нет - ничего не делаем с исходными данными\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Также не следует ничего делать, если данный контент не является HTML\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (!cfg-\u003Eengine || strcmp( r-\u003Econtent_type, \u003Cfont color=\"#A31515\"\u003E\"text\u002Fhtml\"\u003C\u002Ffont\u003E) != 0) {\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E ap_pass_brigade( f-\u003Enext, pbbIn);\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F* инициализируем пустую выходную бригаду *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  pbbOut = apr_brigade_create( r-\u003Epool, c-\u003Ebucket_alloc);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   * Читаем корзины данных из входящей бригады\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E   *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Efor\u003C\u002Ffont\u003E (pbktIn = APR_BRIGADE_FIRST( pbbIn); pbktIn != APR_BRIGADE_SENTINEL( pbbIn); pbktIn = APR_BUCKET_NEXT( pbktIn)) {\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *data;\u003Cbr\u002F\u003E\r\n    apr_size_t len;\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *buf;\u003Cbr\u002F\u003E\r\n    apr_bucket *pbktOut;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003E\u002F* если текущая \"корзина\" - это метаданные-признак конца - просто перемещаем корзину в конец бригады и продолжаем обход данных *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E(APR_BUCKET_IS_EOS( pbktIn)) {\u003Cbr\u002F\u003E\r\n      apr_bucket *pbktEOS = apr_bucket_eos_create( c-\u003Ebucket_alloc);\u003Cbr\u002F\u003E\r\n      APR_BRIGADE_INSERT_TAIL( pbbOut,pbktEOS);\u003Cbr\u002F\u003E\r\n      \u003Cfont color=\"#0000ff\"\u003Econtinue\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003E\u002F* читаем данные *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    apr_bucket_read( pbktIn, &amp;data, &amp;len, APR_NONBLOCK_READ);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E     * производим полезную работу над данными\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E     * ВАЖНО! Не меняйте исходные данные напрямую - это может привести к неожиданным результатам.\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E     * Действуйте через промежуточный буфер.\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E     *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    buf = apr_bucket_alloc( len, c-\u003Ebucket_alloc);\u003Cbr\u002F\u003E\r\n    memset( buf, 0, \u003Cfont color=\"#0000ff\"\u003Esizeof\u003C\u002Ffont\u003E( buf));\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    uptags_tags_to_uppercase( data, buf);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003E\u002F* записываем новые данные *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    pbktOut = apr_bucket_heap_create( buf, len, apr_bucket_free, c-\u003Ebucket_alloc);\u003Cbr\u002F\u003E\r\n    APR_BRIGADE_INSERT_TAIL( pbbOut, pbktOut);\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  apr_brigade_cleanup( pbbIn);\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E ap_pass_brigade( f-\u003Enext, pbbOut);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕстественно. нам необходимо реализовать также нашу функцию uptags_tags_to_uppercase(), которая, собственно, и проделывает все необходимые манипуляции над данными, и поместить ее объявление перед объявлением фильтров:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Функция преобразует тэги в строке к верхнему регистру\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E uptags_tags_to_uppercase( \u003Cfont color=\"#0000ff\"\u003Econst\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *data, \u003Cfont color=\"#0000ff\"\u003Echar\u003C\u002Ffont\u003E *str) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E i, s = strlen( data), tag_opened = 0;\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#0000ff\"\u003Efor\u003C\u002Ffont\u003E (i = 0; i &lt; s; i++) {\u003Cbr\u002F\u003E\r\n    str[i] = data[i];\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (str[i] == \u003Cfont color=\"#A31515\"\u003E'&lt;'\u003C\u002Ffont\u003E) {\u003Cbr\u002F\u003E\r\n      tag_opened = 1;\u003Cbr\u002F\u003E\r\n    } \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (str[i] == \u003Cfont color=\"#A31515\"\u003E'\u003E'\u003C\u002Ffont\u003E) {\u003Cbr\u002F\u003E\r\n      tag_opened = 0;\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (tag_opened &amp;&amp; str[i] != \u003Cfont color=\"#A31515\"\u003E'\\0'\u003C\u002Ffont\u003E) {\u003Cbr\u002F\u003E\r\n      str[i] = apr_toupper( str[i]);\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы написали достаточно простую функцию, которая в реальной жизни не всегда будет вести себя так как нужно. Но наша задача достаточно проста, поэтому в целях тестирования она нам вполне подойдет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа этом разработку фильтров для нашего модуля можно считать завершенной и мы можем перейти к заключительному этапу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EОпределение модуля\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того, как мы определили все функции нашего модуля, нам необходимо «объяснить» веб-серверу, как их следует использовать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля этого достаточно перечислить их в соответствующих ячейках структуры модуля Apache:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Описываем структуру модуля Apache\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nmodule AP_MODULE_DECLARE_DATA uptags_module = {\u003Cbr\u002F\u003E\r\n  STANDARD20_MODULE_STUFF,\u003Cbr\u002F\u003E\r\n  uptags_create_dir_config,   \u003Cfont color=\"#008000\"\u003E\u002F* создание конфигурации директории *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  NULL,             \u003Cfont color=\"#008000\"\u003E\u002F* объединение конфигураций директории *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  uptags_create_server_config,  \u003Cfont color=\"#008000\"\u003E\u002F* создание серверной конфигурации *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  NULL,             \u003Cfont color=\"#008000\"\u003E\u002F* объединение серверной конфигурации *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  uptags_directives,       \u003Cfont color=\"#008000\"\u003E\u002F* маппинг директив конфигурации *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  uptags_register_hooks     \u003Cfont color=\"#008000\"\u003E\u002F* регистрируем обработчики *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n};\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак мы видим, нам не хватает лишь небольшой функции uptags_register_hooks, которая возмет на себя работу по регистрации всех нужных нам обработчиков для данного модуля.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте ее напишем:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Cfont color=\"#008000\"\u003E\u002F**\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E * Регистрируем фильтры модуля в обработчиках\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E *\u002F\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003Estatic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E uptags_register_hooks( apr_pool_t *p) {\u003Cbr\u002F\u003E\r\n  ap_hook_insert_filter( uptags_in_filter, NULL, NULL, APR_HOOK_MIDDLE);\u003Cbr\u002F\u003E\r\n  ap_register_output_filter( \u003Cfont color=\"#A31515\"\u003E\"Uptags\"\u003C\u002Ffont\u003E, uptags_out_filter, NULL, AP_FTYPE_RESOURCE);\u003Cbr\u002F\u003E\r\n}\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете скачать полный исходник модуля \u003Ca href=\"http:\u002F\u002Fmikhailstadnik.com\u002Fsrc\u002Fuptags\u002Fmod_uptags.c\"\u003Eотсюда\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EКомпиляция и сборка модуля\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамый простой способ скомпилировать и подключить модуль — это собрать его как DSO (Dynamically Shared Object). Чтобы сделать это запустите команду в директории с исходником:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003Eapxs2 -c mod_uppertags.c\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли компиляция прошла успешно, должна появиться папка .libs, а в ней файл mod_uptegs.so. Следует скопировать данный файл в директорию с подгружаемыми модулями Apache. В Debian (Ubuntu) Linux это, как правило, директория \u002Fusr\u002Flib\u002Fapache2\u002Fmodules\u002F\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь в основной конфиг Apache вам нужно вписать директивы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\nLoadModule uptags_module \u002Fusr\u002Flib\u002Fapache2\u002Fmodules\u002Fmod_uptags.so\n\n&lt;IfModule mod_uptags.c\u003E\n    UptagsEngine On\n&lt;\u002FIfModule\u003E\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее следует перезагрузить веб-сервер:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\n\u002Fetc\u002Finit.d\u002Fapache2 restart\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь можете проверить результат, просмотрев любую страницу, которую выдает ваш веб-сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже нелишним будет написать содержимое файла config.m4:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\nAPACHE_MODPATH_INIT(uptags)\nAPACHE_MODULE(uptags, reformatting all HTML tags to upercase, , , no)\nAPACHE_MODPATH_FINISH\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто позволит автоматически скомпилировать модуль при общей сборке Apache. Для того, чтобы собрать модуль статически при сборке всего веб-сервера теперь достаточно указать опцию --enable-uptags при запуске команды .\u002Fconfigure:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\n.\u002Fconfigure --enable-uptags\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ, конечно же, не забудьте дать другим людям необходимые инструкции, описав их в файле README.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EСсылки (на английском)\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwww.apachetutor.org\u002Fdev\u002Fconfig\"\u003EConfiguration for Modules\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwww.apachetutor.org\u002Fdev\u002Fbrigades\"\u003EIntroduction to Buckets and Brigades\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwww.apachetutor.org\u002Fdev\u002Fpools\"\u003EBasic Resource Management in Apache: the APR Pools\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwww.apachetutor.org\u002Fdev\u002Frequest\"\u003ERequest Processing in Apache\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fapr.apache.org\u002Fdocs\u002Fapr\u002F1.3\u002F\"\u003EApache Portable Runtime (APR) Documentation\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EЗаключение\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак мы увидели, разработка собственных модулей для веб-сервера Apache не такое уж и сложное дело. Достаточно вооружиться терпением и ссылками на соответствующую документацию, и задача становиться вполне разрешимой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ же надеюсь, что данное руководство поможет читателю ближе познакомиться с Apache API для написания модулей и станет начальной отправной точкой в этом интересном деле.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУдачи в девелопменте!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nP.S. Это кросс-постинг \u003Ca href=\"http:\u002F\u002Fmikhailstadnik.com\u002Fdeveloping-apache-module\"\u003Eоригинальной статьи\u003C\u002Fa\u003E с моего блога.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"apache"},{"titleHtml":"c"},{"titleHtml":"development"},{"titleHtml":"filter"},{"titleHtml":"module"},{"titleHtml":"веб-сервер"},{"titleHtml":"модуль"},{"titleHtml":"разработка"},{"titleHtml":"фильтр"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F50909\u002F07d6febf55a1024acedf77f9a405f480\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F50909\u002F07d6febf55a1024acedf77f9a405f480\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F50909\\\u002F\"},\"headline\":\"Разработка модуля для Apache 2.x\",\"datePublished\":\"2009-02-02T18:51:47+03:00\",\"dateModified\":\"2009-02-02T20:01:49+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Михаил Стадник\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Предисловие  Недавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в п...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F50909\\\u002F#post-content-body\",\"about\":[\"h_webdev\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F50909\\\u002F07d6febf55a1024acedf77f9a405f480\\\u002F\"]}","metaDescription":"Предисловие\r\n\r\nНедавно мне пришлось столкнуться с необходимостью разработать собственный небольшой модуль для веб-сервера Apache 2.2.x. Проведя несколько часов в поисках подходящей информации, я...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"578296":{"id":"578296","timePublished":"2021-09-26T14:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вектор? Растр? А может — и то, и другое?","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Zach Leatherman","originalUrl":"https:\u002F\u002Fwww.zachleat.com\u002Fweb\u002Fvector-raster-split\u002F"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe36\u002F812\u002Fd3d\u002Fe36812d3de38eb3d479d7a13228717ef.png","speciality":"Пользователь"},"statistics":{"commentsCount":8,"favoritesCount":29,"readingCount":2477,"score":23,"votesCount":25},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"19802","alias":"graph_design","type":"collective","title":"Графический дизайн","titleHtml":"Графический дизайн","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"На этой неделе я столкнулся с интересным классом задач, для решения которых, как я теперь понимаю, можно было использовать гораздо более удачный подход и раньше. Но существует ли такой подход?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F578296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fge\u002Fkf\u002F1n\u002Fgekf1nauxn50imhrqyil4rlzj5m.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EИзображение для верхней части сайта\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРечь идёт о подготовке изображения, рассчитанного на использовании в верхней правой части сайта \u003Ca href=\"https:\u002F\u002Fjamstackconf.com\" rel=\"nofollow noopener noreferrer\"\u003Ejamstackconf.com\u003C\u002Fa\u003E. Мы, в маркетинговой команде Netlify, используем Figma. Первая моя попытка экспорта этого изображения для использования его на сайте оказалась далеко не самой удачной.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"графика"},{"titleHtml":"веб-разработка"},{"titleHtml":"ruvds_перевод"}]},"579542":{"id":"579542","timePublished":"2021-09-26T19:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Jetpack Compose — как легко построить UI на Android","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2713395","alias":"i15in","fullname":"Иван","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F25f\u002Fe4b\u002Ff94\u002F25fe4bf94867d9647a0ae809abf2e429.jpg","speciality":"Android developer"},"statistics":{"commentsCount":8,"favoritesCount":49,"readingCount":3320,"score":31,"votesCount":39},"hubs":[{"relatedData":null,"id":"18232","alias":"funcorp","type":"corporative","title":"Блог компании FUNCORP","titleHtml":"Блог компании FUNCORP","isProfiled":false},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"9188","alias":"ui","type":"collective","title":"Интерфейсы","titleHtml":"Интерфейсы","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ июле этого года вместе с Android Studio Arctic Fox вышла одна из долгожданных библиотек — Jetpack Compose. Она позволяет создавать пользовательский интерфейс в декларативном стиле и обещает быть революцией в построении UI.\u003C\u002Fp\u003E\u003Cp\u003EРазбираемся, так ли это на самом деле, какие у библиотеки преимущества и недостатки. Подробности — в статье.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка мобильных приложений"},{"titleHtml":"jetpack compose"},{"titleHtml":"ui"},{"titleHtml":"интерфейсы"},{"titleHtml":"android"},{"titleHtml":"kotlin"},{"titleHtml":"android studio"},{"titleHtml":"arctic fox"},{"titleHtml":"пользовательские интерфейсы"}]},"579654":{"id":"579654","timePublished":"2021-09-27T09:05:53+00:00","isCorporative":true,"lang":"ru","titleHtml":"Стажировка в ABBYY-2021: гибридный формат, больше машинного обучения и планы на будущее","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"56275","alias":"ABBYYTeam","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F246\u002F3ca\u002Fee9\u002F2463caee983f82739ca5421e1e6a163a.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":1,"readingCount":374,"score":5,"votesCount":7},"hubs":[{"relatedData":null,"id":"5027","alias":"abbyy","type":"corporative","title":"Блог компании ABBYY","titleHtml":"Блог компании ABBYY","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"20696","alias":"study","type":"collective","title":"Учебный процесс в IT","titleHtml":"Учебный процесс в IT","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМы в ABBYY понимаем, как важно начинать строить карьеру в интересном для себя направлении еще в студенческие годы. Поэтому помогаем талантливым ребятам пробовать свои силы и развиваться уже на третьем курсе университета. Мы проводим летние стажировки, где даем ребятам настоящие «боевые» задачи. По итогам лучшие студенты получают предложения о работе. \u003C\u002Fp\u003E\u003Cp\u003EЛетняя стажировка помогает будущим сотрудникам не только получить опыт и проявить себя, но и изучить внутренние стандарты и процессы разработки компании. Кроме того, это еще и отличная возможность получить предложение о постоянной работе уже на четвертом курсе. Как правило, ABBYY предлагает стажерам частичную занятость для комфортного совмещения с учебой. \u003C\u002Fp\u003E\u003Cp\u003EМы уже не раз подводили итоги летних стажировок в ABBYY (\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fabbyy\u002Fblog\u002F421369\u002F\"\u003Eтут\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fabbyy\u002Fblog\u002F471664\u002F\"\u003Eтут\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fabbyy\u002Fblog\u002F478004\u002F\"\u003Eтут\u003C\u002Fa\u003E), но еще никогда не рассказывали о том, как в целом это проходит в нашей компании, какие тестовые задания и задачи выполняли стажеры, и что думают о стажировке менторы. Все подробности – под катом.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F63b\u002F15c\u002Fe94\u002F63b15ce943783d9aab19e36e15b8e7e6.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F63b\u002F15c\u002Fe94\u002F63b15ce943783d9aab19e36e15b8e7e6.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"nlp (natural language processing)"},{"titleHtml":"abbyy"},{"titleHtml":"abbyy_nlp"},{"titleHtml":"стажировка"},{"titleHtml":"стажер"},{"titleHtml":"практика программирования"},{"titleHtml":"python"},{"titleHtml":"c++"}]},"579772":{"id":"579772","timePublished":"2021-09-27T05:32:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сливы процветают. Эксперт-«параноик» Майкл Баззель о защите личных данных","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Bazzell","originalUrl":"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F"}}],"author":{"id":"2297567","alias":"SearchInform_team","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":4,"readingCount":1800,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"22418","alias":"searchinform","type":"corporative","title":"Блог компании SearchInform","titleHtml":"Блог компании SearchInform","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНаш очередной пост из серии «интересное на иностранном языке» – рассказ Майкла Баззеля о том, как сберечь свои персональные данные от утечек. Майкл – знаковая фигура в сфере OSINT, работал в правительстве США и ФБР, его приглашали в качестве технического эксперта в сериал «Мистер Робот», который считают достойным с точки зрения достоверности. В личной жизни эксперт придерживается настолько жестких правил в отношении информационной гигиены, что некоторые считают его «неадекватом». Так ли это – может быть несколько мнений. \u003C\u002Fp\u003E\u003Cp\u003EОдин из факторов, который убеждает в правильном подходе Майкла, – что риски обнаружить свои данные в интернете стали существенно выше, потому что шифровальщики без разбору сливают в сеть все, до чего дотягиваются при атаках на бизнес. Приводим перевод \u003Ca href=\"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F\"\u003Eпоста Майкла Баззеля\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EАтакуют корпорации, а страдают люди\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EБольшинство людей не задумываются о том, как их касается проблема распространения вирусов-шифровальщиков. Логика такова: речь идет о проблемах компаний, это они вынуждены платить выкуп. При чем тут, казалось бы, обычные люди?! \u003C\u002Fp\u003E\u003Cp\u003EА при том, что преступники сменили тактику: сейчас они не просто шифруют данные, но и скачивают их, выкладывают в открытый доступ, если компании не платят им выкуп. Теперь давайте подумаем, что в этих слитых базах? Множество данных о сотрудниках, клиентах, контрагентах, с которыми компания-жертва работает.\u003C\u002Fp\u003E\u003Cp\u003EХочу сразу уточнить: я это пишу не потому что выступаю за уплату выкупа. Я за то, чтобы сопротивляться избыточному сбору данных там, где это не обязательно. Мы халатно относимся к своим ПДн, раздавая их по первому требованию.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"персональные данные"},{"titleHtml":"пдн"},{"titleHtml":"сёрчинформ"},{"titleHtml":"Майкл Баззел"},{"titleHtml":"утечки информации"}]},"579804":{"id":"579804","timePublished":"2021-09-26T12:06:13+00:00","isCorporative":true,"lang":"ru","titleHtml":"ОС для работы со звуком — что она умеет","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2691015","alias":"mirhifi","fullname":"«Мир Hi-Fi»","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdfb\u002F713\u002Fedb\u002Fdfb713edbeed85de6588bd27d6c43229.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":24,"readingCount":6129,"score":9,"votesCount":11},"hubs":[{"relatedData":null,"id":"18822","alias":"audiomania","type":"corporative","title":"Блог компании Аудиомания","titleHtml":"Блог компании Аудиомания","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21918","alias":"soft","type":"collective","title":"Софт","titleHtml":"Софт","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОдин из предыдущих материалов мы посвятили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575076\u002F\"\u003Eинструментам\u003C\u002Fa\u003E для сборки цифровой звуковой рабочей станции (DAW). Еще мы говорили об \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575892\u002F\"\u003Eopen source проектах\u003C\u002Fa\u003E, в рамках которых можно сделать собственный синтезатор или педалборд.\u003C\u002Fp\u003E\u003Cp\u003EСегодня продолжим тему и расскажем об открытой ОС \u003Cstrong\u003EElk Audio\u003C\u002Fstrong\u003E, построенной на базе Linux. Она заточена под обработку звука на встраиваемых системах.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аудиомания"},{"titleHtml":"звук"},{"titleHtml":"Elk Audio"},{"titleHtml":"операционные системы"},{"titleHtml":"DAW"}]},"579854":{"id":"579854","timePublished":"2021-09-27T06:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Видишь уязвимости? А они есть! Наше исследование популярных CMS-систем","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2684283","alias":"Solar_Pentest","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":7,"favoritesCount":11,"readingCount":2215,"score":18,"votesCount":20},"hubs":[{"relatedData":null,"id":"20826","alias":"solarsecurity","type":"corporative","title":"Блог компании Ростелеком-Солар","titleHtml":"Блог компании Ростелеком-Солар","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛьвиная доля всех работ по анализу защищенности внешнего периметра – это тестирование веб-приложений. Здесь могут быть как корпоративные решения, так и «домашние» разработки на базе различных публичных систем управления контентом (CMS). Мы всегда проводим глубокий анализ подобных решений на тестовых стендах и зачастую находим уязвимости нулевого дня. Собственно, из опыта таких проектов и родилась идея собрать исследовательскую команду и провести глубокий анализ популярных CMS-систем и различных плагинов для них. В этом посте мы поделимся результатами нашего исследования, а также продемонстрируем примеры уязвимого кода наиболее интересных, на наш взгляд, уязвимостей и примеры их эксплуатации. Конечно все эти уязвимости уже исправлены и описываются здесь с разрешения владельцев систем.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","buttonTextHtml":"Не всё то в безопасности, что с Bug Bounty","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"cms"},{"titleHtml":"уязвимости"},{"titleHtml":"уязвимости и их эксплуатация"},{"titleHtml":"уязвимость нулевого дня"}]},"580008":{"id":"580008","timePublished":"2021-09-27T06:30:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"Летний Магнитогорск","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2614609","alias":"city_scraper","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8f8\u002Fd6c\u002F328\u002F8f8d6c328ec3a513103b6757c2c21610.png","speciality":"Пользователь"},"statistics":{"commentsCount":5,"favoritesCount":2,"readingCount":2500,"score":9,"votesCount":15},"hubs":[{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМагнитогорск Челябинской области – один из крупнейших мировых центров чёрной металлургии. В России это шестой из крупнейших городов, которые не являются центрами субъектов страны. \u003C\u002Fp\u003E\u003Cp\u003EСовсем недавно город был одним из наиболее неблагополучных с точки зрения загрязнения атмосферного воздуха, но в 2021 году был зафиксирован «повышенный» уровень – то есть не «высокий» или «очень высокий», как раньше. \u003C\u002Fp\u003E\u003Cp\u003EКак этот город выглядит летом? Где и как его жители могут проводить время?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Магнитогорск"},{"titleHtml":"промышленность"},{"titleHtml":"промышленные города"},{"titleHtml":"урбанизм\u002Fурбания"},{"titleHtml":"урбанистика"},{"titleHtml":"города России"},{"titleHtml":"города"}]},"580038":{"id":"580038","timePublished":"2021-09-26T13:35:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"KODI: собираем удобный и функциональный медиацентр для дома. Часть 9. Spotify","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"2644801","alias":"arboozof","fullname":"Роман","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff76\u002F452\u002F3d5\u002Ff764523d55be8ef6fc4307ea3158dadf.png","speciality":"IT\u002FRetail"},"statistics":{"commentsCount":15,"favoritesCount":37,"readingCount":5586,"score":10,"votesCount":10},"hubs":[{"relatedData":null,"id":"36","alias":"linux","type":"collective","title":"Настройка Linux","titleHtml":"Настройка Linux","isProfiled":true},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"21908","alias":"smartphones","type":"collective","title":"Смартфоны","titleHtml":"Смартфоны","isProfiled":false},{"relatedData":null,"id":"21946","alias":"video_tech","type":"collective","title":"Видеотехника","titleHtml":"Видеотехника","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПродолжаем тему интеграции в наш медиацентр онлайн-сервисов прослушивания музыки. Ранее мы уже «подружили» медиацентр KODI с сервисом Яндекс.Музыка. Сегодня на очереди не менее популярный сервис – Spotify.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","buttonTextHtml":"Читать дальше &rarr;","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","fit":"cover","positionY":0,"positionX":14.74358974359}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"kodi"},{"titleHtml":"xbmc"},{"titleHtml":"ubuntu"},{"titleHtml":"kubuntu"},{"titleHtml":"music"},{"titleHtml":"spotify"},{"titleHtml":"addons"},{"titleHtml":"дополнения"},{"titleHtml":"тв"}]},"580048":{"id":"580048","timePublished":"2021-09-26T14:22:36+00:00","isCorporative":false,"lang":"ru","titleHtml":"Будь строже к себе: как ограничения помогают сделать код лучше","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"2787821","alias":"ZeBrains_team","fullname":"Станислав Маслов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fae3\u002F3ee\u002F4f1\u002Fae33ee4f1a117aeeab42ec5a9e2eba25.jpg","speciality":"директор продакшена в IT-компании"},"statistics":{"commentsCount":10,"favoritesCount":48,"readingCount":4441,"score":8,"votesCount":16},"hubs":[{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true},{"relatedData":null,"id":"20726","alias":"productpm","type":"collective","title":"Управление продуктом","titleHtml":"Управление продуктом","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EЕсли вам приходилось задумываться о построении эффективной экосистемы проекта и определении ролей тимлида и разработчика — статья Артема Прозорова из ZeBrains для вас. \u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EПредлагаю вам задуматься над одним вопросом. Но не спешите с ответом, потому что он не так очевиден, как может показаться:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКакая из команд может реализовать более технически стабильный продукт?&nbsp;\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №1:\u003C\u002Fstrong\u003E Проектный менеджер, аналитик, тестировщик и несколько разработчиков, у каждого из которых за плечами минимум три года опыта. Все работают в одном офисе, посвящая свое время одному проекту в режиме fulltime.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №2:\u003C\u002Fstrong\u003E Один сильный разработчик. Ему помогают множество не знакомых между собой людей из разных часовых поясов. У каждого — свой набор компетенций и уровень опыта. Работой над проектом участники занимаются в свободном режиме, по несколько часов в неделю.\u003C\u002Fp\u003E\u003Cp\u003E* * *\u003C\u002Fp\u003E\u003Cp\u003EОтвет на этот вопрос получим к концу статьи.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fefe\u002F413\u002Feb2\u002Fefe413eb27c391cfcfef0484e6997aab.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"управление проектами"},{"titleHtml":"управление продуктом"},{"titleHtml":"управление командой разработки"},{"titleHtml":"управление командами разработчиков"},{"titleHtml":"тимлид"},{"titleHtml":"тимлиды и разработчики"}]},"580052":{"id":"580052","timePublished":"2021-09-26T15:29:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Почему экология не может быть плохой?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2568695","alias":"phanerozoi_evidence","fullname":"Фанерозой","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdcc\u002F862\u002F561\u002Fdcc862561429f2ed85090ac53e39cf7d.jpg","speciality":"Биологи, врач, научный популяризатор, палеонтолог"},"statistics":{"commentsCount":46,"favoritesCount":26,"readingCount":4825,"score":8,"votesCount":28},"hubs":[{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22750","alias":"biology","type":"collective","title":"Биология","titleHtml":"Биология","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cem\u003EСо второй половины ХХ в мы всё чаще слышим из средств массовой информации выражения «плохая экология», «сохранить экологию», «экология строительных материалов». Но, к сожалению, не многие знают, что такое «экология» на самом деле. Для разгадки тайн экологии нам предстоит окунуться в удивительный мир науки...\u003C\u002Fem\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","fit":"cover","positionY":29.545454545455,"positionX":1.4102564102564}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"виды"},{"titleHtml":"охрана окружающей среды"},{"titleHtml":"мифы"},{"titleHtml":"экосистема"},{"titleHtml":"биогеоценоз"},{"titleHtml":"экология"},{"titleHtml":"экосистемы"},{"titleHtml":"биоценозы"},{"titleHtml":"биология"},{"titleHtml":"вирусы"}]},"580060":{"id":"580060","timePublished":"2021-09-27T09:00:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Арракис, который мы заслужили","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"238277","alias":"Zelenyikot","fullname":"Виталий Егоров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F22b\u002F2d7\u002F7a5\u002F22b2d77a57b687aae24784a3e53089c9.jpg","speciality":"Популяризатор космонавтики"},"statistics":{"commentsCount":10,"favoritesCount":21,"readingCount":6190,"score":61,"votesCount":67},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false},{"relatedData":null,"id":"21984","alias":"sci-fi","type":"collective","title":"Научная фантастика","titleHtml":"Научная фантастика","isProfiled":false},{"relatedData":null,"id":"22014","alias":"futurenow","type":"collective","title":"Будущее здесь","titleHtml":"Будущее здесь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580060\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fk0\u002Fds\u002Fy5\u002Fk0dsy5npxclyjdytiroqga7-leu.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nВо вселенной писателя-фантаста Фрэнка Герберта, Дюна, она же Арракис &mdash; это пустынная и маловодная планета с двумя лунами. По сюжету, она находится за пределами Солнечной системы, но если мы захотим поискать ближайшую схожую параллель,&nbsp;то больше всего подходит планета Марс. Предлагаю воспользоваться возможностями, которые даёт современная космонавтика, и совершить воображаемую прогулку на нашу Дюну.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Марс"},{"titleHtml":"Дюна"},{"titleHtml":"MRO"},{"titleHtml":"Curiosity"},{"titleHtml":"марсоход"},{"titleHtml":"ruvds_статьи"}]},"580066":{"id":"580066","timePublished":"2021-09-26T18:12:37+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько мы переплачиваем за сервера используя Ruby on Rails","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"941194","alias":"motoroller95","fullname":"Искандар Гохар","avatarUrl":"","speciality":"Ruby on Rails developer at IT-territory"},"statistics":{"commentsCount":48,"favoritesCount":6,"readingCount":4460,"score":7,"votesCount":13},"hubs":[{"relatedData":null,"id":"224","alias":"ruby","type":"collective","title":"Ruby","titleHtml":"Ruby","isProfiled":true},{"relatedData":null,"id":"8279","alias":"ror","type":"collective","title":"Ruby on Rails","titleHtml":"Ruby on Rails","isProfiled":true},{"relatedData":null,"id":"17822","alias":"parallel_programming","type":"collective","title":"Параллельное программирование","titleHtml":"Параллельное программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F577948\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпрошлой\u003C\u002Fa\u003E статье я разбирался с тем как работает GIL, а сегодня меня захватила идея узнать насколько дорого обходится этот GIL для кода, который исполняется у нас на бэкенде. Для этого я решил пропатчить MRI и добавить пару переменных, в которые буду засекать сколько времени поток реально выполнял код, а сколько ничего не делал и ждал пока ему удастся завладеть локом. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruby"},{"titleHtml":"gil"}]},"580080":{"id":"580080","timePublished":"2021-09-26T19:12:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Дайджест свежих материалов из мира фронтенда за последнюю неделю №486 (20 — 26 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"59347","alias":"alexzfort","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd2a\u002Fe8a\u002F5ac\u002Fd2ae8a5ac9876f838ebdd45f3ea3bc3b.png","speciality":""},"statistics":{"commentsCount":2,"favoritesCount":18,"readingCount":3144,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"307","alias":"css","type":"collective","title":"CSS","titleHtml":"CSS","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"17103","alias":"html5","type":"collective","title":"HTML","titleHtml":"HTML","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Предлагаем вашему вниманию подборку с ссылками на новые материалы из области фронтенда и около него.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fec\u002F0x\u002Fkx\u002Fec0xkxfr5jd-rci1wjo9bmr4cns.jpeg\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"фронтенд"},{"titleHtml":"css"},{"titleHtml":"js"},{"titleHtml":"es6"},{"titleHtml":"vue"},{"titleHtml":"react"},{"titleHtml":"angular"},{"titleHtml":"ember"},{"titleHtml":"html5"},{"titleHtml":"браузеры"},{"titleHtml":"ссылки"}]},"580084":{"id":"580084","timePublished":"2021-09-26T19:30:13+00:00","isCorporative":false,"lang":"ru","titleHtml":"Telegram Bots vs Google Forms","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2705023","alias":"dm_aq","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":4,"favoritesCount":21,"readingCount":3716,"score":7,"votesCount":7},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EGoogle forms отличный инструмент для решения простых организационных задач, например, сбор информации для регистрации людей на небольшое мероприятие. Но что если мы попытаемся решить эту задачу по другому? Например через telegram.&nbsp;\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"telegrambot"},{"titleHtml":"telegram"},{"titleHtml":"kotlin"},{"titleHtml":"spring"}]},"580086":{"id":"580086","timePublished":"2021-09-26T19:37:10+00:00","isCorporative":false,"lang":"ru","titleHtml":"Термо принтер и JavaScript","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"1709955","alias":"IIIarp","fullname":"Сергей Шарпов","avatarUrl":"","speciality":"Веб разработчик"},"statistics":{"commentsCount":46,"favoritesCount":33,"readingCount":7900,"score":38,"votesCount":40},"hubs":[{"relatedData":null,"id":"84","alias":"crazydev","type":"collective","title":"Ненормальное программирование","titleHtml":"Ненормальное программирование","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПриобрел я на днях термопринтер (кассовый аппарат, если изволите) жене для магазина и решил что смогу его обуздать как истинный программист и сделать свою веб кассу, вместо того, что-бы использовать платные решения, ведь задача простая, печатать чеки, но это оказалось не так то и просто...\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"термопринтер"},{"titleHtml":"javascript"},{"titleHtml":"webusb"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":5,"favoritesCount":8,"readingCount":953,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Sergey Prosin","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Веду команды к релизам, пишу статьи, выступаю."},"statistics":{"commentsCount":6,"favoritesCount":76,"readingCount":3637,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":76,"favoritesCount":44,"readingCount":13883,"score":41,"votesCount":41},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]},"580094":{"id":"580094","timePublished":"2021-09-26T22:35:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"206414","alias":"PoltoS","fullname":"Сергей Полторак","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5cf\u002F03a\u002Fc7f\u002F5cf03ac7fe60ea8a6686bd4c57627ddc.png","speciality":""},"statistics":{"commentsCount":77,"favoritesCount":19,"readingCount":11077,"score":25,"votesCount":45},"hubs":[{"relatedData":null,"id":"118","alias":"crypto","type":"collective","title":"Криптография","titleHtml":"Криптография","isProfiled":true},{"relatedData":null,"id":"210","alias":"it_testing","type":"collective","title":"Тестирование IT-систем","titleHtml":"Тестирование IT-систем","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИнтересно наблюдать, как дискредитируется термин блокчейна на выборах в госдуму. Вроде голосование было на блокчейне, но его якобы подделали. Т.е. блокчейн можно подделать или ЦИК и ДИТ нам подсунули какой-то лохчейн вместо блокчейна?!? И мало кто обсуждает происходящее по существу без эмоций, связанных с результатами партий и кандидатов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Криптография"},{"titleHtml":"блокчейн"},{"titleHtml":"открытые данные"},{"titleHtml":"электронное голосование"},{"titleHtml":"выборы"},{"titleHtml":"выборы в госдуму"},{"titleHtml":"дэг"},{"titleHtml":"дэг 2021"}]},"580150":{"id":"580150","timePublished":"2021-09-27T10:50:03+00:00","isCorporative":true,"lang":"ru","titleHtml":"Топ-5 когнитивных искажений при планировании в IT","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2794469","alias":"KM_QA","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":0,"favoritesCount":12,"readingCount":947,"score":13,"votesCount":13},"hubs":[{"relatedData":null,"id":"14332","alias":"oleg-bunin","type":"corporative","title":"Блог компании Конференции Олега Бунина (Онтико)","titleHtml":"Блог компании Конференции Олега Бунина (Онтико)","isProfiled":false},{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false},{"relatedData":null,"id":"21990","alias":"brain","type":"collective","title":"Мозг","titleHtml":"Мозг","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта статья подходит для тимлидов и их подопечных, а также для всех, кто оценивает проекты и задачи. Я расскажу, как и почему мы делаем ошибки из-за когнитивных искажений. Попадаем в них мы почти все, просто потому что мы живые люди. И на примере одного дня из жизни тимлида я хочу показать, в какие искажения чаще всего влетают в IT, и&nbsp; — самое полезное&nbsp; —&nbsp; как из них можно выходить.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЗамечу, что искать когнитивные искажения стоит, в первую очередь, у себя, а не у коллег. \u003C\u002Fstrong\u003EИ что рассказывать про искажения намного проще, чем не влетать в их на практике, однако, если этому научиться, то в перспективе это изрядно окупается, потому что экономит и время, и деньги, помогая и нам, и команде.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"когнитивные искажения"},{"titleHtml":"нейрофизиология"},{"titleHtml":"мозг"},{"titleHtml":"психология"},{"titleHtml":"тимлидство"},{"titleHtml":"тимлид"},{"titleHtml":"управление людьми"},{"titleHtml":"управление проектами и командой"},{"titleHtml":"управление командой"},{"titleHtml":"управление персоналом"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580060","580092","580086","579542","580094","578296","579854","580080","580090","580150","580088","580038","580008","579772","579804","580052","580048","580084","580066","579654"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":2},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["577422","557126","548238"],"similarListRefs":{"548238":{"id":"548238","timePublished":"2021-03-23T07:30:40+00:00","isCorporative":true,"lang":"ru","titleHtml":"Продолжение. Частые ошибки в настройках Nginx, из-за которых веб-сервер становится уязвимым","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Frans Rosen, Mathias Karlsson, Fredrik Nordberg Almroth","originalUrl":"https:\u002F\u002Flabs.detectify.com\u002F2021\u002F02\u002F18\u002Fmiddleware-middleware-everywhere-and-lots-of-misconfigurations-to-fix\u002F"}}],"author":{"id":"64252","alias":"Cloud4Y","fullname":"Cloud4Y","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc2d\u002Fd0d\u002Fc05\u002Fc2dd0dc05834aebeb86bb76e35caeaab.png","speciality":"Корпоративный облачный провайдер"},"statistics":{"commentsCount":1,"favoritesCount":146,"readingCount":13895,"score":13,"votesCount":17},"hubs":[{"id":"17352","alias":"cloud4y","type":"corporative","title":"Блог компании Cloud4Y","titleHtml":"Блог компании Cloud4Y","isProfiled":false},{"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"id":"6659","alias":"nginx","type":"collective","title":"Nginx","titleHtml":"Nginx","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EРанее Cloud4Y рассказал про \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fcloud4y\u002Fblog\u002F547164\u002F\"\u003Eуязвимости веб-серверов Nginx\u003C\u002Fa\u003E, балансировщиков нагрузки и прокси-серверов.  Что-то из этого вы могли знать, а что-то, надеемся, стало полезной информацией.\u003C\u002Fp\u003E\u003Cp\u003EНо история не закончилась. Многочисленные программы bug bounties позволяют проводить широкомасштабные исследования, благодаря которым удаётся найти реально действующие уязвимости.&nbsp;Проект&nbsp;\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fyandex\u002Fgixy\"\u003EGixy\u003C\u002Fa\u003E помог найти множество неправильных конфигураций промежуточного ПО, но далеко не все. Что ещё удалось обнаружить:\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd08\u002F9fa\u002Fe21\u002Fd089fae21e6d2c2765e6fda4f90fb117.jpeg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd08\u002F9fa\u002Fe21\u002Fd089fae21e6d2c2765e6fda4f90fb117.jpeg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null},"557126":{"id":"557126","timePublished":"2021-05-13T03:55:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск домашнего веб-сервера без статического IP с помощью Python","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Jarvis","originalUrl":"https:\u002F\u002Fpython.plainenglish.io\u002Frunning-a-home-web-server-without-a-static-ip-using-google-domains-python-saves-the-day-246570b26d88"}},{"type":"tutorial","data":null}],"author":{"id":"578681","alias":"marshersusanin","fullname":"Иван Радаев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F966\u002F5e1\u002F8d6\u002F9665e18d6687e1d7f266a982528a2f21.png","speciality":"Старший инженер, маркетолог"},"statistics":{"commentsCount":30,"favoritesCount":134,"readingCount":27493,"score":6,"votesCount":14},"hubs":[{"id":"340","alias":"python","type":"collective","title":"Python","titleHtml":"Python","isProfiled":true},{"id":"21476","alias":"raspberrypi","type":"collective","title":"Разработка на Raspberry Pi","titleHtml":"Разработка на Raspberry Pi","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwk\u002Fmt\u002Fwc\u002Fwkmtwc-p-oaltwox6zahqwicnmw.jpeg\"\u003E\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EПриветствую жителей Хабра! \u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EЗадался тут вопросом, как можно обойтись без статического IP для экспериментов в домашних условиях. Наткнулся на вот эту статью. \u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EЕсли вы хотите развернуть свой вебсервер с доступом извне, а платить провайдеру за статический IP не хотите, то данное решение вполне себе выход, которое можно в дальнейшем подогнать под свои нужды.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"577422":{"id":"577422","timePublished":"2021-09-11T14:17:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Исследование: более 2 млн веб-серверов Microsoft работают на уязвимых версиях IIS","editorVersion":"2.0","postType":"news","postLabels":[],"author":{"id":"2176401","alias":"maybe_elf","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F592\u002F11d\u002F4bc\u002F59211d4bcd7f9afdadaef515b2b0706d.jpg","speciality":"хабраредактор"},"statistics":{"commentsCount":31,"favoritesCount":2,"readingCount":4317,"score":10,"votesCount":10},"hubs":[{"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true},{"id":"17701","alias":"iis","type":"collective","title":"IIS","titleHtml":"IIS","isProfiled":true},{"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"},{"id":"3","alias":"management","title":"Менеджмент","titleHtml":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИсследователи CyberNews \u003Ca href=\"https:\u002F\u002Fcybernews.com\u002Fsecurity\u002Fmillions-of-microsoft-web-servers-powered-by-vulnerable-legacy-software\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eзаявили\u003C\u002Fa\u003E, что они выявили более 2 млн веб-серверов, работающих на устаревших, не обслуживаемых и уязвимых Microsoft Internet Information Services (IIS).\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff8a\u002F2c6\u002F540\u002Ff8a2c654099891dc0307bb69d2a734c5.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff8a\u002F2c6\u002F540\u002Ff8a2c654099891dc0307bb69d2a734c5.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"mikhus":{"scoreStats":{"score":122.7,"votesCount":144},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"46773","alias":"Mikhus","fullname":"Михаил Стадник","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F6e4\u002F8eb\u002Fcc7\u002F6e48ebcc7a0a442dd08af1ecd52e5ee6.jpg","speciality":"Software Engineer"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
