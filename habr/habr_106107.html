<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Перенаправление функций в разделяемых ELF-библиотеках / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/106107\/"},"headline":"Перенаправление функций в разделяемых ELF-библиотеках","datePublished":"2010-10-13T21:38:24+04:00","dateModified":"2010-10-14T13:12:30+04:00","author":{"@type":"Person","name":"Anthony Shoumikhin"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное простр...","url":"https:\/\/habr.com\/ru\/post\/106107\/#post-content-body","about":["h_webdev","f_develop"],"image":["https:\/\/habrastorage.org\/storage\/afe3a628\/27e2dc06\/9afa147c\/33803238.png","https:\/\/habrastorage.org\/storage\/089057e3\/1cda8de1\/abd7ded0\/750b9fc1.png","https:\/\/habrastorage.org\/storage\/3d43fe1c\/e8528998\/db2c173f\/ea240126.png","https:\/\/habrastorage.org\/storage\/4f2db377\/481f0b54\/54b771ad\/428a2599.png","https:\/\/habrastorage.org\/storage\/9188edd2\/c9959569\/10a83af1\/1b7bea4f.png","https:\/\/habrastorage.org\/storage\/addcce52\/6cdeb9a7\/d911801a\/6cf8cf0c.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Перенаправление функций в разделяемых ELF-библиотеках" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Перенаправление функций в разделяемых ELF-библиотеках" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Перенаправление функций в разделяемых ELF-библиотеках" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="106107" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2010-10-13T17:38:24.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/106107/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/106107/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/106107/3c8b5b370dfa952397dd6818c516e0af/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/shoumikhin/" title="shoumikhin" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/shoumikhin/" class="tm-user-info__username">
      shoumikhin
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2010-10-13T17:38:24.000Z" title="2010-10-13, 21:38">13  октября  2010 в 21:38</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Перенаправление функций в разделяемых ELF-библиотеках</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/webdev/" class="tm-article-snippet__hubs-item-link"><span>Разработка веб-сайтов</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img align="left" src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/afe3a628/27e2dc06/9afa147c/33803238.png"/>Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех процессов. Во-вторых, можно расширять функционал своей программы, подгружая дополнительную библиотеку, которая и будет этот функционал обеспечивать. И все это без перезапуска самой программы. А еще решается проблема обновлений. Для динамически компонуемой библиотеки можно определить стандартный интерфейс и влиять на функционал и качество своей основной программы, просто меняя версию библиотеки. Такие методы повторного использования кода даже получили название «архитектура plug-in’ов». Но топик не об этом.<br/>
<br/>
Кстати, нетерпеливые могут все <a href="http://apriorit.com/downloads/elf_hook.zip">скачать</a> и попробовать прямо сейчас.<br/>
<br/>
<a name="habracut"></a> <br/>
<br/>
Конечно, редко какая динамически компонуемая библиотека в своей реализации опирается исключительно на себя, то есть вычислительные возможности процессора и память. Библиотеки используют библиотеки. Или, хотя бы, стандартные библиотеки. Как, например, программы на С\С++ используют стандартные библиотеки С\С++. Последнии, кстати, для удобства тоже организуются в динамически компонуемом виде (libc.so и libstdc++.so). Сами они хранятся в файлах особого формата. Мое исследование проводилось для ОС Linux, в которой основным форматом динамически компонуемых библиотек является ELF (Executable and Linkable Format).<br/>
Некоторое время назад я столкнулся с необходимостью перехватывать вызовы функций из одной библиотеки в другую. Просто для того, чтобы обрабатывать их особым образом. Это называется перенаправлением вызова.<br/>
<br/>
<h4>Поподробней о перенаправлении</h4><br/>
Для начала сформулируем задачу на конкретном примере. Допустим, у нас есть программа с названием «test» на языке С (файл test.c) и две разделяемые библиотеки (файлы libtest1.c и libtest2.c), с неизменным содержимым, откомпилированные заранее. Эти библиотеки предоставляют по одной функции: libtest1() и libtest2() соответственно. В своей реализации каждая из них пользуется функцией puts() из стандартной библиотеки языка С.<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/089057e3/1cda8de1/abd7ded0/750b9fc1.png"/></div><br/>
Задача состоит в следующем:<br/>
<ol>
<li>Нужно заменить вызов функции puts() для обеих библиотек на вызов функции redirected_puts(), реализованной в главной программе (файл test.c), которая, в свою очередь, может пользоваться оригинальной puts();<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/3d43fe1c/e8528998/db2c173f/ea240126.png"/></div></li>
<li>Отменить произведенные изменения, то есть сделать так, чтобы повторный вызов libtest1() и libtest2() приводил к вызову оригинальной puts().<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/4f2db377/481f0b54/54b771ad/428a2599.png"/></div></li>
</ol><br/>
При этом менять код или перекомпилировать сами библиотеки не разрешается, только главную программу.<br/>
<br/>
<h4>Зачем это нужно?</h4><br/>
Этот пример иллюстрирует две очень интересные особенности подобного перенаправления:<br/>
<ol>
<li>Оно осуществляется исключительно для конкретной динамически компонуемом библиотеки, а не для всего процесса, как при использовании переменной окружения LD_PRELOAD динамического загрузчика, что позволяет остальным модулям безболезненно пользоваться оригиналом функции;</li>
<li>Оно происходит во время работы программы и не требует ее перезапуска.</li>
</ol>Где это можно применить? Ну, например, в своей программе с кучей plug-in’ов вы можете перехватывать их обращения к ресурсам системы или каким-либо другим библиотекам, не влияя на другие plug-in’ы и само приложение. Или даже делать все то же самое из своего собственного plug-in’а к некоторому приложению.<br/>
Легального способа решить эту задачу не существует. Единственный вариант – разобраться с ELF и самому производить необходимые изменения в памяти.<br/>
<br/>
<b>Поехали!</b><br/>
<br/>
<h4>Кратко об ELF</h4><br/>
Лучший способ понять ELF – это набраться терпения и пару раз внимательно прочитать его спецификацию, затем написать простую программу, откомпилировать ее и детально исследовать с помощью шестнадцатеричного редактора, сравнивая увиденное со спецификацией. Такой метод исследования сразу натолкнет на мысль написать какой-нибудь простой парсер для ELF, так как появится много рутинной работы. Но, не стоит спешить. Таких утилит создано уже несколько. Для исследования возьмем файлы из предыдущего раздела:<br/>
<br/>
<h5>File test.c</h5><br/>
<pre><code>#include &lt;stdio.h>
#include &lt;dlfcn.h>

#define LIBTEST1_PATH "libtest1.so"  //position dependent code (for 32 bit only)
#define LIBTEST2_PATH "libtest2.so"  //position independent code

void libtest1();  //from libtest1.so
void libtest2();  //from libtest2.so

int main()
{
    void *handle1 = dlopen(LIBTEST1_PATH, RTLD_LAZY);
    void *handle2 = dlopen(LIBTEST2_PATH, RTLD_LAZY);

    if (NULL == handle1 || NULL == handle2)
        fprintf(stderr, "Failed to open \"%s\" or \"%s\"!\n", LIBTEST1_PATH, LIBTEST2_PATH);

    libtest1();  //calls puts() from libc.so twice
    libtest2();  //calls puts() from libc.so twice
    puts("-----------------------------");

    dlclose(handle1);
    dlclose(handle2);

    return 0;
}
</code></pre><br/>
<h5>File libtest1.c</h5><br/>
<pre><code>int puts(char const *);

void libtest1()
{
    puts("libtest1: 1st call to the original puts()");
    puts("libtest1: 2nd call to the original puts()");
}
</code></pre><br/>
<h5>File libtest2.c</h5><br/>
<pre><code>int puts(char const *);

void libtest2()
{
    puts("libtest2: 1st call to the original puts()");
    puts("libtest2: 2nd call to the original puts()");
}
</code></pre><br/>
<h4>Из каких частей состоит ELF?</h4><br/>
Чтобы ответить на этот вопрос, необходимо заглянуть внутрь такого файла. Для этого существует такие утилиты:<br/>
<ul>
<li>readelf – очень мощный инструмент для просмотра содержимого секций ELF-файла</li>
<li>objdump – очень похож на предыдущий, умеет дизассемблировать секции</li>
<li>gdb – незаменим для отладки под Linux, особенно для просмотра мест, подлежащих переразмещению</li>
</ul><b>Переразмещение (relocation)</b> – это специальный термин для того места в ELF-файле, которое ссылается на символ из другого модуля. Непосредственной модификацией таких мест занимается статический (ld) либо динамический (ld-linux.so.2) компоновщик\загрузчик.<br/>
<br/>
Любой ELF файл начинается со специального заголовка. Его структуру, как и описание многих других элементов ELF, можно найти в файле /usr/include/linux/elf.h. У заголовка есть специальное поле, в котором записано смещение от начала файла таблицы заголовков секций. Каждый элемент этой таблицы описывает некоторую секцию в ELF. Секция – это наименьший неделимый структурный элемент в ELF файле. При загрузке в память, секции объединяются в сегменты. Сегменты – это наименьшие неделимые части ELF файла, которые могут быть отображены в память загрузчиком (ld-linux.so.2). Сегменты описывает таблица сегментов, смещение которой так же есть в заголовке ELF файла.<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/9188edd2/c9959569/10a83af1/1b7bea4f.png"/></div><br/>
Наиболее важные из них:<br/>
<ul>
<li>.text – содержит код модуля</li>
<li>.data – инициализированные переменные</li>
<li>.bss – не инициализированные переменные</li>
<li>.symtab – символы модуля: функции и статические переменные</li>
<li>.strtab – имена для символов модуля</li>
<li>.rel.text – переразмещения для функций (для статически компонуемых модулей)</li>
<li>.rel.data – переразмещения для статических переменных (для статически компонуемых модулей)</li>
<li>.rel.plt – список элементов в PLT (Procedure Linkage Table), подлежащих переразмещению при динамической компоновке (используется PLT)</li>
<li>.rel.dyn – переразмещения для динамически компонуемых функций (если PLT не используется)</li>
<li>.got – Global Offset Table, содержит информацию о смещениях переразмещаемых объектов</li>
<li>.debug – отладочная информация</li>
</ul>Для компиляции указанных выше файлов выполним такие команды:<br/>
<pre><code class="bash">gcc -g3 -m32 -shared -o libtest1.so libtest1.c
gcc -g3 -m32 -fPIC -shared -o libtest2.so libtest2.c
gcc -g3 -m32 -L$PWD -o test test.c -ltest1 -ltest2 –ldl
</code></pre><br/>
Первая команда создает динамически компонуемую библиотеку libtest1.so. Вторая – libtest2.so. Обратите внимание на ключ –fPIC. Он заставляет компилятор генерировать так называемый Position Independent Code. Подробности в следующем разделе. Третья команда создает исполняемый модуль c именем test путем компиляции файла test.c и компоновки его с уже созданными библиотеками libtest1.so и libtest2.so. Последние находятся в текущем каталоге, что отражено использованием ключа –L$PWD. Компоновка с libdl.so необходима для использования функицй dlopen() и dlclose().<br/>
<br/>
Для запуска программы необходимо выполнить следующие команды:<br/>
<pre><code class="bash">export LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH
./test
</code></pre><br/>
То есть, добавить динамическому компоновщику\загрузчику путь к текущему каталогу как путь для поиска библиотек. Вывод программы получим такой:<br/>
<br/>
<code>libtest1: 1st call to the original puts()<br/>
libtest1: 2nd call to the original puts()<br/>
libtest2: 1st call to the original puts()<br/>
libtest2: 2nd call to the original puts()<br/>
-----------------------------<br/>
</code><br/>
Теперь посмотрим на секции модуля test. Для этого запустим readelf с ключом –a. Ниже преведены наиболее интересные из них:<br/>
<br/>
<code>ELF Header:<br/>
 Magic: 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 <br/>
 Class: ELF32<br/>
 Data: 2's complement, little endian<br/>
 Version: 1 (current)<br/>
 OS/ABI: UNIX - System V<br/>
 ABI Version: 0<br/>
 Type: EXEC (Executable file)<br/>
 Machine: Intel 80386<br/>
 Version: 0x1<br/>
 Entry point address: 0x8048580<br/>
 Start of program headers: 52 (bytes into file)<br/>
 Start of section headers: 21256 (bytes into file)<br/>
 Flags: 0x0<br/>
 Size of this header: 52 (bytes)<br/>
 Size of program headers: 32 (bytes)<br/>
 Number of program headers: 8<br/>
 Size of section headers: 40 (bytes)<br/>
 Number of section headers: 39<br/>
 Section header string table index: 36<br/>
</code><br/>
Стандартный заголовок исполняемого модуля. Магическая последовательность в первых 16 байтах. Обозначен тип модуля (в данном случае – исполняемый, а еще бывает объектный (.o) и разделяемый (.so)), архитектура (i386), рекомендуемая точка входа, смещения к заголовкам сегментов и секций и их размеры. В самом конце – смещение в таблице строк для названий секций.<br/>
<br/>
<code>Section Headers:<br/>
 [Nr] Name Type Addr Off Size ES Flg Lk Inf Al<br/>
 [ 0] NULL 00000000 000000 000000 00 0 0 0<br/>
 [ 1] .interp PROGBITS 08048134 000134 000013 00 A 0 0 1<br/>
 ...<br/>
 [ 5] .dynsym DYNSYM 08048200 000200 000110 10 A 6 1 4<br/>
 [ 6] .dynstr STRTAB 08048310 000310 0000df 00 A 0 0 1<br/>
 ...<br/>
 [ 9] .rel.dyn REL 08048464 000464 000010 08 A 5 0 4<br/>
 [10] .rel.plt REL 08048474 000474 000040 08 A 5 12 4<br/>
 [11] .init PROGBITS 080484b4 0004b4 000030 00 AX 0 0 4<br/>
 [12] .plt PROGBITS 080484e4 0004e4 000090 04 AX 0 0 4<br/>
 [13] .text PROGBITS 08048580 000580 0001fc 00 AX 0 0 16<br/>
 [14] .fini PROGBITS 0804877c 00077c 00001c 00 AX 0 0 4<br/>
 [15] .rodata PROGBITS 08048798 000798 00005c 00 A 0 0 4<br/>
 ...<br/>
 [20] .dynamic DYNAMIC 08049f08 000f08 0000e8 08 WA 6 0 4<br/>
 [21] .got PROGBITS 08049ff0 000ff0 000004 04 WA 0 0 4<br/>
 [22] .got.plt PROGBITS 08049ff4 000ff4 00002c 04 WA 0 0 4<br/>
 [23] .data PROGBITS 0804a020 001020 000008 00 WA 0 0 4<br/>
 [24] .bss NOBITS 0804a028 001028 00000c 00 WA 0 0 4<br/>
 ...<br/>
 [27] .debug_pubnames PROGBITS 00000000 0011b8 000040 00 0 0 1<br/>
 [28] .debug_info PROGBITS 00000000 0011f8 0004d9 00 0 0 1<br/>
 [29] .debug_abbrev PROGBITS 00000000 0016d1 000156 00 0 0 1<br/>
 [30] .debug_line PROGBITS 00000000 001827 000309 00 0 0 1<br/>
 [31] .debug_frame PROGBITS 00000000 001b30 00003c 00 0 0 4<br/>
 [32] .debug_str PROGBITS 00000000 001b6c 00024e 01 MS 0 0 1<br/>
 ...<br/>
 [36] .shstrtab STRTAB 00000000 0051a8 000160 00 0 0 1<br/>
 [37] .symtab SYMTAB 00000000 005920 000530 10 38 57 4<br/>
 [38] .strtab STRTAB 00000000 005e50 000268 00 0 0 1<br/>
Key to Flags:<br/>
 W (write), A (alloc), X (execute), M (merge), S (strings)<br/>
 I (info), L (link order), G (group), x (unknown)<br/>
 O (extra OS processing required) o (OS specific), p (processor specific)<br/>
</code><br/>
Здесь можно увидеть перечень всех секций подопытного ELF файла, их тип и режим загрузки в память (R, W, X и A).<br/>
<br/>
<code>Program Headers:<br/>
 Type Offset VirtAddr PhysAddr FileSiz MemSiz Flg Align<br/>
 PHDR 0x000034 0x08048034 0x08048034 0x00100 0x00100 R E 0x4<br/>
 INTERP 0x000134 0x08048134 0x08048134 0x00013 0x00013 R 0x1<br/>
 [Requesting program interpreter: /lib/ld-linux.so.2]<br/>
 LOAD 0x000000 0x08048000 0x08048000 0x007f8 0x007f8 R E 0x1000<br/>
 LOAD 0x000ef4 0x08049ef4 0x08049ef4 0x00134 0x00140 RW 0x1000<br/>
 DYNAMIC 0x000f08 0x08049f08 0x08049f08 0x000e8 0x000e8 RW 0x4<br/>
 NOTE 0x000148 0x08048148 0x08048148 0x00020 0x00020 R 0x4<br/>
 GNU_STACK 0x000000 0x00000000 0x00000000 0x00000 0x00000 RW 0x4<br/>
 GNU_RELRO 0x000ef4 0x08049ef4 0x08049ef4 0x0010c 0x0010c R 0x1<br/>
</code><br/>
Это список сегментов – своеобразных контейнеров для секций в памяти. Также указан путь к специальному модулю – динамическому компоновщику\загрузчику. Именно ему предстоит расположить содержимое этого ELF файла в памяти.<br/>
<br/>
<code> Section to Segment mapping:<br/>
 Segment Sections...<br/>
 00 <br/>
 01 .interp <br/>
 02 .interp .note.ABI-tag .hash .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata .eh_frame <br/>
 03 .ctors .dtors .jcr .dynamic .got .got.plt .data .bss <br/>
 04 .dynamic <br/>
 05 .note.ABI-tag <br/>
 06 <br/>
 07 .ctors .dtors .jcr .dynamic .got<br/>
</code><br/>
А вот как произойдет распределение секций по сегментам во время загрузки.<br/>
Но, наиболее интересная секция, в которой хранится информация об импортируемых и экспортируемых динамически компонуемых функциях называются “.dynsym”:<br/>
<br/>
<code>Symbol table '.dynsym' contains 17 entries:<br/>
 Num: Value Size Type Bind Vis Ndx Name<br/>
 0: 00000000 0 NOTYPE LOCAL DEFAULT UND <br/>
 1: 00000000 0 FUNC GLOBAL DEFAULT UND libtest2<br/>
 2: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__<br/>
 3: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses<br/>
 4: 00000000 0 FUNC GLOBAL DEFAULT UND dlclose@GLIBC_2.0 (2)<br/>
 5: 00000000 0 FUNC GLOBAL DEFAULT UND __libc_start_main@GLIBC_2.0 (3)<br/>
 6: 00000000 0 FUNC GLOBAL DEFAULT UND libtest1<br/>
 7: 00000000 0 FUNC GLOBAL DEFAULT UND dlopen@GLIBC_2.1 (4)<br/>
 8: 00000000 0 FUNC GLOBAL DEFAULT UND fprintf@GLIBC_2.0 (3)<br/>
 9: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (3)<br/>
 10: 0804a034 0 NOTYPE GLOBAL DEFAULT ABS _end<br/>
 11: 0804a028 0 NOTYPE GLOBAL DEFAULT ABS _edata<br/>
 12: 0804879c 4 OBJECT GLOBAL DEFAULT 15 _IO_stdin_used<br/>
 13: 0804a028 4 OBJECT GLOBAL DEFAULT 24 stderr@GLIBC_2.0 (3)<br/>
 14: 0804a028 0 NOTYPE GLOBAL DEFAULT ABS __bss_start<br/>
 15: 080484b4 0 FUNC GLOBAL DEFAULT 11 _init<br/>
 16: 0804877c 0 FUNC GLOBAL DEFAULT 14 _fini<br/>
</code><br/>
Кроме прочих функций, необходимых для правильной загрузки\выгрузки программы, можно отыскать знакомые имена: libtest1, libtest2, dlopen, fprintf, puts, dlclose. Для всех них значится тип FUNC и тот факт, что они в этом модуле не определены – индекс секции помечен как UND.<br/>
<br/>
Секции “.rel.dyn” и “.rel.plt” являются таблицами переразмещений для тех символов из “.dynsym”, для которых вообще необходимо переразмещение при компоновке.<br/>
<br/>
<code>Relocation section '.rel.dyn' at offset 0x464 contains 2 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
08049ff0 00000206 R_386_GLOB_DAT 00000000 __gmon_start__<br/>
0804a028 00000d05 R_386_COPY 0804a028 stderr<br/>
<br/>
Relocation section '.rel.plt' at offset 0x474 contains 8 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
0804a000 00000107 R_386_JUMP_SLOT 00000000 libtest2<br/>
0804a004 00000207 R_386_JUMP_SLOT 00000000 __gmon_start__<br/>
0804a008 00000407 R_386_JUMP_SLOT 00000000 dlclose<br/>
0804a00c 00000507 R_386_JUMP_SLOT 00000000 __libc_start_main<br/>
0804a010 00000607 R_386_JUMP_SLOT 00000000 libtest1<br/>
0804a014 00000707 R_386_JUMP_SLOT 00000000 dlopen<br/>
0804a018 00000807 R_386_JUMP_SLOT 00000000 fprintf<br/>
0804a01c 00000907 R_386_JUMP_SLOT 00000000 puts<br/>
</code><br/>
В чем разница между этими таблицами с точки зрения динамической компоновки функций? Это тема следующего раздела.<br/>
<br/>
<h4>Как компонуются разделяемые ELF-библиотеки?</h4><br/>
Компиляция библиотек libtest1.so и libtest2.so несколько отличалась. libtest2.so компилировалась с ключом –fPIC (генерировать Position Independent Code). Посмотрим, как это отразилось на таблицах динамических символов для этих двух модулей (используем readelf):<br/>
<br/>
<code>Symbol table '.dynsym' contains 11 entries:<br/>
 Num: Value Size Type Bind Vis Ndx Name<br/>
 0: 00000000 0 NOTYPE LOCAL DEFAULT UND <br/>
 1: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__<br/>
 2: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses<br/>
 3: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (2)<br/>
 4: 00000000 0 FUNC WEAK DEFAULT UND __cxa_finalize@GLIBC_2.1.3 (3)<br/>
 5: 00002014 0 NOTYPE GLOBAL DEFAULT ABS _end<br/>
 6: 0000200c 0 NOTYPE GLOBAL DEFAULT ABS _edata<br/>
 7: 0000043c 32 FUNC GLOBAL DEFAULT 11 libtest1<br/>
 8: 0000200c 0 NOTYPE GLOBAL DEFAULT ABS __bss_start<br/>
 9: 0000031c 0 FUNC GLOBAL DEFAULT 9 _init<br/>
 10: 00000498 0 FUNC GLOBAL DEFAULT 12 _fini<br/>
<br/>
Symbol table '.dynsym' contains 11 entries:<br/>
 Num: Value Size Type Bind Vis Ndx Name<br/>
 0: 00000000 0 NOTYPE LOCAL DEFAULT UND <br/>
 1: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__<br/>
 2: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses<br/>
 3: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (2)<br/>
 4: 00000000 0 FUNC WEAK DEFAULT UND __cxa_finalize@GLIBC_2.1.3 (3)<br/>
 5: 00002018 0 NOTYPE GLOBAL DEFAULT ABS _end<br/>
 6: 00002010 0 NOTYPE GLOBAL DEFAULT ABS _edata<br/>
 7: 00002010 0 NOTYPE GLOBAL DEFAULT ABS __bss_start<br/>
 8: 00000304 0 FUNC GLOBAL DEFAULT 9 _init<br/>
 9: 0000043c 52 FUNC GLOBAL DEFAULT 11 libtest2<br/>
 10: 000004a8 0 FUNC GLOBAL DEFAULT 12 _fini<br/>
</code><br/>
Итак, таблицы динамических символов для обеих библиотек отличаются только порядком следования самих символов. Видно, что обе они используют неопределенную функцию puts(), а предоставляют libtest1() либо libtest2(). Как изменились таблицы переразмещений?<br/>
<br/>
<code>Relocation section '.rel.dyn' at offset 0x2cc contains 8 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
00000445 00000008 R_386_RELATIVE <br/>
00000451 00000008 R_386_RELATIVE <br/>
00002008 00000008 R_386_RELATIVE <br/>
0000044a 00000302 R_386_PC32 00000000 puts<br/>
00000456 00000302 R_386_PC32 00000000 puts<br/>
00001fe8 00000106 R_386_GLOB_DAT 00000000 __gmon_start__<br/>
00001fec 00000206 R_386_GLOB_DAT 00000000 _Jv_RegisterClasses<br/>
00001ff0 00000406 R_386_GLOB_DAT 00000000 __cxa_finalize<br/>
<br/>
Relocation section '.rel.plt' at offset 0x30c contains 2 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
00002000 00000107 R_386_JUMP_SLOT 00000000 __gmon_start__<br/>
00002004 00000407 R_386_JUMP_SLOT 00000000 __cxa_finalize<br/>
</code><br/>
Для libtest1.so переразмещение для функции puts() встречается два раза в секции “.rel.dyn”. Посмотрим на эти места непосредственно в модуле при помощи дизассемблера. Необходимо отыскать функцию libtest1() в которой и происходит двойной вызов puts(). Используем objdump –D:<br/>
<br/>
<pre><code>0000043c &lt;libtest1>:
 43c:	55                   	push   %ebp
 43d:	89 e5                	mov    %esp,%ebp
 43f:	83 ec 08             	sub    $0x8,%esp
 442:	c7 04 24 b4 04 00 00 	movl   $0x4b4,(%esp)
 449:	e8 fc ff ff ff       	call   44a &lt;libtest1+0xe>
 44e:	c7 04 24 e0 04 00 00 	movl   $0x4e0,(%esp)
 455:	e8 fc ff ff ff       	call   456 &lt;libtest1+0x1a>
 45a:	c9                   	leave  
 45b:	c3                   	ret    
 45c:	90                   	nop    
 45d:	90                   	nop    
 45e:	90                   	nop    
 45f:	90                   	nop
</code></pre><br/>
Имеем две относительные инструкции CALL (код E8) с операндами 0xFFFFFFFC. Относительный CALL c таким операндом лишен смысла, так как, по сути, передает управление на один байт вперед относительно адреса инструкции CALL. Если посмотреть на смещение переразмещений для puts() в секции “.rel.dyn”, то можно обнаружить, что они применяются как раз к операнду инструкции CALL. Таким образом, в обоих случаях обращения к puts(), загрузчик просто перезапишет 0xFFFFFFFC так, что CALL будет переходить на корректный адрес функции puts().<br/>
Так работает переразмещение типа R_386_PC32.<br/>
<br/>
Теперь обратим внимание на libtest2.so:<br/>
<br/>
<code>Relocation section '.rel.dyn' at offset 0x2cc contains 4 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
0000200c 00000008 R_386_RELATIVE <br/>
00001fe8 00000106 R_386_GLOB_DAT 00000000 __gmon_start__<br/>
00001fec 00000206 R_386_GLOB_DAT 00000000 _Jv_RegisterClasses<br/>
00001ff0 00000406 R_386_GLOB_DAT 00000000 __cxa_finalize<br/>
<br/>
Relocation section '.rel.plt' at offset 0x2ec contains 3 entries:<br/>
 Offset Info Type Sym.Value Sym. Name<br/>
00002000 00000107 R_386_JUMP_SLOT 00000000 __gmon_start__<br/>
00002004 00000307 R_386_JUMP_SLOT 00000000 puts<br/>
00002008 00000407 R_386_JUMP_SLOT 00000000 __cxa_finalize<br/>
</code><br/>
Обращение к puts() упоминается только единожды, и, притом, в секции “.rel.plt”. Посмотрим на ассемблер и займемся отладкой:<br/>
<br/>
<pre><code>0000043c &lt;libtest2>:
 43c:	55                   	push   %ebp
 43d:	89 e5                	mov    %esp,%ebp
 43f:	53                   	push   %ebx
 440:	83 ec 04             	sub    $0x4,%esp
 443:	e8 ef ff ff ff       	call   437 &lt;__i686.get_pc_thunk.bx>
 448:	81 c3 ac 1b 00 00    	add    $0x1bac,%ebx
 44e:	8d 83 d0 e4 ff ff    	lea    -0x1b30(%ebx),%eax
 454:	89 04 24             	mov    %eax,(%esp)
 457:	e8 f8 fe ff ff       	call   354 &lt;puts@plt>
 45c:	8d 83 fc e4 ff ff    	lea    -0x1b04(%ebx),%eax
 462:	89 04 24             	mov    %eax,(%esp)
 465:	e8 ea fe ff ff       	call   354 &lt;puts@plt>
 46a:	83 c4 04             	add    $0x4,%esp
 46d:	5b                   	pop    %ebx
 46e:	5d                   	pop    %ebp
 46f:	c3                   	ret
</code></pre><br/>
Операнды инструкций CALL уже разные и осмысленные, а значит, что они на что-то указывают. Это уже не просто набивка (padding). Также полезно отметить, что перед вызовом самой puts() происходят запись 0x1FF4 (0x1BAC + 0x448) в регистр EBX. Отладчик помогает узнавать изначальное значение EBX, равное 0x448. Значит, это где-то дальше пригодится. Адрес 0x354 ведет нас к очень интересной секции “.plt”, которая, как и “.text”, помечена как исполняемая. Вот она:<br/>
<br/>
<pre><code>Disassembly of section .plt:

00000334 &lt;__gmon_start__@plt-0x10>:
 334:	ff b3 04 00 00 00    	pushl  0x4(%ebx)
 33a:	ff a3 08 00 00 00    	jmp    *0x8(%ebx)
 340:	00 00                	add    %al,(%eax)
	...

00000344 &lt;__gmon_start__@plt>:
 344:	ff a3 0c 00 00 00    	jmp    *0xc(%ebx)
 34a:	68 00 00 00 00       	push   $0x0
 34f:	e9 e0 ff ff ff       	jmp    334 &lt;_init+0x30>

00000354 &lt;puts@plt>:
 354:	ff a3 10 00 00 00    	jmp    *0x10(%ebx)
 35a:	68 08 00 00 00       	push   $0x8
 35f:	e9 d0 ff ff ff       	jmp    334 &lt;_init+0x30>

00000364 &lt;__cxa_finalize@plt>:
 364:	ff a3 14 00 00 00    	jmp    *0x14(%ebx)
 36a:	68 10 00 00 00       	push   $0x10
 36f:	e9 c0 ff ff ff       	jmp    334 &lt;_init+0x30>
</code></pre><br/>
По интересующему нас адресу 0x354 обнаруживаем три инструкции. В первой из них происходит безусловный переход по адресу, на который указывает EBX (0x1FF4) плюс 0x10. Произведя простые вычисления, получим значение указателя 0x2004. Эти адреса попадают в секцию “.got.plt”.<br/>
<br/>
<pre><code>Disassembly of section .got.plt:

00001ff4 &lt;.got.plt>:
    1ff4:	20 1f                	and    %bl,(%edi)
	...
    1ffe:	00 00                	add    %al,(%eax)
    2000:	4a                   	dec    %edx
    2001:	03 00                	add    (%eax),%eax
    2003:	00 5a 03             	add    %bl,0x3(%edx)
    2006:	00 00                	add    %al,(%eax)
    2008:	6a 03                	push   $0x3
	...
</code></pre><br/>
Самое интересное обнаруживается тогда, когда мы этот указатель разыменовываем и, наконец-то, получаем адрес безусловного перехода, равный 0x35A. Но, это же, по сути, следующая инструкция! Зачем было производить такие сложные манипуляции и ссылаться на секцию “.got.plt”, чтобы просто перейти на следующую инструкцию? Что вообще такое PLT и GOT?<br/>
<br/>
<b>PLT (Procedure Linkage Table)</b> — это таблица компоновки процедур. Она присутствует в исполняемых и разделяемых модулях. Это массив заглушек, по одной на каждую импортируемую функцию.<br/>
<br/>
<pre><code>PLT[n+1]: jmp    *GOT[n+3]
          push   #n        @push n as a signal to the resolver
          jmp    PLT[0]
</code></pre><br/>
Вызов функции по адресу PLT[n+1] приведет к косвенному переходу управления по адресу GOT[n+3]. При первом вызове GOT[n+3] указывает назад, на PLT[n+1] + 6, что представляет собой последовательность PUSH\JMP на PLT[0]. Проходя через PLT[0], компоновщик использует сохраненный стековый аргумент, чтобы определить 'n' и затем разрешает символ 'n'. Потом компоновщик исправляет значение GOT[n+3] так, чтобы оно указывало прямо на целевую подпрограмму, и, в конце концов, вызывает ее. Каждый следующий вызов PLT[n+1] будет направлен на целевую подпрограмму без подобного разрешения ее адреса через инструкцию JMP.<br/>
<br/>
Первый элемент PLT особенный и используется, чтобы перейти на код динамического разрешения адреса. <br/>
<br/>
<pre><code>PLT[0]: push    &amp;GOT[1]
        jmp     GOT[2]     @points to resolver()
</code></pre><br/>
Управление передается на код компоновщика. 'n' уже в стеке и туда же добавляется адрес GOT[1]. Таким образом компоновщик (находится в /lib/ld-linux.so.2) может определить, какая библиотека требует его услуг.<br/>
<br/>
<b>GOT (Global Offset Table)</b> — это глобальная таблица смещений. Ее первые три элемента зарезервированы. При первой инициализации GOT все ее элементы, которые относятся к разрешению адресов в PLT, указывают обратно на PLT[0]. <br/>
<br/>
Вот эти особые элементы:<br/>
<ul>
<li>GOT[0] список элементов, используемый загрузчиком</li>
<li>GOT[1] указатель на таблицу переразмещений этого модуля</li>
<li>GOT[2] указатель на код загрузчика из библиотеки ld-linux.so.2</li>
<li>GOT[3]</li>
<li>… далее следуют вспомогательные значение для косвенного вызова каждой из импортируемых функций</li>
<li>GOT[3+M]</li>
<li>GOT[3+M+1]</li>
<li>… далее идут косвенный указатели для ссылок на глобальные переменные, по одной на каждый такой символ</li>
</ul>У каждой библиотеки и исполняемого модуля есть своя PLT и GOT.<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/storage/addcce52/6cdeb9a7/d911801a/6cf8cf0c.png"/></div><br/>
Так работает переразмещение типа R_386_JUMP_SLOT, которое использовалось в библиотеке libtest2.so. Остальные типы переразмещений относятся к статической компоновке, поэтому нам не пригодятся.<br/>
<br/>
В методах разрешения вызова импортируемых функций и заключается разница между кодом, зависящим от позиции загрузки в память и не зависящим от нее (PIC).<br/>
<br/>
<h4>Важные выводы</h4><br/>
Сделаем некоторые полезные заключения:<br/>
<ol>
<li>Всю информацию об импортируемых и экспортируемых функциях можно получить в секции “.dynsym”</li>
<li>Если модуль компилировался в режиме PIC (ключ -fPIC), то вызовы импортируемых функций будут осуществляться через PLT и GOT, переразмещение будет производиться лишь одинажды для каждой функции и будет применяться для первой инструкции определенного элемента в PLT. Информацию о самом переразмещении можно найти в секции “.rel.plt”</li>
<li>Если ключ –fPIC при компиляции библиотеки не применялся, то переразмещения будут производится над операндом каждой относительной инструкции CALL столько раз, сколько в коде осуществляется вызовов некоторой импортируемой функции. Информацию о самом переразмещении можно найти в секции “.rel.dyn”</li>
</ol><br/>
<i>Замечание:</i> ключ компиляции –fPIC обязателен для 64-битной архитектуры. То есть в 64-битных библиотеках разрешение вызовов импортируемых функций всегда осуществляется через PLT\GOT. Плюс к тому на такой архитектуре секции с переразмещениями называются “.rela.plt” и “.rela.dyn”.<br/>
<br/>
<h4>Долгожданное решение</h4><br/>
Для осуществления перенаправления импортируемой функции в некоторой динамически-компонуемой библиотеке необходимо знать следующее:<br/>
<ol>
<li>Путь в файловой системе к этой библиотеке</li>
<li>Виртуальный адрес, по которому она загрузилась </li>
<li>Имя замещаемой функции</li>
<li>Адрес функции-заместителя</li>
</ol>Еще нужно получать адрес оригинальной функции, чтобы произвести обратное перенаправление и, таким образом, вернуть все на свои места.<br/>
<br/>
Прототип функции для перенаправления на языке С получается следующий:<br/>
<br/>
<pre><code>void *elf_hook(char const *library_filename, void const *library_address, char const *function_name, void const *substitution_address);
</code></pre><br/>
<br/>
<h4>Алгоритм перенаправления</h4><br/>
Вот алгоритм работы функции перенаправления:<br/>
<ol>
<li>Открываем файл библиотеки.</li>
<li>Запоминаем индекс символа в секции “.dynsym”, имя которого соответствует имени искомой функции.</li>
<li>Просматриваем секцию “.rel.plt” и ищем в ней переразмещение для символа с указанным индексом.</li>
<li>Если такой символ найден, сохраняем оригинальный адрес, чтобы потом вернуть его из функции, и записываем на место, указанное в переразмещении, адрес функции-заместителя. Это место вычисляется как сумма адреса загрузки библиотеки в память и смещения в переразмещении. Все. Осуществлена подмена адреса функции. Перенаправление будет происходить всякий раз при вызове библиотекой этой функции. Выходим из функции и возвращаем адрес оригинала.</li>
<li>Если такой символ в секции “.rel.plt” не найден, то ищем его в секции “rel.dyn” по такому же принципу. Но, нужно помнить, что в секции переразмещений “rel.dyn” символ с искомым индексом может встречаться не один раз. Поэтому завершать цикл поиска после первого же перенаправления нельзя. А вот адрес оригинала можно запомнить при первом совпадении индекса и больше не вычислять – он все равно не измениться.</li>
<li>Возвращаем адрес функции-оригинала или NULL, если функция с искомым именен не была найдена.</li>
</ol><br/>
Ниже представлен код этой функции на языке С:<br/>
<br/>
<pre><code>void *elf_hook(char const *module_filename, void const *module_address, char const *name, void const *substitution)
{
    static size_t pagesize;

    int descriptor;  //file descriptor of shared module

    Elf_Shdr
    *dynsym = NULL,  // ".dynsym" section header
    *rel_plt = NULL,  // ".rel.plt" section header
    *rel_dyn = NULL;  // ".rel.dyn" section header

    Elf_Sym
    *symbol = NULL;  //symbol table entry for symbol named "name"

    Elf_Rel
    *rel_plt_table = NULL,  //array with ".rel.plt" entries
    *rel_dyn_table = NULL;  //array with ".rel.dyn" entries

    size_t
    i,
    name_index = 0,  //index of symbol named "name" in ".dyn.sym"
    rel_plt_amount = 0,  // amount of ".rel.plt" entries
    rel_dyn_amount = 0,  // amount of ".rel.dyn" entries
    *name_address = NULL;  //address of relocation for symbol named "name"

    void *original = NULL;  //address of the symbol being substituted

    if (NULL == module_address || NULL == name || NULL == substitution)
        return original;

    if (!pagesize)
        pagesize = sysconf(_SC_PAGESIZE);

    descriptor = open(module_filename, O_RDONLY);

    if (descriptor &lt; 0)
        return original;

    if (
        section_by_type(descriptor, SHT_DYNSYM, &amp;dynsym) ||  //get ".dynsym" section
        symbol_by_name(descriptor, dynsym, name, &amp;symbol, &amp;name_index) ||  //actually, we need only the index of symbol named "name" in the ".dynsym" table
        section_by_name(descriptor, REL_PLT, &amp;rel_plt) ||  //get ".rel.plt" (for 32-bit) or ".rela.plt" (for 64-bit) section
        section_by_name(descriptor, REL_DYN, &amp;rel_dyn)  //get ".rel.dyn" (for 32-bit) or ".rela.dyn" (for 64-bit) section
       )
    {  //if something went wrong
        free(dynsym);
        free(rel_plt);
        free(rel_dyn);
        free(symbol);
        close(descriptor);

        return original;
    }
//release the data used
    free(dynsym);
    free(symbol);

    rel_plt_table = (Elf_Rel *)(((size_t)module_address) + rel_plt->sh_addr);  //init the ".rel.plt" array
    rel_plt_amount = rel_plt->sh_size / sizeof(Elf_Rel);  //and get its size

    rel_dyn_table = (Elf_Rel *)(((size_t)module_address) + rel_dyn->sh_addr);  //init the ".rel.dyn" array
    rel_dyn_amount = rel_dyn->sh_size / sizeof(Elf_Rel);  //and get its size
//release the data used
    free(rel_plt);
    free(rel_dyn);
//and descriptor
    close(descriptor);
//now we've got ".rel.plt" (needed for PIC) table and ".rel.dyn" (for non-PIC) table and the symbol's index
    for (i = 0; i &lt; rel_plt_amount; ++i)  //lookup the ".rel.plt" table
        if (ELF_R_SYM(rel_plt_table[i].r_info) == name_index)  //if we found the symbol to substitute in ".rel.plt"
        {
            original = (void *)*(size_t *)(((size_t)module_address) + rel_plt_table[i].r_offset);  //save the original function address
            *(size_t *)(((size_t)module_address) + rel_plt_table[i].r_offset) = (size_t)substitution;  //and replace it with the substitutional

            break;  //the target symbol appears in ".rel.plt" only once
        }

    if (original)
        return original;
//we will get here only with 32-bit non-PIC module
    for (i = 0; i &lt; rel_dyn_amount; ++i)  //lookup the ".rel.dyn" table
        if (ELF_R_SYM(rel_dyn_table[i].r_info) == name_index)  //if we found the symbol to substitute in ".rel.dyn"
        {
            name_address = (size_t *)(((size_t)module_address) + rel_dyn_table[i].r_offset);  //get the relocation address (address of a relative CALL (0xE8) instruction's argument)

            if (!original)
                original = (void *)(*name_address + (size_t)name_address + sizeof(size_t));  //calculate an address of the original function by a relative CALL (0xE8) instruction's argument

            mprotect((void *)(((size_t)name_address) &amp; (((size_t)-1) ^ (pagesize - 1))), pagesize, PROT_READ | PROT_WRITE);  //mark a memory page that contains the relocation as writable

            if (errno)
                return NULL;

            *name_address = (size_t)substitution - (size_t)name_address - sizeof(size_t);  //calculate a new relative CALL (0xE8) instruction's argument for the substitutional function and write it down

            mprotect((void *)(((size_t)name_address) &amp; (((size_t)-1) ^ (pagesize - 1))), pagesize, PROT_READ | PROT_EXEC);  //mark a memory page that contains the relocation back as executable

            if (errno)  //if something went wrong
            {
                *name_address = (size_t)original - (size_t)name_address - sizeof(size_t);  //then restore the original function address

                return NULL;
            }
        }

    return original;
}
</code></pre><br/>
Полная реализация этой функции с тестовыми примерами доступна для <a href="http://apriorit.com/downloads/elf_hook.zip">скачивания</a>.<br/>
<br/>
Перепишем нашу тестовую программу:<br/>
<br/>
<pre><code>#include &lt;stdio.h>
#include &lt;dlfcn.h>

#include "elf_hook.h"

#define LIBTEST1_PATH "libtest1.so"  //position dependent code (for 32 bit only)
#define LIBTEST2_PATH "libtest2.so"  //position independent code

void libtest1();  //from libtest1.so
void libtest2();  //from libtest2.so

int hooked_puts(char const *s)
{
    puts(s);  //calls the original puts() from libc.so because our main executable module called "test" is intact by hook
    puts("is HOOKED!");
}

int main()
{
    void *handle1 = dlopen(LIBTEST1_PATH, RTLD_LAZY);
    void *handle2 = dlopen(LIBTEST2_PATH, RTLD_LAZY);
    void *original1, *original2;

    if (NULL == handle1 || NULL == handle2)
        fprintf(stderr, "Failed to open \"%s\" or \"%s\"!\n", LIBTEST1_PATH, LIBTEST2_PATH);

    libtest1();  //calls puts() from libc.so twice
    libtest2();  //calls puts() from libc.so twice
    puts("-----------------------------");

    original1 = elf_hook(LIBTEST1_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle1), "puts", hooked_puts);
    original2 = elf_hook(LIBTEST2_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle2), "puts", hooked_puts);

    if (NULL == original1 || NULL == original2)
        fprintf(stderr, "Redirection failed!\n");

    libtest1();  //calls hooked_puts() twice
    libtest2();  //calls hooked_puts() twice
    puts("-----------------------------");

    original1 = elf_hook(LIBTEST1_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle1), "puts", original1);
    original2 = elf_hook(LIBTEST2_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle2), "puts", original2);

    if (NULL == original1 || original1 != original2)  //both pointers should contain hooked_puts() address now
        fprintf(stderr, "Restoration failed!\n");

    libtest1();  //again calls puts() from libc.so twice
    libtest2();  //again calls puts() from libc.so twice

    dlclose(handle1);
    dlclose(handle2);

    return 0;
}
</code></pre> <br/>
Откомпилируем:<br/>
<br/>
<pre><code class="bash">gcc -g3 -m32       -shared -o libtest1.so libtest1.c
gcc -g3 -m32 -fPIC -shared -o libtest2.so libtest2.c

gcc -g3 -m32 -L$PWD -o test test.c elf_hook.c -ltest1 -ltest2 -ldl
</code></pre><br/>
И запустим:<br/>
<br/>
<pre><code class="bash">export LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH
./test
</code></pre><br/>
<br/>
Вывод получим следующий:<br/>
<br/>
<code>libtest1: 1st call to the original puts()<br/>
libtest1: 2nd call to the original puts()<br/>
libtest2: 1st call to the original puts()<br/>
libtest2: 2nd call to the original puts()<br/>
-----------------------------<br/>
libtest1: 1st call to the original puts()<br/>
is HOOKED!<br/>
libtest1: 2nd call to the original puts()<br/>
is HOOKED!<br/>
libtest2: 1st call to the original puts()<br/>
is HOOKED!<br/>
libtest2: 2nd call to the original puts()<br/>
is HOOKED!<br/>
-----------------------------<br/>
libtest1: 1st call to the original puts()<br/>
libtest1: 2nd call to the original puts()<br/>
libtest2: 1st call to the original puts()<br/>
libtest2: 2nd call to the original puts()<br/>
</code><br/>
Что свидетельствует о полном выполнении задачи, поставленной в самом начале. Ура!<br/>
<br/>
<h5>Как узнать адрес по которому загрузилась разделяемая библиотека?</h5><br/>
Этот очень интересный вопрос возникает при внимательном рассмотрении прототипа функции для перенаправления. После некоторого исследования мне удалось обнаружить способ определения адреса загрузки библиотеки по ее описателю, который возвращает функция dlopen(). Делается это таким макросом:<br/>
<br/>
<code>#define LIBRARY_ADDRESS_BY_HANDLE(dlhandle) ((NULL == dlhandle) ? NULL : (void*)*(size_t const*)(dlhandle))<br/>
</code><br/>
<br/>
<h5>Как записать и восстановить адрес новой функции?</h5><br/>
С переписыванием адресов, на которые указывают переразмещения из секции “.rel.plt” проблем не возникает. По сути, переписывается операнд инструкции JMP соответствующего элемента из секции “.plt”. А операнды такой инструкции – это просто адреса.<br/>
<br/>
Интересней дела обстоят с применением переразмещений к операндам относительных инструкций CALL (код E8). Адреса перехода в них вычисляются по формуле:<br/>
<br/>
<code>address_of_a_function = CALL_argument + address_of_the_next_instruction<br/>
</code><br/>
Так мы можем узнать адрес функции-оригинала. Из предыдущей формулы получаем значение, которое нужно записать как аргумент для относительного CALL, чтобы осуществлять вызов нужной нам функции:<br/>
<br/>
<code>CALL_argument = address_of_a_function - address_of_the_next_instruction<br/>
</code><br/>
Секция “.rel.dyn” попадает в сегмент, помеченный как “R E”, а значит, записывать адреса в него просто так не получится. Нужно добавить право на запись для страницы, на которую приходится переразмещение и не забыть после перенаправления вернуть все обратно. Это делается при помощи функции mprotect(). Первый параметр этой функции – это адрес страницы, содержащей переразмещение. Он должен быть всегда кратен размеру страницы. Вычислять его не сложно: нужно только обнулить несколько младших байт адреса переразмещения (в зависимости от размера страницы):<br/>
<br/>
<code>page_address = (size_t)relocation_address &amp; ( ((size_t) -1) ^ (pagesize - 1) );<br/>
</code><br/>
Например, для страниц размером 4096 (0x1000) байт на 32-битной системе приведенное выше выражение преобразуется в:<br/>
<br/>
<code>page_address = (size_t)relocation_address &amp; (0xFFFFFFFF ^ 0xFFF) = (size_t)relocation_address &amp; 0xFFFFF000;<br/>
</code><br/>
Размер одной страницы, можно узнать, вызвав sysconf(_SC_PAGESIZE).<br/>
<br/>
<h5>Пример использования</h5><br/>
В качестве упражнения можно написать plug-in к Firefox, который будет перенаправлять на себя все сетевые вызовы, например, Adobe Flash plug-in’а (libflashplayer.so). Таким образом, можно контролировать весь трафик Adobe Flash в Internet из процесса Firefox никак не воздействуя на сетевые вызовы самого обозревателя и других plug-in’ов.<br/>
<br/>
<b>Удачи!</b><br/>
<br/>
<h5>Ссылки по теме</h5><br/>
Желающим прочитать на английском <a href="http://apriorit.com/our-experience/articles/9-sd-articles/181-elf-hook">сюда</a>, на русском публикую впервые.<ul>
<li><a href="http://www.skyfree.org/linux/references/ELF_Format.pdf">www.skyfree.org/linux/references/ELF_Format.pdf</a></li>
<li><a href="http://en.wikipedia.org/wiki/Executable_and_Linkable_Format">en.wikipedia.org/wiki/Executable_and_Linkable_Format</a></li>
<li><a href="http://vxheavens.com/lib/vsc06.html">vxheavens.com/lib/vsc06.html</a></li>
<li><a href="http://netwinder.osuosl.org/users/p/patb/public_html/elf_relocs.html">netwinder.osuosl.org/users/p/patb/public_html/elf_relocs.html</a></li>
<li><a href="http://www.slideshare.net/sanjivmalik/dynamic-linker-presentation">www.slideshare.net/sanjivmalik/dynamic-linker-presentation</a></li>
<li><a href="http://www.codeproject.com/KB/cpp/shared_object_injection_1.aspx">www.codeproject.com/KB/cpp/shared_object_injection_1.aspx</a></li>
<li><a href="http://www.linuxjournal.com/article/1060">www.linuxjournal.com/article/1060</a></li>
</ul></div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Blinux%5D" class="tm-article-body__tags-item-link">linux</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Belf%5D" class="tm-article-body__tags-item-link">elf</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bredirect%5D" class="tm-article-body__tags-item-link">redirect</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bshared%20library%5D" class="tm-article-body__tags-item-link">shared library</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bhook%5D" class="tm-article-body__tags-item-link">hook</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdll%20injection%5D" class="tm-article-body__tags-item-link">dll injection</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B9%5D" class="tm-article-body__tags-item-link">перенаправление функций</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%85%D1%83%D0%BA%5D" class="tm-article-body__tags-item-link">хук</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%85%D1%83%D0%BA%D0%B8%5D" class="tm-article-body__tags-item-link">хуки</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/webdev/" class="tm-article-body__tags-item-link">
                  Разработка веб-сайтов
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 81: ↑75 и ↓6</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 81: ↑75 и ↓6" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+69</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    198
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/106107/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      30
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/shoumikhin/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_green"><!----> <use xlink:href="/img/megazord-v24.cee85629.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 271 голос " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    20.7
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Anthony Shoumikhin</span> <a href="/ru/users/shoumikhin/" class="tm-user-card__nickname">
          @shoumikhin
        </a> <!----></div> <p class="tm-user-card__short-info">Software Engineer</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/106107/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 30 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2019-12-04T12:29:01.000Z" title="2019-12-04, 15:29">4  декабря  2019 в 15:29</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/478472/" class="tm-article-title__link"><span>Linux Kernel Library: ядро Linux в форм-факторе so или dll</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 22: ↑22 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 22: ↑22 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+22</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">12K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    84
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/478472/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2011-03-16T07:27:44.000Z" title="2011-03-16, 10:27">16  марта  2011 в 10:27</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/115558/" class="tm-article-title__link"><span>Перенаправление функций в Mach-O библиотеках</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 37: ↑32 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 37: ↑32 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+27</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">7.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    63
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/115558/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      14
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2009-10-27T19:01:20.000Z" title="2009-10-27, 22:01">27  октября  2009 в 22:01</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/73324/" class="tm-article-title__link"><span>DLL Injection</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 71: ↑56 и ↓15</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 71: ↑56 и ↓15" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+41</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">59K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    116
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/73324/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      74
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T14:25:12.000Z" title="2021-09-28, 17:25">вчера в 17:25</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580516/" class="tm-article-title__link"><span>Лучший язык программирования</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 85: ↑81 и ↓4</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 85: ↑81 и ↓4" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+77</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">14K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    89
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580516/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      38
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T07:08:30.000Z" title="2021-09-28, 10:08">вчера в 10:08</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/nlmk/blog/580270/" class="tm-article-title__link"><span>Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 73: ↑73 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 73: ↑73 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+73</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    25
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/nlmk/blog/580270/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      23
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:51:05.000Z" title="2021-09-28, 11:51">вчера в 11:51</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/yandex/blog/579778/" class="tm-article-title__link"><span>YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 47: ↑47 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 47: ↑47 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+47</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    32
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/yandex/blog/579778/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      14
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:07:48.000Z" title="2021-09-28, 11:07">вчера в 11:07</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/domclick/blog/575686/" class="tm-article-title__link"><span>Когда сделаете доработку?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 49: ↑48 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 49: ↑48 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+47</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">5.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    44
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/domclick/blog/575686/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      10
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T11:02:14.000Z" title="2021-09-28, 14:02">вчера в 14:02</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580240/" class="tm-article-title__link"><span>SQLite-песочница в браузере</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 38: ↑38 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 38: ↑38 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+38</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.8K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    57
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580240/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      1
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="106107" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/106107/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/106107/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"106107":{"id":"106107","timePublished":"2010-10-13T17:38:24+00:00","isCorporative":false,"lang":"ru","titleHtml":"Перенаправление функций в разделяемых ELF-библиотеках","leadData":{"textHtml":"\u003Cimg align=\"left\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002Fafe3a628\u002F27e2dc06\u002F9afa147c\u002F33803238.png\"\u002F\u003EВсе мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех процессов. Во-вторых, можно расширять функционал своей программы, подгружая дополнительную библиотеку, которая и будет этот функционал обеспечивать. И все это без перезапуска самой программы. А еще решается проблема обновлений. Для динамически компонуемой библиотеки можно определить стандартный интерфейс и влиять на функционал и качество своей основной программы, просто меняя версию библиотеки. Такие методы повторного использования кода даже получили название «архитектура plug-in’ов». Но топик не об этом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКстати, нетерпеливые могут все \u003Ca href=\"http:\u002F\u002Fapriorit.com\u002Fdownloads\u002Felf_hook.zip\"\u003Eскачать\u003C\u002Fa\u003E и попробовать прямо сейчас.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Осторожно, много текста!","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":20.7,"votesCount":271},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"59212","alias":"shoumikhin","fullname":"Anthony Shoumikhin","avatarUrl":null,"speciality":"Software Engineer"},"statistics":{"commentsCount":30,"favoritesCount":198,"readingCount":27279,"score":69,"votesCount":81},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg align=\"left\" src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002Fafe3a628\u002F27e2dc06\u002F9afa147c\u002F33803238.png\"\u002F\u003EВсе мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех процессов. Во-вторых, можно расширять функционал своей программы, подгружая дополнительную библиотеку, которая и будет этот функционал обеспечивать. И все это без перезапуска самой программы. А еще решается проблема обновлений. Для динамически компонуемой библиотеки можно определить стандартный интерфейс и влиять на функционал и качество своей основной программы, просто меняя версию библиотеки. Такие методы повторного использования кода даже получили название «архитектура plug-in’ов». Но топик не об этом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКстати, нетерпеливые могут все \u003Ca href=\"http:\u002F\u002Fapriorit.com\u002Fdownloads\u002Felf_hook.zip\"\u003Eскачать\u003C\u002Fa\u003E и попробовать прямо сейчас.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонечно, редко какая динамически компонуемая библиотека в своей реализации опирается исключительно на себя, то есть вычислительные возможности процессора и память. Библиотеки используют библиотеки. Или, хотя бы, стандартные библиотеки. Как, например, программы на С\\С++ используют стандартные библиотеки С\\С++. Последнии, кстати, для удобства тоже организуются в динамически компонуемом виде (libc.so и libstdc++.so). Сами они хранятся в файлах особого формата. Мое исследование проводилось для ОС Linux, в которой основным форматом динамически компонуемых библиотек является ELF (Executable and Linkable Format).\u003Cbr\u002F\u003E\r\nНекоторое время назад я столкнулся с необходимостью перехватывать вызовы функций из одной библиотеки в другую. Просто для того, чтобы обрабатывать их особым образом. Это называется перенаправлением вызова.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EПоподробней о перенаправлении\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nДля начала сформулируем задачу на конкретном примере. Допустим, у нас есть программа с названием «test» на языке С (файл test.c) и две разделяемые библиотеки (файлы libtest1.c и libtest2.c), с неизменным содержимым, откомпилированные заранее. Эти библиотеки предоставляют по одной функции: libtest1() и libtest2() соответственно. В своей реализации каждая из них пользуется функцией puts() из стандартной библиотеки языка С.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002F089057e3\u002F1cda8de1\u002Fabd7ded0\u002F750b9fc1.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗадача состоит в следующем:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EНужно заменить вызов функции puts() для обеих библиотек на вызов функции redirected_puts(), реализованной в главной программе (файл test.c), которая, в свою очередь, может пользоваться оригинальной puts();\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002F3d43fe1c\u002Fe8528998\u002Fdb2c173f\u002Fea240126.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003EОтменить произведенные изменения, то есть сделать так, чтобы повторный вызов libtest1() и libtest2() приводил к вызову оригинальной puts().\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002F4f2db377\u002F481f0b54\u002F54b771ad\u002F428a2599.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nПри этом менять код или перекомпилировать сами библиотеки не разрешается, только главную программу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЗачем это нужно?\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЭтот пример иллюстрирует две очень интересные особенности подобного перенаправления:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EОно осуществляется исключительно для конкретной динамически компонуемом библиотеки, а не для всего процесса, как при использовании переменной окружения LD_PRELOAD динамического загрузчика, что позволяет остальным модулям безболезненно пользоваться оригиналом функции;\u003C\u002Fli\u003E\r\n\u003Cli\u003EОно происходит во время работы программы и не требует ее перезапуска.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003EГде это можно применить? Ну, например, в своей программе с кучей plug-in’ов вы можете перехватывать их обращения к ресурсам системы или каким-либо другим библиотекам, не влияя на другие plug-in’ы и само приложение. Или даже делать все то же самое из своего собственного plug-in’а к некоторому приложению.\u003Cbr\u002F\u003E\r\nЛегального способа решить эту задачу не существует. Единственный вариант – разобраться с ELF и самому производить необходимые изменения в памяти.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EПоехали!\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EКратко об ELF\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЛучший способ понять ELF – это набраться терпения и пару раз внимательно прочитать его спецификацию, затем написать простую программу, откомпилировать ее и детально исследовать с помощью шестнадцатеричного редактора, сравнивая увиденное со спецификацией. Такой метод исследования сразу натолкнет на мысль написать какой-нибудь простой парсер для ELF, так как появится много рутинной работы. Но, не стоит спешить. Таких утилит создано уже несколько. Для исследования возьмем файлы из предыдущего раздела:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EFile test.c\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003E#include &lt;stdio.h\u003E\n#include &lt;dlfcn.h\u003E\n\n#define LIBTEST1_PATH \"libtest1.so\"  \u002F\u002Fposition dependent code (for 32 bit only)\n#define LIBTEST2_PATH \"libtest2.so\"  \u002F\u002Fposition independent code\n\nvoid libtest1();  \u002F\u002Ffrom libtest1.so\nvoid libtest2();  \u002F\u002Ffrom libtest2.so\n\nint main()\n{\n    void *handle1 = dlopen(LIBTEST1_PATH, RTLD_LAZY);\n    void *handle2 = dlopen(LIBTEST2_PATH, RTLD_LAZY);\n\n    if (NULL == handle1 || NULL == handle2)\n        fprintf(stderr, \"Failed to open \\\"%s\\\" or \\\"%s\\\"!\\n\", LIBTEST1_PATH, LIBTEST2_PATH);\n\n    libtest1();  \u002F\u002Fcalls puts() from libc.so twice\n    libtest2();  \u002F\u002Fcalls puts() from libc.so twice\n    puts(\"-----------------------------\");\n\n    dlclose(handle1);\n    dlclose(handle2);\n\n    return 0;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EFile libtest1.c\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003Eint puts(char const *);\n\nvoid libtest1()\n{\n    puts(\"libtest1: 1st call to the original puts()\");\n    puts(\"libtest1: 2nd call to the original puts()\");\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EFile libtest2.c\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003Eint puts(char const *);\n\nvoid libtest2()\n{\n    puts(\"libtest2: 1st call to the original puts()\");\n    puts(\"libtest2: 2nd call to the original puts()\");\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EИз каких частей состоит ELF?\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЧтобы ответить на этот вопрос, необходимо заглянуть внутрь такого файла. Для этого существует такие утилиты:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Ereadelf – очень мощный инструмент для просмотра содержимого секций ELF-файла\u003C\u002Fli\u003E\r\n\u003Cli\u003Eobjdump – очень похож на предыдущий, умеет дизассемблировать секции\u003C\u002Fli\u003E\r\n\u003Cli\u003Egdb – незаменим для отладки под Linux, особенно для просмотра мест, подлежащих переразмещению\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cb\u003EПереразмещение (relocation)\u003C\u002Fb\u003E – это специальный термин для того места в ELF-файле, которое ссылается на символ из другого модуля. Непосредственной модификацией таких мест занимается статический (ld) либо динамический (ld-linux.so.2) компоновщик\\загрузчик.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЛюбой ELF файл начинается со специального заголовка. Его структуру, как и описание многих других элементов ELF, можно найти в файле \u002Fusr\u002Finclude\u002Flinux\u002Felf.h. У заголовка есть специальное поле, в котором записано смещение от начала файла таблицы заголовков секций. Каждый элемент этой таблицы описывает некоторую секцию в ELF. Секция – это наименьший неделимый структурный элемент в ELF файле. При загрузке в память, секции объединяются в сегменты. Сегменты – это наименьшие неделимые части ELF файла, которые могут быть отображены в память загрузчиком (ld-linux.so.2). Сегменты описывает таблица сегментов, смещение которой так же есть в заголовке ELF файла.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002F9188edd2\u002Fc9959569\u002F10a83af1\u002F1b7bea4f.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nНаиболее важные из них:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E.text – содержит код модуля\u003C\u002Fli\u003E\r\n\u003Cli\u003E.data – инициализированные переменные\u003C\u002Fli\u003E\r\n\u003Cli\u003E.bss – не инициализированные переменные\u003C\u002Fli\u003E\r\n\u003Cli\u003E.symtab – символы модуля: функции и статические переменные\u003C\u002Fli\u003E\r\n\u003Cli\u003E.strtab – имена для символов модуля\u003C\u002Fli\u003E\r\n\u003Cli\u003E.rel.text – переразмещения для функций (для статически компонуемых модулей)\u003C\u002Fli\u003E\r\n\u003Cli\u003E.rel.data – переразмещения для статических переменных (для статически компонуемых модулей)\u003C\u002Fli\u003E\r\n\u003Cli\u003E.rel.plt – список элементов в PLT (Procedure Linkage Table), подлежащих переразмещению при динамической компоновке (используется PLT)\u003C\u002Fli\u003E\r\n\u003Cli\u003E.rel.dyn – переразмещения для динамически компонуемых функций (если PLT не используется)\u003C\u002Fli\u003E\r\n\u003Cli\u003E.got – Global Offset Table, содержит информацию о смещениях переразмещаемых объектов\u003C\u002Fli\u003E\r\n\u003Cli\u003E.debug – отладочная информация\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003EДля компиляции указанных выше файлов выполним такие команды:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Egcc -g3 -m32 -shared -o libtest1.so libtest1.c\ngcc -g3 -m32 -fPIC -shared -o libtest2.so libtest2.c\ngcc -g3 -m32 -L$PWD -o test test.c -ltest1 -ltest2 –ldl\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПервая команда создает динамически компонуемую библиотеку libtest1.so. Вторая – libtest2.so. Обратите внимание на ключ –fPIC. Он заставляет компилятор генерировать так называемый Position Independent Code. Подробности в следующем разделе. Третья команда создает исполняемый модуль c именем test путем компиляции файла test.c и компоновки его с уже созданными библиотеками libtest1.so и libtest2.so. Последние находятся в текущем каталоге, что отражено использованием ключа –L$PWD. Компоновка с libdl.so необходима для использования функицй dlopen() и dlclose().\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля запуска программы необходимо выполнить следующие команды:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Eexport LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH\n.\u002Ftest\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТо есть, добавить динамическому компоновщику\\загрузчику путь к текущему каталогу как путь для поиска библиотек. Вывод программы получим такой:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Elibtest1: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest1: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\n-----------------------------\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nТеперь посмотрим на секции модуля test. Для этого запустим readelf с ключом –a. Ниже преведены наиболее интересные из них:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003EELF Header:\u003Cbr\u002F\u003E\r\n Magic: 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 \u003Cbr\u002F\u003E\r\n Class: ELF32\u003Cbr\u002F\u003E\r\n Data: 2's complement, little endian\u003Cbr\u002F\u003E\r\n Version: 1 (current)\u003Cbr\u002F\u003E\r\n OS\u002FABI: UNIX - System V\u003Cbr\u002F\u003E\r\n ABI Version: 0\u003Cbr\u002F\u003E\r\n Type: EXEC (Executable file)\u003Cbr\u002F\u003E\r\n Machine: Intel 80386\u003Cbr\u002F\u003E\r\n Version: 0x1\u003Cbr\u002F\u003E\r\n Entry point address: 0x8048580\u003Cbr\u002F\u003E\r\n Start of program headers: 52 (bytes into file)\u003Cbr\u002F\u003E\r\n Start of section headers: 21256 (bytes into file)\u003Cbr\u002F\u003E\r\n Flags: 0x0\u003Cbr\u002F\u003E\r\n Size of this header: 52 (bytes)\u003Cbr\u002F\u003E\r\n Size of program headers: 32 (bytes)\u003Cbr\u002F\u003E\r\n Number of program headers: 8\u003Cbr\u002F\u003E\r\n Size of section headers: 40 (bytes)\u003Cbr\u002F\u003E\r\n Number of section headers: 39\u003Cbr\u002F\u003E\r\n Section header string table index: 36\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nСтандартный заголовок исполняемого модуля. Магическая последовательность в первых 16 байтах. Обозначен тип модуля (в данном случае – исполняемый, а еще бывает объектный (.o) и разделяемый (.so)), архитектура (i386), рекомендуемая точка входа, смещения к заголовкам сегментов и секций и их размеры. В самом конце – смещение в таблице строк для названий секций.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ESection Headers:\u003Cbr\u002F\u003E\r\n [Nr] Name Type Addr Off Size ES Flg Lk Inf Al\u003Cbr\u002F\u003E\r\n [ 0] NULL 00000000 000000 000000 00 0 0 0\u003Cbr\u002F\u003E\r\n [ 1] .interp PROGBITS 08048134 000134 000013 00 A 0 0 1\u003Cbr\u002F\u003E\r\n ...\u003Cbr\u002F\u003E\r\n [ 5] .dynsym DYNSYM 08048200 000200 000110 10 A 6 1 4\u003Cbr\u002F\u003E\r\n [ 6] .dynstr STRTAB 08048310 000310 0000df 00 A 0 0 1\u003Cbr\u002F\u003E\r\n ...\u003Cbr\u002F\u003E\r\n [ 9] .rel.dyn REL 08048464 000464 000010 08 A 5 0 4\u003Cbr\u002F\u003E\r\n [10] .rel.plt REL 08048474 000474 000040 08 A 5 12 4\u003Cbr\u002F\u003E\r\n [11] .init PROGBITS 080484b4 0004b4 000030 00 AX 0 0 4\u003Cbr\u002F\u003E\r\n [12] .plt PROGBITS 080484e4 0004e4 000090 04 AX 0 0 4\u003Cbr\u002F\u003E\r\n [13] .text PROGBITS 08048580 000580 0001fc 00 AX 0 0 16\u003Cbr\u002F\u003E\r\n [14] .fini PROGBITS 0804877c 00077c 00001c 00 AX 0 0 4\u003Cbr\u002F\u003E\r\n [15] .rodata PROGBITS 08048798 000798 00005c 00 A 0 0 4\u003Cbr\u002F\u003E\r\n ...\u003Cbr\u002F\u003E\r\n [20] .dynamic DYNAMIC 08049f08 000f08 0000e8 08 WA 6 0 4\u003Cbr\u002F\u003E\r\n [21] .got PROGBITS 08049ff0 000ff0 000004 04 WA 0 0 4\u003Cbr\u002F\u003E\r\n [22] .got.plt PROGBITS 08049ff4 000ff4 00002c 04 WA 0 0 4\u003Cbr\u002F\u003E\r\n [23] .data PROGBITS 0804a020 001020 000008 00 WA 0 0 4\u003Cbr\u002F\u003E\r\n [24] .bss NOBITS 0804a028 001028 00000c 00 WA 0 0 4\u003Cbr\u002F\u003E\r\n ...\u003Cbr\u002F\u003E\r\n [27] .debug_pubnames PROGBITS 00000000 0011b8 000040 00 0 0 1\u003Cbr\u002F\u003E\r\n [28] .debug_info PROGBITS 00000000 0011f8 0004d9 00 0 0 1\u003Cbr\u002F\u003E\r\n [29] .debug_abbrev PROGBITS 00000000 0016d1 000156 00 0 0 1\u003Cbr\u002F\u003E\r\n [30] .debug_line PROGBITS 00000000 001827 000309 00 0 0 1\u003Cbr\u002F\u003E\r\n [31] .debug_frame PROGBITS 00000000 001b30 00003c 00 0 0 4\u003Cbr\u002F\u003E\r\n [32] .debug_str PROGBITS 00000000 001b6c 00024e 01 MS 0 0 1\u003Cbr\u002F\u003E\r\n ...\u003Cbr\u002F\u003E\r\n [36] .shstrtab STRTAB 00000000 0051a8 000160 00 0 0 1\u003Cbr\u002F\u003E\r\n [37] .symtab SYMTAB 00000000 005920 000530 10 38 57 4\u003Cbr\u002F\u003E\r\n [38] .strtab STRTAB 00000000 005e50 000268 00 0 0 1\u003Cbr\u002F\u003E\r\nKey to Flags:\u003Cbr\u002F\u003E\r\n W (write), A (alloc), X (execute), M (merge), S (strings)\u003Cbr\u002F\u003E\r\n I (info), L (link order), G (group), x (unknown)\u003Cbr\u002F\u003E\r\n O (extra OS processing required) o (OS specific), p (processor specific)\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЗдесь можно увидеть перечень всех секций подопытного ELF файла, их тип и режим загрузки в память (R, W, X и A).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003EProgram Headers:\u003Cbr\u002F\u003E\r\n Type Offset VirtAddr PhysAddr FileSiz MemSiz Flg Align\u003Cbr\u002F\u003E\r\n PHDR 0x000034 0x08048034 0x08048034 0x00100 0x00100 R E 0x4\u003Cbr\u002F\u003E\r\n INTERP 0x000134 0x08048134 0x08048134 0x00013 0x00013 R 0x1\u003Cbr\u002F\u003E\r\n [Requesting program interpreter: \u002Flib\u002Fld-linux.so.2]\u003Cbr\u002F\u003E\r\n LOAD 0x000000 0x08048000 0x08048000 0x007f8 0x007f8 R E 0x1000\u003Cbr\u002F\u003E\r\n LOAD 0x000ef4 0x08049ef4 0x08049ef4 0x00134 0x00140 RW 0x1000\u003Cbr\u002F\u003E\r\n DYNAMIC 0x000f08 0x08049f08 0x08049f08 0x000e8 0x000e8 RW 0x4\u003Cbr\u002F\u003E\r\n NOTE 0x000148 0x08048148 0x08048148 0x00020 0x00020 R 0x4\u003Cbr\u002F\u003E\r\n GNU_STACK 0x000000 0x00000000 0x00000000 0x00000 0x00000 RW 0x4\u003Cbr\u002F\u003E\r\n GNU_RELRO 0x000ef4 0x08049ef4 0x08049ef4 0x0010c 0x0010c R 0x1\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЭто список сегментов – своеобразных контейнеров для секций в памяти. Также указан путь к специальному модулю – динамическому компоновщику\\загрузчику. Именно ему предстоит расположить содержимое этого ELF файла в памяти.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E Section to Segment mapping:\u003Cbr\u002F\u003E\r\n Segment Sections...\u003Cbr\u002F\u003E\r\n 00 \u003Cbr\u002F\u003E\r\n 01 .interp \u003Cbr\u002F\u003E\r\n 02 .interp .note.ABI-tag .hash .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata .eh_frame \u003Cbr\u002F\u003E\r\n 03 .ctors .dtors .jcr .dynamic .got .got.plt .data .bss \u003Cbr\u002F\u003E\r\n 04 .dynamic \u003Cbr\u002F\u003E\r\n 05 .note.ABI-tag \u003Cbr\u002F\u003E\r\n 06 \u003Cbr\u002F\u003E\r\n 07 .ctors .dtors .jcr .dynamic .got\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nА вот как произойдет распределение секций по сегментам во время загрузки.\u003Cbr\u002F\u003E\r\nНо, наиболее интересная секция, в которой хранится информация об импортируемых и экспортируемых динамически компонуемых функциях называются “.dynsym”:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ESymbol table '.dynsym' contains 17 entries:\u003Cbr\u002F\u003E\r\n Num: Value Size Type Bind Vis Ndx Name\u003Cbr\u002F\u003E\r\n 0: 00000000 0 NOTYPE LOCAL DEFAULT UND \u003Cbr\u002F\u003E\r\n 1: 00000000 0 FUNC GLOBAL DEFAULT UND libtest2\u003Cbr\u002F\u003E\r\n 2: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__\u003Cbr\u002F\u003E\r\n 3: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses\u003Cbr\u002F\u003E\r\n 4: 00000000 0 FUNC GLOBAL DEFAULT UND dlclose@GLIBC_2.0 (2)\u003Cbr\u002F\u003E\r\n 5: 00000000 0 FUNC GLOBAL DEFAULT UND __libc_start_main@GLIBC_2.0 (3)\u003Cbr\u002F\u003E\r\n 6: 00000000 0 FUNC GLOBAL DEFAULT UND libtest1\u003Cbr\u002F\u003E\r\n 7: 00000000 0 FUNC GLOBAL DEFAULT UND dlopen@GLIBC_2.1 (4)\u003Cbr\u002F\u003E\r\n 8: 00000000 0 FUNC GLOBAL DEFAULT UND fprintf@GLIBC_2.0 (3)\u003Cbr\u002F\u003E\r\n 9: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (3)\u003Cbr\u002F\u003E\r\n 10: 0804a034 0 NOTYPE GLOBAL DEFAULT ABS _end\u003Cbr\u002F\u003E\r\n 11: 0804a028 0 NOTYPE GLOBAL DEFAULT ABS _edata\u003Cbr\u002F\u003E\r\n 12: 0804879c 4 OBJECT GLOBAL DEFAULT 15 _IO_stdin_used\u003Cbr\u002F\u003E\r\n 13: 0804a028 4 OBJECT GLOBAL DEFAULT 24 stderr@GLIBC_2.0 (3)\u003Cbr\u002F\u003E\r\n 14: 0804a028 0 NOTYPE GLOBAL DEFAULT ABS __bss_start\u003Cbr\u002F\u003E\r\n 15: 080484b4 0 FUNC GLOBAL DEFAULT 11 _init\u003Cbr\u002F\u003E\r\n 16: 0804877c 0 FUNC GLOBAL DEFAULT 14 _fini\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nКроме прочих функций, необходимых для правильной загрузки\\выгрузки программы, можно отыскать знакомые имена: libtest1, libtest2, dlopen, fprintf, puts, dlclose. Для всех них значится тип FUNC и тот факт, что они в этом модуле не определены – индекс секции помечен как UND.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСекции “.rel.dyn” и “.rel.plt” являются таблицами переразмещений для тех символов из “.dynsym”, для которых вообще необходимо переразмещение при компоновке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ERelocation section '.rel.dyn' at offset 0x464 contains 2 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n08049ff0 00000206 R_386_GLOB_DAT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n0804a028 00000d05 R_386_COPY 0804a028 stderr\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nRelocation section '.rel.plt' at offset 0x474 contains 8 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n0804a000 00000107 R_386_JUMP_SLOT 00000000 libtest2\u003Cbr\u002F\u003E\r\n0804a004 00000207 R_386_JUMP_SLOT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n0804a008 00000407 R_386_JUMP_SLOT 00000000 dlclose\u003Cbr\u002F\u003E\r\n0804a00c 00000507 R_386_JUMP_SLOT 00000000 __libc_start_main\u003Cbr\u002F\u003E\r\n0804a010 00000607 R_386_JUMP_SLOT 00000000 libtest1\u003Cbr\u002F\u003E\r\n0804a014 00000707 R_386_JUMP_SLOT 00000000 dlopen\u003Cbr\u002F\u003E\r\n0804a018 00000807 R_386_JUMP_SLOT 00000000 fprintf\u003Cbr\u002F\u003E\r\n0804a01c 00000907 R_386_JUMP_SLOT 00000000 puts\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nВ чем разница между этими таблицами с точки зрения динамической компоновки функций? Это тема следующего раздела.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EКак компонуются разделяемые ELF-библиотеки?\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nКомпиляция библиотек libtest1.so и libtest2.so несколько отличалась. libtest2.so компилировалась с ключом –fPIC (генерировать Position Independent Code). Посмотрим, как это отразилось на таблицах динамических символов для этих двух модулей (используем readelf):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ESymbol table '.dynsym' contains 11 entries:\u003Cbr\u002F\u003E\r\n Num: Value Size Type Bind Vis Ndx Name\u003Cbr\u002F\u003E\r\n 0: 00000000 0 NOTYPE LOCAL DEFAULT UND \u003Cbr\u002F\u003E\r\n 1: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__\u003Cbr\u002F\u003E\r\n 2: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses\u003Cbr\u002F\u003E\r\n 3: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (2)\u003Cbr\u002F\u003E\r\n 4: 00000000 0 FUNC WEAK DEFAULT UND __cxa_finalize@GLIBC_2.1.3 (3)\u003Cbr\u002F\u003E\r\n 5: 00002014 0 NOTYPE GLOBAL DEFAULT ABS _end\u003Cbr\u002F\u003E\r\n 6: 0000200c 0 NOTYPE GLOBAL DEFAULT ABS _edata\u003Cbr\u002F\u003E\r\n 7: 0000043c 32 FUNC GLOBAL DEFAULT 11 libtest1\u003Cbr\u002F\u003E\r\n 8: 0000200c 0 NOTYPE GLOBAL DEFAULT ABS __bss_start\u003Cbr\u002F\u003E\r\n 9: 0000031c 0 FUNC GLOBAL DEFAULT 9 _init\u003Cbr\u002F\u003E\r\n 10: 00000498 0 FUNC GLOBAL DEFAULT 12 _fini\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSymbol table '.dynsym' contains 11 entries:\u003Cbr\u002F\u003E\r\n Num: Value Size Type Bind Vis Ndx Name\u003Cbr\u002F\u003E\r\n 0: 00000000 0 NOTYPE LOCAL DEFAULT UND \u003Cbr\u002F\u003E\r\n 1: 00000000 0 NOTYPE WEAK DEFAULT UND __gmon_start__\u003Cbr\u002F\u003E\r\n 2: 00000000 0 NOTYPE WEAK DEFAULT UND _Jv_RegisterClasses\u003Cbr\u002F\u003E\r\n 3: 00000000 0 FUNC GLOBAL DEFAULT UND puts@GLIBC_2.0 (2)\u003Cbr\u002F\u003E\r\n 4: 00000000 0 FUNC WEAK DEFAULT UND __cxa_finalize@GLIBC_2.1.3 (3)\u003Cbr\u002F\u003E\r\n 5: 00002018 0 NOTYPE GLOBAL DEFAULT ABS _end\u003Cbr\u002F\u003E\r\n 6: 00002010 0 NOTYPE GLOBAL DEFAULT ABS _edata\u003Cbr\u002F\u003E\r\n 7: 00002010 0 NOTYPE GLOBAL DEFAULT ABS __bss_start\u003Cbr\u002F\u003E\r\n 8: 00000304 0 FUNC GLOBAL DEFAULT 9 _init\u003Cbr\u002F\u003E\r\n 9: 0000043c 52 FUNC GLOBAL DEFAULT 11 libtest2\u003Cbr\u002F\u003E\r\n 10: 000004a8 0 FUNC GLOBAL DEFAULT 12 _fini\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nИтак, таблицы динамических символов для обеих библиотек отличаются только порядком следования самих символов. Видно, что обе они используют неопределенную функцию puts(), а предоставляют libtest1() либо libtest2(). Как изменились таблицы переразмещений?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ERelocation section '.rel.dyn' at offset 0x2cc contains 8 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n00000445 00000008 R_386_RELATIVE \u003Cbr\u002F\u003E\r\n00000451 00000008 R_386_RELATIVE \u003Cbr\u002F\u003E\r\n00002008 00000008 R_386_RELATIVE \u003Cbr\u002F\u003E\r\n0000044a 00000302 R_386_PC32 00000000 puts\u003Cbr\u002F\u003E\r\n00000456 00000302 R_386_PC32 00000000 puts\u003Cbr\u002F\u003E\r\n00001fe8 00000106 R_386_GLOB_DAT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n00001fec 00000206 R_386_GLOB_DAT 00000000 _Jv_RegisterClasses\u003Cbr\u002F\u003E\r\n00001ff0 00000406 R_386_GLOB_DAT 00000000 __cxa_finalize\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nRelocation section '.rel.plt' at offset 0x30c contains 2 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n00002000 00000107 R_386_JUMP_SLOT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n00002004 00000407 R_386_JUMP_SLOT 00000000 __cxa_finalize\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nДля libtest1.so переразмещение для функции puts() встречается два раза в секции “.rel.dyn”. Посмотрим на эти места непосредственно в модуле при помощи дизассемблера. Необходимо отыскать функцию libtest1() в которой и происходит двойной вызов puts(). Используем objdump –D:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003E0000043c &lt;libtest1\u003E:\n 43c:\t55                   \tpush   %ebp\n 43d:\t89 e5                \tmov    %esp,%ebp\n 43f:\t83 ec 08             \tsub    $0x8,%esp\n 442:\tc7 04 24 b4 04 00 00 \tmovl   $0x4b4,(%esp)\n 449:\te8 fc ff ff ff       \tcall   44a &lt;libtest1+0xe\u003E\n 44e:\tc7 04 24 e0 04 00 00 \tmovl   $0x4e0,(%esp)\n 455:\te8 fc ff ff ff       \tcall   456 &lt;libtest1+0x1a\u003E\n 45a:\tc9                   \tleave  \n 45b:\tc3                   \tret    \n 45c:\t90                   \tnop    \n 45d:\t90                   \tnop    \n 45e:\t90                   \tnop    \n 45f:\t90                   \tnop\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИмеем две относительные инструкции CALL (код E8) с операндами 0xFFFFFFFC. Относительный CALL c таким операндом лишен смысла, так как, по сути, передает управление на один байт вперед относительно адреса инструкции CALL. Если посмотреть на смещение переразмещений для puts() в секции “.rel.dyn”, то можно обнаружить, что они применяются как раз к операнду инструкции CALL. Таким образом, в обоих случаях обращения к puts(), загрузчик просто перезапишет 0xFFFFFFFC так, что CALL будет переходить на корректный адрес функции puts().\u003Cbr\u002F\u003E\r\nТак работает переразмещение типа R_386_PC32.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь обратим внимание на libtest2.so:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ERelocation section '.rel.dyn' at offset 0x2cc contains 4 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n0000200c 00000008 R_386_RELATIVE \u003Cbr\u002F\u003E\r\n00001fe8 00000106 R_386_GLOB_DAT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n00001fec 00000206 R_386_GLOB_DAT 00000000 _Jv_RegisterClasses\u003Cbr\u002F\u003E\r\n00001ff0 00000406 R_386_GLOB_DAT 00000000 __cxa_finalize\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nRelocation section '.rel.plt' at offset 0x2ec contains 3 entries:\u003Cbr\u002F\u003E\r\n Offset Info Type Sym.Value Sym. Name\u003Cbr\u002F\u003E\r\n00002000 00000107 R_386_JUMP_SLOT 00000000 __gmon_start__\u003Cbr\u002F\u003E\r\n00002004 00000307 R_386_JUMP_SLOT 00000000 puts\u003Cbr\u002F\u003E\r\n00002008 00000407 R_386_JUMP_SLOT 00000000 __cxa_finalize\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nОбращение к puts() упоминается только единожды, и, притом, в секции “.rel.plt”. Посмотрим на ассемблер и займемся отладкой:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003E0000043c &lt;libtest2\u003E:\n 43c:\t55                   \tpush   %ebp\n 43d:\t89 e5                \tmov    %esp,%ebp\n 43f:\t53                   \tpush   %ebx\n 440:\t83 ec 04             \tsub    $0x4,%esp\n 443:\te8 ef ff ff ff       \tcall   437 &lt;__i686.get_pc_thunk.bx\u003E\n 448:\t81 c3 ac 1b 00 00    \tadd    $0x1bac,%ebx\n 44e:\t8d 83 d0 e4 ff ff    \tlea    -0x1b30(%ebx),%eax\n 454:\t89 04 24             \tmov    %eax,(%esp)\n 457:\te8 f8 fe ff ff       \tcall   354 &lt;puts@plt\u003E\n 45c:\t8d 83 fc e4 ff ff    \tlea    -0x1b04(%ebx),%eax\n 462:\t89 04 24             \tmov    %eax,(%esp)\n 465:\te8 ea fe ff ff       \tcall   354 &lt;puts@plt\u003E\n 46a:\t83 c4 04             \tadd    $0x4,%esp\n 46d:\t5b                   \tpop    %ebx\n 46e:\t5d                   \tpop    %ebp\n 46f:\tc3                   \tret\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОперанды инструкций CALL уже разные и осмысленные, а значит, что они на что-то указывают. Это уже не просто набивка (padding). Также полезно отметить, что перед вызовом самой puts() происходят запись 0x1FF4 (0x1BAC + 0x448) в регистр EBX. Отладчик помогает узнавать изначальное значение EBX, равное 0x448. Значит, это где-то дальше пригодится. Адрес 0x354 ведет нас к очень интересной секции “.plt”, которая, как и “.text”, помечена как исполняемая. Вот она:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003EDisassembly of section .plt:\n\n00000334 &lt;__gmon_start__@plt-0x10\u003E:\n 334:\tff b3 04 00 00 00    \tpushl  0x4(%ebx)\n 33a:\tff a3 08 00 00 00    \tjmp    *0x8(%ebx)\n 340:\t00 00                \tadd    %al,(%eax)\n\t...\n\n00000344 &lt;__gmon_start__@plt\u003E:\n 344:\tff a3 0c 00 00 00    \tjmp    *0xc(%ebx)\n 34a:\t68 00 00 00 00       \tpush   $0x0\n 34f:\te9 e0 ff ff ff       \tjmp    334 &lt;_init+0x30\u003E\n\n00000354 &lt;puts@plt\u003E:\n 354:\tff a3 10 00 00 00    \tjmp    *0x10(%ebx)\n 35a:\t68 08 00 00 00       \tpush   $0x8\n 35f:\te9 d0 ff ff ff       \tjmp    334 &lt;_init+0x30\u003E\n\n00000364 &lt;__cxa_finalize@plt\u003E:\n 364:\tff a3 14 00 00 00    \tjmp    *0x14(%ebx)\n 36a:\t68 10 00 00 00       \tpush   $0x10\n 36f:\te9 c0 ff ff ff       \tjmp    334 &lt;_init+0x30\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПо интересующему нас адресу 0x354 обнаруживаем три инструкции. В первой из них происходит безусловный переход по адресу, на который указывает EBX (0x1FF4) плюс 0x10. Произведя простые вычисления, получим значение указателя 0x2004. Эти адреса попадают в секцию “.got.plt”.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003EDisassembly of section .got.plt:\n\n00001ff4 &lt;.got.plt\u003E:\n    1ff4:\t20 1f                \tand    %bl,(%edi)\n\t...\n    1ffe:\t00 00                \tadd    %al,(%eax)\n    2000:\t4a                   \tdec    %edx\n    2001:\t03 00                \tadd    (%eax),%eax\n    2003:\t00 5a 03             \tadd    %bl,0x3(%edx)\n    2006:\t00 00                \tadd    %al,(%eax)\n    2008:\t6a 03                \tpush   $0x3\n\t...\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nСамое интересное обнаруживается тогда, когда мы этот указатель разыменовываем и, наконец-то, получаем адрес безусловного перехода, равный 0x35A. Но, это же, по сути, следующая инструкция! Зачем было производить такие сложные манипуляции и ссылаться на секцию “.got.plt”, чтобы просто перейти на следующую инструкцию? Что вообще такое PLT и GOT?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EPLT (Procedure Linkage Table)\u003C\u002Fb\u003E — это таблица компоновки процедур. Она присутствует в исполняемых и разделяемых модулях. Это массив заглушек, по одной на каждую импортируемую функцию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003EPLT[n+1]: jmp    *GOT[n+3]\n          push   #n        @push n as a signal to the resolver\n          jmp    PLT[0]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВызов функции по адресу PLT[n+1] приведет к косвенному переходу управления по адресу GOT[n+3]. При первом вызове GOT[n+3] указывает назад, на PLT[n+1] + 6, что представляет собой последовательность PUSH\\JMP на PLT[0]. Проходя через PLT[0], компоновщик использует сохраненный стековый аргумент, чтобы определить 'n' и затем разрешает символ 'n'. Потом компоновщик исправляет значение GOT[n+3] так, чтобы оно указывало прямо на целевую подпрограмму, и, в конце концов, вызывает ее. Каждый следующий вызов PLT[n+1] будет направлен на целевую подпрограмму без подобного разрешения ее адреса через инструкцию JMP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервый элемент PLT особенный и используется, чтобы перейти на код динамического разрешения адреса. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003EPLT[0]: push    &amp;GOT[1]\n        jmp     GOT[2]     @points to resolver()\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nУправление передается на код компоновщика. 'n' уже в стеке и туда же добавляется адрес GOT[1]. Таким образом компоновщик (находится в \u002Flib\u002Fld-linux.so.2) может определить, какая библиотека требует его услуг.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EGOT (Global Offset Table)\u003C\u002Fb\u003E — это глобальная таблица смещений. Ее первые три элемента зарезервированы. При первой инициализации GOT все ее элементы, которые относятся к разрешению адресов в PLT, указывают обратно на PLT[0]. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот эти особые элементы:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EGOT[0] список элементов, используемый загрузчиком\u003C\u002Fli\u003E\r\n\u003Cli\u003EGOT[1] указатель на таблицу переразмещений этого модуля\u003C\u002Fli\u003E\r\n\u003Cli\u003EGOT[2] указатель на код загрузчика из библиотеки ld-linux.so.2\u003C\u002Fli\u003E\r\n\u003Cli\u003EGOT[3]\u003C\u002Fli\u003E\r\n\u003Cli\u003E… далее следуют вспомогательные значение для косвенного вызова каждой из импортируемых функций\u003C\u002Fli\u003E\r\n\u003Cli\u003EGOT[3+M]\u003C\u002Fli\u003E\r\n\u003Cli\u003EGOT[3+M+1]\u003C\u002Fli\u003E\r\n\u003Cli\u003E… далее идут косвенный указатели для ссылок на глобальные переменные, по одной на каждый такой символ\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003EУ каждой библиотеки и исполняемого модуля есть своя PLT и GOT.\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002Faddcce52\u002F6cdeb9a7\u002Fd911801a\u002F6cf8cf0c.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nТак работает переразмещение типа R_386_JUMP_SLOT, которое использовалось в библиотеке libtest2.so. Остальные типы переразмещений относятся к статической компоновке, поэтому нам не пригодятся.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ методах разрешения вызова импортируемых функций и заключается разница между кодом, зависящим от позиции загрузки в память и не зависящим от нее (PIC).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EВажные выводы\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСделаем некоторые полезные заключения:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EВсю информацию об импортируемых и экспортируемых функциях можно получить в секции “.dynsym”\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли модуль компилировался в режиме PIC (ключ -fPIC), то вызовы импортируемых функций будут осуществляться через PLT и GOT, переразмещение будет производиться лишь одинажды для каждой функции и будет применяться для первой инструкции определенного элемента в PLT. Информацию о самом переразмещении можно найти в секции “.rel.plt”\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли ключ –fPIC при компиляции библиотеки не применялся, то переразмещения будут производится над операндом каждой относительной инструкции CALL столько раз, сколько в коде осуществляется вызовов некоторой импортируемой функции. Информацию о самом переразмещении можно найти в секции “.rel.dyn”\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003EЗамечание:\u003C\u002Fi\u003E ключ компиляции –fPIC обязателен для 64-битной архитектуры. То есть в 64-битных библиотеках разрешение вызовов импортируемых функций всегда осуществляется через PLT\\GOT. Плюс к тому на такой архитектуре секции с переразмещениями называются “.rela.plt” и “.rela.dyn”.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EДолгожданное решение\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nДля осуществления перенаправления импортируемой функции в некоторой динамически-компонуемой библиотеке необходимо знать следующее:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EПуть в файловой системе к этой библиотеке\u003C\u002Fli\u003E\r\n\u003Cli\u003EВиртуальный адрес, по которому она загрузилась \u003C\u002Fli\u003E\r\n\u003Cli\u003EИмя замещаемой функции\u003C\u002Fli\u003E\r\n\u003Cli\u003EАдрес функции-заместителя\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003EЕще нужно получать адрес оригинальной функции, чтобы произвести обратное перенаправление и, таким образом, вернуть все на свои места.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрототип функции для перенаправления на языке С получается следующий:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003Evoid *elf_hook(char const *library_filename, void const *library_address, char const *function_name, void const *substitution_address);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EАлгоритм перенаправления\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВот алгоритм работы функции перенаправления:\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EОткрываем файл библиотеки.\u003C\u002Fli\u003E\r\n\u003Cli\u003EЗапоминаем индекс символа в секции “.dynsym”, имя которого соответствует имени искомой функции.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПросматриваем секцию “.rel.plt” и ищем в ней переразмещение для символа с указанным индексом.\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли такой символ найден, сохраняем оригинальный адрес, чтобы потом вернуть его из функции, и записываем на место, указанное в переразмещении, адрес функции-заместителя. Это место вычисляется как сумма адреса загрузки библиотеки в память и смещения в переразмещении. Все. Осуществлена подмена адреса функции. Перенаправление будет происходить всякий раз при вызове библиотекой этой функции. Выходим из функции и возвращаем адрес оригинала.\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕсли такой символ в секции “.rel.plt” не найден, то ищем его в секции “rel.dyn” по такому же принципу. Но, нужно помнить, что в секции переразмещений “rel.dyn” символ с искомым индексом может встречаться не один раз. Поэтому завершать цикл поиска после первого же перенаправления нельзя. А вот адрес оригинала можно запомнить при первом совпадении индекса и больше не вычислять – он все равно не измениться.\u003C\u002Fli\u003E\r\n\u003Cli\u003EВозвращаем адрес функции-оригинала или NULL, если функция с искомым именен не была найдена.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nНиже представлен код этой функции на языке С:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003Evoid *elf_hook(char const *module_filename, void const *module_address, char const *name, void const *substitution)\n{\n    static size_t pagesize;\n\n    int descriptor;  \u002F\u002Ffile descriptor of shared module\n\n    Elf_Shdr\n    *dynsym = NULL,  \u002F\u002F \".dynsym\" section header\n    *rel_plt = NULL,  \u002F\u002F \".rel.plt\" section header\n    *rel_dyn = NULL;  \u002F\u002F \".rel.dyn\" section header\n\n    Elf_Sym\n    *symbol = NULL;  \u002F\u002Fsymbol table entry for symbol named \"name\"\n\n    Elf_Rel\n    *rel_plt_table = NULL,  \u002F\u002Farray with \".rel.plt\" entries\n    *rel_dyn_table = NULL;  \u002F\u002Farray with \".rel.dyn\" entries\n\n    size_t\n    i,\n    name_index = 0,  \u002F\u002Findex of symbol named \"name\" in \".dyn.sym\"\n    rel_plt_amount = 0,  \u002F\u002F amount of \".rel.plt\" entries\n    rel_dyn_amount = 0,  \u002F\u002F amount of \".rel.dyn\" entries\n    *name_address = NULL;  \u002F\u002Faddress of relocation for symbol named \"name\"\n\n    void *original = NULL;  \u002F\u002Faddress of the symbol being substituted\n\n    if (NULL == module_address || NULL == name || NULL == substitution)\n        return original;\n\n    if (!pagesize)\n        pagesize = sysconf(_SC_PAGESIZE);\n\n    descriptor = open(module_filename, O_RDONLY);\n\n    if (descriptor &lt; 0)\n        return original;\n\n    if (\n        section_by_type(descriptor, SHT_DYNSYM, &amp;dynsym) ||  \u002F\u002Fget \".dynsym\" section\n        symbol_by_name(descriptor, dynsym, name, &amp;symbol, &amp;name_index) ||  \u002F\u002Factually, we need only the index of symbol named \"name\" in the \".dynsym\" table\n        section_by_name(descriptor, REL_PLT, &amp;rel_plt) ||  \u002F\u002Fget \".rel.plt\" (for 32-bit) or \".rela.plt\" (for 64-bit) section\n        section_by_name(descriptor, REL_DYN, &amp;rel_dyn)  \u002F\u002Fget \".rel.dyn\" (for 32-bit) or \".rela.dyn\" (for 64-bit) section\n       )\n    {  \u002F\u002Fif something went wrong\n        free(dynsym);\n        free(rel_plt);\n        free(rel_dyn);\n        free(symbol);\n        close(descriptor);\n\n        return original;\n    }\n\u002F\u002Frelease the data used\n    free(dynsym);\n    free(symbol);\n\n    rel_plt_table = (Elf_Rel *)(((size_t)module_address) + rel_plt-\u003Esh_addr);  \u002F\u002Finit the \".rel.plt\" array\n    rel_plt_amount = rel_plt-\u003Esh_size \u002F sizeof(Elf_Rel);  \u002F\u002Fand get its size\n\n    rel_dyn_table = (Elf_Rel *)(((size_t)module_address) + rel_dyn-\u003Esh_addr);  \u002F\u002Finit the \".rel.dyn\" array\n    rel_dyn_amount = rel_dyn-\u003Esh_size \u002F sizeof(Elf_Rel);  \u002F\u002Fand get its size\n\u002F\u002Frelease the data used\n    free(rel_plt);\n    free(rel_dyn);\n\u002F\u002Fand descriptor\n    close(descriptor);\n\u002F\u002Fnow we've got \".rel.plt\" (needed for PIC) table and \".rel.dyn\" (for non-PIC) table and the symbol's index\n    for (i = 0; i &lt; rel_plt_amount; ++i)  \u002F\u002Flookup the \".rel.plt\" table\n        if (ELF_R_SYM(rel_plt_table[i].r_info) == name_index)  \u002F\u002Fif we found the symbol to substitute in \".rel.plt\"\n        {\n            original = (void *)*(size_t *)(((size_t)module_address) + rel_plt_table[i].r_offset);  \u002F\u002Fsave the original function address\n            *(size_t *)(((size_t)module_address) + rel_plt_table[i].r_offset) = (size_t)substitution;  \u002F\u002Fand replace it with the substitutional\n\n            break;  \u002F\u002Fthe target symbol appears in \".rel.plt\" only once\n        }\n\n    if (original)\n        return original;\n\u002F\u002Fwe will get here only with 32-bit non-PIC module\n    for (i = 0; i &lt; rel_dyn_amount; ++i)  \u002F\u002Flookup the \".rel.dyn\" table\n        if (ELF_R_SYM(rel_dyn_table[i].r_info) == name_index)  \u002F\u002Fif we found the symbol to substitute in \".rel.dyn\"\n        {\n            name_address = (size_t *)(((size_t)module_address) + rel_dyn_table[i].r_offset);  \u002F\u002Fget the relocation address (address of a relative CALL (0xE8) instruction's argument)\n\n            if (!original)\n                original = (void *)(*name_address + (size_t)name_address + sizeof(size_t));  \u002F\u002Fcalculate an address of the original function by a relative CALL (0xE8) instruction's argument\n\n            mprotect((void *)(((size_t)name_address) &amp; (((size_t)-1) ^ (pagesize - 1))), pagesize, PROT_READ | PROT_WRITE);  \u002F\u002Fmark a memory page that contains the relocation as writable\n\n            if (errno)\n                return NULL;\n\n            *name_address = (size_t)substitution - (size_t)name_address - sizeof(size_t);  \u002F\u002Fcalculate a new relative CALL (0xE8) instruction's argument for the substitutional function and write it down\n\n            mprotect((void *)(((size_t)name_address) &amp; (((size_t)-1) ^ (pagesize - 1))), pagesize, PROT_READ | PROT_EXEC);  \u002F\u002Fmark a memory page that contains the relocation back as executable\n\n            if (errno)  \u002F\u002Fif something went wrong\n            {\n                *name_address = (size_t)original - (size_t)name_address - sizeof(size_t);  \u002F\u002Fthen restore the original function address\n\n                return NULL;\n            }\n        }\n\n    return original;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПолная реализация этой функции с тестовыми примерами доступна для \u003Ca href=\"http:\u002F\u002Fapriorit.com\u002Fdownloads\u002Felf_hook.zip\"\u003Eскачивания\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПерепишем нашу тестовую программу:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode\u003E#include &lt;stdio.h\u003E\n#include &lt;dlfcn.h\u003E\n\n#include \"elf_hook.h\"\n\n#define LIBTEST1_PATH \"libtest1.so\"  \u002F\u002Fposition dependent code (for 32 bit only)\n#define LIBTEST2_PATH \"libtest2.so\"  \u002F\u002Fposition independent code\n\nvoid libtest1();  \u002F\u002Ffrom libtest1.so\nvoid libtest2();  \u002F\u002Ffrom libtest2.so\n\nint hooked_puts(char const *s)\n{\n    puts(s);  \u002F\u002Fcalls the original puts() from libc.so because our main executable module called \"test\" is intact by hook\n    puts(\"is HOOKED!\");\n}\n\nint main()\n{\n    void *handle1 = dlopen(LIBTEST1_PATH, RTLD_LAZY);\n    void *handle2 = dlopen(LIBTEST2_PATH, RTLD_LAZY);\n    void *original1, *original2;\n\n    if (NULL == handle1 || NULL == handle2)\n        fprintf(stderr, \"Failed to open \\\"%s\\\" or \\\"%s\\\"!\\n\", LIBTEST1_PATH, LIBTEST2_PATH);\n\n    libtest1();  \u002F\u002Fcalls puts() from libc.so twice\n    libtest2();  \u002F\u002Fcalls puts() from libc.so twice\n    puts(\"-----------------------------\");\n\n    original1 = elf_hook(LIBTEST1_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle1), \"puts\", hooked_puts);\n    original2 = elf_hook(LIBTEST2_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle2), \"puts\", hooked_puts);\n\n    if (NULL == original1 || NULL == original2)\n        fprintf(stderr, \"Redirection failed!\\n\");\n\n    libtest1();  \u002F\u002Fcalls hooked_puts() twice\n    libtest2();  \u002F\u002Fcalls hooked_puts() twice\n    puts(\"-----------------------------\");\n\n    original1 = elf_hook(LIBTEST1_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle1), \"puts\", original1);\n    original2 = elf_hook(LIBTEST2_PATH, LIBRARY_ADDRESS_BY_HANDLE(handle2), \"puts\", original2);\n\n    if (NULL == original1 || original1 != original2)  \u002F\u002Fboth pointers should contain hooked_puts() address now\n        fprintf(stderr, \"Restoration failed!\\n\");\n\n    libtest1();  \u002F\u002Fagain calls puts() from libc.so twice\n    libtest2();  \u002F\u002Fagain calls puts() from libc.so twice\n\n    dlclose(handle1);\n    dlclose(handle2);\n\n    return 0;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E \u003Cbr\u002F\u003E\r\nОткомпилируем:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Egcc -g3 -m32       -shared -o libtest1.so libtest1.c\ngcc -g3 -m32 -fPIC -shared -o libtest2.so libtest2.c\n\ngcc -g3 -m32 -L$PWD -o test test.c elf_hook.c -ltest1 -ltest2 -ldl\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nИ запустим:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Eexport LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH\n.\u002Ftest\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВывод получим следующий:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Elibtest1: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest1: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\n-----------------------------\u003Cbr\u002F\u003E\r\nlibtest1: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nis HOOKED!\u003Cbr\u002F\u003E\r\nlibtest1: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\nis HOOKED!\u003Cbr\u002F\u003E\r\nlibtest2: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nis HOOKED!\u003Cbr\u002F\u003E\r\nlibtest2: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\nis HOOKED!\u003Cbr\u002F\u003E\r\n-----------------------------\u003Cbr\u002F\u003E\r\nlibtest1: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest1: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 1st call to the original puts()\u003Cbr\u002F\u003E\r\nlibtest2: 2nd call to the original puts()\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЧто свидетельствует о полном выполнении задачи, поставленной в самом начале. Ура!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EКак узнать адрес по которому загрузилась разделяемая библиотека?\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\nЭтот очень интересный вопрос возникает при внимательном рассмотрении прототипа функции для перенаправления. После некоторого исследования мне удалось обнаружить способ определения адреса загрузки библиотеки по ее описателю, который возвращает функция dlopen(). Делается это таким макросом:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E#define LIBRARY_ADDRESS_BY_HANDLE(dlhandle) ((NULL == dlhandle) ? NULL : (void*)*(size_t const*)(dlhandle))\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EКак записать и восстановить адрес новой функции?\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\nС переписыванием адресов, на которые указывают переразмещения из секции “.rel.plt” проблем не возникает. По сути, переписывается операнд инструкции JMP соответствующего элемента из секции “.plt”. А операнды такой инструкции – это просто адреса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИнтересней дела обстоят с применением переразмещений к операндам относительных инструкций CALL (код E8). Адреса перехода в них вычисляются по формуле:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Eaddress_of_a_function = CALL_argument + address_of_the_next_instruction\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nТак мы можем узнать адрес функции-оригинала. Из предыдущей формулы получаем значение, которое нужно записать как аргумент для относительного CALL, чтобы осуществлять вызов нужной нам функции:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003ECALL_argument = address_of_a_function - address_of_the_next_instruction\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nСекция “.rel.dyn” попадает в сегмент, помеченный как “R E”, а значит, записывать адреса в него просто так не получится. Нужно добавить право на запись для страницы, на которую приходится переразмещение и не забыть после перенаправления вернуть все обратно. Это делается при помощи функции mprotect(). Первый параметр этой функции – это адрес страницы, содержащей переразмещение. Он должен быть всегда кратен размеру страницы. Вычислять его не сложно: нужно только обнулить несколько младших байт адреса переразмещения (в зависимости от размера страницы):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Epage_address = (size_t)relocation_address &amp; ( ((size_t) -1) ^ (pagesize - 1) );\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nНапример, для страниц размером 4096 (0x1000) байт на 32-битной системе приведенное выше выражение преобразуется в:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Epage_address = (size_t)relocation_address &amp; (0xFFFFFFFF ^ 0xFFF) = (size_t)relocation_address &amp; 0xFFFFF000;\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nРазмер одной страницы, можно узнать, вызвав sysconf(_SC_PAGESIZE).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EПример использования\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\nВ качестве упражнения можно написать plug-in к Firefox, который будет перенаправлять на себя все сетевые вызовы, например, Adobe Flash plug-in’а (libflashplayer.so). Таким образом, можно контролировать весь трафик Adobe Flash в Internet из процесса Firefox никак не воздействуя на сетевые вызовы самого обозревателя и других plug-in’ов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EУдачи!\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch5\u003EСсылки по теме\u003C\u002Fh5\u003E\u003Cbr\u002F\u003E\r\nЖелающим прочитать на английском \u003Ca href=\"http:\u002F\u002Fapriorit.com\u002Four-experience\u002Farticles\u002F9-sd-articles\u002F181-elf-hook\"\u003Eсюда\u003C\u002Fa\u003E, на русском публикую впервые.\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.skyfree.org\u002Flinux\u002Freferences\u002FELF_Format.pdf\"\u003Ewww.skyfree.org\u002Flinux\u002Freferences\u002FELF_Format.pdf\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FExecutable_and_Linkable_Format\"\u003Een.wikipedia.org\u002Fwiki\u002FExecutable_and_Linkable_Format\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fvxheavens.com\u002Flib\u002Fvsc06.html\"\u003Evxheavens.com\u002Flib\u002Fvsc06.html\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fnetwinder.osuosl.org\u002Fusers\u002Fp\u002Fpatb\u002Fpublic_html\u002Felf_relocs.html\"\u003Enetwinder.osuosl.org\u002Fusers\u002Fp\u002Fpatb\u002Fpublic_html\u002Felf_relocs.html\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.slideshare.net\u002Fsanjivmalik\u002Fdynamic-linker-presentation\"\u003Ewww.slideshare.net\u002Fsanjivmalik\u002Fdynamic-linker-presentation\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.codeproject.com\u002FKB\u002Fcpp\u002Fshared_object_injection_1.aspx\"\u003Ewww.codeproject.com\u002FKB\u002Fcpp\u002Fshared_object_injection_1.aspx\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.linuxjournal.com\u002Farticle\u002F1060\"\u003Ewww.linuxjournal.com\u002Farticle\u002F1060\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"linux"},{"titleHtml":"elf"},{"titleHtml":"redirect"},{"titleHtml":"shared library"},{"titleHtml":"hook"},{"titleHtml":"dll injection"},{"titleHtml":"перенаправление функций"},{"titleHtml":"хук"},{"titleHtml":"хуки"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F106107\u002F3c8b5b370dfa952397dd6818c516e0af\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F106107\u002F3c8b5b370dfa952397dd6818c516e0af\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F106107\\\u002F\"},\"headline\":\"Перенаправление функций в разделяемых ELF-библиотеках\",\"datePublished\":\"2010-10-13T21:38:24+04:00\",\"dateModified\":\"2010-10-14T13:12:30+04:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Anthony Shoumikhin\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное простр...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F106107\\\u002F#post-content-body\",\"about\":[\"h_webdev\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002Fafe3a628\\\u002F27e2dc06\\\u002F9afa147c\\\u002F33803238.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002F089057e3\\\u002F1cda8de1\\\u002Fabd7ded0\\\u002F750b9fc1.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002F3d43fe1c\\\u002Fe8528998\\\u002Fdb2c173f\\\u002Fea240126.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002F4f2db377\\\u002F481f0b54\\\u002F54b771ad\\\u002F428a2599.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002F9188edd2\\\u002Fc9959569\\\u002F10a83af1\\\u002F1b7bea4f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fstorage\\\u002Faddcce52\\\u002F6cdeb9a7\\\u002Fd911801a\\\u002F6cf8cf0c.png\"]}","metaDescription":"Все мы пользуемся динамически-компонуемыми билиотеками. Их возможности поистине великолепны. Во-первых, такая библиотека загружается в физическое адресное пространство только один раз для всех...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"575686":{"id":"575686","timePublished":"2021-09-28T08:07:48+00:00","isCorporative":true,"lang":"ru","titleHtml":"Когда сделаете доработку?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1097452","alias":"Turundur","fullname":"Станислав Малышев","avatarUrl":"","speciality":"Разработчик"},"statistics":{"commentsCount":10,"favoritesCount":44,"readingCount":5469,"score":47,"votesCount":49},"hubs":[{"relatedData":null,"id":"22422","alias":"domclick","type":"corporative","title":"Блог компании ДомКлик","titleHtml":"Блог компании ДомКлик","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EДовольно часто я попадаю в ситуацию, когда мне нужно в моменте оценить длительность реализации реализации бизнес-фичи. Обычно это какая-нибудь рядовая встреча, на которой инициатор бизнес-идеи, резво размахивая руками в воздухе, рассказывает о своем предложении. В конце своего выступления, в котором часто много слов (но не цифр) сказано о том, зачем это фича нужна и какой эффект она даст, всегда звучит сакральный вопрос: «Когда сделаете эту великолепную доработку?»\u003C\u002Fp\u003E\u003Cp\u003EЯ хотел бы поделиться с читателем ходом своих рассуждений, которые позволяют мне довольно точно оценивать сроки реализации даже в самых запущенных случаях.\u003C\u002Fp\u003E\u003Cp\u003EРазумеется, я не смогу предусмотреть и учесть все нюансы и специфики, принятые в различных компаниях в процессе разработки и вывода новой функциональности в эксплуатацию. Однако я верю, что описанные ниже практики будут полезны и вы сможете их адаптировать под свою ситуацию.\u003C\u002Fp\u003E\u003Cp\u003EСразу упомяну, что речь идет в первую очередь о продуктовых компаниях, где нет жесткого учета рабочего времени и можно подумать о качестве и поддерживаемости новой функциональности. В случае заказной разработки всё обычно гораздо сложнее и требует более детальной проработки.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка"},{"titleHtml":"оценка"},{"titleHtml":"заказчик"}]},"579778":{"id":"579778","timePublished":"2021-09-28T08:51:05+00:00","isCorporative":true,"lang":"ru","titleHtml":"YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"91003","alias":"DenKoren","fullname":"Кореневский Денис","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1a3\u002F2cd\u002F706\u002F1a32cd706b2d50526638707e3d3cdacc.png","speciality":"Release Engineer"},"statistics":{"commentsCount":14,"favoritesCount":32,"readingCount":4025,"score":47,"votesCount":47},"hubs":[{"relatedData":null,"id":"4991","alias":"yandex","type":"corporative","title":"Блог компании Яндекс","titleHtml":"Блог компании Яндекс","isProfiled":false},{"relatedData":null,"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true},{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EYandex Rate Limiter (далее просто YARL) — это сервис лимитирования нагрузки для распределённых сервисов. Его особенность в том, что он способен работать с миллионами квот, имея при этом очень низкие накладные расходы на проверку квоты. Если совсем кратко, это система распределённых \u003Ca href=\"https:\u002F\u002Fwww.wikiwand.com\u002Fen\u002FLeaky_bucket\" rel=\"nofollow noopener noreferrer\"\u003ELeaky Bucket'ов\u003C\u002Fa\u003E, с помощью которых можно ограничивать разные величины, связанные со временем: скорость передачи данных по сети, запросы в секунду и т. п.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdg\u002Fte\u002F--\u002Fdgte--d9wm8qyawhplaw4c87mky.jpeg\"\u003E\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EМеня зовут Денис Кореневский, я работаю в службе разработки внутреннего хранилища Яндекса, и сегодня я расскажу, как YARL устроен внутри, почему мы вообще написали своё решение и с какими трудностями нам пришлось столкнуться в процессе создания. Добро пожаловать под кат.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"rate limiter"},{"titleHtml":"балансировка нагрузки"}]},"579780":{"id":"579780","timePublished":"2021-09-28T08:46:27+00:00","isCorporative":true,"lang":"ru","titleHtml":"Упала связь, обрыв на линии и при чем тут собака","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2788341","alias":"fregatmf","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":6,"favoritesCount":6,"readingCount":1999,"score":15,"votesCount":17},"hubs":[{"relatedData":null,"id":"5160","alias":"megafon","type":"corporative","title":"Блог компании МегаФон","titleHtml":"Блог компании МегаФон","isProfiled":false},{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"17201","alias":"wireless","type":"collective","title":"Беспроводные технологии","titleHtml":"Беспроводные технологии","isProfiled":true},{"relatedData":null,"id":"19429","alias":"network_standarts","type":"collective","title":"Стандарты связи","titleHtml":"Стандарты связи","isProfiled":false},{"relatedData":null,"id":"22008","alias":"cellular","type":"collective","title":"Сотовая связь","titleHtml":"Сотовая связь","isProfiled":false}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИнсайты телекома. Легкий и позитивный контент для тех, кому интересно погрузиться в будни инженеров МегаФона и узнать, как работает связь. Почему LTE становится EDGE, когда очень нужно.\u003C\u002Fp\u003E\u003Cp\u003EСпойлер: любишь истории со счастливым концом - дочитай до конца :) \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc16\u002F434\u002F175\u002Fc16434175e01aaecb6ca80e709c31f3c.jpg","buttonTextHtml":"Читать","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc16\u002F434\u002F175\u002Fc16434175e01aaecb6ca80e709c31f3c.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"волс"},{"titleHtml":"волс проектирование"},{"titleHtml":"связь"},{"titleHtml":"мегафон"},{"titleHtml":"собака"}]},"579814":{"id":"579814","timePublished":"2021-09-28T08:18:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"World of Tanks Blitz — как мы сделали для танков динамическую подвеску","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2793863","alias":"alexbabey","fullname":"Alexander Babey","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffbd\u002Fb5f\u002F74d\u002Ffbdb5f74ddb6dab8c23878b6bdfc06ca.jpg","speciality":"Render Developer"},"statistics":{"commentsCount":8,"favoritesCount":14,"readingCount":3469,"score":15,"votesCount":15},"hubs":[{"relatedData":null,"id":"18218","alias":"wargaming","type":"corporative","title":"Блог компании Wargaming","titleHtml":"Блог компании Wargaming","isProfiled":false},{"relatedData":null,"id":"643","alias":"3d_graphics","type":"collective","title":"Работа с 3D-графикой","titleHtml":"Работа с 3D-графикой","isProfiled":true},{"relatedData":null,"id":"21980","alias":"games","type":"collective","title":"Игры и игровые приставки","titleHtml":"Игры и игровые приставки","isProfiled":false}],"flows":[{"id":"2","alias":"design","title":"Дизайн"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшой World of Tanks продолжает активно развиваться — игра часто получает обновления, включая как что-то, связанное с игровым процессом (новые карты и танки, режимы игры и сезонные события, умения экипажа и полевая модернизация), так и что-то чисто техническое. Например, использование новых графических технологий. Если мы говорим о ПК, то здесь есть множество гибких настроек, чтобы и комфортно поиграть с красивой картинкой, и сам ПК при этом не спалить.\u003C\u002Fp\u003E\u003Cp\u003EВ случае с мобильными устройствами все немного сложнее, и апдейты графики проводятся не так часто.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте рендер-разработчики студии мобильной разработки Wargaming MS-1 Рамиль Кудашев и Александр Бабей расскажут о том, что нового (и красивого) появилось в летнем релизе World of Tanks Blitz.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EОсторожно, внутри тяжелые гифки.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"mobile games"},{"titleHtml":"wot blitz"},{"titleHtml":"render"},{"titleHtml":"suspension"},{"titleHtml":"pbr"}]},"580034":{"id":"580034","timePublished":"2021-09-28T17:18:57+00:00","isCorporative":false,"lang":"ru","titleHtml":"Пыль, пылевые клещи и их аллергены. Профилактика и защита","editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"1841275","alias":"steanlab","fullname":"Cергей Бесараб (Siarhei Besarab) EU1AEY","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F2d8\u002Fb91\u002F145\u002F2d8b911451a45b7d469e3eead16f750d.jpg","speciality":"Хабра-химик, турист, авантюрист и радиолюбитель :)"},"statistics":{"commentsCount":25,"favoritesCount":25,"readingCount":3987,"score":25,"votesCount":33},"hubs":[{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false},{"relatedData":null,"id":"22010","alias":"Chemistry","type":"collective","title":"Химия","titleHtml":"Химия","isProfiled":false},{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22750","alias":"biology","type":"collective","title":"Биология","titleHtml":"Биология","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Пыль и пылевые клещи в ней есть практически везде и всегда. Уничтожить их удается возможно только в условиях «чистых комнат» на производстве полупроводников. Приходится с этим мириться, и жить допуская, что все что нам под силу — уменьшить их количество. Считается, что если концентрация клещей &lt; 100 штук на грамм пыли — аллергия у большинства не возникает. После того как пришлось пару тройку минут чихать без остановки — у меня накопилось достаточно злобы, чтобы \u003Ca href=\"https:\u002F\u002Ft.me\u002Fjoinchat\u002FAAAAAFFhzPKyiLO85pRxUA\" rel=\"nofollow noopener noreferrer\"\u003Eрассмотреть\u003C\u002Fa\u003E, что же представляет из себя пыль в квартире и что и кто в этой пыли живет. А теперь вот нашлось время, чтобы познакомить с «нашими маленькими друзьями» и читателей Хабра. В заметке рассуждения о некоторых особенностях биологии вездесущего домашнего паразита и методикам его контроля. То, что под катом можешь смело давать почитать жене, %username%!\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fw0\u002F9u\u002Fzv\u002Fw09uzvckqowxlqadjnpx414mf6y.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Дружно скажем НЕТ пыли и ее обитателям","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"пыль"},{"titleHtml":"пыль это"},{"titleHtml":"пыль под микроскопом"},{"titleHtml":"пыль аллергия"},{"titleHtml":"пыль бытовая"},{"titleHtml":"мебельные клещи"},{"titleHtml":"пыль в воздухе"},{"titleHtml":"пыль текстура"},{"titleHtml":"из чего состоит пыль"},{"titleHtml":"пыль откуда берется"},{"titleHtml":"пыль от постельного белья"},{"titleHtml":"пыль обветшания"},{"titleHtml":"пыль размер частиц"},{"titleHtml":"пыль уборка"},{"titleHtml":"пыль химический состав"},{"titleHtml":"пыль что это"},{"titleHtml":"что такое пыль"},{"titleHtml":"откуда берется пыль"},{"titleHtml":"пыль это кожа"},{"titleHtml":"пылевые клещи как избавиться"},{"titleHtml":"пылевые клещи аллергия"},{"titleHtml":"пылевые клещи размер"},{"titleHtml":"где живут пылевые клещи"},{"titleHtml":"пылевые клещи борьба с ними"},{"titleHtml":"пылевые клещи борьба"},{"titleHtml":"пылевые клещи боятся холода"},{"titleHtml":"клещи пылевые"},{"titleHtml":"пылевые клещи в подушках"},{"titleHtml":"в постели"},{"titleHtml":"в матрасе"},{"titleHtml":"в постельном белье"},{"titleHtml":"в мягких игрушках"},{"titleHtml":"в одежде"},{"titleHtml":"в каждом доме"},{"titleHtml":"в диване"},{"titleHtml":"в ковре"},{"titleHtml":"пылевые клещи вред"},{"titleHtml":"пылевые клещи дезинфекция"},{"titleHtml":"пылевые клещи и ультрафиолет"},{"titleHtml":"пылевые клещи избавление"},{"titleHtml":"пыль и пылевые клещи"},{"titleHtml":"пылевые клещи мороз"},{"titleHtml":"пылевые клещи обработка"},{"titleHtml":"пылевые клещи профилактика"},{"titleHtml":"клещи при стирке"},{"titleHtml":"средства от клещей"},{"titleHtml":"пылевые клещи температура"},{"titleHtml":"клещи озон"},{"titleHtml":"аллергия на пыль"},{"titleHtml":"плесень"},{"titleHtml":"Валлемия"},{"titleHtml":"микотоксины"},{"titleHtml":"никто не читает тэги"}]},"580104":{"id":"580104","timePublished":"2021-09-28T09:41:42+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Рост зарплат в IT это плохо? Вы же шутите, да?»","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2294597","alias":"Svetlana_get-it","fullname":"Светлана Петровичева","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F911\u002Fccf\u002Fb06\u002F911ccfb06379afc9647fcc9d45656e72.jpg","speciality":"HR tech Entrepreneur, основатель сервиса headz.io"},"statistics":{"commentsCount":187,"favoritesCount":44,"readingCount":25204,"score":30,"votesCount":56},"hubs":[{"relatedData":null,"id":"22550","alias":"headzio","type":"corporative","title":"Блог компании Headz.io","titleHtml":"Блог компании Headz.io","isProfiled":false},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"21890","alias":"statistics","type":"collective","title":"Статистика в IT","titleHtml":"Статистика в IT","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНедавно мы выпустили статью «\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fheadzio\u002Fblog\u002F578792\u002F\"\u003E\u003Cu\u003EДефицит в IT: платите больше\u003C\u002Fu\u003E\u003C\u002Fa\u003E» о росте зарплат. Совпадение или нет, но чуть позже вышла \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F578820\u002F\"\u003E\u003Cu\u003Eстатья о минусах большого заработка у российских айтишников\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Автор рассуждал о том, как высокие зарплаты могут навредить IT-отрасли. На первый взгляд аргументы выглядят логично. Но это только на первый взгляд.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"рост зарплат"},{"titleHtml":"карьера программиста"},{"titleHtml":"карьера ит-специалиста"},{"titleHtml":"ответ"},{"titleHtml":"прогнозы"},{"titleHtml":"статистика"}]},"580168":{"id":"580168","timePublished":"2021-09-28T11:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как вообще Интернет приходит в ЦОД","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1919391","alias":"ntsaplin","fullname":"Никита Цаплин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F3a9\u002Fa0c\u002F722\u002F3a9a0c722ab0b73193e60b9f84f9a2c0.png","speciality":"010501.65 Прикладная математика и информатика"},"statistics":{"commentsCount":11,"favoritesCount":32,"readingCount":4159,"score":28,"votesCount":28},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"20","alias":"hosting","type":"collective","title":"Хостинг","titleHtml":"Хостинг","isProfiled":false},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"Пользователь VDS-хостинга задал нам вопрос о том, откуда берётся Интернет. И тут мы поняли, что это тот самый детский вопрос, на который не так-то просто нормально ответить. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДумаю, что 99 % людей ответят: берёт и приходит, а потом задумаются. Это настолько естественно и очевидно, что обычно просто не обсуждается. Ну там, знаете, оптика, она приходит в домик, в домике стоит коробка, а из коробки идёт медь. Вот примерно так оно и работает. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ теории всё так и есть, но на практике это выглядит немного иначе. И есть нюансы. Давайте покажу, откуда к нам приходит Интернет и в чём. А заодно поговорим про то, где фильтруется трафик и как это устроено в хостинге. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДля нас всё начинается вот с этой ракеты в Королёве:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580168\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwl\u002Fkl\u002Fqf\u002Fwlklqfzn9is5zcsqlww90dwdqfc.jpeg\"\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Vostok-2M_(8A292M)_in_Korolyov,_Moscow_Oblast.jpg\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЭто памятник «Восток-2М» (8А292М), стоящий в Королёве примерно на том месте, где вообще был разработан «Восток». Перед ним находится люк, где одна трасса оптики разделяется на три к M9, или \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FMSK-IX\" rel=\"nofollow noopener noreferrer\"\u003EMSK-IX \u003C\u002Fa\u003E— московской международной телефонной станции № 9, где когда-то появился самый крупный узел обмена трафика. Сейчас это главное место, откуда Интернет поставляется в Москву. Из-за некоторых особенностей нашей территории бомбоубежища именно в этом люке под ракетой находится уязвимое место оптики, где все три канала идут вместе, и их легко перерубить экскаватором на протяжении примерно 120 метров. В других местах до и после ракеты такого нет. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСоответственно один луч идёт через наш ЦОД в Ивантеевку, поворачивает в Щёлково и заканчивается на M9-IX. Второй подземный ввод идёт через Ярославское шоссе, третий ввод — дополнительный, он скачет по столбам от коллектора до ЦОДа в одну сторону и до местного провайдера в другую, а провайдер уже врезается в кольцо оптики по городу и тоже попадает в девятку.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"хостинг"},{"titleHtml":"VDS-хостинг"},{"titleHtml":"Интернет"},{"titleHtml":"ЦОД"},{"titleHtml":"ruvds_статьи"}]},"580170":{"id":"580170","timePublished":"2021-09-28T10:36:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Дитя конверсии: обзор ноутбука IBM ThinkPad iSeries 1400","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"154372","alias":"ereinion","fullname":"Виталий Прокофьев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F53d\u002F8ec\u002F1fb\u002F53d8ec1fb1d65d37bb85b94c51b17167.jpg","speciality":"Руководитель отдела услуг администрирования"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":4390,"score":27,"votesCount":27},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"21898","alias":"hardware","type":"collective","title":"Компьютерное железо","titleHtml":"Компьютерное железо","isProfiled":false},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false},{"relatedData":null,"id":"21952","alias":"notebooks","type":"collective","title":"Ноутбуки","titleHtml":"Ноутбуки","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsn\u002Fs4\u002F4f\u002Fsns44fybis21deyqyx_mrkwrkie.png\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nКогда компания пытается войти в новый для себя сегмент рынка, часто получаются очень необычные и забавные девайсы. Яркие примеры — почти электромобиль BMW i3, самолет HondaJet, постсоветские мясорубки и соковыжималки, которые после обработки напильником требовали лицензии на ношение, и ноутбуки IBM ThinkPad iSeries. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЗадуманные как недорогие машины для домашнего применения и крайне малого бизнеса, эти машины стали примером неоднозначных решений и странного дизайна. Но со временем превратились в большую редкость, не сразу понятую и принятую коллекционерами, но теперь — очень желанную.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ноутбук"},{"titleHtml":"лэптоп"},{"titleHtml":"старое железо"},{"titleHtml":"история ИТ"},{"titleHtml":"celeron"},{"titleHtml":"intel"},{"titleHtml":"thinkpad"},{"titleHtml":"ibm"},{"titleHtml":"lenovo"}]},"580214":{"id":"580214","timePublished":"2021-09-28T03:06:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Как выбрать подложку для СВЧ плат?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2759195","alias":"Leka_engineer","fullname":"Олеся","avatarUrl":"","speciality":"инженер-разработчик СВЧ устройств"},"statistics":{"commentsCount":28,"favoritesCount":16,"readingCount":1430,"score":18,"votesCount":24},"hubs":[{"relatedData":null,"id":"19395","alias":"netdev","type":"collective","title":"Разработка систем связи","titleHtml":"Разработка систем связи","isProfiled":true},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭтой статьёй я продолжаю цикл (надеюсь, что получится несколько) статей про особенности проектирования и изготовления СВЧ-плат. Эта  статья очень простая, так что, скорее всего, большинство читателей-СВЧшников не найдёт в ней ничего нового. Однако, я надеюсь, что статья будет полезна начинающим разработчикам.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"свч"},{"titleHtml":"свч-техника"},{"titleHtml":"печатная плата"},{"titleHtml":"производство электроники"},{"titleHtml":"разработка электроники"},{"titleHtml":"приложения для android"}]},"580222":{"id":"580222","timePublished":"2021-09-28T13:07:07+00:00","isCorporative":true,"lang":"ru","titleHtml":"Ортодонтия во взрослом возрасте: зачем вам это надо и что лучше знать до начала лечения","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2793023","alias":"magomedovazuzu","fullname":"Магомедова Зузу","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd25\u002Fd7f\u002Fc69\u002Fd25d7fc697c903cbe6dfdf1423b5b7ba.jpg","speciality":"Врач стоматолог-ортопед"},"statistics":{"commentsCount":7,"favoritesCount":20,"readingCount":3958,"score":18,"votesCount":28},"hubs":[{"relatedData":null,"id":"22616","alias":"belayaraduga","type":"corporative","title":"Блог компании Белая Радуга","titleHtml":"Блог компании Белая Радуга","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fph\u002Fy_\u002Fys\u002Fphy_ysqfi51itdfzul5g9ujtcpe.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Forthodonticassoc.com\u002Fblog\u002Fthe-evolution-of-orthodontic-braces\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПримерно \u003C\u002Fa\u003Eтак в конце XIX века выпрямляли зубы\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ современном мире не принято умирать от кривых зубов. Максимум, что с вами случится, — станет не очень приятно широко открывать рот, вылетит челюстной сустав, вырастут амортизационные издержки на периодонт зубов, да и со стоматологом вы начнёте видеться чаще. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ принципе 99% проблем с расположением зубов сегодня можно исправить без проблем. Для этого есть опоры, создающие давление на зубы и кости, двигающие их. Брекеты несъёмные фиксируются с внешней или внутренней стороны зубов, ими можно решить много проблем, но они требуют постоянного ухода и посещения клиники раз в месяц. Альтернатива — элайнеры, прозрачные капы. Их можно снимать, чистить зубы как обычно и есть всё подряд. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ большинстве случаев ортодонтическое лечение требует от 8 месяцев до 2 лет в зависимости от сложности случая. На масштабные изменения вроде перемещения соседнего седьмого зуба на место отсутствующего шестого может уйти и 3 года. Плюс есть вероятность неуспеха, потому что нужно много считать.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСмоделировать возможную ситуацию можно на основе данных КТ, телерентгенограммы и 3D-моделирования (это после съёмки полости рта сканером). Это более-менее страхует от скрытых кист, сверхкомплектных зубов и прочих радостей, которые могут вылезти в процессе лечения. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИтак, сегодня: \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E Что умеет современная ортодонтия и сколько она стоит.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Как мы корректируем прикус с помощью брекетов и элайнеров. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Зачем используем в дополнение минивинты (импланты) и нёбные расширители.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Когда будет результат. И что мы делаем, чтобы его закрепить. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Что может пойти не так при установке брекетов или элайнеров.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"зуб"},{"titleHtml":"ортодонтия"},{"titleHtml":"лечение"},{"titleHtml":"элайнеры"},{"titleHtml":"брекеты"},{"titleHtml":"стоматология"}]},"580240":{"id":"580240","timePublished":"2021-09-28T11:02:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"SQLite-песочница в браузере","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"5634","alias":"nalgeon","fullname":"Антон Жиянов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F031\u002F537\u002F2ce\u002F0315372ce4ec69d2b80b64771b54b5a2.png","speciality":"Python, SQL и открытые данные"},"statistics":{"commentsCount":1,"favoritesCount":57,"readingCount":2809,"score":38,"votesCount":38},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true},{"relatedData":null,"id":"18554","alias":"sqlite","type":"collective","title":"SQLite","titleHtml":"SQLite","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЧего мне всегда не хватало, так это аналога JSFiddle для SQLite. Онлайн-песочницы, в которой можно быстро проверить SQL-запрос и поделиться с другими.\u003C\u002Fp\u003E\u003Cp\u003EВот чего хотелось:\u003C\u002Fp\u003E\u003Cp\u003E— Возможность загрузить готовую базу, а не писать SQL для создания таблиц.\u003Cbr\u003E— Подключать как локальные базы, так и удаленные (по url).\u003Cbr\u003E— Сохранять базу и запросы в облаке.\u003Cbr\u003E— Бесплатно и без регистрации.\u003Cbr\u003E— Свежайшая версия SQLite.\u003Cbr\u003E— Минимализм.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","buttonTextHtml":"В итоге сделал сам","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"песочница"},{"titleHtml":"gist"},{"titleHtml":"sql.js"},{"titleHtml":"sqlime"}]},"580270":{"id":"580270","timePublished":"2021-09-28T07:08:30+00:00","isCorporative":true,"lang":"ru","titleHtml":"Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2790193","alias":"AlexanderSkorniakov","fullname":"Александр Скорняков","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fcbf\u002F737\u002F072\u002Fcbf737072762c9fe82994575e36e0c25.jpg","speciality":"Руководитель цифровых продуктов"},"statistics":{"commentsCount":23,"favoritesCount":25,"readingCount":6396,"score":73,"votesCount":73},"hubs":[{"relatedData":null,"id":"22816","alias":"nlmk","type":"corporative","title":"Блог компании Блог компании Группа НЛМК","titleHtml":"Блог компании Блог компании Группа НЛМК","isProfiled":false},{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"18816","alias":"industrial_control_system","type":"collective","title":"Промышленное программирование","titleHtml":"Промышленное программирование","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"Привет из конвертерного цеха металлургического комбината! Смотрите, у нас тут есть вот такой суп в ковше, стоящем на сталевозе:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdh\u002F3m\u002Fmn\u002Fdh3mmn_3v_fbdyt4k2hs3fhfnjm.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EТаких ковшей на 320 тонн стали в цехе 40 штук, и они медленно остывают. Этой стали грустно и одиноко, она подмерзает. Через эти ковши проходит 10 миллионов тонн стали в год, это 14% стали России\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНа входе в цех у нас жидкий чугун и металлолом, на выходе надо получить сляб — большой слиток стали. Контур системы диспетчеризации «Гефест» начинается с конвертера, где мы продуваем чугун кислородом, таким образом окисляем и удаляем ненужные нам примеси. После конвертера получается «стальной бульон» для супа, в который уже можно добавлять основные ингредиенты, чтобы получались разные марки стали. За смену мы выплавляем несколько заказов, и каждая сталь требует своего рецепта — это разные добавки, разные техпроцессы, разные температуры и разные последовательности действий. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiv\u002Fmh\u002Fdj\u002Fivmhdjdffezd6k7p1kmw38_akcu.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EНа участке аргонной установки\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nУзким местом, в зависимости от сорта стали, может стать любой технологический узел на пути плавки от конвертера до разливки — агрегаты внепечной обработки, мостовые краны или сталевозы для перемещения ковшей могут оказаться в какой-то конкретный момент перегружены. Раньше графики последовательности действий составлялись в блокноте человеком и были недостаточно оптимизированы. Плюс непредсказуемость: графики с довольно широкими временными границами дают большие потери производительности, а графики с узкими границами — не дают прореагировать на возможную поломку, задержку в процессе или вынужденную остановку. Не знаю, сколько стоит у вас простой прода, но у нас один остывший не к месту ковш запросто может нанести ущерба на несколько миллионов рублей. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ общем, мы написали систему, которая не только оптимизирует загрузку этого участка производства, но и регулярно (во время смены) пересчитывает всю логистику ковшей.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо давайте начну с, собственно, рассказа про то, что же именно оптимизируется в цехе.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"сталь"},{"titleHtml":"производство"},{"titleHtml":"оптимизация"},{"titleHtml":"металл"},{"titleHtml":"металлургия"},{"titleHtml":"диспетчеризация"}]},"580336":{"id":"580336","timePublished":"2021-09-28T05:40:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"DOM, который построил Chrome. Или не построил? Или не Chrome? Или не DOM?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2671923","alias":"Maxim_from_HW","fullname":"Максим","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F33e\u002F1a0\u002F5ba\u002F33e1a05ba0d2d651cc292ce76ad45ee1.png","speciality":"CEO"},"statistics":{"commentsCount":23,"favoritesCount":62,"readingCount":5422,"score":19,"votesCount":23},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"524","alias":"complete_code","type":"collective","title":"Совершенный код","titleHtml":"Совершенный код","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОбычный, теневой, виртуальный, инкрементальный… Как получилось, что простой программный интерфейс доступа к элементам веб-страниц обзавелся таким количеством «родственников»? Чем современные фреймворки не устраивает стандартная объектная модель документа или просто DOM? Что и как на самом деле отрисовывает браузер в процессе рендера веб-страницы?\u003C\u002Fp\u003E\u003Cp\u003EВсем привет, это \u003Ca href=\"https:\u002F\u002Fwww.facebook.com\u002Fmy.kravets\" rel=\"noopener noreferrer nofollow\"\u003EМакс Кравец\u003C\u002Fa\u003E из Holyweb. Помните сцену из Матрицы, в которой один из юных кандидатов в Избранные наставляет Нео: «Не пытайся согнуть ложку. Первое, что ты должен понять — ложки не существует!»? Давайте переформулирую: «Не пытайся изменить DOM...». А вот о том, что прячется под многоточием, мы сегодня и поговорим.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"dom"},{"titleHtml":"google chrome"},{"titleHtml":"javascript"},{"titleHtml":"css"}]},"580348":{"id":"580348","timePublished":"2021-09-28T08:18:27+00:00","isCorporative":true,"lang":"ru","titleHtml":"Самый большой космический телескоп Джеймс Уэбб должен изменить наши представления о космосе","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"64252","alias":"Cloud4Y","fullname":"Cloud4Y","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc2d\u002Fd0d\u002Fc05\u002Fc2dd0dc05834aebeb86bb76e35caeaab.png","speciality":"Корпоративный облачный провайдер"},"statistics":{"commentsCount":28,"favoritesCount":8,"readingCount":5307,"score":28,"votesCount":32},"hubs":[{"relatedData":null,"id":"17352","alias":"cloud4y","type":"corporative","title":"Блог компании Cloud4Y","titleHtml":"Блог компании Cloud4Y","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИзучение новых миров,  понимание происхождения Вселенной, поиск жизни вне Земли. Всё это — задачи космического телескопа \"Джеймс Уэбб\", долгожданного преемника Хаббла.  Телескоп больше и легче Хаббла, зато в 100 раз мощнее,  а приборы — в семь раз чувствительнее. \u003C\u002Fp\u003E\u003Cp\u003EДжеймс Уэбб — это устройство для поиска ответов на неотвеченные вопросы о Вселенной, для изучения того, что до сих пор оставалось неизведанным. Что же такого в этом телескопе?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Телескоп"},{"titleHtml":"уэбб"},{"titleHtml":"космос"},{"titleHtml":"технологии"}]},"580360":{"id":"580360","timePublished":"2021-09-28T07:27:40+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вы используете больше Open Source-софта, чем думаете","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Klint Finley","originalUrl":"https:\u002F\u002Fgithub.com\u002Freadme\u002Ffeatured\u002Funseen-oss"}}],"author":{"id":"16172","alias":"shurup","fullname":"Дмитрий Шурупов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F062\u002Fc85\u002F607\u002F062c85607fbe4aaa29e1ad2076cd13a0.jpg","speciality":"Open Source geek"},"statistics":{"commentsCount":2,"favoritesCount":8,"readingCount":4452,"score":28,"votesCount":32},"hubs":[{"relatedData":null,"id":"20940","alias":"flant","type":"corporative","title":"Блог компании Флант","titleHtml":"Блог компании Флант","isProfiled":false},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EПрим. перев.\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003Cem\u003E: оригинал этой статьи был опубликован минувшим летом в рамках проекта ReadME. Он создан в GitHub с целью стать своеобразной трибуной для многочисленных Open Source-разработчиков, предоставив им возможность поделиться с широким сообществом актуальными для них проблемами. Данный материал несет в себе призыв «перестать воспринимать Open Source как должное» и раскрывает те сложности, с которыми сталкиваются многие авторы свободного ПО, применяемого буквально повсеместно.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EТобиас Копперс (Tobias Koppers) не работает в Instagram. И никогда не работал. Но с 2014 года он отвечает за поддержку важного компонента веб-версии Instagram. Копперс является создателем webpack — Open Source-инструмента для сборки (или «бандлинга») кода JavaScript.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"open source"}]},"580382":{"id":"580382","timePublished":"2021-09-28T10:30:17+00:00","isCorporative":true,"lang":"ru","titleHtml":"Советский «Мерседес» или как в Минске строили спортпрототип","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2776555","alias":"turbovagon","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":4,"favoritesCount":3,"readingCount":2357,"score":19,"votesCount":23},"hubs":[{"relatedData":null,"id":"17357","alias":"timeweb","type":"corporative","title":"Блог компании Timeweb","titleHtml":"Блог компании Timeweb","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Во второй половине 50-х годов в Советском Союзе начал набирать популярность автоспорт. Появляются всё новые соревнования, усложняется их регламент, растут требования и к гонщикам, и к машинам. На старт шоссейно-кольцевых начали выходить уже не слегка «обработанные напильником» серийные легковушки, а вполне гоночные штучные поделки, напоминающие современные спортпрототипы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz7\u002Fgs\u002Fzg\u002Fz7gszgbo8pc-ogtvjgvjd6vpaga.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EВот, например, некоторые участники заезда 1956 года. Штучное поделие МАЗа с двигателем «Москвич-402» в первом ряду. Дальше будет лучше.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nОдним из них стал МАЗ-1500, детище, как нетрудно догадаться, специалистов Минского автозавода. Да, профильным направлением предприятия были грузовики. Однако от кульманов конструкторов до воплощения в металле доходила и разного рода автоэкзотика. Посему, когда в Минавтопроме БССР возникла идея создать команду для участия в чемпионате Советского Союза по шоссейно-кольцевым гонкам, работу по новому проекту возглавил руководитель Конструкторского отдела МАЗа, автогонщик Владимир Майборода.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ссср"},{"titleHtml":"спорткар"},{"titleHtml":"автогонки"},{"titleHtml":"гараж"},{"titleHtml":"МАЗ"},{"titleHtml":"автомобили"}]},"580428":{"id":"580428","timePublished":"2021-09-28T10:57:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Понаехавший» в Чехию: как купить квартиру в столице и стать «своим» с акцентом","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2581359","alias":"annesina","fullname":"Анна Есина","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5d1\u002Fc94\u002F326\u002F5d1c943260bd153cf9263a6b59e7be21.png","speciality":"Пользователь"},"statistics":{"commentsCount":3,"favoritesCount":30,"readingCount":4919,"score":17,"votesCount":21},"hubs":[{"relatedData":null,"id":"22506","alias":"gms","type":"corporative","title":"Блог компании gms & g-mate","titleHtml":"Блог компании gms & g-mate","isProfiled":false},{"relatedData":null,"id":"20734","alias":"it_immigration","type":"collective","title":"IT-эмиграция","titleHtml":"IT-эмиграция","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшое количество компаний и стартапов приглашают в Чехию IT-специалистов из стран СНГ. Почему они приезжают сюда? Разработчик из Омска ответил на популярные вопросы о переезде программиста в Прагу: какие нужны документы, как проходит адаптация, нужен ли диплом и как приобрести свое жилье. Передаем ему слово.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"g-mate"},{"titleHtml":"прага"},{"titleHtml":"чехия"},{"titleHtml":"переезд"},{"titleHtml":"IT-эмиграция"},{"titleHtml":"релокейт"},{"titleHtml":"релокация"}]},"580468":{"id":"580468","timePublished":"2021-09-28T12:04:47+00:00","isCorporative":true,"lang":"ru","titleHtml":"Проект «Горирожа»: про двойной подбородок","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1588913","alias":"elena_pastukhova","fullname":"Елена Пастухова","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1dc\u002F879\u002Fc33\u002F1dc879c33e39127162333771dba2137a.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":28,"favoritesCount":22,"readingCount":4328,"score":20,"votesCount":50},"hubs":[{"relatedData":null,"id":"21848","alias":"geltek","type":"corporative","title":"Блог компании Гельтек-Медика","titleHtml":"Блог компании Гельтек-Медика","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Борода у мужчин — это самый действенный способ скрыть жир. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЕсть люди, которым повезло с квадратной челюстью: тогда всё прямо натянуто, и когда у обычного человека уже был бы тройной подбородок, у них — только двойной. Но если у вас славянский тип лица, то это не про вас. У нас прекрасный профиль, но в профиль будет видно даже минимальное количество жира. У азиатского типа — высокие скулы, которые тянут жир в другую сторону, а у нас нет никаких подобных генетических конструкций, поэтому при деформационном типе старения всё это ползёт вниз. Формируется либо второй подбородок, либо жировой компартмент располагается на щеках, и появляются так называемые «бульдожьи щёки». \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку жир там точно такой же, как на пузе и боках у мальчиков и на попе у девочек, то бороться с ним можно дефицитом калорий и физической нагрузкой. Ещё можно уменьшить склонность к отёчности и поднять тонус кожи через увлажнение. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСюрпризом стало то, что испытуемые из тестовой группы проекта Thermo Intensive (более известного вам как «\u003Ca href=\"https:\u002F\u002Fgeltek-medica.ru\u002Fcatalog\u002Fkosmetika\u002Fseriya-body-care\u002Fanticellyulitnyj-gel-thermo-intensive\u002F\u002F\" rel=\"nofollow noopener noreferrer\"\u003EГорижопа\u003C\u002Fa\u003E» ) начали мазать средство не в целевую область, а ещё и на лицо, рассчитывая, что жир там будет убираться так же быстро. Мы сразу запретили им это делать (потому что щитовидка рядом, а мажут они широко) и сразу задумались про новое средство. \u003Cbr\u003E\r\n \u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fbk\u002Fsd\u002Ffy\u002Fbksdfyfl8jwg3mvvmrjs4xzibz4.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EПервая стадия, когда борода ещё не особо нужна. \u003Ca href=\"https:\u002F\u002Fmelmagazine.com\u002Fwp-content\u002Fuploads\u002F2018\u002F08\u002F1SmLNcqJD9Ao7TSeV1MwobA.png\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПотому что бета-тестеры обозначили нам рыночную нишу. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСобственно, вы его тогда спрашивали и в комментариях, сразу раскусив, как можно неправильно использовать состав. И вот теперь у меня есть что показать.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"горирожа"},{"titleHtml":"второй подбородок"},{"titleHtml":"жир"},{"titleHtml":"артикулярная гимнастика"},{"titleHtml":"средство"},{"titleHtml":"гель"}]},"580500":{"id":"580500","timePublished":"2021-09-28T13:43:38+00:00","isCorporative":false,"lang":"ru","titleHtml":"Поколение, выросшее вместе с Google, заставляет учителей менять структуру преподавания","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Monica Chin","originalUrl":"https:\u002F\u002Fwww.theverge.com\u002F22684730\u002Fstudents-file-folder-directory-structure-education-gen-z"}}],"author":{"id":"60351","alias":"SLY_G","fullname":"Вячеслав Голованов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F329\u002Ffc8\u002F9e5\u002F329fc89e55a9132bf200ff315065f3f7.jpg","speciality":"Научпоп. Проповедую в храме науки."},"statistics":{"commentsCount":80,"favoritesCount":24,"readingCount":8214,"score":14,"votesCount":24},"hubs":[{"relatedData":null,"id":"20696","alias":"study","type":"collective","title":"Учебный процесс в IT","titleHtml":"Учебный процесс в IT","isProfiled":false},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F357\u002F1b9\u002F4ee\u002F3571b94eea301ce372e5b22d5d882b80.webp\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nАстрофизик Кэтрин Гарланд впервые столкнулась с этой проблемой в 2017-м. Она преподавала инженерное дело, а её ученики использовали симуляторы для моделирования турбин реактивных самолётов. Она чётко сформулировала задачу, но один за другим студенты просили её помочь им. Все они получали одно и тоже сообщение об ошибке: программа не могла найти файлы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nГарланд думала, что это легко исправить. Она спрашивала каждого из этих учеников, где они сохранили свой проект. На рабочем столе? На общем диске? Но каждый раз её встречало непонимание. «О чём вы говорите?» – недоумевали студенты. Они не только не знали, где сохранили свои файлы – они просто не понимали вопроса.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПостепенно Гарланд начала понимать то, к чему её коллеги-преподаватели приходили в последние четыре года. Концепция папок, директорий, файлов, необходимая предыдущему поколению пользователей для понимания работы компьютера, современным ученикам кажется тарабарщиной.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"файлы"},{"titleHtml":"каталоги"},{"titleHtml":"папки"},{"titleHtml":"директории"},{"titleHtml":"компьютерная грамотность"}]},"580516":{"id":"580516","timePublished":"2021-09-28T14:25:12+00:00","isCorporative":false,"lang":"ru","titleHtml":"Лучший язык программирования","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"8114","alias":"markshevchenko","fullname":"Марк Шевченко","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb16\u002F6c1\u002Fc82\u002Fb166c1c82387bf9406fcd39f40dc264e.jpg","speciality":"программист"},"statistics":{"commentsCount":38,"favoritesCount":89,"readingCount":14004,"score":77,"votesCount":85},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВопрос, который часто задают начинающие программисты&nbsp;— какой язык программирования изучать? Вопрос звучит разумно. Хочется выбрать самый лучший, чтобы потом не пришлось переучиваться.\u003C\u002Fp\u003E\u003Cp\u003EМожно ли на него ответить?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"образование"},{"titleHtml":"языки программирования"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580516","580270","579778","575686","580240","580104","580168","580348","580360","580170","580034","580468","580382","580336","580222","580214","580428","579780","579814","580500"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":4},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["478472","115558","73324"],"similarListRefs":{"73324":{"id":"73324","timePublished":"2009-10-27T19:01:20+00:00","isCorporative":false,"lang":"ru","titleHtml":"DLL Injection","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"50318","alias":"Goliath","fullname":"Денис Панаскин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F3d8\u002F54a\u002F1f9\u002F3d854a1f97a755ee60d530d8d73e8fca.jpg","speciality":null},"statistics":{"commentsCount":74,"favoritesCount":116,"readingCount":59071,"score":41,"votesCount":71},"hubs":[{"id":"559","alias":"cpp","type":"collective","title":"C++","titleHtml":"C++","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"DLL инъекция дает возможность выполнять свой код в адресном пространстве уже запущенного процесса. Многие используют инфицирования для написания читов для игр, выполнения вредоносных действий для системы и т.п. Но данный прием не обязательно применять для реализации коварных планов, а например, для обновления своего приложения. ","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"115558":{"id":"115558","timePublished":"2011-03-16T07:27:44+00:00","isCorporative":false,"lang":"ru","titleHtml":"Перенаправление функций в Mach-O библиотеках","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"59212","alias":"shoumikhin","fullname":"Anthony Shoumikhin","avatarUrl":null,"speciality":"Software Engineer"},"statistics":{"commentsCount":14,"favoritesCount":63,"readingCount":7303,"score":27,"votesCount":37},"hubs":[{"id":"548","alias":"ios_dev","type":"collective","title":"Разработка под iOS","titleHtml":"Разработка под iOS","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg align=\"left\" src=\"https:\u002F\u002Fhabrastorage.org\u002Fstorage\u002Fe05efef3\u002Fd9c24989\u002Fb691c991\u002Fa08b7a4d.png\"\u002F\u003EВ \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fdevelopment\u002F106107\u002F\"\u003Eпредыдущей статье\u003C\u002Fa\u003E был описан метод перехвата вызовов для разделяемых библиотек \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FExecutable_and_Linkable_Format\"\u003EELF\u003C\u002Fa\u003E. А сейчас мы посмотрим как сделать то же самое с библиотеками в формате \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMach-O\"\u003EMach-O\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВкратце напомню ситуацию. Имеем программу под Mac OS X, которая пользуется множеством сторонних динамически-компонуемых библиотек, которые, в свою очередь, также пользуются функциями друг друга.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗадача следующая: перехватить вызов некоторой функции из одной библиотеки к другой, и в обработчике вызвать оригинал.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак обычно, нетерпеливые могут все \u003Ca href=\"http:\u002F\u002Fge.tt\u002F4JT0kJ5\u002Fmach_hook.zip?type=download\"\u003Eскачать\u003C\u002Fa\u003E и попробовать прямо сейчас.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Решение и много картинок","image":null},"status":"published","plannedPublishTime":null,"checked":null},"478472":{"id":"478472","timePublished":"2019-12-04T12:29:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Linux Kernel Library: ядро Linux в форм-факторе so или dll","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1354288","alias":"atrosinenko","fullname":"Анатолий Тросиненко","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8f8\u002Ff3e\u002F46b\u002F8f8f3e46bca8b92fefc6717372c219bb.png","speciality":"Программист"},"statistics":{"commentsCount":5,"favoritesCount":84,"readingCount":12098,"score":22,"votesCount":22},"hubs":[{"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"id":"5767","alias":"system_programming","type":"collective","title":"Системное программирование","titleHtml":"Системное программирование","isProfiled":true},{"id":"17717","alias":"c","type":"collective","title":"C","titleHtml":"C","isProfiled":true},{"id":"19727","alias":"linux_dev","type":"collective","title":"Разработка под Linux","titleHtml":"Разработка под Linux","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКогда-то читал \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F341042\u002F\" rel=\"nofollow\"\u003Eстатью\u003C\u002Fa\u003E о выборе файловых систем «чтоб везде-везде работало». В ней в очередной раз увидел жалобы, что Ext4 замечательная файловая система, но на Windows есть только \u003Cdel\u003Eкривые\u003C\u002Fdel\u003E неточные проприетарные драйверы. Но отмотаем ленту ещё на пару лет назад: тогда на Хабре (а в те времена — Гиктаймсе) \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F374835\u002F\"\u003Eпролетала\u003C\u002Fa\u003E новость про LibOS — попытку превратить Linux kernel в обычную библиотеку пользовательского режима. Упор там делался на вынос сетевого стека в user space. Как-то раз я решил поглядеть, а жив ли вообще проект, и в их блоге увидел ссылку на своего рода конкурента — проект \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flkl\u002Flinux\" rel=\"nofollow\"\u003ELinux Kernel Library (LKL)\u003C\u002Fa\u003E. По сути, это порт ядра, так сказать, на аппаратную архитектуру «библиотека пользовательского режима POSIX \u002F Win32».\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EЧем интересна LKL? Во-первых тем, что она живёт и здравствует, пусть и не в основной кодовой базе ядра. Во-вторых, это более-менее честная поддержка «архитектуры», автоматически делающая доступной бОльшую часть ядра. Более того, прямо в комплекте идут утилиты-примеры: \u003Ccode\u003Ecptofs\u003C\u002Fcode\u003E\u002F\u003Ccode\u003Ecpfromfs\u003C\u002Fcode\u003E, \u003Ccode\u003Efs2tar\u003C\u002Fcode\u003E, \u003Ccode\u003Elklfuse\u003C\u002Fcode\u003E. В этой статье мы протестируем LKL на хостовом Linux, заглянем в файл с образом Ext4 (Btrfs, XFS...) без рута и виртуалок и коротко обсудим, как её можно попробовать на Windows.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"shoumikhin":{"scoreStats":{"score":20.7,"votesCount":271},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"59212","alias":"shoumikhin","fullname":"Anthony Shoumikhin","avatarUrl":null,"speciality":"Software Engineer"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
