<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/27378\/"},"headline":"Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect","datePublished":"2008-06-15T13:00:09+04:00","dateModified":"2008-06-15T13:00:09+04:00","author":{"@type":"Person","name":"Aleks Lozovyuk"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто не...","url":"https:\/\/habr.com\/ru\/post\/27378\/#post-content-body","about":["h_php","f_develop"],"image":["https:\/\/habrastorage.org\/getpro\/habr\/olpictures\/6c3\/a4a\/9db\/6c3a4a9db171c8f153228e09a71669bb.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="27378" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2008-06-15T09:00:09.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/27378/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/27378/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/27378/"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/27378/370ff2b9fba640d15e2599ba88365d99/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/aleks_raiden/" title="aleks_raiden" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/74c/d3a/1c7/74cd3a1c7a2abf2d309a96b9771d365c.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/aleks_raiden/" class="tm-user-info__username">
      aleks_raiden
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2008-06-15T09:00:09.000Z" title="2008-06-15, 13:00">15  июня  2008 в 13:00</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/php/" class="tm-article-snippet__hubs-item-link"><span>PHP</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="/img/image-loader.svg" height="150" hspace="10" vspace="10" align="left" data-src="https://habrastorage.org/getpro/habr/olpictures/6c3/a4a/9db/6c3a4a9db171c8f153228e09a71669bb.png" data-width="150"/>Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами, которые ставятся перед создателями и которые раньше никто не решал. Вот один из таких вопросов как раз вчера появился передо мной: дано нам произвольную строку текста, заведомо известно, что она может быть двух, а в некоторых случаях и трехъязычной, то есть там смешанный текст из нескольких языков. Необходимо прозрачно для пользователя определить язык, на котором написан текст.<br/>
<br/>
На самом деле задача не такая и редкая — подобная функциональность есть и в текстовых редакторах, и в переключателе клавиатуры PuntoSwitcher, да и в системах машинного перевода такой функционал востребован, не говоря уже про системы поиска информации. Кстати, именно в контексте создания специализированного поисковика и классификатора текстов и появилась такая проблема. Необходимо было получить такую возможность в собственной программе на платформе РНР и при этом не задействовать сторонние сервисы — подобная возможность в виде веб-сервиса присутствует в Google Language API (<a href="http://abrdev.com/?p=286">в своём блоге я уже исследовал этот сервис</a>), однако она выполняется удалённо и имеет некоторые существенные для нас ограничения, в частности, процедура опознания языка выполняется с существенной задержкой и асинхронна по своей природе. Кроме этого очень хотелось иметь полный контроль над процессом и иметь возможность его гибко настраивать, чего, увы, нет в сторонних сервисах. Поэтому пришлось подумать и попробовать реализовать собственными силами, результат же представляем вашему вниманию.<br/>
<a name="habracut"></a><br/>
<br/>
Сначала немного теории. Сразу следует сказать, что сам процесс автоматического определения языка неточен и принципиально является вероятностным. То есть всегда результат даётся с какой-либо вероятностью, особенно это касается языков, которые имеют очень схожий либо даже идентичный алфавит (в написании), однако различны. При этом мы ещё и зависим от длины строки исследуемого текста — чем меньше у нас материала для исследования, тем сложнее или даже невозможно является такое определение. Ведь для статистики необходимо иметь больше поле для подсчёта параметров, а в короткой строке мы не можем получить достаточно материала для идентификации, особенно при анализе языков, которые имеют в своей основе одинаковый алфавит. В таком тексте банально может просто не встречаться уникальных букв и оно будет определено как слово другого языка. Поэтому первым ограничением метода анализа используемого алфавита является длина текста — чем он больше, тем точнее анализ. Приведу пример: слово "<strong>rappel</strong>". На каком оно языке? На английском? Оно означает «спускаться на верёвке». Но такое же слово есть и в немецком языке! И там оно означает "(внезапное) помешательство, приступ бешенства".<br/>
<br/>
Этот метод имеет две разновидности. Вариант использования «процента использования алфавита» использует подсчёт количества использованных уникальных символов алфавита в тексте и расчёт % от общего объёма. Второй изменяет количество символов из текста, которое совпадает с алфавитом, при этом некоторые символы могут попадать в разные алфавиты и засчитываться обоим языкам.<br/>
<br/>
Второй метод основан на использовании заранее сформированных правил, которые устанавливают идентичность текста при помощи уникальных или типичных для грамматики языка последовательностей букв (например, артикли в английском, буквы «ъ» и «ё» в русском или "є" в украинском). Такие правила для n-грамм могут разрабатываться лингвистами и позволяют быстрее и точнее определить язык текста, однако также не дают гарантированного результата. Их то сначала нужно создать, а значит владеть языком на достаточном уровне, да и не так много уникальных характерных последовательностей в разных языках. Хотя, если вы заранее знаете, какие языки вам надо определять, то между ними может быть больше уникальных сочетаний, чем если использовать все языки. Если у вас только русский и английский, то таких буквосочетаний явно больше, чем в паре немецкий-английский.<br/>
<br/>
Отдельно следует остановиться на случае, когда в тексте смешиваются слова разных алфавитов. Например, имена или названия компаний и товаров могут быть написаны на оригинальном языке, чаще всего английском, однако все предложение сформулировано по-русски. Здесь поможет только вариант подсчёта общего количества символов, которые принадлежат алфавиту и на основе того, чьих символов больше, принимать решения. В будущей версии библиотека сможет распознавать такие варианты и выдавать массив из языков, которые встречаются в строке, сейчас она покажет только основной язык, тот, которого в строке больше всего символов.<br/>
<br/>
В своей библиотеке я решил использовать оба подхода и все возможные варианты, позволяя гибко сконфигурировать алгоритм для использования любого подхода или их комбинации. Технически библиотека очень простая — один класс, несколько методов и свойств, которые задают параметры работы. Построчно он комментирован в исходном коде, поэтому здесь я не буду приводить все описание реализации, остановлюсь лишь на особенностях.<br/>
<br/>
Библиотека работает с текстами в кодировке UTF-8, поэтому требует модуля mb_strings и первым делом приводит полученную строку к стандартной форме, пытаясь её перекодировать, потом удаляет лишние знаки и проверяет длину. Минимальный объём текста 50 символов, максимальный — 1680, это примерно равно одной стандартной странице формата А4.<br/>
<br/>
Вы можете задать различные варианты детектирования. Библиотека может использовать анализ алфавитов, при этом смотреть или на общий объем текста, или же на процент используемых букв каждого алфавита. Порог принятия решения также настраивается, по умолчанию это 75% (в зависимости от подсчёта, это или 75% букв алфавита или же в тексте общее количество символов этого языка больше 75%). Также есть возможность использовать эвристические правила для уточнения результата, при этом можно настроить приоритет — если правило не подтвердит результат анализа по статистике, то более верным считать результат работы правил или же следует довериться статистике. Для более быстрой работы, особенно на больших объёмах текста или большом количестве языков можно использовать только правила, их то обычно намного меньше, чем символов в алфавитах. Кстати, настраивается и использование правил — для получения результата можно использовать как совпадение с одним из правил, или же требовать совпадения со всеми правилами одного языка, однако это применимо только для длинных текстов и всегда будет вероятность ошибки.<br/>
<br/>
Возвращает библиотека после детектирования или значение false, что означает невозможность определения или же то, что используемого языка нет в базе данных. В случае успеха мы получаем массив с двух буквенным кодом языка (для примера: «en», «ru» или «ua»), а также дополнительные сведения — полное название языка и, в качестве бонуса, ссылку на статью о языке в Wikipedia.org (конечно, на этом же языке).<br/>
<br/>
Пока первая версия библиотеки умеет работать только с тремя языками — английским, русским и украинским, хотя ничего не мешает добавить дополнительные алфавиты и правила для работы с любыми языками.<br/>
<br/>
Напоследок одно замечание о скорости. Самым быстрым вариантом будет использовать только правила, так как их всегда меньше, чем букв и внутри библиотеки мы будем использовать более короткие циклы. В частности, чем длиннее текст и чем больше языков мы определили в базе для поиска, тем быстрее будет вариант только с правилами. Поэтому, для оптимизации вам лучше всего заранее ограничить набор языков самыми вероятными и удалить те, что вам не нужны — так сократится значительное число циклов и алгоритм будет работать быстрее. Также можно убрать проверку и декодирование строки, если вы уверены, что у вас в системе на вход алгоритма будет подаваться только гарантировано уже преобразованные к кодировке UTF-8 строки.<br/>
<br/>
<strong>Официальный сайт проекта</strong>: <a href="http://code.google.com/p/phplangautodetect/">http://code.google.com/p/phplangautodetect/</a><br/>
<strong>Лицензия</strong>: <a rel="nofollow" href="http://www.gnu.org/licenses/gpl.html">GNU General Public License v3</a><br/>
<strong>Автор</strong>: Александр Лозовюк (aleks_raiden, aleks.raiden@gmail.com)<br/>
<strong>Язык/платформа</strong>: PHP 5 (требует модуль mb_strings)<br/>
В дистрибутив включён простейший скрипт для экспериментов, <a href="http://abrdev.com/phplangdetect/">он-лайн последняя версия здесь</a>.<br/>
<br/>
Ниже исходный код с комментариями и замечаниями по реализации описанных выше алгоритмов.<br/>
<br/>
<font color="black"><ol>
<li><font color="#0000ff">class</font> Lang_Auto_Detect</li>
<li>{</li>
<li>  <font color="#008000">// основные переменные</font></li>
<li>  <font color="#008000">// сисок поддерживаемых языков</font></li>
<li>  <font color="#0000ff">public</font> $lang = Array(<font color="#A31515">'en'</font>=>array(<font color="#A31515">'English'</font>,<font color="#A31515">'http://en.wikipedia.org/wiki/English_language'</font>),</li>
<li>             <font color="#A31515">'ru'</font>=>array(<font color="#A31515">'Russian'</font>,<font color="#A31515">'http://ru.wikipedia.org/wiki/%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9_%D1%8F%D0%B7%D1%8B%D0%BA'</font>),</li>
<li>             <font color="#A31515">'ua'</font>=>array(<font color="#A31515">'Ukraine'</font>,<font color="#A31515">'http://uk.wikipedia.org/wiki/%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B2%D0%B0'</font>)</li>
<li>            );</li>
<li>  <font color="#008000">// порог чуствительности, сколько в % должно быть символов языка, чтобы он был определен</font></li>
<li>  <font color="#0000ff">public</font> $detect_range = 75; </li>
<li>  <font color="#008000">// обрабатывать ли многоязычные документы и возвращать массив используемых языков</font></li>
<li>  <font color="#0000ff">public</font> $detect_multi_lang = <font color="#0000ff">false</font>; <font color="#008000">// пока не реализовано</font></li>
<li>  <font color="#008000">// возвращать все результаты и вероятности</font></li>
<li>  <font color="#0000ff">public</font> $return_all_results = <font color="#0000ff">false</font>; <font color="#008000">// в реальном применении лучше отключить</font></li>
<li>  <font color="#008000">// использовать дополнительно систему правил и исключений</font></li>
<li>  <font color="#0000ff">public</font> $use_rules = <font color="#0000ff">false</font>; </li>
<li>  <font color="#008000">//применять только правила (быстрее намного, но результат менее вероятен, чем больше текста, тем достовернее)</font></li>
<li>  <font color="#0000ff">public</font> $use_rules_only = <font color="#0000ff">false</font>;</li>
<li>  <font color="#008000">// приоритет правил над статистикой -</font></li>
<li>  <font color="#0000ff">public</font> $use_rules_priory = <font color="#0000ff">true</font>; <font color="#008000">// true — правила приоритетнее статистики, false — статистика перед правилами  </font></li>
<li>  <font color="#008000">// искать только первое правило или максимум совпадений?</font></li>
<li>  <font color="#0000ff">public</font> $match_all_rules = <font color="#0000ff">false</font>; <font color="#008000">// только одно иначе = все</font></li>
<li>  <font color="#008000">//использовать % от алфавита или общее количество символов каждого алфавита</font></li>
<li>  <font color="#0000ff">public</font> $use_str_len_per_lang = <font color="#0000ff">true</font>; <font color="#008000">// true — использовать общую длину текста приоритетнее, чем % от символов алфавита, false — наоборот</font></li>
<li>  </li>
<li>  <font color="#008000">// минимальная длина строки для детектирования</font></li>
<li>  <font color="#0000ff">public</font> $min_str_len_detect = 50;</li>
<li>  <font color="#008000">// для обеспечения нормальной производительности задайте максимальную длину в символах для сравнения</font></li>
<li>  <font color="#0000ff">public</font> $max_str_len_detect = 1680; <font color="#008000">//</font></li>
<li>  </li>
<li> </li>
<li>  <font color="#008000">// внутреняя непеременная — таблица алфавитов используемых при определении</font></li>
<li>  <font color="#0000ff">private</font> $_langs = array(</li>
<li>          <font color="#A31515">'en'</font>=>array(<font color="#A31515">'a'</font>,<font color="#A31515">'b'</font>,<font color="#A31515">'c'</font>,<font color="#A31515">'d'</font>,<font color="#A31515">'e'</font>,<font color="#A31515">'f'</font>,<font color="#A31515">'g'</font>,<font color="#A31515">'h'</font>,<font color="#A31515">'i'</font>,<font color="#A31515">'j'</font>,<font color="#A31515">'k'</font>,<font color="#A31515">'l'</font>,<font color="#A31515">'m'</font>,<font color="#A31515">'n'</font>,<font color="#A31515">'o'</font>,<font color="#A31515">'p'</font>,<font color="#A31515">'q'</font>,<font color="#A31515">'r'</font>,<font color="#A31515">'s'</font>,<font color="#A31515">'t'</font>,<font color="#A31515">'u'</font>,<font color="#A31515">'v'</font>,<font color="#A31515">'w'</font>,<font color="#A31515">'x'</font>,<font color="#A31515">'y'</font>,<font color="#A31515">'z'</font>),</li>
<li>          <font color="#A31515">'ru'</font>=>array(<font color="#A31515">'а'</font>,<font color="#A31515">'б'</font>,<font color="#A31515">'в'</font>,<font color="#A31515">'г'</font>,<font color="#A31515">'д'</font>,<font color="#A31515">'е'</font>,<font color="#A31515">'ё'</font>,<font color="#A31515">'ж'</font>,<font color="#A31515">'з'</font>,<font color="#A31515">'и'</font>,<font color="#A31515">'й'</font>,<font color="#A31515">'к'</font>,<font color="#A31515">'л'</font>,<font color="#A31515">'м'</font>,<font color="#A31515">'н'</font>,<font color="#A31515">'о'</font>,<font color="#A31515">'п'</font>,<font color="#A31515">'р'</font>,<font color="#A31515">'с'</font>,<font color="#A31515">'т'</font>,<font color="#A31515">'у'</font>,<font color="#A31515">'ф'</font>,<font color="#A31515">'х'</font>,<font color="#A31515">'ц'</font>,<font color="#A31515">'ч'</font>,<font color="#A31515">'ш'</font>,<font color="#A31515">'щ'</font>,<font color="#A31515">'ъ'</font>,<font color="#A31515">'ы'</font>,<font color="#A31515">'ь'</font>,<font color="#A31515">'э'</font>,<font color="#A31515">'ю'</font>,<font color="#A31515">'я'</font>),</li>
<li>          <font color="#A31515">'ua'</font>=>array(<font color="#A31515">'а'</font>,<font color="#A31515">'б'</font>,<font color="#A31515">'в'</font>,<font color="#A31515">'г'</font>,<font color="#A31515">'ґ'</font>,<font color="#A31515">'д'</font>,<font color="#A31515">'е'</font>,<font color="#A31515">'є'</font>,<font color="#A31515">'ж'</font>,<font color="#A31515">'з'</font>,<font color="#A31515">'и'</font>,<font color="#A31515">'і'</font>,<font color="#A31515">'ї'</font>,<font color="#A31515">'й'</font>,<font color="#A31515">'к'</font>,<font color="#A31515">'л'</font>,<font color="#A31515">'м'</font>,<font color="#A31515">'н'</font>,<font color="#A31515">'о'</font>,<font color="#A31515">'п'</font>,<font color="#A31515">'р'</font>,<font color="#A31515">'с'</font>,<font color="#A31515">'т'</font>,<font color="#A31515">'у'</font>,<font color="#A31515">'ф'</font>,<font color="#A31515">'х'</font>,<font color="#A31515">'ц'</font>,<font color="#A31515">'ч'</font>,<font color="#A31515">'ш'</font>,<font color="#A31515">'щ'</font>,<font color="#A31515">'ь'</font>,<font color="#A31515">'ю'</font>,<font color="#A31515">'я'</font>)</li>
<li>          );</li>
<li>  </li>
<li>  <font color="#008000">// хранит правила</font></li>
<li>  <font color="#008000">// правила это символы или строки, наличие которой (любой или всех) автоматически влечет идентификацию текста</font></li>
<li>  <font color="#0000ff">private</font> $_lang_rules = array(</li>
<li>                  <font color="#A31515">'en'</font>=>array(<font color="#A31515">'th'</font>, <font color="#A31515">'ir'</font>),</li>
<li>                  <font color="#A31515">'ru'</font>=>array(<font color="#A31515">'ъ'</font>, <font color="#A31515">'ё'</font> ),</li>
<li>                  <font color="#A31515">'ua'</font>=>array(<font color="#A31515">'ї'</font>, <font color="#A31515">'є'</font>)</li>
<li>                ); </li>
<li>  </li>
<li>  </li>
<li>  <font color="#008000">// конструктор класса</font></li>
<li>  <font color="#0000ff">public</font> <font color="#0000ff">function</font> __construct()</li>
<li>  {</li>
<li>    <font color="#0000ff">return</font> <font color="#0000ff">true</font>;    </li>
<li>  }</li>
<li> </li>
<li> </li>
<li>  <font color="#008000">// подготовка введенной строки для сраневния</font></li>
<li>  <font color="#0000ff">private</font> <font color="#0000ff">function</font> _prepare_str($tmp_str = <font color="#0000ff">null</font>)</li>
<li>  {</li>
<li>    <font color="#0000ff">if</font> ($tmp_str == <font color="#0000ff">null</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>; <font color="#008000">// если ничего не передали — выйти</font></li>
<li>    </li>
<li>    $tmp_str = trim($tmp_str);</li>
<li>    $tmp_encoding = mb_detect_encoding($tmp_str);</li>
<li>    </li>
<li>    <font color="#0000ff">if</font> (mb_strlen($tmp_str, $tmp_encoding) > $<font color="#0000ff">this</font>->max_str_len_detect)</li>
<li>    {</li>
<li>      <font color="#008000">//обрезать длину текста, для роизводительности</font></li>
<li>      $tmp_str = mb_substr($tmp_str, 0, $<font color="#0000ff">this</font>->max_str_len_detect, $tmp_encoding);</li>
<li>    }</li>
<li>    <font color="#0000ff">else</font></li>
<li>      <font color="#0000ff">if</font> (mb_strlen($tmp_str, $tmp_encoding) &lt;= $<font color="#0000ff">this</font>->min_str_len_detect) <font color="#0000ff">return</font> <font color="#0000ff">false</font>;</li>
<li>    </li>
<li>    <font color="#008000">// конвертируем кодировки</font></li>
<li>    $tmp_str = mb_convert_encoding($tmp_str, <font color="#A31515">'UTF-8'</font>, $tmp_encoding);</li>
<li>    </li>
<li>    <font color="#008000">// приводим все к нижнему регистру</font></li>
<li>    $tmp_str = mb_strtolower($tmp_str, <font color="#A31515">'UTF-8'</font>);</li>
<li>    </li>
<li>    <font color="#0000ff">return</font> $tmp_str;</li>
<li>  }</li>
<li>  </li>
<li>  <font color="#008000">// функция определения языка по правилам</font></li>
<li>  <font color="#008000">// правила однозначно определяют язык, однако могут оибаться :)</font></li>
<li>  <font color="#0000ff">private</font> <font color="#0000ff">function</font> _detect_from_rules($tmp_str = <font color="#0000ff">null</font>)</li>
<li>  {</li>
<li>    <font color="#0000ff">if</font> ($tmp_str == <font color="#0000ff">null</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>; <font color="#008000">// если ничего не передали — выйти</font></li>
<li>    <font color="#0000ff">if</font> (!is_array($<font color="#0000ff">this</font>->_lang_rules)) <font color="#0000ff">return</font> <font color="#0000ff">false</font>;</li>
<li>    </li>
<li>    <font color="#008000">// перебор всех правил</font></li>
<li>    <font color="#0000ff">foreach</font> ($<font color="#0000ff">this</font>->_lang_rules <font color="#0000ff">as</font> $lang_code=>$lang_rules)</li>
<li>    {</li>
<li>      $tmp_freq = 0;</li>
<li>      </li>
<li>      <font color="#0000ff">foreach</font> ($lang_rules <font color="#0000ff">as</font> $rule)</li>
<li>      {</li>
<li>        $tmp_term = mb_substr_count($tmp_str, $rule);</li>
<li> </li>
<li>        <font color="#0000ff">if</font> ($tmp_term > 1) <font color="#008000">// то есть символ в строе 1 или более раз</font></li>
<li>        {</li>
<li>          $tmp_freq++; <font color="#008000">// увеличим счетчик символов языка, которые в этой строке есть</font></li>
<li>        }</li>
<li>        </li>
<li>        <font color="#008000">// теперь проверим</font></li>
<li>        <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->match_all_rules === <font color="#0000ff">true</font>)</li>
<li>        {</li>
<li>          <font color="#008000">// нужно совпадение всех правил</font></li>
<li>          <font color="#0000ff">if</font> ($tmp_freq == count($lang_rules)) <font color="#0000ff">return</font> $lang_code;</li>
<li>        }</li>
<li>        <font color="#0000ff">else</font></li>
<li>          {</li>
<li>            <font color="#008000">// достаточно одного</font></li>
<li>            <font color="#0000ff">if</font> ($tmp_freq > 0) <font color="#0000ff">return</font> $lang_code;          </li>
<li>          }</li>
<li>      }</li>
<li>    }</li>
<li>  </li>
<li>    <font color="#0000ff">return</font> <font color="#0000ff">false</font>;  </li>
<li>  }</li>
<li> </li>
<li>  <font color="#008000">// функция определения языка по таблице</font></li>
<li>  <font color="#0000ff">private</font> <font color="#0000ff">function</font> _detect_from_tables($tmp_str = <font color="#0000ff">null</font>)</li>
<li>  {</li>
<li>    <font color="#0000ff">if</font> ($tmp_str == <font color="#0000ff">null</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>; <font color="#008000">// если ничего не передали — выйти</font></li>
<li>    </li>
<li>    <font color="#008000">//мы уже должны ранее обработать строку для сравнения    </font></li>
<li>    <font color="#008000">// перебираем все языки и для каждого определим вероятность</font></li>
<li>    $lang_res = array();</li>
<li>    </li>
<li>    <font color="#0000ff">foreach</font> ($<font color="#0000ff">this</font>->lang <font color="#0000ff">as</font> $lang_code=>$lang_name)</li>
<li>    {</li>
<li>      $lang_res[$lang_code] = 0; <font color="#008000">//по умолчанию 0, то есть не этот язык</font></li>
<li>      </li>
<li>      $tmp_freq = 0; <font color="#008000">// частота символов текущего языка</font></li>
<li>      $full_lang_symbols = 0; <font color="#008000">//полное количество символов этого языка</font></li>
<li>      </li>
<li>      <font color="#008000">// так как длина строки может быть произвольной, а алфавит одинаковый, то цикл по алфавитам</font></li>
<li>      $cur_lang = $<font color="#0000ff">this</font>->_langs[$lang_code];</li>
<li>            </li>
<li>      <font color="#0000ff">foreach</font> ($cur_lang <font color="#0000ff">as</font> $l_item)</li>
<li>      {</li>
<li>        <font color="#008000">// теперь посмотреть количество вхождений символа в строку</font></li>
<li>        $tmp_term = mb_substr_count($tmp_str, $l_item);</li>
<li>        </li>
<li>        <font color="#0000ff">if</font> ($tmp_term > 1) <font color="#008000">// то есть символ в строе 1 или более раз</font></li>
<li>        {</li>
<li>          $tmp_freq++; <font color="#008000">// увеличим счетчик символов языка, которые в этой строке есть</font></li>
<li>          $full_lang_symbols += $tmp_term;</li>
<li>        }</li>
<li>      }</li>
<li> </li>
<li>      <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->use_str_len_per_lang === <font color="#0000ff">true</font>)</li>
<li>      {</li>
<li>        <font color="#008000">//использовать общее количество символов</font></li>
<li>        $lang_res[$lang_code] = $full_lang_symbols;</li>
<li>      }</li>
<li>      <font color="#0000ff">else</font></li>
<li>        <font color="#008000">// Вычислить процент от всех символов алфавита</font></li>
<li>        $lang_res[$lang_code] = ceil((100 / count($cur_lang) ) * $tmp_freq);</li>
<li>      </li>
<li>    }</li>
<li>    </li>
<li>    <font color="#008000">// так, теперь посомтрим что вышло</font></li>
<li>    arsort($lang_res, SORT_NUMERIC); <font color="#008000">//сортируем массив первый элемент язык с большей вероятностью</font></li>
<li>    </li>
<li>    <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->return_all_results == <font color="#0000ff">true</font>)</li>
<li>    {</li>
<li>      <font color="#0000ff">return</font> $lang_res; <font color="#008000">// если вернуть все результаты — возвращаем, иначе выбрать лучший</font></li>
<li>    }</li>
<li>    <font color="#0000ff">else</font></li>
<li>      {</li>
<li>        <font color="#008000">// если больше указанного нами порога, возвратить код языка, иначе — null (то есть, мы не можем определить код языка)</font></li>
<li>        $key = key($lang_res);</li>
<li>        </li>
<li>        <font color="#0000ff">if</font> ($lang_res[$key] >= $<font color="#0000ff">this</font>->detect_range)</li>
<li>          <font color="#0000ff">return</font> $key;</li>
<li>        <font color="#0000ff">else</font></li>
<li>          <font color="#0000ff">return</font> <font color="#0000ff">false</font>;</li>
<li>      }</li>
<li>    </li>
<li>  }</li>
<li> </li>
<li> </li>
<li>  <font color="#008000">// общая функция для определения языка</font></li>
<li>  <font color="#0000ff">public</font> <font color="#0000ff">function</font> lang_detect($tmp_str = <font color="#0000ff">null</font>)</li>
<li>  {</li>
<li>    <font color="#0000ff">if</font> ($tmp_str == <font color="#0000ff">null</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>; <font color="#008000">// если ничего не передали — выйти</font></li>
<li>    </li>
<li>    $tmp_str = $<font color="#0000ff">this</font>->_prepare_str($tmp_str);</li>
<li>    </li>
<li>    <font color="#0000ff">if</font> ($tmp_str === <font color="#0000ff">false</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>;</li>
<li>    </li>
<li>    <font color="#008000">// если правила применяем ДО таблицы</font></li>
<li>    <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->use_rules_only === <font color="#0000ff">true</font>)</li>
<li>    {</li>
<li>      $res = $<font color="#0000ff">this</font>->_detect_from_rules($tmp_str);</li>
<li>      </li>
<li>      <font color="#0000ff">return</font> array($res, $<font color="#0000ff">this</font>->lang[$res]);</li>
<li>    }</li>
<li>    <font color="#0000ff">else</font></li>
<li>      {</li>
<li>        <font color="#008000">// при использовании таблиц мы не можем получить полную раскладку по результатам, потому отключаем</font></li>
<li>        $<font color="#0000ff">this</font>->return_all_results = <font color="#0000ff">false</font>;</li>
<li>        </li>
<li>        $res = $<font color="#0000ff">this</font>->_detect_from_tables($tmp_str);</li>
<li>    </li>
<li>        <font color="#0000ff">if</font> ($tmp_str === <font color="#0000ff">false</font>) <font color="#0000ff">return</font> <font color="#0000ff">false</font>;</li>
<li>        </li>
<li>        <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->use_rules === <font color="#0000ff">true</font>)</li>
<li>        {</li>
<li>          $res_rules = $<font color="#0000ff">this</font>->_detect_from_rules($tmp_str);</li>
<li>          </li>
<li>          <font color="#008000">// исходим из настроек приоритета правил и статистики</font></li>
<li>          <font color="#0000ff">if</font> ($<font color="#0000ff">this</font>->use_rules_priory === <font color="#0000ff">true</font>)</li>
<li>          {</li>
<li>            <font color="#008000">//правила имеют бОльший вес, чем статистика</font></li>
<li>            <font color="#0000ff">return</font> array($res_rules, $<font color="#0000ff">this</font>->lang[$res_rules]);</li>
<li>          }</li>
<li>          <font color="#0000ff">else</font></li>
<li>            {</li>
<li>              <font color="#0000ff">return</font> array($res, $<font color="#0000ff">this</font>->lang[$res]);</li>
<li>            }</li>
<li>        }</li>
<li>        <font color="#0000ff">else</font></li>
<li>          <font color="#0000ff">return</font> array($res, $<font color="#0000ff">this</font>->lang[$res]);</li>
<li>      }  </li>
<li>  }</li>
<li>}</li>
</ol></font><font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru"><font color="gray">Source Code Highlighter</font></a>.</font><br/>
<br/>
<strong>P.S.</strong> Конечно, код не претендует на совершенство, и, возможно, в сети уже есть реализации этой функциональности, которых я не нашел. Если вы знаете известные реализации — просьба сообщить мне в комментариях. Оригинал статьи <a href="http://abrdev.com/?p=346">размещён в моем блоге</a>.</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BLanguage%20API%5D" class="tm-article-body__tags-item-link">Language API</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BPHP%5D" class="tm-article-body__tags-item-link">PHP</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B5%D0%B1%5D" class="tm-article-body__tags-item-link">веб</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BF%D0%BE%D0%B8%D1%81%D0%BA%5D" class="tm-article-body__tags-item-link">поиск</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D1%82%D0%B0%D1%80%D1%82%D0%B0%D0%BF%5D" class="tm-article-body__tags-item-link">стартап</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%82%D0%B5%D0%BA%D1%81%D1%82%5D" class="tm-article-body__tags-item-link">текст</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/php/" class="tm-article-body__tags-item-link">
                  PHP
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 45: ↑38 и ↓7</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 45: ↑38 и ↓7" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+31</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    89
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/27378/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      45
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/aleks_raiden/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/74c/d3a/1c7/74cd3a1c7a2abf2d309a96b9771d365c.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 52 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    21.2
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Aleks Lozovyuk</span> <a href="/ru/users/aleks_raiden/" class="tm-user-card__nickname">
          @aleks_raiden
        </a> <!----></div> <p class="tm-user-card__short-info">Криптовалюты, финансы, распределенные системы</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://contractmarketcap.com" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/27378/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 45 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2020-01-10T06:47:18.000Z" title="2020-01-10, 09:47">10  января  2020 в 09:47</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/483202/" class="tm-article-title__link"><span>Введение в REST API — RESTful веб-сервисы</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 15: ↑8 и ↓7</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 15: ↑8 и ↓7" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+1</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">374K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    406
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/483202/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      12
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2018-04-19T13:00:06.000Z" title="2018-04-19, 16:00">19  апреля  2018 в 16:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/postgrespro/blog/353848/" class="tm-article-title__link"><span>Что нового в PostgreSQL 11: встроенный веб-поиск</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 69: ↑68 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 69: ↑68 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+67</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">19K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    76
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/postgrespro/blog/353848/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      11
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2017-05-11T08:46:50.000Z" title="2017-05-11, 11:46">11  мая  2017 в 11:46</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/jugru/blog/328090/" class="tm-article-title__link"><span>.NET API в веб-разработке: прошлое и будущее</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 39: ↑37 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 39: ↑37 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+35</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">12K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    53
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/jugru/blog/328090/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T10:05:13.000Z" title="2021-09-26, 13:05">вчера в 13:05</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/579980/" class="tm-article-title__link"><span>Источник опорного напряжения — один из принципов и одна из реализаций</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 37: ↑35 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 37: ↑35 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+33</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    42
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/579980/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      2
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T01:34:24.000Z" title="2021-09-26, 04:34">вчера в 04:34</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/selectel/blog/564884/" class="tm-article-title__link"><span>Барахолки в Испании: хороший день для покупок</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 32: ↑31 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 32: ↑31 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+30</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">7.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    9
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/selectel/blog/564884/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      20
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T09:06:26.000Z" title="2021-09-26, 12:06">вчера в 12:06</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580018/" class="tm-article-title__link"><span>Сколько стоит замена батарей в электромобилях?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 28: ↑23 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 28: ↑23 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+18</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">22K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    17
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580018/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      135
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:00:02.000Z" title="2021-09-26, 22:00">вчера в 22:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/funcorp/blog/579542/" class="tm-article-title__link"><span>Jetpack Compose — как легко построить UI на Android</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 20: ↑18 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 20: ↑18 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+16</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    25
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/funcorp/blog/579542/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      3
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:37:10.000Z" title="2021-09-26, 22:37">вчера в 22:37</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580086/" class="tm-article-title__link"><span>Термо принтер и JavaScript</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 11: ↑11 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 11: ↑11 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+11</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    14
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580086/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      23
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="27378" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/27378/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/27378/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"27378":{"id":"27378","timePublished":"2008-06-15T09:00:09+00:00","isCorporative":false,"lang":"ru","titleHtml":"Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect","leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Folpictures\u002F6c3\u002Fa4a\u002F9db\u002F6c3a4a9db171c8f153228e09a71669bb.png\" width=\"150\" height=\"150\" hspace=\"10\" vspace=\"10\" align=\"left\"\u002F\u003EЗнаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами, которые ставятся перед создателями и которые раньше никто не решал. Вот один из таких вопросов как раз вчера появился передо мной: дано нам произвольную строку текста, заведомо известно, что она может быть двух, а в некоторых случаях и трехъязычной, то есть там смешанный текст из нескольких языков. Необходимо прозрачно для пользователя определить язык, на котором написан текст.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа самом деле задача не такая и редкая — подобная функциональность есть и в текстовых редакторах, и в переключателе клавиатуры PuntoSwitcher, да и в системах машинного перевода такой функционал востребован, не говоря уже про системы поиска информации. Кстати, именно в контексте создания специализированного поисковика и классификатора текстов и появилась такая проблема. Необходимо было получить такую возможность в собственной программе на платформе РНР и при этом не задействовать сторонние сервисы — подобная возможность в виде веб-сервиса присутствует в Google Language API (\u003Ca href=\"http:\u002F\u002Fabrdev.com\u002F?p=286\"\u003Eв своём блоге я уже исследовал этот сервис\u003C\u002Fa\u003E), однако она выполняется удалённо и имеет некоторые существенные для нас ограничения, в частности, процедура опознания языка выполняется с существенной задержкой и асинхронна по своей природе. Кроме этого очень хотелось иметь полный контроль над процессом и иметь возможность его гибко настраивать, чего, увы, нет в сторонних сервисах. Поэтому пришлось подумать и попробовать реализовать собственными силами, результат же представляем вашему вниманию.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":21.2,"votesCount":52},"rating":0,"relatedData":null,"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fcontractmarketcap.com","value":"https:\u002F\u002Fcontractmarketcap.com"}],"authorContacts":[{"title":"Сайт","url":"https:\u002F\u002Fcontractmarketcap.com","value":"https:\u002F\u002Fcontractmarketcap.com"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"16724","alias":"aleks_raiden","fullname":"Aleks Lozovyuk","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F74c\u002Fd3a\u002F1c7\u002F74cd3a1c7a2abf2d309a96b9771d365c.jpg","speciality":"Криптовалюты, финансы, распределенные системы"},"statistics":{"commentsCount":45,"favoritesCount":89,"readingCount":18436,"score":31,"votesCount":45},"hubs":[{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" height=\"150\" hspace=\"10\" vspace=\"10\" align=\"left\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Folpictures\u002F6c3\u002Fa4a\u002F9db\u002F6c3a4a9db171c8f153228e09a71669bb.png\" data-width=\"150\"\u002F\u003EЗнаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами, которые ставятся перед создателями и которые раньше никто не решал. Вот один из таких вопросов как раз вчера появился передо мной: дано нам произвольную строку текста, заведомо известно, что она может быть двух, а в некоторых случаях и трехъязычной, то есть там смешанный текст из нескольких языков. Необходимо прозрачно для пользователя определить язык, на котором написан текст.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа самом деле задача не такая и редкая — подобная функциональность есть и в текстовых редакторах, и в переключателе клавиатуры PuntoSwitcher, да и в системах машинного перевода такой функционал востребован, не говоря уже про системы поиска информации. Кстати, именно в контексте создания специализированного поисковика и классификатора текстов и появилась такая проблема. Необходимо было получить такую возможность в собственной программе на платформе РНР и при этом не задействовать сторонние сервисы — подобная возможность в виде веб-сервиса присутствует в Google Language API (\u003Ca href=\"http:\u002F\u002Fabrdev.com\u002F?p=286\"\u003Eв своём блоге я уже исследовал этот сервис\u003C\u002Fa\u003E), однако она выполняется удалённо и имеет некоторые существенные для нас ограничения, в частности, процедура опознания языка выполняется с существенной задержкой и асинхронна по своей природе. Кроме этого очень хотелось иметь полный контроль над процессом и иметь возможность его гибко настраивать, чего, увы, нет в сторонних сервисах. Поэтому пришлось подумать и попробовать реализовать собственными силами, результат же представляем вашему вниманию.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСначала немного теории. Сразу следует сказать, что сам процесс автоматического определения языка неточен и принципиально является вероятностным. То есть всегда результат даётся с какой-либо вероятностью, особенно это касается языков, которые имеют очень схожий либо даже идентичный алфавит (в написании), однако различны. При этом мы ещё и зависим от длины строки исследуемого текста — чем меньше у нас материала для исследования, тем сложнее или даже невозможно является такое определение. Ведь для статистики необходимо иметь больше поле для подсчёта параметров, а в короткой строке мы не можем получить достаточно материала для идентификации, особенно при анализе языков, которые имеют в своей основе одинаковый алфавит. В таком тексте банально может просто не встречаться уникальных букв и оно будет определено как слово другого языка. Поэтому первым ограничением метода анализа используемого алфавита является длина текста — чем он больше, тем точнее анализ. Приведу пример: слово \"\u003Cstrong\u003Erappel\u003C\u002Fstrong\u003E\". На каком оно языке? На английском? Оно означает «спускаться на верёвке». Но такое же слово есть и в немецком языке! И там оно означает \"(внезапное) помешательство, приступ бешенства\".\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭтот метод имеет две разновидности. Вариант использования «процента использования алфавита» использует подсчёт количества использованных уникальных символов алфавита в тексте и расчёт % от общего объёма. Второй изменяет количество символов из текста, которое совпадает с алфавитом, при этом некоторые символы могут попадать в разные алфавиты и засчитываться обоим языкам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВторой метод основан на использовании заранее сформированных правил, которые устанавливают идентичность текста при помощи уникальных или типичных для грамматики языка последовательностей букв (например, артикли в английском, буквы «ъ» и «ё» в русском или \"є\" в украинском). Такие правила для n-грамм могут разрабатываться лингвистами и позволяют быстрее и точнее определить язык текста, однако также не дают гарантированного результата. Их то сначала нужно создать, а значит владеть языком на достаточном уровне, да и не так много уникальных характерных последовательностей в разных языках. Хотя, если вы заранее знаете, какие языки вам надо определять, то между ними может быть больше уникальных сочетаний, чем если использовать все языки. Если у вас только русский и английский, то таких буквосочетаний явно больше, чем в паре немецкий-английский.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОтдельно следует остановиться на случае, когда в тексте смешиваются слова разных алфавитов. Например, имена или названия компаний и товаров могут быть написаны на оригинальном языке, чаще всего английском, однако все предложение сформулировано по-русски. Здесь поможет только вариант подсчёта общего количества символов, которые принадлежат алфавиту и на основе того, чьих символов больше, принимать решения. В будущей версии библиотека сможет распознавать такие варианты и выдавать массив из языков, которые встречаются в строке, сейчас она покажет только основной язык, тот, которого в строке больше всего символов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ своей библиотеке я решил использовать оба подхода и все возможные варианты, позволяя гибко сконфигурировать алгоритм для использования любого подхода или их комбинации. Технически библиотека очень простая — один класс, несколько методов и свойств, которые задают параметры работы. Построчно он комментирован в исходном коде, поэтому здесь я не буду приводить все описание реализации, остановлюсь лишь на особенностях.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nБиблиотека работает с текстами в кодировке UTF-8, поэтому требует модуля mb_strings и первым делом приводит полученную строку к стандартной форме, пытаясь её перекодировать, потом удаляет лишние знаки и проверяет длину. Минимальный объём текста 50 символов, максимальный — 1680, это примерно равно одной стандартной странице формата А4.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВы можете задать различные варианты детектирования. Библиотека может использовать анализ алфавитов, при этом смотреть или на общий объем текста, или же на процент используемых букв каждого алфавита. Порог принятия решения также настраивается, по умолчанию это 75% (в зависимости от подсчёта, это или 75% букв алфавита или же в тексте общее количество символов этого языка больше 75%). Также есть возможность использовать эвристические правила для уточнения результата, при этом можно настроить приоритет — если правило не подтвердит результат анализа по статистике, то более верным считать результат работы правил или же следует довериться статистике. Для более быстрой работы, особенно на больших объёмах текста или большом количестве языков можно использовать только правила, их то обычно намного меньше, чем символов в алфавитах. Кстати, настраивается и использование правил — для получения результата можно использовать как совпадение с одним из правил, или же требовать совпадения со всеми правилами одного языка, однако это применимо только для длинных текстов и всегда будет вероятность ошибки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВозвращает библиотека после детектирования или значение false, что означает невозможность определения или же то, что используемого языка нет в базе данных. В случае успеха мы получаем массив с двух буквенным кодом языка (для примера: «en», «ru» или «ua»), а также дополнительные сведения — полное название языка и, в качестве бонуса, ссылку на статью о языке в Wikipedia.org (конечно, на этом же языке).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПока первая версия библиотеки умеет работать только с тремя языками — английским, русским и украинским, хотя ничего не мешает добавить дополнительные алфавиты и правила для работы с любыми языками.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНапоследок одно замечание о скорости. Самым быстрым вариантом будет использовать только правила, так как их всегда меньше, чем букв и внутри библиотеки мы будем использовать более короткие циклы. В частности, чем длиннее текст и чем больше языков мы определили в базе для поиска, тем быстрее будет вариант только с правилами. Поэтому, для оптимизации вам лучше всего заранее ограничить набор языков самыми вероятными и удалить те, что вам не нужны — так сократится значительное число циклов и алгоритм будет работать быстрее. Также можно убрать проверку и декодирование строки, если вы уверены, что у вас в системе на вход алгоритма будет подаваться только гарантировано уже преобразованные к кодировке UTF-8 строки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EОфициальный сайт проекта\u003C\u002Fstrong\u003E: \u003Ca href=\"http:\u002F\u002Fcode.google.com\u002Fp\u002Fphplangautodetect\u002F\"\u003Ehttp:\u002F\u002Fcode.google.com\u002Fp\u002Fphplangautodetect\u002F\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EЛицензия\u003C\u002Fstrong\u003E: \u003Ca rel=\"nofollow\" href=\"http:\u002F\u002Fwww.gnu.org\u002Flicenses\u002Fgpl.html\"\u003EGNU General Public License v3\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EАвтор\u003C\u002Fstrong\u003E: Александр Лозовюк (aleks_raiden, aleks.raiden@gmail.com)\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EЯзык\u002Fплатформа\u003C\u002Fstrong\u003E: PHP 5 (требует модуль mb_strings)\u003Cbr\u002F\u003E\r\nВ дистрибутив включён простейший скрипт для экспериментов, \u003Ca href=\"http:\u002F\u002Fabrdev.com\u002Fphplangdetect\u002F\"\u003Eон-лайн последняя версия здесь\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНиже исходный код с комментариями и замечаниями по реализации описанных выше алгоритмов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"black\"\u003E\u003Col\u003E\r\n\u003Cli\u003E\u003Cfont color=\"#0000ff\"\u003Eclass\u003C\u002Ffont\u003E Lang_Auto_Detect\u003C\u002Fli\u003E\r\n\u003Cli\u003E{\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F основные переменные\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F сисок поддерживаемых языков\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $lang = Array(\u003Cfont color=\"#A31515\"\u003E'en'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'English'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FEnglish_language'\u003C\u002Ffont\u003E),\u003C\u002Fli\u003E\r\n\u003Cli\u003E             \u003Cfont color=\"#A31515\"\u003E'ru'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'Russian'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'http:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9_%D1%8F%D0%B7%D1%8B%D0%BA'\u003C\u002Ffont\u003E),\u003C\u002Fli\u003E\r\n\u003Cli\u003E             \u003Cfont color=\"#A31515\"\u003E'ua'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'Ukraine'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'http:\u002F\u002Fuk.wikipedia.org\u002Fwiki\u002F%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%81%D1%8C%D0%BA%D0%B0_%D0%BC%D0%BE%D0%B2%D0%B0'\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E            );\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F порог чуствительности, сколько в % должно быть символов языка, чтобы он был определен\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $detect_range = 75; \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F обрабатывать ли многоязычные документы и возвращать массив используемых языков\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $detect_multi_lang = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F пока не реализовано\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F возвращать все результаты и вероятности\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $return_all_results = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F в реальном применении лучше отключить\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F использовать дополнительно систему правил и исключений\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $use_rules = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002Fприменять только правила (быстрее намного, но результат менее вероятен, чем больше текста, тем достовернее)\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $use_rules_only = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F приоритет правил над статистикой -\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $use_rules_priory = \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F true — правила приоритетнее статистики, false — статистика перед правилами  \u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F искать только первое правило или максимум совпадений?\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $match_all_rules = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F только одно иначе = все\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002Fиспользовать % от алфавита или общее количество символов каждого алфавита\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $use_str_len_per_lang = \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F true — использовать общую длину текста приоритетнее, чем % от символов алфавита, false — наоборот\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F минимальная длина строки для детектирования\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $min_str_len_detect = 50;\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F для обеспечения нормальной производительности задайте максимальную длину в символах для сравнения\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E $max_str_len_detect = 1680; \u003Cfont color=\"#008000\"\u003E\u002F\u002F\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F внутреняя непеременная — таблица алфавитов используемых при определении\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Eprivate\u003C\u002Ffont\u003E $_langs = array(\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#A31515\"\u003E'en'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'a'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'b'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'c'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'd'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'e'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'f'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'g'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'h'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'i'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'j'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'k'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'l'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'm'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'n'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'o'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'p'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'q'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'r'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E's'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E't'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'u'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'v'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'w'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'x'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'y'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'z'\u003C\u002Ffont\u003E),\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#A31515\"\u003E'ru'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'а'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'б'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'в'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'г'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'д'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'е'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ё'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ж'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'з'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'и'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'й'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'к'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'л'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'м'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'н'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'о'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'п'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'р'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'с'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'т'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'у'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ф'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'х'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ц'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ч'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ш'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'щ'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ъ'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ы'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ь'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'э'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ю'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'я'\u003C\u002Ffont\u003E),\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#A31515\"\u003E'ua'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'а'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'б'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'в'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'г'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ґ'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'д'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'е'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'є'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ж'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'з'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'и'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'і'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ї'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'й'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'к'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'л'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'м'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'н'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'о'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'п'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'р'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'с'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'т'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'у'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ф'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'х'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ц'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ч'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ш'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'щ'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ь'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'ю'\u003C\u002Ffont\u003E,\u003Cfont color=\"#A31515\"\u003E'я'\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E          );\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F хранит правила\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F правила это символы или строки, наличие которой (любой или всех) автоматически влечет идентификацию текста\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Eprivate\u003C\u002Ffont\u003E $_lang_rules = array(\u003C\u002Fli\u003E\r\n\u003Cli\u003E                  \u003Cfont color=\"#A31515\"\u003E'en'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'th'\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E'ir'\u003C\u002Ffont\u003E),\u003C\u002Fli\u003E\r\n\u003Cli\u003E                  \u003Cfont color=\"#A31515\"\u003E'ru'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'ъ'\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E'ё'\u003C\u002Ffont\u003E ),\u003C\u002Fli\u003E\r\n\u003Cli\u003E                  \u003Cfont color=\"#A31515\"\u003E'ua'\u003C\u002Ffont\u003E=\u003Earray(\u003Cfont color=\"#A31515\"\u003E'ї'\u003C\u002Ffont\u003E, \u003Cfont color=\"#A31515\"\u003E'є'\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E                ); \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F конструктор класса\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efunction\u003C\u002Ffont\u003E __construct()\u003C\u002Fli\u003E\r\n\u003Cli\u003E  {\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E;    \u003C\u002Fli\u003E\r\n\u003Cli\u003E  }\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F подготовка введенной строки для сраневния\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Eprivate\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efunction\u003C\u002Ffont\u003E _prepare_str($tmp_str = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E  {\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str == \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F если ничего не передали — выйти\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    $tmp_str = trim($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    $tmp_encoding = mb_detect_encoding($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (mb_strlen($tmp_str, $tmp_encoding) \u003E $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Emax_str_len_detect)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#008000\"\u003E\u002F\u002Fобрезать длину текста, для роизводительности\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $tmp_str = mb_substr($tmp_str, 0, $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Emax_str_len_detect, $tmp_encoding);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (mb_strlen($tmp_str, $tmp_encoding) &lt;= $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Emin_str_len_detect) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F конвертируем кодировки\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    $tmp_str = mb_convert_encoding($tmp_str, \u003Cfont color=\"#A31515\"\u003E'UTF-8'\u003C\u002Ffont\u003E, $tmp_encoding);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F приводим все к нижнему регистру\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    $tmp_str = mb_strtolower($tmp_str, \u003Cfont color=\"#A31515\"\u003E'UTF-8'\u003C\u002Ffont\u003E);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E $tmp_str;\u003C\u002Fli\u003E\r\n\u003Cli\u003E  }\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F функция определения языка по правилам\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F правила однозначно определяют язык, однако могут оибаться :)\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Eprivate\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efunction\u003C\u002Ffont\u003E _detect_from_rules($tmp_str = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E  {\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str == \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F если ничего не передали — выйти\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (!is_array($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_lang_rules)) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F перебор всех правил\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eforeach\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_lang_rules \u003Cfont color=\"#0000ff\"\u003Eas\u003C\u002Ffont\u003E $lang_code=\u003E$lang_rules)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $tmp_freq = 0;\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Eforeach\u003C\u002Ffont\u003E ($lang_rules \u003Cfont color=\"#0000ff\"\u003Eas\u003C\u002Ffont\u003E $rule)\u003C\u002Fli\u003E\r\n\u003Cli\u003E      {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $tmp_term = mb_substr_count($tmp_str, $rule);\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_term \u003E 1) \u003Cfont color=\"#008000\"\u003E\u002F\u002F то есть символ в строе 1 или более раз\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E          $tmp_freq++; \u003Cfont color=\"#008000\"\u003E\u002F\u002F увеличим счетчик символов языка, которые в этой строке есть\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002F теперь проверим\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Ematch_all_rules === \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#008000\"\u003E\u002F\u002F нужно совпадение всех правил\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_freq == count($lang_rules)) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E $lang_code;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#008000\"\u003E\u002F\u002F достаточно одного\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_freq \u003E 0) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E $lang_code;          \u003C\u002Fli\u003E\r\n\u003Cli\u003E          }\u003C\u002Fli\u003E\r\n\u003Cli\u003E      }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  }\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F функция определения языка по таблице\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Eprivate\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efunction\u003C\u002Ffont\u003E _detect_from_tables($tmp_str = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E  {\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str == \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F если ничего не передали — выйти\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002Fмы уже должны ранее обработать строку для сравнения    \u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F перебираем все языки и для каждого определим вероятность\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    $lang_res = array();\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eforeach\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Elang \u003Cfont color=\"#0000ff\"\u003Eas\u003C\u002Ffont\u003E $lang_code=\u003E$lang_name)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $lang_res[$lang_code] = 0; \u003Cfont color=\"#008000\"\u003E\u002F\u002Fпо умолчанию 0, то есть не этот язык\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003C\u002Fli\u003E\r\n\u003Cli\u003E      $tmp_freq = 0; \u003Cfont color=\"#008000\"\u003E\u002F\u002F частота символов текущего языка\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $full_lang_symbols = 0; \u003Cfont color=\"#008000\"\u003E\u002F\u002Fполное количество символов этого языка\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#008000\"\u003E\u002F\u002F так как длина строки может быть произвольной, а алфавит одинаковый, то цикл по алфавитам\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $cur_lang = $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_langs[$lang_code];\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Eforeach\u003C\u002Ffont\u003E ($cur_lang \u003Cfont color=\"#0000ff\"\u003Eas\u003C\u002Ffont\u003E $l_item)\u003C\u002Fli\u003E\r\n\u003Cli\u003E      {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002F теперь посмотреть количество вхождений символа в строку\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $tmp_term = mb_substr_count($tmp_str, $l_item);\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_term \u003E 1) \u003Cfont color=\"#008000\"\u003E\u002F\u002F то есть символ в строе 1 или более раз\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E          $tmp_freq++; \u003Cfont color=\"#008000\"\u003E\u002F\u002F увеличим счетчик символов языка, которые в этой строке есть\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          $full_lang_symbols += $tmp_term;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E      }\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Euse_str_len_per_lang === \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E      {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002Fиспользовать общее количество символов\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $lang_res[$lang_code] = $full_lang_symbols;\u003C\u002Fli\u003E\r\n\u003Cli\u003E      }\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002F Вычислить процент от всех символов алфавита\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $lang_res[$lang_code] = ceil((100 \u002F count($cur_lang) ) * $tmp_freq);\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F так, теперь посомтрим что вышло\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    arsort($lang_res, SORT_NUMERIC); \u003Cfont color=\"#008000\"\u003E\u002F\u002Fсортируем массив первый элемент язык с большей вероятностью\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Ereturn_all_results == \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E $lang_res; \u003Cfont color=\"#008000\"\u003E\u002F\u002F если вернуть все результаты — возвращаем, иначе выбрать лучший\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002F если больше указанного нами порога, возвратить код языка, иначе — null (то есть, мы не можем определить код языка)\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $key = key($lang_res);\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($lang_res[$key] \u003E= $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Edetect_range)\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E $key;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E      }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E  }\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#008000\"\u003E\u002F\u002F общая функция для определения языка\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E  \u003Cfont color=\"#0000ff\"\u003Epublic\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efunction\u003C\u002Ffont\u003E lang_detect($tmp_str = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E  {\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str == \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E; \u003Cfont color=\"#008000\"\u003E\u002F\u002F если ничего не передали — выйти\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    $tmp_str = $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_prepare_str($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str === \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#008000\"\u003E\u002F\u002F если правила применяем ДО таблицы\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Euse_rules_only === \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E      $res = $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_detect_from_rules($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003C\u002Fli\u003E\r\n\u003Cli\u003E      \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E array($res, $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Elang[$res]);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E      {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#008000\"\u003E\u002F\u002F при использовании таблиц мы не можем получить полную раскладку по результатам, потому отключаем\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Ereturn_all_results = \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003C\u002Fli\u003E\r\n\u003Cli\u003E        $res = $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_detect_from_tables($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($tmp_str === \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E) \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Euse_rules === \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E          $res_rules = $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003E_detect_from_rules($tmp_str);\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#008000\"\u003E\u002F\u002F исходим из настроек приоритета правил и статистики\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E ($\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Euse_rules_priory === \u003Cfont color=\"#0000ff\"\u003Etrue\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E          {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#008000\"\u003E\u002F\u002Fправила имеют бОльший вес, чем статистика\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E array($res_rules, $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Elang[$res_rules]);\u003C\u002Fli\u003E\r\n\u003Cli\u003E          }\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E            {\u003C\u002Fli\u003E\r\n\u003Cli\u003E              \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E array($res, $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Elang[$res]);\u003C\u002Fli\u003E\r\n\u003Cli\u003E            }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Eelse\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E          \u003Cfont color=\"#0000ff\"\u003Ereturn\u003C\u002Ffont\u003E array($res, $\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E-\u003Elang[$res]);\u003C\u002Fli\u003E\r\n\u003Cli\u003E      }  \u003C\u002Fli\u003E\r\n\u003Cli\u003E  }\u003C\u002Fli\u003E\r\n\u003Cli\u003E}\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003C\u002Ffont\u003E\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Ca href=\"http:\u002F\u002Fpoison.qsh.ru\"\u003E\u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E\u003C\u002Fa\u003E.\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003EP.S.\u003C\u002Fstrong\u003E Конечно, код не претендует на совершенство, и, возможно, в сети уже есть реализации этой функциональности, которых я не нашел. Если вы знаете известные реализации — просьба сообщить мне в комментариях. Оригинал статьи \u003Ca href=\"http:\u002F\u002Fabrdev.com\u002F?p=346\"\u003Eразмещён в моем блоге\u003C\u002Fa\u003E.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"Language API"},{"titleHtml":"PHP"},{"titleHtml":"веб"},{"titleHtml":"поиск"},{"titleHtml":"стартап"},{"titleHtml":"текст"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F27378\u002F370ff2b9fba640d15e2599ba88365d99\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F27378\u002F370ff2b9fba640d15e2599ba88365d99\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F27378\\\u002F\"},\"headline\":\"Автоматическое определение языка произвольного текста на РНР — библиотека PHPLangautodetect\",\"datePublished\":\"2008-06-15T13:00:09+04:00\",\"dateModified\":\"2008-06-15T13:00:09+04:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Aleks Lozovyuk\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто не...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F27378\\\u002F#post-content-body\",\"about\":[\"h_php\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Folpictures\\\u002F6c3\\\u002Fa4a\\\u002F9db\\\u002F6c3a4a9db171c8f153228e09a71669bb.png\"]}","metaDescription":"Знаете, работа с стартапе, который пытается создать что-то новое и уникальное на рынке очень захватывает. И не только открывающимися возможностями, но и часто нетривиальными задачами и вопросами,...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"564884":{"id":"564884","timePublished":"2021-09-26T01:34:24+00:00","isCorporative":true,"lang":"ru","titleHtml":"Барахолки в Испании: хороший день для покупок","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2621483","alias":"DRoman0v","fullname":"Denis","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F126\u002F32f\u002Ffeb\u002F12632ffebec0f851ba0ec665f3ed6c55.jpg","speciality":"Инженер"},"statistics":{"commentsCount":20,"favoritesCount":9,"readingCount":7315,"score":30,"votesCount":32},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"21894","alias":"gadgets","type":"collective","title":"Гаджеты","titleHtml":"Гаджеты","isProfiled":false},{"relatedData":null,"id":"21898","alias":"hardware","type":"collective","title":"Компьютерное железо","titleHtml":"Компьютерное железо","isProfiled":false},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fk5\u002Fzi\u002Fyi\u002Fk5ziyiom7wtc2ddmqijit-6etdu.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nСуббота выдалась очень удачной — я считал, что в прошлый раз все было неплохо, но новая барахолка получилась вдвойне интересной. Такое впечатление, что именно вчера все торговцы б\u002Fу электроникой решили распродать свои запасы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИ да, с каждой неделей становится все прохладнее, так что на этот раз можно было ходить по рынку, не беспокоясь о том, что через полчаса-час станет невыносимо жарко. Но давайте посмотрим, что на сей раз попалось интересного. \u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"испания"},{"titleHtml":"барахолки"},{"titleHtml":"покупки"},{"titleHtml":"гаджеты"}]},"578296":{"id":"578296","timePublished":"2021-09-26T14:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вектор? Растр? А может — и то, и другое?","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Zach Leatherman","originalUrl":"https:\u002F\u002Fwww.zachleat.com\u002Fweb\u002Fvector-raster-split\u002F"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe36\u002F812\u002Fd3d\u002Fe36812d3de38eb3d479d7a13228717ef.png","speciality":"Пользователь"},"statistics":{"commentsCount":4,"favoritesCount":17,"readingCount":1400,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"19802","alias":"graph_design","type":"collective","title":"Графический дизайн","titleHtml":"Графический дизайн","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"На этой неделе я столкнулся с интересным классом задач, для решения которых, как я теперь понимаю, можно было использовать гораздо более удачный подход и раньше. Но существует ли такой подход?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F578296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fge\u002Fkf\u002F1n\u002Fgekf1nauxn50imhrqyil4rlzj5m.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EИзображение для верхней части сайта\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРечь идёт о подготовке изображения, рассчитанного на использовании в верхней правой части сайта \u003Ca href=\"https:\u002F\u002Fjamstackconf.com\" rel=\"nofollow noopener noreferrer\"\u003Ejamstackconf.com\u003C\u002Fa\u003E. Мы, в маркетинговой команде Netlify, используем Figma. Первая моя попытка экспорта этого изображения для использования его на сайте оказалась далеко не самой удачной.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"графика"},{"titleHtml":"веб-разработка"},{"titleHtml":"ruvds_перевод"}]},"578794":{"id":"578794","timePublished":"2021-09-26T14:09:00+00:00","isCorporative":true,"lang":"ru","titleHtml":"Открытый проект для поиска генов устойчивости к антибиотикам от специалистов Университета ИТМО","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1111126","alias":"itmo","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1b4\u002F74b\u002Fb85\u002F1b474bb85c46d39a4cfbb9760513a7de.png","speciality":""},"statistics":{"commentsCount":0,"favoritesCount":4,"readingCount":547,"score":3,"votesCount":3},"hubs":[{"relatedData":null,"id":"19683","alias":"spbifmo","type":"corporative","title":"Блог компании Университет ИТМО","titleHtml":"Блог компании Университет ИТМО","isProfiled":false},{"relatedData":null,"id":"18081","alias":"opendata","type":"collective","title":"Открытые данные","titleHtml":"Открытые данные","isProfiled":true},{"relatedData":null,"id":"20696","alias":"study","type":"collective","title":"Учебный процесс в IT","titleHtml":"Учебный процесс в IT","isProfiled":false},{"relatedData":null,"id":"21912","alias":"biotech","type":"collective","title":"Биотехнологии","titleHtml":"Биотехнологии","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВчера мы обсудили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fspbifmo\u002Fblog\u002F579200\u002F\"\u003Eнаши свежие исследования\u003C\u002Fa\u003E и на этот раз возвращаемся к открытым проектам. Ранее мы говорили об инструменте для сравнительного анализа метагеномных данных \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fspbifmo\u002Fblog\u002F568338\u002F\"\u003EMetaFast\u003C\u002Fa\u003E. Сегодня на очереди \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fctlab\u002Fmetacherchant\"\u003EMetaCherchant\u003C\u002Fa\u003E — еще одно программное средство от коллектива МНЦ «Компьютерные технологии» Университета ИТМО для поиска генов устойчивости к антибиотикам.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F96d\u002F01a\u002F202\u002F96d01a202b151e103776472e067787b2.jpeg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F96d\u002F01a\u002F202\u002F96d01a202b151e103776472e067787b2.jpeg","fit":"cover","positionY":66.818181818182,"positionX":1.1538461538462}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"университет итмо"},{"titleHtml":"MetaCherchant"},{"titleHtml":"MetaFast"},{"titleHtml":"мне комьютерные технологии"},{"titleHtml":"анализ метагеномных данных"},{"titleHtml":"изменение микробиома"}]},"579296":{"id":"579296","timePublished":"2021-09-26T10:00:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Упрощаем эмуляцию X86 с помощью Live CD","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"ClassicHasClass","originalUrl":"https:\u002F\u002Fwww.talospace.com\u002F2021\u002F09\u002Fbetter-x8664-emulation-with-live-cds.html"}}],"author":{"id":"2488151","alias":"Bright_Translate","fullname":"Дмитрий Брайт","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff9c\u002Fff9\u002F7d9\u002Ff9cff97d9c0677af28dab451897f88e4.jpg","speciality":"Переводчик"},"statistics":{"commentsCount":7,"favoritesCount":17,"readingCount":1778,"score":8,"votesCount":8},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fmt\u002Fwb\u002F5s\u002Fmtwb5s5gaflvyaymdbaqbremhye.png\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nТипичный подход к эмулированию среды для запуска старых файлов с архитектурой i386 сопряжен со сложностями, в частности с поиском всех необходимых библиотек. Однако этой проблемы можно избежать, воспользовавшись заранее подготовленным образом Live CD, о чем в статье и пойдет речь на примере образа эмулятора Palm OS и игры Shogo: Mobile Armor Division.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruvds_перевод"},{"titleHtml":"QEMU"},{"titleHtml":"pose"},{"titleHtml":"palm"}]},"579482":{"id":"579482","timePublished":"2021-09-26T14:42:08+00:00","isCorporative":false,"lang":"ru","titleHtml":"Flutter: о разработке плагинов с интерфейсом ActivityAware","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"89053","alias":"Alexufo","fullname":"Александр Борисович","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F324\u002F18a\u002Fe1e\u002F32418ae1eab8433a87d3030a0dd78238.png","speciality":"IT анахорет"},"statistics":{"commentsCount":2,"favoritesCount":14,"readingCount":1002,"score":4,"votesCount":6},"hubs":[{"relatedData":null,"id":"375","alias":"java","type":"collective","title":"Java","titleHtml":"Java","isProfiled":true},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"17712","alias":"dart","type":"collective","title":"Dart","titleHtml":"Dart","isProfiled":true},{"relatedData":null,"id":"22176","alias":"flutter","type":"collective","title":"Flutter","titleHtml":"Flutter","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe16\u002F765\u002F973\u002Fe167659734194730d6a29337ffdc6163.gif\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ былые времена клиенты присылали цветные изображения документов со сканера по емейлу. Кто ленился или не мог — отправлял свой загранник по почте. С этим неплохо справлялось решение от ABBYY. Потом появились телефоны и люди стали присылать фотографии паспортов. ABBYY сломался. Перешли на решение от Smart Engines и даже с фотографиями, посланными через WhatsApp особых проблем не было. Но потом пошли умные мобилки с включенными по умолчанию водяными знаками типа «Xiaomi 9T» часто перекрывающими важнейшую часть паспорта. Вдобавок к этому наличие в кадре на фотографии пальцев и бликов тормозило общение с клиентом.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4i\u002Ff-\u002Fu1\u002F4if-u1lokfub1ia_cnk3iahm6fo.jpeg\" alt=\"Примеры паспортов, непригодных к распознаванию\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКогда паспорт распознается в видеопотоке на телефоне клиента, то этой проблемы так остро не стоит. Почему?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EМобильное ядро отображает рамку документа в процессе распознавания, не просто маску поверх видео, а именно рамку документа, находящегося в руках. По моим ощущениям, это дает человеку понимание, где не должно быть его пальцев. Вообще, это интересная тема для отдельного исследования.\u003C\u002Fli\u003E\r\n\u003Cli\u003EСистема использует механизм сатурации данными и готова выдать результат только после определенной уверенности в них.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"flutter"},{"titleHtml":"flutter app"},{"titleHtml":"dart"}]},"579542":{"id":"579542","timePublished":"2021-09-26T19:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Jetpack Compose — как легко построить UI на Android","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2713395","alias":"i15in","fullname":"Иван","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F25f\u002Fe4b\u002Ff94\u002F25fe4bf94867d9647a0ae809abf2e429.jpg","speciality":"Android developer"},"statistics":{"commentsCount":3,"favoritesCount":25,"readingCount":1039,"score":16,"votesCount":20},"hubs":[{"relatedData":null,"id":"18232","alias":"funcorp","type":"corporative","title":"Блог компании FUNCORP","titleHtml":"Блог компании FUNCORP","isProfiled":false},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"9188","alias":"ui","type":"collective","title":"Интерфейсы","titleHtml":"Интерфейсы","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ июле этого года вместе с Android Studio Arctic Fox вышла одна из долгожданных библиотек — Jetpack Compose. Она позволяет создавать пользовательский интерфейс в декларативном стиле и обещает быть революцией в построении UI.\u003C\u002Fp\u003E\u003Cp\u003EРазбираемся, так ли это на самом деле, какие у библиотеки преимущества и недостатки. Подробности — в статье.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка мобильных приложений"},{"titleHtml":"jetpack compose"},{"titleHtml":"ui"},{"titleHtml":"интерфейсы"},{"titleHtml":"android"},{"titleHtml":"kotlin"},{"titleHtml":"android studio"},{"titleHtml":"arctic fox"},{"titleHtml":"пользовательские интерфейсы"}]},"579804":{"id":"579804","timePublished":"2021-09-26T12:06:13+00:00","isCorporative":true,"lang":"ru","titleHtml":"ОС для работы со звуком — что она умеет","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2691015","alias":"mirhifi","fullname":"«Мир Hi-Fi»","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdfb\u002F713\u002Fedb\u002Fdfb713edbeed85de6588bd27d6c43229.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":20,"readingCount":3790,"score":9,"votesCount":11},"hubs":[{"relatedData":null,"id":"18822","alias":"audiomania","type":"corporative","title":"Блог компании Аудиомания","titleHtml":"Блог компании Аудиомания","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21918","alias":"soft","type":"collective","title":"Софт","titleHtml":"Софт","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОдин из предыдущих материалов мы посвятили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575076\u002F\"\u003Eинструментам\u003C\u002Fa\u003E для сборки цифровой звуковой рабочей станции (DAW). Еще мы говорили об \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575892\u002F\"\u003Eopen source проектах\u003C\u002Fa\u003E, в рамках которых можно сделать собственный синтезатор или педалборд.\u003C\u002Fp\u003E\u003Cp\u003EСегодня продолжим тему и расскажем об открытой ОС \u003Cstrong\u003EElk Audio\u003C\u002Fstrong\u003E, построенной на базе Linux. Она заточена под обработку звука на встраиваемых системах.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аудиомания"},{"titleHtml":"звук"},{"titleHtml":"Elk Audio"},{"titleHtml":"операционные системы"},{"titleHtml":"DAW"}]},"579980":{"id":"579980","timePublished":"2021-09-26T10:05:13+00:00","isCorporative":false,"lang":"ru","titleHtml":"Источник опорного напряжения — один из принципов и одна из реализаций","editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"269411","alias":"VT100","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":42,"readingCount":3978,"score":33,"votesCount":37},"hubs":[{"relatedData":null,"id":"21472","alias":"circuit-design","type":"collective","title":"Схемотехника","titleHtml":"Схемотехника","isProfiled":true},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21976","alias":"DIY","type":"collective","title":"DIY или Сделай сам","titleHtml":"DIY или Сделай сам","isProfiled":false},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Как не счесть «алмазов в каменных пещерах» — так не счесть случаев, когда необходимо втиснуть какую-нибудь характеристику «непрерывного» внешнего мира в «дискретное» нутро цифровых алгоритмов или извлечь обратно. Как помнят многие — это делается с помощью аналого-цифровых (АЦП, ADC) и цифро-аналоговых (ЦАП, DAC) преобразователей. Но только более посвящённые — обратят при этом внимание на источник опорного напряжения для преобразований (ИОН, Reference), который во многом определяет стабильность и абсолютную точность полученного результата. Конечно, есть некоторое число случаев, когда можно произвести измерение или генерацию отношения двух токов или напряжений. Тогда достаточно подать большее из них на опорный вход преобразователя. Но это — именно «некоторое число».\u003Cbr\u003E\r\n Желающих ознакомиться с одним из принципов и одной из реализаций температурно-стабильного ИОН — приглашаю под кат. Помощь в этом — предоставит симулятор \u003Ca href=\"https:\u002F\u002Fwww.analog.com\u002Fen\u002Fdesign-center\u002Fdesign-tools-and-calculators\u002Fltspice-simulator.html\" rel=\"nofollow noopener noreferrer\"\u003ELTSPICE\u003C\u002Fa\u003E (несмотря на то, что человек с КДПВ сказал: «My favorite CAD is solder»). Желательно — знание закона Ома, правил Кирхгофа, принципов работы биполярного транзистора (на уровне модели Эберса-Молла) и идеального операционного усилителя.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cb\u003EКДПВ1\u003C\u002Fb\u003E: Robert Allan Pease — the czar of bandgap. «Орденские цепи» — из ИМС стабилизаторов в корпусе TO-3.\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fj9\u002Ffk\u002Fui\u002Fj9fkuinqeb01dhjearz6ekwbahc.jpeg\"\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Источники питания"},{"titleHtml":"АЦП и ЦАП"},{"titleHtml":"схемотехника для чайников."}]},"580018":{"id":"580018","timePublished":"2021-09-26T09:06:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько стоит замена батарей в электромобилях?","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Bryce Gaton","originalUrl":"https:\u002F\u002Fthedriven.io\u002F2021\u002F07\u002F23\u002Fhow-much-are-replacement-batteries-for-electric-vehicles-in-australia\u002F"}}],"author":{"id":"1803585","alias":"GeorgKDeft","fullname":"дима","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F10f\u002Fd61\u002F864\u002F10fd6186430ede52ad4a1567dff9afdc.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":135,"favoritesCount":17,"readingCount":22346,"score":18,"votesCount":28},"hubs":[{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21914","alias":"energy","type":"collective","title":"Энергия и элементы питания","titleHtml":"Энергия и элементы питания","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E Мы приветствуем вопросы читателей об аккумуляторных электромобилях, зарядках и обо всем, что вы хотите узнать. Поэтому, пожалуйста, отправьте их, и мы заставим наших экспертов ответить и пригласить других людей внести свой вклад через раздел комментариев.  \u003C\u002Fp\u003E\u003Cp\u003EСегодняшний вопрос читателя: У меня есть вопрос относительно стоимости замены батареи в BEV, доступной в Австралии, и производитель сообщил срок службы до того, как потребуется замена?  \u003C\u002Fp\u003E\u003Cp\u003EЭта тема является ключевым моментом, который волнует многих покупателей перед покупкой BEV. С уважением, Андрей.\u003C\u002Fp\u003E\u003Cp\u003E Привет, Эндрю, да, вопрос о том, когда заменять аккумулятор электромобиля и о стоимости, важен - но, возможно, не так сильно, как думает широкая публика.  \u003C\u002Fp\u003E\u003Cp\u003EПервое: я разделю вопрос на две части. Какова вероятность того, что аккумулятор потребует замены в течение срока службы автомобиля? Какова стоимость возможной замены батареи? Потребуется ли замена аккумулятора в течение срока службы автомобиля? Чтобы ответить на этот вопрос, необходимо изучить две проблемы: Когда аккумулятор перестанет «подходить по назначению»? а также Как долго длится «жизнь автомобиля»?  \u003C\u002Fp\u003E\u003Cp\u003EВо-первых, значительная часть производителей дает гарантию на свои батареи как минимум на 70% емкости, оставшейся после 8 лет. Для Hyundai Kona с запасом хода 450–500 км по городу это соответствует минимальному диапазону 315–350 км в возрасте 8 лет. Для многих, если не для большинства, это означает зарядку, возможно, два раза в неделю, а не один раз в неделю. То же самое и для дальних путешествий - может быть, пара дополнительных остановок для перезарядки, например, по пути между Сиднеем и Брисбеном.  \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F937\u002F372\u002F95b\u002F93737295b6a08ba7a8b84ab4b0c417e2.jpg","buttonTextHtml":"Далее в цифрах о цене аккумуляторов сейчас","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F937\u002F372\u002F95b\u002F93737295b6a08ba7a8b84ab4b0c417e2.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аккумуляторы"},{"titleHtml":"замена"},{"titleHtml":"электромобили"},{"titleHtml":"цена"}]},"580038":{"id":"580038","timePublished":"2021-09-26T13:35:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"KODI: собираем удобный и функциональный медиацентр для дома. Часть 9. Spotify","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"2644801","alias":"arboozof","fullname":"Роман","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff76\u002F452\u002F3d5\u002Ff764523d55be8ef6fc4307ea3158dadf.png","speciality":"IT\u002FRetail"},"statistics":{"commentsCount":4,"favoritesCount":26,"readingCount":3055,"score":8,"votesCount":8},"hubs":[{"relatedData":null,"id":"36","alias":"linux","type":"collective","title":"Настройка Linux","titleHtml":"Настройка Linux","isProfiled":true},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"21908","alias":"smartphones","type":"collective","title":"Смартфоны","titleHtml":"Смартфоны","isProfiled":false},{"relatedData":null,"id":"21946","alias":"video_tech","type":"collective","title":"Видеотехника","titleHtml":"Видеотехника","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПродолжаем тему интеграции в наш медиацентр онлайн-сервисов прослушивания музыки. Ранее мы уже «подружили» медиацентр KODI с сервисом Яндекс.Музыка. Сегодня на очереди не менее популярный сервис – Spotify.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","buttonTextHtml":"Читать дальше &rarr;","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","fit":"cover","positionY":0,"positionX":14.74358974359}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"kodi"},{"titleHtml":"xbmc"},{"titleHtml":"ubuntu"},{"titleHtml":"kubuntu"},{"titleHtml":"music"},{"titleHtml":"spotify"},{"titleHtml":"addons"},{"titleHtml":"дополнения"},{"titleHtml":"тв"}]},"580046":{"id":"580046","timePublished":"2021-09-26T14:14:11+00:00","isCorporative":true,"lang":"ru","titleHtml":"Дайджест интересных материалов для мобильного разработчика #412 (20 — 26 сентября)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1327826","alias":"ProductivityInside","fullname":"Productivity Inside","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe7d\u002Fd1f\u002F7ae\u002Fe7dd1f7ae26609981edce6deabc5d751.png","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":5,"readingCount":752,"score":3,"votesCount":5},"hubs":[{"relatedData":null,"id":"20886","alias":"productivity_inside","type":"corporative","title":"Блог компании Productivity Inside","titleHtml":"Блог компании Productivity Inside","isProfiled":false},{"relatedData":null,"id":"548","alias":"ios_dev","type":"collective","title":"Разработка под iOS","titleHtml":"Разработка под iOS","isProfiled":true},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"В этой подборке 0-day уязвимости в iOS и скорость сборки для нее же, StoreKit 2 и Swift 5.5, тестовая ферма и правильная валидация для Android, битва снифферов, игры со шрифтами, подготовка к FAANG, релизные циклы и многое другое!\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fox\u002Fbt\u002Ft8\u002Foxbtt83_xsb4ypx5ozls33guvjy.jpeg\"\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест разработчика"},{"titleHtml":"uix"},{"titleHtml":"аналитика"},{"titleHtml":"макетинг мобильных приложений"}]},"580048":{"id":"580048","timePublished":"2021-09-26T14:22:36+00:00","isCorporative":false,"lang":"ru","titleHtml":"Будь строже к себе: как ограничения помогают сделать код лучше","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"2787821","alias":"ZeBrains_team","fullname":"Станислав Маслов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fae3\u002F3ee\u002F4f1\u002Fae33ee4f1a117aeeab42ec5a9e2eba25.jpg","speciality":"директор продакшена в IT-компании"},"statistics":{"commentsCount":10,"favoritesCount":33,"readingCount":2249,"score":5,"votesCount":13},"hubs":[{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true},{"relatedData":null,"id":"20726","alias":"productpm","type":"collective","title":"Управление продуктом","titleHtml":"Управление продуктом","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EЕсли вам приходилось задумываться о построении эффективной экосистемы проекта и определении ролей тимлида и разработчика — статья Артема Прозорова из ZeBrains для вас. \u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EПредлагаю вам задуматься над одним вопросом. Но не спешите с ответом, потому что он не так очевиден, как может показаться:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКакая из команд может реализовать более технически стабильный продукт?&nbsp;\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №1:\u003C\u002Fstrong\u003E Проектный менеджер, аналитик, тестировщик и несколько разработчиков, у каждого из которых за плечами минимум три года опыта. Все работают в одном офисе, посвящая свое время одному проекту в режиме fulltime.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №2:\u003C\u002Fstrong\u003E Один сильный разработчик. Ему помогают множество не знакомых между собой людей из разных часовых поясов. У каждого — свой набор компетенций и уровень опыта. Работой над проектом участники занимаются в свободном режиме, по несколько часов в неделю.\u003C\u002Fp\u003E\u003Cp\u003E* * *\u003C\u002Fp\u003E\u003Cp\u003EОтвет на этот вопрос получим к концу статьи.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fefe\u002F413\u002Feb2\u002Fefe413eb27c391cfcfef0484e6997aab.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"управление проектами"},{"titleHtml":"управление продуктом"},{"titleHtml":"управление командой разработки"},{"titleHtml":"управление командами разработчиков"},{"titleHtml":"тимлид"},{"titleHtml":"тимлиды и разработчики"}]},"580052":{"id":"580052","timePublished":"2021-09-26T15:29:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Почему экология не может быть плохой?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2568695","alias":"phanerozoi_evidence","fullname":"Фанерозой","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdcc\u002F862\u002F561\u002Fdcc862561429f2ed85090ac53e39cf7d.jpg","speciality":"Биологи, врач, научный популяризатор, палеонтолог"},"statistics":{"commentsCount":30,"favoritesCount":13,"readingCount":2590,"score":5,"votesCount":21},"hubs":[{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22750","alias":"biology","type":"collective","title":"Биология","titleHtml":"Биология","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cem\u003EСо второй половины ХХ в мы всё чаще слышим из средств массовой информации выражения «плохая экология», «сохранить экологию», «экология строительных материалов». Но, к сожалению, не многие знают, что такое «экология» на самом деле. Для разгадки тайн экологии нам предстоит окунуться в удивительный мир науки...\u003C\u002Fem\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","fit":"cover","positionY":29.545454545455,"positionX":1.4102564102564}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"виды"},{"titleHtml":"охрана окружающей среды"},{"titleHtml":"мифы"},{"titleHtml":"экосистема"},{"titleHtml":"биогеоценоз"},{"titleHtml":"экология"},{"titleHtml":"экосистемы"},{"titleHtml":"биоценозы"},{"titleHtml":"биология"},{"titleHtml":"вирусы"}]},"580058":{"id":"580058","timePublished":"2021-09-26T16:31:38+00:00","isCorporative":false,"lang":"ru","titleHtml":"FOSS News №90 — дайджест материалов о свободном и открытом ПО за 20—26 сентября 2021 года","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1515607","alias":"Gim6626","fullname":"Дмитрий Винокуров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F390\u002F2c3\u002F669\u002F3902c3669d69c0b80b41b876d772a113.jpg","speciality":"Инженер-программист"},"statistics":{"commentsCount":5,"favoritesCount":1,"readingCount":1110,"score":3,"votesCount":5},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjh\u002Fie\u002Fz5\u002Fjhiez5jcobuwxp87xogmfnk_o1g.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Cp\u003EВсем привет!\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EПродолжаем дайджесты новостей и других материалов о свободном и открытом ПО и немного о железе. Всё самое главное про пингвинов и не только, в России и мире. \u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EГлавные темы нового выпуска:\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EВ Linux Foundation отмечают острый спрос компаний на профессиональных опенсорс-разработчиков.\u003C\u002Fli\u003E\r\n\u003Cli\u003EСрок поддержки Ubuntu 14.04 и 16.04 увеличен до 10 лет.\u003C\u002Fli\u003E\r\n\u003Cli\u003E1 октября в Москве состоится конференция Russian Open Source Summit.\u003C\u002Fli\u003E\r\n\u003Cli\u003EHackerOne реализовал выплату вознаграждений за выявление уязвимостей в открытом ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EGoogle меняет модель развития Android на более близкую к ядру Linux.\u003C\u002Fli\u003E\r\n\u003Cli\u003EArm разработал архитектуру и инструменты для транспортных средств со значительной ролью ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредложения экспертов «Базальт СПО» включены в проект государственной стратегии развития СПО в России.\u003C\u002Fli\u003E\r\n\u003Cli\u003EМихаил Мишустин «анонсировал» российский аналог GitHub.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредставлен модуль ядра, способный в разы ускорить OpenVPN.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПроект Waydroid развивает пакет для запуска Android в дистрибутивах GNU\u002FLinux.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u003E\r\n\u003Cp\u003EИ многое другое…\u003C\u002Fp\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"новости"},{"titleHtml":"open source"},{"titleHtml":"free software"},{"titleHtml":"linux"},{"titleHtml":"foss news"}]},"580066":{"id":"580066","timePublished":"2021-09-26T18:12:37+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько мы переплачиваем за сервера используя Ruby on Rails","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"941194","alias":"motoroller95","fullname":"Искандар Гохар","avatarUrl":"","speciality":"Ruby on Rails developer at IT-territory"},"statistics":{"commentsCount":32,"favoritesCount":2,"readingCount":1874,"score":5,"votesCount":7},"hubs":[{"relatedData":null,"id":"224","alias":"ruby","type":"collective","title":"Ruby","titleHtml":"Ruby","isProfiled":true},{"relatedData":null,"id":"8279","alias":"ror","type":"collective","title":"Ruby on Rails","titleHtml":"Ruby on Rails","isProfiled":true},{"relatedData":null,"id":"17822","alias":"parallel_programming","type":"collective","title":"Параллельное программирование","titleHtml":"Параллельное программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F577948\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпрошлой\u003C\u002Fa\u003E статье я разбирался с тем как работает GIL, а сегодня меня захватила идея узнать насколько дорого обходится этот GIL для кода, который исполняется у нас на бэкенде. Для этого я решил пропатчить MRI и добавить пару переменных, в которые буду засекать сколько времени поток реально выполнял код, а сколько ничего не делал и ждал пока ему удастся завладеть локом. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruby"},{"titleHtml":"gil"}]},"580080":{"id":"580080","timePublished":"2021-09-26T19:12:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Дайджест свежих материалов из мира фронтенда за последнюю неделю №486 (20 — 26 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"59347","alias":"alexzfort","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd2a\u002Fe8a\u002F5ac\u002Fd2ae8a5ac9876f838ebdd45f3ea3bc3b.png","speciality":""},"statistics":{"commentsCount":1,"favoritesCount":9,"readingCount":954,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"307","alias":"css","type":"collective","title":"CSS","titleHtml":"CSS","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"17103","alias":"html5","type":"collective","title":"HTML","titleHtml":"HTML","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Предлагаем вашему вниманию подборку с ссылками на новые материалы из области фронтенда и около него.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fec\u002F0x\u002Fkx\u002Fec0xkxfr5jd-rci1wjo9bmr4cns.jpeg\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"фронтенд"},{"titleHtml":"css"},{"titleHtml":"js"},{"titleHtml":"es6"},{"titleHtml":"vue"},{"titleHtml":"react"},{"titleHtml":"angular"},{"titleHtml":"ember"},{"titleHtml":"html5"},{"titleHtml":"браузеры"},{"titleHtml":"ссылки"}]},"580086":{"id":"580086","timePublished":"2021-09-26T19:37:10+00:00","isCorporative":false,"lang":"ru","titleHtml":"Термо принтер и JavaScript","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"1709955","alias":"IIIarp","fullname":"Сергей Шарпов","avatarUrl":"","speciality":"Веб разработчик"},"statistics":{"commentsCount":23,"favoritesCount":14,"readingCount":1873,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"84","alias":"crazydev","type":"collective","title":"Ненормальное программирование","titleHtml":"Ненормальное программирование","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПриобрел я на днях термопринтер (кассовый аппарат, если изволите) жене для магазина и решил что смогу его обуздать как истинный программист и сделать свою веб кассу, вместо того, что-бы использовать платные решения, ведь задача простая, печатать чеки, но это оказалось не так то и просто...\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"термопринтер"},{"titleHtml":"javascript"},{"titleHtml":"webusb"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":0,"favoritesCount":4,"readingCount":188,"score":4,"votesCount":4},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Сергей Просин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Инженер. Энтузиаст"},"statistics":{"commentsCount":0,"favoritesCount":16,"readingCount":564,"score":6,"votesCount":6},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":4,"favoritesCount":11,"readingCount":1334,"score":10,"votesCount":10},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["579980","564884","580018","579542","580086","580080","580092","578296","579804","579296","580038","580090","580066","580052","580048","580088","579482","580058","580046","578794"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":2},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["483202","353848","328090"],"similarListRefs":{"328090":{"id":"328090","timePublished":"2017-05-11T08:46:50+00:00","isCorporative":true,"lang":"ru","titleHtml":".NET API в веб-разработке: прошлое и будущее","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1467786","alias":"alsion","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":0,"favoritesCount":53,"readingCount":12326,"score":35,"votesCount":39},"hubs":[{"id":"18226","alias":"jugru","type":"corporative","title":"Блог компании JUG Ru Group","titleHtml":"Блог компании JUG Ru Group","isProfiled":false},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true},{"id":"17690","alias":"api","type":"collective","title":"API","titleHtml":"API","isProfiled":true},{"id":"17718","alias":"csharp","type":"collective","title":"C#","titleHtml":"C#","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Многие думают, что создание API — специфичный процесс, и понимать его нужно лишь тем, кто профессионально занимается разработкой API-проектов. Но в реальности все мы так или иначе пишем API: для новых классов, сервисов, для коллег или заказчиков. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПод катом мы постарались подобрать для вас несколько практических советов о том, как создавать дизайн веб API,  планировать изменения, управлять версионированием и взаимодействовать с пользователями API. Мы постарались выяснить, какие сложности могут возникнуть и какие типичные ошибки обычно совершаются. А также прочитать о различных интересных фактах из истории и об ожидаемых изменениях в будущем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаш сегодняшний собеседник Дилан Битти (Dylan Beattie) имеет высокую репутацию на \u003Ca href=\"http:\u002F\u002Fstackoverflow.com\u002Fusers\u002F5017\u002Fdylan-beattie\"\u003EStackOverflow\u003C\u002Fa\u003E, а значит умеет хорошо, интересно и, что немаловажно, правильно отвечать на вопросы. Большой опыт позволяет ему на собственных примерах рассказать что-то из прошлого, а профессия архитектора держит в тонусе и приносит новые знания о трендах и передовых технологиях.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fweb\u002Fad1\u002F99f\u002F29c\u002Fad199f29c59f44b4bf39909c16ae935d.jpg\"\u002F\u003E\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"353848":{"id":"353848","timePublished":"2018-04-19T13:00:06+00:00","isCorporative":true,"lang":"ru","titleHtml":"Что нового в PostgreSQL 11: встроенный веб-поиск","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"53377","alias":"afiskon","fullname":"Aleksander Alekseev","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F39b\u002F20d\u002F269\u002F39b20d269418a83093ddb9915b2fb7d4.png","speciality":"Software Developer"},"statistics":{"commentsCount":11,"favoritesCount":76,"readingCount":18912,"score":67,"votesCount":69},"hubs":[{"id":"19663","alias":"postgrespro","type":"corporative","title":"Блог компании Postgres Professional","titleHtml":"Блог компании Postgres Professional","isProfiled":false},{"id":"358","alias":"postgresql","type":"collective","title":"PostgreSQL","titleHtml":"PostgreSQL","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Flq\u002Fdc\u002Fus\u002Flqdcusv5zw4a5q3xo8vtjz2whxu.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fpostgrespro\u002Fblog\u002F353126\u002F\"\u003EПродолжая\u003C\u002Fa\u003E тему интересных возможностей грядущего релиза PostgreSQL 11, я хотел бы рассказать про \u003Cb\u003Eновую встроенную функцию websearch_to_tsquery\u003C\u002Fb\u003E. Соответствующий \u003Ca href=\"https:\u002F\u002Fgit.postgresql.org\u002Fgitweb\u002F?p=postgresql.git;a=commit;h=1664ae1978bf0f5ee940dc2fc8313e6400a7e7da\"\u003Eпатч\u003C\u002Fa\u003E разработали Виктор Дробный и Дмитрий Иванов, с правками от Федора Сигаева. Давайте же разберемся, что реализовано в этом патче.","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null},"483202":{"id":"483202","timePublished":"2020-01-10T06:47:18+00:00","isCorporative":false,"lang":"ru","titleHtml":"Введение в REST API — RESTful веб-сервисы","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Ranga Karanam","originalUrl":"https:\u002F\u002Fwww.springboottutorial.com\u002Fintroduction-to-rest-api"}},{"type":"tutorial","data":null}],"author":{"id":"2187018","alias":"val6852","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":12,"favoritesCount":406,"readingCount":373818,"score":1,"votesCount":15},"hubs":[{"id":"17690","alias":"api","type":"collective","title":"API","titleHtml":"API","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Эта статья начинает серию постов о разработке REST API:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EВведение в REST API — RESTful веб-сервисы\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483204\u002F\"\u003EРазличия REST и SOAP\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483206\u002F\"\u003EРазработка REST API — что такое Contract First (контракт в первую очередь)?\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483322\u002F\"\u003EРазработка REST API — что такое Code First (код в первую очередь)?\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483328\u002F\"\u003EREST API — Что такое HATEOAS?\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F483374\u002F\"\u003EРекомендации по REST API — примеры проектирования веб-сервисов на Java и Spring\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u003E\r\nОна содержит введение в RESTful веб-сервисы и краткий обзор REST и HTTP.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fuf\u002Ffc\u002Fqb\u002Fuffcqbxqp_7jy3xadbybzp3l19u.png\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EIntro to RESTful Web Services\u003C\u002Fi\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"aleks_raiden":{"scoreStats":{"score":21.2,"votesCount":52},"rating":0,"relatedData":null,"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fcontractmarketcap.com","value":"https:\u002F\u002Fcontractmarketcap.com"}],"authorContacts":[{"title":"Сайт","url":"https:\u002F\u002Fcontractmarketcap.com","value":"https:\u002F\u002Fcontractmarketcap.com"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"16724","alias":"aleks_raiden","fullname":"Aleks Lozovyuk","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F74c\u002Fd3a\u002F1c7\u002F74cd3a1c7a2abf2d309a96b9771d365c.jpg","speciality":"Криптовалюты, финансы, распределенные системы"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
