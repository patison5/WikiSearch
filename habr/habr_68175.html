<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Многопоточное скачивание в cURL на PHP / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/68175\/"},"headline":"Многопоточное скачивание в cURL на PHP","datePublished":"2009-08-28T13:42:00+04:00","dateModified":"2018-10-01T10:56:57+03:00","author":{"@type":"Person","name":"Алексей"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а м...","url":"https:\/\/habr.com\/ru\/post\/68175\/#post-content-body","about":["h_php","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/68175\/a82456d17940aba445a80ebab3c245bf\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Многопоточное скачивание в cURL на PHP" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Многопоточное скачивание в cURL на PHP" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Многопоточное скачивание в cURL на PHP" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)

Скачиванием..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)

Скачиванием..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)

Скачиванием..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)

Скачиванием..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)

Скачиванием..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="68175" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2009-08-28T09:42:00.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/68175/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/68175/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/68175/a82456d17940aba445a80ebab3c245bf/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/AterCattus/" title="AterCattus" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/56f/94a/7a8/56f94a7a870440f297824d7266e43cfe.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/AterCattus/" class="tm-user-info__username">
      AterCattus
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2009-08-28T09:42:00.000Z" title="2009-08-28, 13:42">28  августа  2009 в 13:42</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Многопоточное скачивание в cURL на PHP</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/php/" class="tm-article-snippet__hubs-item-link"><span>PHP</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)<br/>
<br/>
Скачиванием через cURL не пользовался пусть даже из интереса только ленивый. Будь-то из консоли, либо реализуя код на каком-либо ЯП. Решения блокирующего скачивания одной ссылки валяются на каждом углу сети, к примеру на <a href="http://php.net/manual/en/function.curl-init.php">php.net</a>. Однако, если рассматривать реализации на PHP, то такой подход подчас не подходит ввиду высоких временных затрат на вспомогательные операции ( dns lookup, request waiting и подобные ). Для скачивания большого числа страниц последовательный вариант не приемлем. Если устраивает — дальше можно не читать :)<br/>
<a name="habracut"></a><br/>
 В Perl, к примеру, можно применять <b>fork</b>() либо нити (<b>use threads</b>) для распараллеливания однопоточных скачиваний. Это не считая богатых возможностей библиотек данного языка. Я лично применял нити и LWP. Однако, речь идёт о PHP, и тут с распараллеливанием большие проблемы ввиду отсутствия данной возможности в принципе. <i>Если кто знает, как создавать нити, сообщите, но я не нашел пока достойных решений.</i> Да, в cURL есть функции <b>curl_multi_*</b>, но вот примеры реализаций на их основе меня не устроили. И, в итоге, решил собрать свой велосипед.<br/>
<br/>
Первоначально отсылаю к простейшему примеру из <a href="http://www.php.net/manual/en/function.curl-multi-init.php">офф. справочника</a>. Позволю себе привести его тут :)<br/>
<font color="#000000"><font color="#0000BB">&lt;?php<br/>
    </font><font color="#FF8000">// create both cURL resources<br/>
    </font><font color="#0000BB">$ch1 </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">();<br/>
    </font><font color="#0000BB">$ch2 </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">();<br/>
    <br/>
    </font><font color="#FF8000">// set URL and other appropriate options<br/>
<br/>
    </font><font color="#0000BB">curl_setopt</font><font color="#007700">(</font><font color="#0000BB">$ch1</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#DD0000">«<a href="http://www.example.com/">www.example.com</a>»</font><font color="#007700">);<br/>
    </font><font color="#0000BB">curl_setopt</font><font color="#007700">(</font><font color="#0000BB">$ch1</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_HEADER</font><font color="#007700">, </font><font color="#0000BB">0</font><font color="#007700">);<br/>
    </font><font color="#0000BB">curl_setopt</font><font color="#007700">(</font><font color="#0000BB">$ch2</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#DD0000">«<a href="http://www.php.net/">www.php.net</a>»</font><font color="#007700">);<br/>
<br/>
    </font><font color="#0000BB">curl_setopt</font><font color="#007700">(</font><font color="#0000BB">$ch2</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_HEADER</font><font color="#007700">, </font><font color="#0000BB">0</font><font color="#007700">);<br/>
    <br/>
    </font><font color="#FF8000">//create the multiple cURL handle<br/>
    </font><font color="#0000BB">$mh </font><font color="#007700">= </font><font color="#0000BB">curl_multi_init</font><font color="#007700">();<br/>
<br/>
    <br/>
    </font><font color="#FF8000">//add the two handles<br/>
    </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">,</font><font color="#0000BB">$ch1</font><font color="#007700">);<br/>
    </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">,</font><font color="#0000BB">$ch2</font><font color="#007700">);<br/>
<br/>
    <br/>
    </font><font color="#0000BB">$running</font><font color="#007700">=</font><font color="#0000BB">null</font><font color="#007700">;<br/>
    </font><font color="#FF8000">//execute the handles<br/>
    </font><font color="#007700">do {<br/>
        </font><font color="#0000BB">curl_multi_exec</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">,</font><font color="#0000BB">$running</font><font color="#007700">);<br/>
    } while (</font><font color="#0000BB">$running </font><font color="#007700">> </font><font color="#0000BB">0</font><font color="#007700">);<br/>
<br/>
    <br/>
    </font><font color="#FF8000">//close the handles<br/>
    </font><font color="#0000BB">curl_multi_remove_handle</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch1</font><font color="#007700">);<br/>
    </font><font color="#0000BB">curl_multi_remove_handle</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch2</font><font color="#007700">);<br/>
    </font><font color="#0000BB">curl_multi_close</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">);<br/>
<br/>
</font><font color="#0000BB">?></font><br/>
</font><br/>
 Код отличается от однопоточного подхода более сложной организацией взаимодействия прикладного кода с библиотекой:<br/>
 1) Для каждого соединения выполняется свой <b>curl_init</b>() и задаются параметры через <b>curl_setopt</b>(). Тут всё стандартно, привожу без объяснений.<br/>
 2) Для общего управления скачиванием вызовом <b>curl_multi_init</b>() создается отдельный дескриптор, через который и будет производиться вся дальнейшая работа.<br/>
 3) К данному дескриптору вызовом <b>curl_multi_add_handle</b>() цепляются созданные в начале отдельный соединения.<br/>
 Подготовительный этап завершен, теперь непосредственно скачивание:<br/>
 4) Скачивание библиотекой выполняется автоматически, явного вызова как было с <b>curl_exec</b>() теперь нет. Его заменяет многократный вызов <b>curl_multi_exec</b>(). Несмотря на схожее название, данная функция выполняет несколько другую роль — она блокирующе информирует об изменении числа активных потоков (ну и возникших ошибок). Второй параметр при вызове — ссылка на числовую переменную, в которую сохраняется число активных в данный момент соединений. Количество изменилось — значит какой-то поток завершил работу. Вот по этой причине цикл скачивания и реализован через<br/>
<font color="#007700">do {<br/>
</font><font color="#0000BB">curl_multi_exec</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">,</font><font color="#0000BB">$running</font><font color="#007700">);<br/>
} while (</font><font color="#0000BB">$running </font><font color="#007700">> </font><font color="#0000BB">0</font><font color="#007700">);<br/>
</font><br/>
 5) Ну и наконец после скачивания выполняется освобождение ресурсов. Важно! Хоть соединения, созданные <b>curl_init</b>() и «цепляются» к основному дескриптору, он их автоматически не закрывает, это нужно делать вручную вызовом <b>curl_multi_remove_handle</b>() в добавление к <b>curl_close</b>().<br/>
<br/>
Кому-то может хватить и такой реализации, и они могут дальше не читать. Я же пойду дальше.<br/>
 Что в данной реализации плохого? Пара наиболее явных моментов:<br/>
 <ol>
<li>жёсткое ограничение на скачивание 2х ссылок, заданное прямо в коде</li>
<li>получаемые страницы выводятся прямо в STDOUT</li>
</ol><br/>
 Это лишь часть, остальное обсуждается далее.<br/>
<br/>
Исправляю указанные недостатки и получаю, к примеру, следующее:<br/>
<font color="#000000"><font color="#0000BB">&lt;?php<br/>
    $urls </font><font color="#007700">= array( </font><font color="#DD0000">«<a href="http://www.example.com/">www.example.com</a>»</font><font color="#007700">, </font><font color="#DD0000">«<a href="http://www.php.net/">www.php.net</a>» </font><font color="#007700">);<br/>
    <br/>
    </font><font color="#0000BB">$mh </font><font color="#007700">= </font><font color="#0000BB">curl_multi_init</font><font color="#007700">();<br/>
    <br/>
    </font><font color="#0000BB">$chs </font><font color="#007700">= array();<br/>
<br/>
    foreach ( </font><font color="#0000BB">$urls </font><font color="#007700">as </font><font color="#0000BB">$url </font><font color="#007700">) {<br/>
        </font><font color="#0000BB">$chs</font><font color="#007700">[] = ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">() );<br/>
        </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#0000BB">$url </font><font color="#007700">);<br/>
<br/>
        </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_HEADER</font><font color="#007700">, </font><font color="#0000BB">0 </font><font color="#007700">);<br/>
        </font><font color="#FF8000">// CURLOPT_RETURNTRANSFER - возвращать значение как результат функции, а не выводить в stdout<br/>
<br/>
        </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_RETURNTRANSFER</font><font color="#007700">, </font><font color="#0000BB">1 </font><font color="#007700">);<br/>
        </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
    }<br/>
<br/>
    </font><font color="#0000BB">$prev_running </font><font color="#007700">= </font><font color="#0000BB">$running </font><font color="#007700">= </font><font color="#0000BB">null</font><font color="#007700">;<br/>
<br/>
    do {<br/>
        </font><font color="#0000BB">curl_multi_exec</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$running </font><font color="#007700">);<br/>
        <br/>
        if ( </font><font color="#0000BB">$running </font><font color="#007700">!= </font><font color="#0000BB">$prev_running </font><font color="#007700">) {<br/>
            </font><font color="#FF8000">// получаю информацию о текущих соединениях<br/>
<br/>
            </font><font color="#0000BB">$info </font><font color="#007700">= </font><font color="#0000BB">curl_multi_info_read</font><font color="#007700">( </font><font color="#0000BB">$mh </font><font color="#007700">);<br/>
            <br/>
            if ( </font><font color="#0000BB">is_array</font><font color="#007700">( </font><font color="#0000BB">$info </font><font color="#007700">) &amp;&amp; ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">$info</font><font color="#007700">[</font><font color="#DD0000">'handle'</font><font color="#007700">] ) ) {<br/>
<br/>
                </font><font color="#FF8000">// получаю содержимое загруженной страницы<br/>
                </font><font color="#0000BB">$content </font><font color="#007700">= </font><font color="#0000BB">curl_multi_getcontent</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
                <br/>
                </font><font color="#FF8000">// тут какая-то обработка текста страницы<br/>
<br/>
                // пока пусть будет как и в оригинале - вывод в STDOUT<br/>
                </font><font color="#007700">echo </font><font color="#0000BB">$content</font><font color="#007700">;<br/>
            }<br/>
            <br/>
<br/>
            </font><font color="#FF8000">// обновляю кешируемое число текущих активных соединений<br/>
            </font><font color="#0000BB">$prev_running </font><font color="#007700">= </font><font color="#0000BB">$running</font><font color="#007700">;<br/>
        }<br/>
        <br/>
    } while ( </font><font color="#0000BB">$running </font><font color="#007700">> </font><font color="#0000BB">0 </font><font color="#007700">);<br/>
<br/>
    <br/>
    foreach ( </font><font color="#0000BB">$chs </font><font color="#007700">as </font><font color="#0000BB">$ch </font><font color="#007700">) {<br/>
        </font><font color="#0000BB">curl_multi_remove_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
        </font><font color="#0000BB">curl_close</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
<br/>
    }<br/>
    </font><font color="#0000BB">curl_multi_close</font><font color="#007700">(</font><font color="#0000BB">$mh</font><font color="#007700">);<br/>
</font><font color="#0000BB">?></font><br/>
</font><br/>
<br/>
Далее, вряд ли в большинстве случаев будет достаточно просто выводить страницы в STDOUT. Тем более это происходит в произвольном порядке в зависимости от порядка реального скачивания (а не задания вызовами <b>curl_multi_add_handle</b>() ). Также, если скачивается большой объем, то нет смысла дожидаться получения всех страниц — можно уже начинать обрабатывать их по мере получения. Но и вариант с получением всех скопом также не стоит снимать со счетов.<br/>
 Для этого: 1) реализую всё в виде функции, 2) введу параметр, задающий callback-функцию, которая будет вызываться для каждого полученного файла. Если callback не задан — применяется вариант с получением всех страниц сразу. Вот пример:<br/>
<font color="#000000"><font color="#0000BB">&lt;?php<br/>
    </font><font color="#FF8000">// пример простейшего callback'а. практически dummy-func.<br/>
    </font><font color="#007700">function </font><font color="#0000BB">my_callback</font><font color="#007700">( </font><font color="#0000BB">$url</font><font color="#007700">, </font><font color="#0000BB">$content</font><font color="#007700">, </font><font color="#0000BB">$curl_status</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">) {<br/>
<br/>
        echo </font><font color="#DD0000">«Скачивание страницы [$url] »</font><font color="#007700">;<br/>
        if ( !</font><font color="#0000BB">$curl_status </font><font color="#007700">) {<br/>
            echo </font><font color="#DD0000">«было успешным. текст страницы:\n$content\n»</font><font color="#007700">;<br/>
<br/>
        }<br/>
        else {<br/>
            echo </font><font color="#DD0000">«выполнилось с ошибкой #$curl_status: »</font><font color="#007700">.</font><font color="#0000BB">curl_error</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">).</font><font color="#DD0000">"\n"</font><font color="#007700">;<br/>
        }<br/>
<br/>
    }<br/>
    <br/>
    function </font><font color="#0000BB">http_load</font><font color="#007700">( </font><font color="#0000BB">$urls</font><font color="#007700">, </font><font color="#0000BB">$callback </font><font color="#007700">= </font><font color="#0000BB">false </font><font color="#007700">) {<br/>
        </font><font color="#0000BB">$mh </font><font color="#007700">= </font><font color="#0000BB">curl_multi_init</font><font color="#007700">();<br/>
        <br/>
<br/>
        </font><font color="#0000BB">$chs </font><font color="#007700">= array();<br/>
        foreach ( </font><font color="#0000BB">$urls </font><font color="#007700">as </font><font color="#0000BB">$url </font><font color="#007700">) {<br/>
            </font><font color="#0000BB">$chs</font><font color="#007700">[] = ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">() );<br/>
<br/>
            </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#0000BB">$url </font><font color="#007700">);<br/>
            </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_HEADER</font><font color="#007700">, </font><font color="#0000BB">0 </font><font color="#007700">);<br/>
            </font><font color="#FF8000">// CURLOPT_RETURNTRANSFER - возвращать значение как результат функции, а не выводить в stdout<br/>
<br/>
            </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_RETURNTRANSFER</font><font color="#007700">, </font><font color="#0000BB">1 </font><font color="#007700">);<br/>
            </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
        }<br/>
        <br/>
        </font><font color="#FF8000">// если $callback задан как false, то функция должна не вызывать $callback, а выдать страницы как результат работы<br/>
<br/>
        </font><font color="#007700">if ( </font><font color="#0000BB">$callback </font><font color="#007700">=== </font><font color="#0000BB">false </font><font color="#007700">) {<br/>
            </font><font color="#0000BB">$results </font><font color="#007700">= array();<br/>
        }<br/>
        <br/>
        </font><font color="#0000BB">$prev_running </font><font color="#007700">= </font><font color="#0000BB">$running </font><font color="#007700">= </font><font color="#0000BB">null</font><font color="#007700">;<br/>
<br/>
        do {<br/>
            </font><font color="#0000BB">curl_multi_exec</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$running </font><font color="#007700">);<br/>
            <br/>
            if ( </font><font color="#0000BB">$running </font><font color="#007700">!= </font><font color="#0000BB">$prev_running </font><font color="#007700">) {<br/>
                </font><font color="#FF8000">// получаю информацию о текущих соединениях<br/>
<br/>
                </font><font color="#0000BB">$info </font><font color="#007700">= </font><font color="#0000BB">curl_multi_info_read</font><font color="#007700">( </font><font color="#0000BB">$ghandler </font><font color="#007700">);<br/>
                <br/>
                if ( </font><font color="#0000BB">is_array</font><font color="#007700">( </font><font color="#0000BB">$info </font><font color="#007700">) &amp;&amp; ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">$info</font><font color="#007700">[</font><font color="#DD0000">'handle'</font><font color="#007700">] ) ) {<br/>
<br/>
                    </font><font color="#FF8000">// получаю содержимое загруженной страницы<br/>
                    </font><font color="#0000BB">$content </font><font color="#007700">= </font><font color="#0000BB">curl_multi_getcontent</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
                    <br/>
                    </font><font color="#FF8000">// скаченная ссылка<br/>
                    </font><font color="#0000BB">$url </font><font color="#007700">= </font><font color="#0000BB">curl_getinfo</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLINFO_EFFECTIVE_URL </font><font color="#007700">);<br/>
<br/>
                    <br/>
                    if ( </font><font color="#0000BB">$callback </font><font color="#007700">!== </font><font color="#0000BB">false </font><font color="#007700">) {<br/>
                        </font><font color="#FF8000">// вызов callback-обработчика<br/>
                        </font><font color="#0000BB">$callback</font><font color="#007700">( </font><font color="#0000BB">$url</font><font color="#007700">, </font><font color="#0000BB">$content</font><font color="#007700">, </font><font color="#0000BB">$info</font><font color="#007700">[</font><font color="#DD0000">'result'</font><font color="#007700">], </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
<br/>
                    }<br/>
                    else {<br/>
                        </font><font color="#FF8000">// добавление в хеш результатов<br/>
                        </font><font color="#0000BB">$results</font><font color="#007700">[ </font><font color="#0000BB">$url </font><font color="#007700">] = array( </font><font color="#DD0000">'content' </font><font color="#007700">=> </font><font color="#0000BB">$content</font><font color="#007700">, </font><font color="#DD0000">'status' </font><font color="#007700">=> </font><font color="#0000BB">$info</font><font color="#007700">[</font><font color="#DD0000">'result'</font><font color="#007700">], </font><font color="#DD0000">'status_text' </font><font color="#007700">=> </font><font color="#0000BB">curl_error</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">) );<br/>
<br/>
                    }<br/>
                    <br/>
                }<br/>
                <br/>
                </font><font color="#FF8000">// обновляю кешируемое число текущих активных соединений<br/>
                </font><font color="#0000BB">$prev_running </font><font color="#007700">= </font><font color="#0000BB">$running</font><font color="#007700">;<br/>
            }<br/>
            <br/>
<br/>
        } while ( </font><font color="#0000BB">$running </font><font color="#007700">> </font><font color="#0000BB">0 </font><font color="#007700">);<br/>
        <br/>
        foreach ( </font><font color="#0000BB">$chs </font><font color="#007700">as </font><font color="#0000BB">$ch </font><font color="#007700">) {<br/>
            </font><font color="#0000BB">curl_multi_remove_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
<br/>
            </font><font color="#0000BB">curl_close</font><font color="#007700">( </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
        }<br/>
        </font><font color="#0000BB">curl_multi_close</font><font color="#007700">( </font><font color="#0000BB">$mh </font><font color="#007700">);<br/>
        <br/>
        </font><font color="#FF8000">// результаты<br/>
        </font><font color="#007700">return ( </font><font color="#0000BB">$callback </font><font color="#007700">!== </font><font color="#0000BB">false </font><font color="#007700">) ? </font><font color="#0000BB">true </font><font color="#007700">: </font><font color="#0000BB">$results</font><font color="#007700">;<br/>
<br/>
    }<br/>
    <br/>
    </font><font color="#0000BB">$urls </font><font color="#007700">= array( </font><font color="#DD0000">«<a href="http://www.example.com/">www.example.com</a>»</font><font color="#007700">, </font><font color="#DD0000">«<a href="http://www.php.net/">www.php.net</a>» </font><font color="#007700">);<br/>
    <br/>
    </font><font color="#FF8000">// вариант простой выдачи<br/>
    </font><font color="#0000BB">print_r</font><font color="#007700">( </font><font color="#0000BB">http_load</font><font color="#007700">( </font><font color="#0000BB">$urls </font><font color="#007700">) );<br/>
<br/>
    <br/>
    </font><font color="#FF8000">// вариант с callback<br/>
    </font><font color="#0000BB">var_export</font><font color="#007700">( </font><font color="#0000BB">http_load</font><font color="#007700">( </font><font color="#0000BB">$urls</font><font color="#007700">, </font><font color="#0000BB">my_callback </font><font color="#007700">) );<br/>
    <br/>
</font><font color="#0000BB">?></font><br/>
</font><br/>
Вот уже гораздо интереснее. Важный момент: при callback 4ый параметр — дескриптор соединения $ch, а при выдаче результатов хешем — просто строковое описание возникшей ошибки (ну или пустая строка, если всё нормально). Почему? Потому что curl_error() требует передачи дескриптора, который закрывается в конце работы функции. Так что в callback он еще существует и мы можем его использовать, а вот в хеше он уже ничего ценного дать не может. Как вариант, строковые описания кодов ошибок можно взять <a href="http://curl.haxx.se/libcurl/c/libcurl-errors.html">тут</a>.<br/>
<br/>
Итак, идём дальше. Хочется вызывать функцию не только для массива ссылок, но и иметь возможность скачать ей единственную страницу. Для этого нужно добавить всего-то одну строчку:<br/>
<font color="#000000"><font color="#0000BB">&lt;?php </font><font color="#007700">function </font><font color="#0000BB">http_load</font><font color="#007700">( </font><font color="#0000BB">$urls</font><font color="#007700">, </font><font color="#0000BB">$callback </font><font color="#007700">= </font><font color="#0000BB">false </font><font color="#007700">) {<br/>
…<br/>
        </font><font color="#FF8000">// даже если передан единственный параметр - считаю его элементом массива<br/>
<br/>
        // это аналог: $urls = is_array( $urls ) ? $urls : array( $urls );<br/>
        </font><font color="#0000BB">$urls </font><font color="#007700">= (array)</font><font color="#0000BB">$urls</font><font color="#007700">;<br/>
<br/>
.... </font><font color="#0000BB">?></font><br/>
</font><br/>
Вот теперь можно качать ссылки по одной: http_load( 'google.com' ). Этакий возврат к истокам.<br/>
<br/>
Потом мне потребовалось задавать много больше передаваемых заголовков для соединений. Указывать их по одному через curl_setopt() не практично. Лучше воспользоваться функцией <a href="http://ru.php.net/manual/en/function.curl-setopt-array.php">curl_setopt_array</a>. Переделываю и получаю (часть кода):<br/>
<font color="#000000"><font color="#0000BB">&lt;?php<br/>
    </font><font color="#007700">{ </font><font color="#FF8000">// общие для всех соединений заголовки<br/>
        </font><font color="#0000BB">$ext_headers </font><font color="#007700">= array(<br/>
                            </font><font color="#DD0000">'Expect:'</font><font color="#007700">,<br/>
                            </font><font color="#DD0000">'Accept: text/html,application/xhtml+xml,application/xml;q=0.9'</font><font color="#007700">,<br/>
<br/>
                            </font><font color="#DD0000">'Accept-Language: ru,en-us;q=0.7,en;q=0.7'</font><font color="#007700">,<br/>
                            </font><font color="#FF8000">//'Accept-Encoding: gzip,deflate', // нужно потом распаковывать. ну его пока…<br/>
                            </font><font color="#DD0000">'Accept-Charset: utf-8,windows-1251;q=0.7,*;q=0.5'</font><font color="#007700">,<br/>
        );<br/>
        </font><font color="#0000BB">$curl_options </font><font color="#007700">= array(<br/>
<br/>
                                </font><font color="#0000BB">CURLOPT_PORT            </font><font color="#007700">=> </font><font color="#0000BB">80</font><font color="#007700">,<br/>
                                </font><font color="#0000BB">CURLOPT_RETURNTRANSFER    </font><font color="#007700">=> </font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#FF8000">// возвращать значение как результат функции, а не выводить в stdout<br/>
<br/>
                                </font><font color="#0000BB">CURLOPT_BINARYTRANSFER    </font><font color="#007700">=> </font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#FF8000">// передавать в binary-safe<br/>
                                </font><font color="#0000BB">CURLOPT_CONNECTTIMEOUT    </font><font color="#007700">=> </font><font color="#0000BB">10</font><font color="#007700">, </font><font color="#FF8000">// таймаут соединения ( lookup + connect )<br/>
<br/>
                                </font><font color="#0000BB">CURLOPT_TIMEOUT            </font><font color="#007700">=> </font><font color="#0000BB">30</font><font color="#007700">, </font><font color="#FF8000">// таймаут на получение данных<br/>
                                </font><font color="#0000BB">CURLOPT_USERAGENT        </font><font color="#007700">=> </font><font color="#DD0000">'Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.1) Gecko/20090716 Ubuntu/9.04 (jaunty) Shiretoko/3.5.1'</font><font color="#007700">,<br/>
<br/>
                                </font><font color="#0000BB">CURLOPT_VERBOSE            </font><font color="#007700">=> </font><font color="#0000BB">2</font><font color="#007700">, </font><font color="#FF8000">// уровень информирования<br/>
                                </font><font color="#0000BB">CURLOPT_HEADER            </font><font color="#007700">=> </font><font color="#0000BB">0</font><font color="#007700">, </font><font color="#FF8000">// заголовок не получается<br/>
                                </font><font color="#0000BB">CURLOPT_FOLLOWLOCATION    </font><font color="#007700">=> </font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#FF8000">// следовать редиректам<br/>
<br/>
                                </font><font color="#0000BB">CURLOPT_MAXREDIRS        </font><font color="#007700">=> </font><font color="#0000BB">7</font><font color="#007700">, </font><font color="#FF8000">// максимальное число редиректов<br/>
                                </font><font color="#0000BB">CURLOPT_AUTOREFERER        </font><font color="#007700">=> </font><font color="#0000BB">1</font><font color="#007700">, </font><font color="#FF8000">// при редиректе подставлять в «Referer:» значение из «Location:»<br/>
<br/>
                                // CURLOPT_FRESH_CONNECT    => 0, // каждый раз использовать новое соединение<br/>
                                </font><font color="#0000BB">CURLOPT_HTTPHEADER        </font><font color="#007700">=> </font><font color="#0000BB">$ext_headers</font><font color="#007700">,<br/>
                            );<br/>
    }<br/>
    <br/>
<br/>
    function </font><font color="#0000BB">http_load</font><font color="#007700">( </font><font color="#0000BB">$urls</font><font color="#007700">, </font><font color="#0000BB">$callback </font><font color="#007700">= </font><font color="#0000BB">false </font><font color="#007700">) {<br/>
        global </font><font color="#0000BB">$curl_options</font><font color="#007700">;<br/>
        <br/>
        </font><font color="#0000BB">$mh </font><font color="#007700">= </font><font color="#0000BB">curl_multi_init</font><font color="#007700">();<br/>
<br/>
        if ( </font><font color="#0000BB">$mh </font><font color="#007700">=== </font><font color="#0000BB">false </font><font color="#007700">) return </font><font color="#0000BB">false</font><font color="#007700">;<br/>
        <br/>
        </font><font color="#0000BB">$urls </font><font color="#007700">= (array)</font><font color="#0000BB">$urls</font><font color="#007700">;<br/>
        <br/>
        </font><font color="#0000BB">$chs </font><font color="#007700">= array();<br/>
<br/>
        foreach ( </font><font color="#0000BB">$urls </font><font color="#007700">as </font><font color="#0000BB">$url </font><font color="#007700">) {<br/>
            </font><font color="#0000BB">$chs</font><font color="#007700">[] = ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">() );<br/>
            <br/>
<br/>
            </font><font color="#0000BB">curl_setopt_array</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">$curl_options </font><font color="#007700">); </font><font color="#FF8000">// задаю заголовки скопом<br/>
            </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#0000BB">$url </font><font color="#007700">);<br/>
<br/>
            <br/>
            </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
        }<br/>
…<br/>
</font><font color="#0000BB">?></font><br/>
</font><br/>
<br/>
Прикидываемся Огнелисом. Заголовки я прокомментировал. За подробным объяснением отправляю <a href="http://ru.php.net/manual/en/function.curl-setopt.php">сюда</a>.<br/>
И в догонку к этим заголовкам добавляется третий параметр в функцию:<br/>
<code>&lt;?php function http_load( $urls, $callback = false, $urls_params = array() ) {} ?></code><br/>
в котором можно указывать свои заголовки, которые будут дополнительно преданы в соединения при их инициализации. Таким образом можно успешно отправлять POST запросы с параметрами либо указывать свои рефералы и формат передаваемых данных (при компрессии к примеру).<br/>
<font color="#000000"><font color="#0000BB">&lt;?php<br/>
</font><font color="#007700">…<br/>
        foreach ( </font><font color="#0000BB">$urls </font><font color="#007700">as </font><font color="#0000BB">$ind </font><font color="#007700">=> </font><font color="#0000BB">$url </font><font color="#007700">) {<br/>
            </font><font color="#0000BB">$chs</font><font color="#007700">[] = ( </font><font color="#0000BB">$ch </font><font color="#007700">= </font><font color="#0000BB">curl_init</font><font color="#007700">() );<br/>
<br/>
            <br/>
            </font><font color="#0000BB">curl_setopt_array</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">$curl_options </font><font color="#007700">); </font><font color="#FF8000">// задаю заголовки скопом<br/>
            </font><font color="#0000BB">curl_setopt</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">CURLOPT_URL</font><font color="#007700">, </font><font color="#0000BB">$url </font><font color="#007700">);<br/>
<br/>
            <br/>
            </font><font color="#FF8000">// есть дополнительные параметры для инициализации данного соединения?<br/>
            </font><font color="#007700">if ( isset( </font><font color="#0000BB">$urls_params</font><font color="#007700">[ </font><font color="#0000BB">$ind </font><font color="#007700">] ) &amp;&amp; </font><font color="#0000BB">is_array</font><font color="#007700">( </font><font color="#0000BB">$urls_params</font><font color="#007700">[ </font><font color="#0000BB">$ind </font><font color="#007700">] ) ) {<br/>
<br/>
                </font><font color="#0000BB">curl_setopt_array</font><font color="#007700">( </font><font color="#0000BB">$ch</font><font color="#007700">, </font><font color="#0000BB">$urls_params</font><font color="#007700">[ </font><font color="#0000BB">$ind </font><font color="#007700">] );<br/>
            }<br/>
            <br/>
            </font><font color="#0000BB">curl_multi_add_handle</font><font color="#007700">( </font><font color="#0000BB">$mh</font><font color="#007700">, </font><font color="#0000BB">$ch </font><font color="#007700">);<br/>
<br/>
        }<br/>
…<br/>
</font><font color="#0000BB">?></font><br/>
</font><br/>
<br/>
Вот такая функция. Еще можно было бы написать про работу с куками и POST-запросами, но это уж если получу инвайт. И так понаписал много, многие ли осилили? ;)</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bphp%5D" class="tm-article-body__tags-item-link">php</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bcurl%5D" class="tm-article-body__tags-item-link">curl</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F%5D" class="tm-article-body__tags-item-link">функция</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE%5D" class="tm-article-body__tags-item-link">руководство</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%5D" class="tm-article-body__tags-item-link">разработка</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/php/" class="tm-article-body__tags-item-link">
                  PHP
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 17: ↑17 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 17: ↑17 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+17</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    106
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/68175/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      20
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/AterCattus/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/56f/94a/7a8/56f94a7a870440f297824d7266e43cfe.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 227 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    133.2
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Алексей</span> <a href="/ru/users/AterCattus/" class="tm-user-card__nickname">
          @AterCattus
        </a> <!----></div> <p class="tm-user-card__short-info">Архитектор</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <button type="submit" class="tm-user-card__button btn btn_transparent btn_small">
      Задонатить
    </button> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/68175/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 20 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2017-04-24T13:10:59.000Z" title="2017-04-24, 16:10">24  апреля  2017 в 16:10</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/327248/" class="tm-article-title__link"><span>Bash-скрипты, часть 6: функции и разработка библиотек</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 50: ↑47 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 50: ↑47 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+44</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">148K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    315
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/327248/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      33
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2014-06-19T05:14:53.000Z" title="2014-06-19, 09:14">19  июня  2014 в 09:14</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/226753/" class="tm-article-title__link"><span>Боятся ли PHP-разработчики функций?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 69: ↑37 и ↓32</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 69: ↑37 и ↓32" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+5</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">16K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    34
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/226753/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      60
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2013-01-22T12:15:31.000Z" title="2013-01-22, 16:15">22  января  2013 в 16:15</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/166633/" class="tm-article-title__link"><span>Сравнение производительности: curl, php curl, php socket, python pycurl</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 12: ↑8 и ↓4</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 12: ↑8 и ↓4" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+4</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">28K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    50
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/166633/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      16
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T09:00:04.000Z" title="2021-09-27, 12:00">сегодня в 12:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580060/" class="tm-article-title__link"><span>Арракис, который мы заслужили</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 141: ↑136 и ↓5</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 141: ↑136 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+131</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">19K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    37
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580060/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      100
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T13:03:14.000Z" title="2021-09-27, 16:03">сегодня в 16:03</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580124/" class="tm-article-title__link"><span>Электролюминесцентные индикаторы из прошлого</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 65: ↑65 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 65: ↑65 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+65</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    35
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580124/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      11
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T16:41:21.000Z" title="2021-09-27, 19:41">сегодня в 19:41</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/lamptest/blog/580228/" class="tm-article-title__link"><span>Идеальная светодиодная лампа за 21 рубль</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 60: ↑59 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 60: ↑59 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+58</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.8K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    25
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/lamptest/blog/580228/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      18
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T21:49:14.000Z" title="2021-09-27, 00:49">сегодня в 00:49</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580092/" class="tm-article-title__link"><span>30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 48: ↑48 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 48: ↑48 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+48</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">19K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    57
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580092/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      93
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T12:53:02.000Z" title="2021-09-27, 15:53">сегодня в 15:53</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580210/" class="tm-article-title__link"><span>PHP Дайджест № 212 (13 – 27 сентября 2021)</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 33: ↑33 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 33: ↑33 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+33</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    9
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580210/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      1
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="68175" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/68175/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/68175/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"68175":{"id":"68175","timePublished":"2009-08-28T09:42:00+00:00","isCorporative":false,"lang":"ru","titleHtml":"Многопоточное скачивание в cURL на PHP","leadData":{"textHtml":"В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСкачиванием через cURL не пользовался пусть даже из интереса только ленивый. Будь-то из консоли, либо реализуя код на каком-либо ЯП. Решения блокирующего скачивания одной ссылки валяются на каждом углу сети, к примеру на \u003Ca href=\"http:\u002F\u002Fphp.net\u002Fmanual\u002Fen\u002Ffunction.curl-init.php\"\u003Ephp.net\u003C\u002Fa\u003E. Однако, если рассматривать реализации на PHP, то такой подход подчас не подходит ввиду высоких временных затрат на вспомогательные операции ( dns lookup, request waiting и подобные ). Для скачивания большого числа страниц последовательный вариант не приемлем. Если устраивает — дальше можно не читать :)\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":133.2,"votesCount":227},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":"41001727210359","paymentPayPalMe":null,"paymentWebmoney":null},"id":"50814","alias":"AterCattus","fullname":"Алексей","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F56f\u002F94a\u002F7a8\u002F56f94a7a870440f297824d7266e43cfe.jpg","speciality":"Архитектор"},"statistics":{"commentsCount":20,"favoritesCount":106,"readingCount":25922,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EВ данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСкачиванием через cURL не пользовался пусть даже из интереса только ленивый. Будь-то из консоли, либо реализуя код на каком-либо ЯП. Решения блокирующего скачивания одной ссылки валяются на каждом углу сети, к примеру на \u003Ca href=\"http:\u002F\u002Fphp.net\u002Fmanual\u002Fen\u002Ffunction.curl-init.php\"\u003Ephp.net\u003C\u002Fa\u003E. Однако, если рассматривать реализации на PHP, то такой подход подчас не подходит ввиду высоких временных затрат на вспомогательные операции ( dns lookup, request waiting и подобные ). Для скачивания большого числа страниц последовательный вариант не приемлем. Если устраивает — дальше можно не читать :)\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n В Perl, к примеру, можно применять \u003Cb\u003Efork\u003C\u002Fb\u003E() либо нити (\u003Cb\u003Euse threads\u003C\u002Fb\u003E) для распараллеливания однопоточных скачиваний. Это не считая богатых возможностей библиотек данного языка. Я лично применял нити и LWP. Однако, речь идёт о PHP, и тут с распараллеливанием большие проблемы ввиду отсутствия данной возможности в принципе. \u003Ci\u003EЕсли кто знает, как создавать нити, сообщите, но я не нашел пока достойных решений.\u003C\u002Fi\u003E Да, в cURL есть функции \u003Cb\u003Ecurl_multi_*\u003C\u002Fb\u003E, но вот примеры реализаций на их основе меня не устроили. И, в итоге, решил собрать свой велосипед.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервоначально отсылаю к простейшему примеру из \u003Ca href=\"http:\u002F\u002Fwww.php.net\u002Fmanual\u002Fen\u002Ffunction.curl-multi-init.php\"\u003Eофф. справочника\u003C\u002Fa\u003E. Позволю себе привести его тут :)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F create both cURL resources\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch1 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch2 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F set URL and other appropriate options\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.example.com\u002F\"\u003Ewww.example.com\u003C\u002Fa\u003E»\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HEADER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch2\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.php.net\u002F\"\u003Ewww.php.net\u003C\u002Fa\u003E»\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch2\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HEADER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002Fcreate the multiple cURL handle\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002Fadd the two handles\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch2\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Enull\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002Fexecute the handles\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Edo {\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_exec\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    } while (\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002Fclose the handles\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_remove_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_remove_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch2\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_close\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n Код отличается от однопоточного подхода более сложной организацией взаимодействия прикладного кода с библиотекой:\u003Cbr\u002F\u003E\r\n 1) Для каждого соединения выполняется свой \u003Cb\u003Ecurl_init\u003C\u002Fb\u003E() и задаются параметры через \u003Cb\u003Ecurl_setopt\u003C\u002Fb\u003E(). Тут всё стандартно, привожу без объяснений.\u003Cbr\u002F\u003E\r\n 2) Для общего управления скачиванием вызовом \u003Cb\u003Ecurl_multi_init\u003C\u002Fb\u003E() создается отдельный дескриптор, через который и будет производиться вся дальнейшая работа.\u003Cbr\u002F\u003E\r\n 3) К данному дескриптору вызовом \u003Cb\u003Ecurl_multi_add_handle\u003C\u002Fb\u003E() цепляются созданные в начале отдельный соединения.\u003Cbr\u002F\u003E\r\n Подготовительный этап завершен, теперь непосредственно скачивание:\u003Cbr\u002F\u003E\r\n 4) Скачивание библиотекой выполняется автоматически, явного вызова как было с \u003Cb\u003Ecurl_exec\u003C\u002Fb\u003E() теперь нет. Его заменяет многократный вызов \u003Cb\u003Ecurl_multi_exec\u003C\u002Fb\u003E(). Несмотря на схожее название, данная функция выполняет несколько другую роль — она блокирующе информирует об изменении числа активных потоков (ну и возникших ошибок). Второй параметр при вызове — ссылка на числовую переменную, в которую сохраняется число активных в данный момент соединений. Количество изменилось — значит какой-то поток завершил работу. Вот по этой причине цикл скачивания и реализован через\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#007700\"\u003Edo {\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_exec\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n} while (\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n 5) Ну и наконец после скачивания выполняется освобождение ресурсов. Важно! Хоть соединения, созданные \u003Cb\u003Ecurl_init\u003C\u002Fb\u003E() и «цепляются» к основному дескриптору, он их автоматически не закрывает, это нужно делать вручную вызовом \u003Cb\u003Ecurl_multi_remove_handle\u003C\u002Fb\u003E() в добавление к \u003Cb\u003Ecurl_close\u003C\u002Fb\u003E().\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКому-то может хватить и такой реализации, и они могут дальше не читать. Я же пойду дальше.\u003Cbr\u002F\u003E\r\n Что в данной реализации плохого? Пара наиболее явных моментов:\u003Cbr\u002F\u003E\r\n \u003Col\u003E\r\n\u003Cli\u003Eжёсткое ограничение на скачивание 2х ссылок, заданное прямо в коде\u003C\u002Fli\u003E\r\n\u003Cli\u003Eполучаемые страницы выводятся прямо в STDOUT\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\n Это лишь часть, остальное обсуждается далее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИсправляю указанные недостатки и получаю, к примеру, следующее:\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n    $urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array( \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.example.com\u002F\"\u003Ewww.example.com\u003C\u002Fa\u003E»\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.php.net\u002F\"\u003Ewww.php.net\u003C\u002Fa\u003E» \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[] = ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E() );\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HEADER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F CURLOPT_RETURNTRANSFER - возвращать значение как результат функции, а не выводить в stdout\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_RETURNTRANSFER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Enull\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    do {\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_exec\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E!= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F получаю информацию о текущих соединениях\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_info_read\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Eis_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) &amp;&amp; ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[\u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'handle'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] ) ) {\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F получаю содержимое загруженной страницы\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_getcontent\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n                \u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F тут какая-то обработка текста страницы\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                \u002F\u002F пока пусть будет как и в оригинале - вывод в STDOUT\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eecho \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n            }\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F обновляю кешируемое число текущих активных соединений\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n    } while ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_remove_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_close\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_close\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E(\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДалее, вряд ли в большинстве случаев будет достаточно просто выводить страницы в STDOUT. Тем более это происходит в произвольном порядке в зависимости от порядка реального скачивания (а не задания вызовами \u003Cb\u003Ecurl_multi_add_handle\u003C\u002Fb\u003E() ). Также, если скачивается большой объем, то нет смысла дожидаться получения всех страниц — можно уже начинать обрабатывать их по мере получения. Но и вариант с получением всех скопом также не стоит снимать со счетов.\u003Cbr\u002F\u003E\r\n Для этого: 1) реализую всё в виде функции, 2) введу параметр, задающий callback-функцию, которая будет вызываться для каждого полученного файла. Если callback не задан — применяется вариант с получением всех страниц сразу. Вот пример:\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F пример простейшего callback'а. практически dummy-func.\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Efunction \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Emy_callback\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_status\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        echo \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«Скачивание страницы [$url] »\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        if ( !\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_status \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            echo \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«было успешным. текст страницы:\\n$content\\n»\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n        else {\u003Cbr\u002F\u003E\r\n            echo \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«выполнилось с ошибкой #$curl_status: »\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E.\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_error\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E).\u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E\"\\n\"\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    function \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ehttp_load\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array();\u003Cbr\u002F\u003E\r\n        foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[] = ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E() );\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HEADER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F CURLOPT_RETURNTRANSFER - возвращать значение как результат функции, а не выводить в stdout\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_RETURNTRANSFER\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F если $callback задан как false, то функция должна не вызывать $callback, а выдать страницы как результат работы\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eif ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=== \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$results \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array();\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Enull\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        do {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_exec\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E!= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F получаю информацию о текущих соединениях\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_info_read\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ghandler \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n                \u003Cbr\u002F\u003E\r\n                if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Eis_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) &amp;&amp; ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[\u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'handle'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] ) ) {\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F получаю содержимое загруженной страницы\u003Cbr\u002F\u003E\r\n                    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_getcontent\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n                    \u003Cbr\u002F\u003E\r\n                    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F скаченная ссылка\u003Cbr\u002F\u003E\r\n                    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_getinfo\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLINFO_EFFECTIVE_URL \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                    \u003Cbr\u002F\u003E\r\n                    if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E!== \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n                        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F вызов callback-обработчика\u003Cbr\u002F\u003E\r\n                        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[\u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'result'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E], \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                    }\u003Cbr\u002F\u003E\r\n                    else {\u003Cbr\u002F\u003E\r\n                        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F добавление в хеш результатов\u003Cbr\u002F\u003E\r\n                        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$results\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[ \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] = array( \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'content' \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$content\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'status' \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$info\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[\u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'result'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E], \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'status_text' \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_error\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) );\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                    }\u003Cbr\u002F\u003E\r\n                    \u003Cbr\u002F\u003E\r\n                }\u003Cbr\u002F\u003E\r\n                \u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F обновляю кешируемое число текущих активных соединений\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$prev_running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n            }\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        } while ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$running \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0 \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_remove_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_close\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_close\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F результаты\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Ereturn ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E!== \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) ? \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Etrue \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E: \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$results\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array( \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.example.com\u002F\"\u003Ewww.example.com\u003C\u002Fa\u003E»\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E«\u003Ca href=\"http:\u002F\u002Fwww.php.net\u002F\"\u003Ewww.php.net\u003C\u002Fa\u003E» \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F вариант простой выдачи\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Eprint_r\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ehttp_load\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) );\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F вариант с callback\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Evar_export\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ehttp_load\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Emy_callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) );\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nВот уже гораздо интереснее. Важный момент: при callback 4ый параметр — дескриптор соединения $ch, а при выдаче результатов хешем — просто строковое описание возникшей ошибки (ну или пустая строка, если всё нормально). Почему? Потому что curl_error() требует передачи дескриптора, который закрывается в конце работы функции. Так что в callback он еще существует и мы можем его использовать, а вот в хеше он уже ничего ценного дать не может. Как вариант, строковые описания кодов ошибок можно взять \u003Ca href=\"http:\u002F\u002Fcurl.haxx.se\u002Flibcurl\u002Fc\u002Flibcurl-errors.html\"\u003Eтут\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, идём дальше. Хочется вызывать функцию не только для массива ссылок, но и иметь возможность скачать ей единственную страницу. Для этого нужно добавить всего-то одну строчку:\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Efunction \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ehttp_load\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n…\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F даже если передан единственный параметр - считаю его элементом массива\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        \u002F\u002F это аналог: $urls = is_array( $urls ) ? $urls : array( $urls );\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= (array)\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n.... \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nВот теперь можно качать ссылки по одной: http_load( 'google.com' ). Этакий возврат к истокам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПотом мне потребовалось задавать много больше передаваемых заголовков для соединений. Указывать их по одному через curl_setopt() не практично. Лучше воспользоваться функцией \u003Ca href=\"http:\u002F\u002Fru.php.net\u002Fmanual\u002Fen\u002Ffunction.curl-setopt-array.php\"\u003Ecurl_setopt_array\u003C\u002Fa\u003E. Переделываю и получаю (часть кода):\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E{ \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F общие для всех соединений заголовки\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ext_headers \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array(\u003Cbr\u002F\u003E\r\n                            \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'Expect:'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n                            \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'Accept: text\u002Fhtml,application\u002Fxhtml+xml,application\u002Fxml;q=0.9'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                            \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'Accept-Language: ru,en-us;q=0.7,en;q=0.7'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n                            \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F'Accept-Encoding: gzip,deflate', \u002F\u002F нужно потом распаковывать. ну его пока…\u003Cbr\u002F\u003E\r\n                            \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'Accept-Charset: utf-8,windows-1251;q=0.7,*;q=0.5'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n        );\u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_options \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array(\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_PORT            \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E80\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_RETURNTRANSFER    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F возвращать значение как результат функции, а не выводить в stdout\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_BINARYTRANSFER    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F передавать в binary-safe\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_CONNECTTIMEOUT    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E10\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F таймаут соединения ( lookup + connect )\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_TIMEOUT            \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E30\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F таймаут на получение данных\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_USERAGENT        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#DD0000\"\u003E'Mozilla\u002F5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.1) Gecko\u002F20090716 Ubuntu\u002F9.04 (jaunty) Shiretoko\u002F3.5.1'\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_VERBOSE            \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E2\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F уровень информирования\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HEADER            \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E0\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F заголовок не получается\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_FOLLOWLOCATION    \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F следовать редиректам\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_MAXREDIRS        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E7\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F максимальное число редиректов\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_AUTOREFERER        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E1\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F при редиректе подставлять в «Referer:» значение из «Location:»\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                                \u002F\u002F CURLOPT_FRESH_CONNECT    =\u003E 0, \u002F\u002F каждый раз использовать новое соединение\u003Cbr\u002F\u003E\r\n                                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_HTTPHEADER        \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ext_headers\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E,\u003Cbr\u002F\u003E\r\n                            );\u003Cbr\u002F\u003E\r\n    }\u003Cbr\u002F\u003E\r\n    \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n    function \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ehttp_load\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$callback \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n        global \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_options\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        if ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=== \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) return \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Efalse\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= (array)\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E;\u003Cbr\u002F\u003E\r\n        \u003Cbr\u002F\u003E\r\n        \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= array();\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[] = ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E() );\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_options \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E); \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F задаю заголовки скопом\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n…\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрикидываемся Огнелисом. Заголовки я прокомментировал. За подробным объяснением отправляю \u003Ca href=\"http:\u002F\u002Fru.php.net\u002Fmanual\u002Fen\u002Ffunction.curl-setopt.php\"\u003Eсюда\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\nИ в догонку к этим заголовкам добавляется третий параметр в функцию:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E&lt;?php function http_load( $urls, $callback = false, $urls_params = array() ) {} ?\u003E\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nв котором можно указывать свои заголовки, которые будут дополнительно преданы в соединения при их инициализации. Таким образом можно успешно отправлять POST запросы с параметрами либо указывать свои рефералы и формат передаваемых данных (при компрессии к примеру).\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#000000\"\u003E\u003Cfont color=\"#0000BB\"\u003E&lt;?php\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E…\u003Cbr\u002F\u003E\r\n        foreach ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eas \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ind \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E=\u003E \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E) {\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$chs\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[] = ( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E= \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_init\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E() );\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$curl_options \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E); \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F задаю заголовки скопом\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003ECURLOPT_URL\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$url \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#FF8000\"\u003E\u002F\u002F есть дополнительные параметры для инициализации данного соединения?\u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003Eif ( isset( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls_params\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[ \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ind \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] ) &amp;&amp; \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Eis_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls_params\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[ \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ind \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] ) ) {\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n                \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_setopt_array\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$urls_params\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E[ \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ind \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E] );\u003Cbr\u002F\u003E\r\n            }\u003Cbr\u002F\u003E\r\n            \u003Cbr\u002F\u003E\r\n            \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003Ecurl_multi_add_handle\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E( \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$mh\u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E, \u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E$ch \u003C\u002Ffont\u003E\u003Cfont color=\"#007700\"\u003E);\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n        }\u003Cbr\u002F\u003E\r\n…\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cfont color=\"#0000BB\"\u003E?\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот такая функция. Еще можно было бы написать про работу с куками и POST-запросами, но это уж если получу инвайт. И так понаписал много, многие ли осилили? ;)\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"php"},{"titleHtml":"curl"},{"titleHtml":"функция"},{"titleHtml":"руководство"},{"titleHtml":"разработка"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F68175\u002Fa82456d17940aba445a80ebab3c245bf\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F68175\u002Fa82456d17940aba445a80ebab3c245bf\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F68175\\\u002F\"},\"headline\":\"Многопоточное скачивание в cURL на PHP\",\"datePublished\":\"2009-08-28T13:42:00+04:00\",\"dateModified\":\"2018-10-01T10:56:57+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Алексей\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а м...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F68175\\\u002F#post-content-body\",\"about\":[\"h_php\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F68175\\\u002Fa82456d17940aba445a80ebab3c245bf\\\u002F\"]}","metaDescription":"В данном топике представлена на мой взгляд удобная и функциональная реализация многопоточного скачивания на cURL для PHP. Возможно кому-то она будет полезна, а мне принесёт инвайт ;)\r\n\r\nСкачиванием...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"572164":{"id":"572164","timePublished":"2021-09-27T11:37:23+00:00","isCorporative":false,"lang":"ru","titleHtml":"Первые шаги в ОТО: прецессия орбиты Меркурия","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"1832999","alias":"Yermack","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F690\u002F140\u002F823\u002F690140823f555d03574a59d46f648d24.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":20,"readingCount":2648,"score":16,"votesCount":16},"hubs":[{"relatedData":null,"id":"18840","alias":"julia","type":"collective","title":"Julia","titleHtml":"Julia","isProfiled":true},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21968","alias":"physics","type":"collective","title":"Физика","titleHtml":"Физика","isProfiled":false},{"relatedData":null,"id":"22022","alias":"astronomy","type":"collective","title":"Астрономия","titleHtml":"Астрономия","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКогда речь заходит о теории относительности, частенько на ровном месте разрастаются споры, которые были занесены в почву непонимания и обильно удобрены мифами, недосказанностью и недостаточной математической подготовкой. Даже на лекциях от некоторых профессоров можно услышать, что детище гения Эйнштейна не имеет практической пользы, а на робкие попытки пролепетать что-то про спутниковые системы навигации они пренебрежительно отмахиваются, дескать, там все сложно и двояко. \u003C\u002Fp\u003E\u003Cp\u003EТак что совершенно естественно желание попробовать провести некоторые расчеты самолично, потрогать формулы, покрутить параметры, чтобы постепенно заложить интуицию в столь горячей теме.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa9f\u002Ff59\u002Fb65\u002Fa9ff59b65da6e8b1e6f59314aadb8e3d.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa9f\u002Ff59\u002Fb65\u002Fa9ff59b65da6e8b1e6f59314aadb8e3d.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"прецессия"},{"titleHtml":"меркурий"},{"titleHtml":"теория относительности"},{"titleHtml":"уравнения эйнштейна"},{"titleHtml":"метрики"},{"titleHtml":"спасибо scihub"},{"titleHtml":"спасибо mathpix"},{"titleHtml":"астрология_точная_наука"}]},"579772":{"id":"579772","timePublished":"2021-09-27T05:32:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сливы процветают. Эксперт-«параноик» Майкл Баззель о защите личных данных","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Bazzell","originalUrl":"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F"}}],"author":{"id":"2297567","alias":"SearchInform_team","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":7,"readingCount":2316,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"22418","alias":"searchinform","type":"corporative","title":"Блог компании SearchInform","titleHtml":"Блог компании SearchInform","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНаш очередной пост из серии «интересное на иностранном языке» – рассказ Майкла Баззеля о том, как сберечь свои персональные данные от утечек. Майкл – знаковая фигура в сфере OSINT, работал в правительстве США и ФБР, его приглашали в качестве технического эксперта в сериал «Мистер Робот», который считают достойным с точки зрения достоверности. В личной жизни эксперт придерживается настолько жестких правил в отношении информационной гигиены, что некоторые считают его «неадекватом». Так ли это – может быть несколько мнений. \u003C\u002Fp\u003E\u003Cp\u003EОдин из факторов, который убеждает в правильном подходе Майкла, – что риски обнаружить свои данные в интернете стали существенно выше, потому что шифровальщики без разбору сливают в сеть все, до чего дотягиваются при атаках на бизнес. Приводим перевод \u003Ca href=\"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F\"\u003Eпоста Майкла Баззеля\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EАтакуют корпорации, а страдают люди\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EБольшинство людей не задумываются о том, как их касается проблема распространения вирусов-шифровальщиков. Логика такова: речь идет о проблемах компаний, это они вынуждены платить выкуп. При чем тут, казалось бы, обычные люди?! \u003C\u002Fp\u003E\u003Cp\u003EА при том, что преступники сменили тактику: сейчас они не просто шифруют данные, но и скачивают их, выкладывают в открытый доступ, если компании не платят им выкуп. Теперь давайте подумаем, что в этих слитых базах? Множество данных о сотрудниках, клиентах, контрагентах, с которыми компания-жертва работает.\u003C\u002Fp\u003E\u003Cp\u003EХочу сразу уточнить: я это пишу не потому что выступаю за уплату выкупа. Я за то, чтобы сопротивляться избыточному сбору данных там, где это не обязательно. Мы халатно относимся к своим ПДн, раздавая их по первому требованию.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"персональные данные"},{"titleHtml":"пдн"},{"titleHtml":"сёрчинформ"},{"titleHtml":"Майкл Баззел"},{"titleHtml":"утечки информации"}]},"579854":{"id":"579854","timePublished":"2021-09-27T06:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Видишь уязвимости? А они есть! Наше исследование популярных CMS-систем","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2684283","alias":"Solar_Pentest","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":8,"favoritesCount":21,"readingCount":3735,"score":27,"votesCount":29},"hubs":[{"relatedData":null,"id":"20826","alias":"solarsecurity","type":"corporative","title":"Блог компании Ростелеком-Солар","titleHtml":"Блог компании Ростелеком-Солар","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛьвиная доля всех работ по анализу защищенности внешнего периметра – это тестирование веб-приложений. Здесь могут быть как корпоративные решения, так и «домашние» разработки на базе различных публичных систем управления контентом (CMS). Мы всегда проводим глубокий анализ подобных решений на тестовых стендах и зачастую находим уязвимости нулевого дня. Собственно, из опыта таких проектов и родилась идея собрать исследовательскую команду и провести глубокий анализ популярных CMS-систем и различных плагинов для них. В этом посте мы поделимся результатами нашего исследования, а также продемонстрируем примеры уязвимого кода наиболее интересных, на наш взгляд, уязвимостей и примеры их эксплуатации. Конечно все эти уязвимости уже исправлены и описываются здесь с разрешения владельцев систем.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","buttonTextHtml":"Не всё то в безопасности, что с Bug Bounty","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"cms"},{"titleHtml":"уязвимости"},{"titleHtml":"уязвимости и их эксплуатация"},{"titleHtml":"уязвимость нулевого дня"}]},"579984":{"id":"579984","timePublished":"2021-09-27T15:37:51+00:00","isCorporative":true,"lang":"ru","titleHtml":"Добро пожаловать на хабрадегустацию","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2424555","alias":"anya_plotkina","fullname":"Аня Плоткина","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd4c\u002Ffcb\u002Fa37\u002Fd4cfcba3704ace3b85715c75b0db0d73.jpg","speciality":"DevRel"},"statistics":{"commentsCount":22,"favoritesCount":3,"readingCount":564,"score":8,"votesCount":20},"hubs":[{"relatedData":null,"id":"17931","alias":"skillfactory","type":"corporative","title":"Блог компании SkillFactory","titleHtml":"Блог компании SkillFactory","isProfiled":false},{"relatedData":null,"id":"161","alias":"habr","type":"collective","title":"Habr","titleHtml":"Habr","isProfiled":false}],"flows":[{"id":"4","alias":"marketing","title":"Маркетинг"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПривет, Хабр! Меня зовут Аня Плоткина, я занимаюсь Developer Relations в команде SkillFactory, развивая сообщество авторов и менторов, которые создают наш образовательный продукт. Это будет не совсем обычный пост, а скорее воззвание к хабрасообществу, так как я верю, что на Хабре собрались самые знающие люди в IT. Если коротко: мы хотим предоставить любому члену сообщества, который обладает экспертизой, продегустировать наше обучение. \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff28\u002F73d\u002F875\u002Ff2873d87531005948f40169432f05ebb.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff28\u002F73d\u002F875\u002Ff2873d87531005948f40169432f05ebb.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"курсы"},{"titleHtml":"edtech"},{"titleHtml":"образование"},{"titleHtml":"образование онлайн"},{"titleHtml":"образовательные ресурсы"}]},"580008":{"id":"580008","timePublished":"2021-09-27T06:30:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"Летний Магнитогорск","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2614609","alias":"city_scraper","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8f8\u002Fd6c\u002F328\u002F8f8d6c328ec3a513103b6757c2c21610.png","speciality":"Пользователь"},"statistics":{"commentsCount":6,"favoritesCount":3,"readingCount":3635,"score":14,"votesCount":20},"hubs":[{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМагнитогорск Челябинской области – один из крупнейших мировых центров чёрной металлургии. В России это шестой из крупнейших городов, которые не являются центрами субъектов страны. \u003C\u002Fp\u003E\u003Cp\u003EСовсем недавно город был одним из наиболее неблагополучных с точки зрения загрязнения атмосферного воздуха, но в 2021 году был зафиксирован «повышенный» уровень – то есть не «высокий» или «очень высокий», как раньше. \u003C\u002Fp\u003E\u003Cp\u003EКак этот город выглядит летом? Где и как его жители могут проводить время?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Магнитогорск"},{"titleHtml":"промышленность"},{"titleHtml":"промышленные города"},{"titleHtml":"урбанизм\u002Fурбания"},{"titleHtml":"урбанистика"},{"titleHtml":"города России"},{"titleHtml":"города"}]},"580050":{"id":"580050","timePublished":"2021-09-27T10:23:25+00:00","isCorporative":false,"lang":"ru","titleHtml":"Один человек ответил на 85+ тысяч вопросов на Stack Overflow (24,1 ответа в день)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1585037","alias":"sahsAGU","fullname":"Александр Гуреев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F43c\u002F6c7\u002F0ab\u002F43c6c70ab024d45474e6abe8db797573.jpg","speciality":"Автор"},"statistics":{"commentsCount":34,"favoritesCount":10,"readingCount":10323,"score":11,"votesCount":17},"hubs":[{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"relatedData":null,"id":"306","alias":"mysql","type":"collective","title":"MySQL","titleHtml":"MySQL","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true},{"relatedData":null,"id":"7152","alias":"data_mining","type":"collective","title":"Data Mining","titleHtml":"Data Mining","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003EВ среднем 24,1 ответа в день (если все 365 дней в году считать рабочими) на протяжении почти 10 лет.\u003C\u002Fstrong\u003E \u003C\u002Fp\u003E\u003Cp\u003EНесколько дней назад на некоторых англоязычных ресурсах началось обсуждение одного очень необычного пользователя Stack Overflow. Его зовут Гордон Линофф (Gordon Linoff), он из Нью-Йорка, и за 9 лет и 8 месяцев своего присутствия на платформе он дал 85,201 ответов на различные вопросы, в основном связанные с SQL и дата-майнингом (цифра актуальна на 27.09.2021). \u003C\u002Fp\u003E\u003Cp\u003EЧто это за маг?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F396\u002F5ac\u002Fef4\u002F3965acef48ae14917c514fa091f60d1a.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F396\u002F5ac\u002Fef4\u002F3965acef48ae14917c514fa091f60d1a.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"sql"},{"titleHtml":"mysql"},{"titleHtml":"stackoverflow"},{"titleHtml":"базы данных"},{"titleHtml":"дата майнинг"},{"titleHtml":"data mining"}]},"580060":{"id":"580060","timePublished":"2021-09-27T09:00:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Арракис, который мы заслужили","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"238277","alias":"Zelenyikot","fullname":"Виталий Егоров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F22b\u002F2d7\u002F7a5\u002F22b2d77a57b687aae24784a3e53089c9.jpg","speciality":"Популяризатор космонавтики"},"statistics":{"commentsCount":100,"favoritesCount":37,"readingCount":18875,"score":131,"votesCount":141},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false},{"relatedData":null,"id":"21984","alias":"sci-fi","type":"collective","title":"Научная фантастика","titleHtml":"Научная фантастика","isProfiled":false},{"relatedData":null,"id":"22014","alias":"futurenow","type":"collective","title":"Будущее здесь","titleHtml":"Будущее здесь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580060\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fk0\u002Fds\u002Fy5\u002Fk0dsy5npxclyjdytiroqga7-leu.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nВо вселенной писателя-фантаста Фрэнка Герберта, Дюна, она же Арракис &mdash; это пустынная и маловодная планета с двумя лунами. По сюжету, она находится за пределами Солнечной системы, но если мы захотим поискать ближайшую схожую параллель,&nbsp;то больше всего подходит планета Марс. Предлагаю воспользоваться возможностями, которые даёт современная космонавтика, и совершить воображаемую прогулку на нашу Дюну.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Марс"},{"titleHtml":"Дюна"},{"titleHtml":"MRO"},{"titleHtml":"Curiosity"},{"titleHtml":"марсоход"},{"titleHtml":"ruvds_статьи"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":5,"favoritesCount":15,"readingCount":1252,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Sergey Prosin","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Веду команды к релизам, пишу статьи, выступаю."},"statistics":{"commentsCount":6,"favoritesCount":100,"readingCount":5685,"score":20,"votesCount":20},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":93,"favoritesCount":57,"readingCount":19130,"score":48,"votesCount":48},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]},"580094":{"id":"580094","timePublished":"2021-09-26T22:35:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"206414","alias":"PoltoS","fullname":"Сергей Полторак","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5cf\u002F03a\u002Fc7f\u002F5cf03ac7fe60ea8a6686bd4c57627ddc.png","speciality":""},"statistics":{"commentsCount":99,"favoritesCount":27,"readingCount":15049,"score":32,"votesCount":54},"hubs":[{"relatedData":null,"id":"118","alias":"crypto","type":"collective","title":"Криптография","titleHtml":"Криптография","isProfiled":true},{"relatedData":null,"id":"210","alias":"it_testing","type":"collective","title":"Тестирование IT-систем","titleHtml":"Тестирование IT-систем","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИнтересно наблюдать, как дискредитируется термин блокчейна на выборах в госдуму. Вроде голосование было на блокчейне, но его якобы подделали. Т.е. блокчейн можно подделать или ЦИК и ДИТ нам подсунули какой-то лохчейн вместо блокчейна?!? И мало кто обсуждает происходящее по существу без эмоций, связанных с результатами партий и кандидатов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Криптография"},{"titleHtml":"блокчейн"},{"titleHtml":"открытые данные"},{"titleHtml":"электронное голосование"},{"titleHtml":"выборы"},{"titleHtml":"выборы в госдуму"},{"titleHtml":"дэг"},{"titleHtml":"дэг 2021"}]},"580124":{"id":"580124","timePublished":"2021-09-27T13:03:14+00:00","isCorporative":true,"lang":"ru","titleHtml":"Электролюминесцентные индикаторы из прошлого","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"146371","alias":"radiolok","fullname":"Артем Кашканов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fa46\u002Fc6a\u002F151\u002Fa46c6a15193f7c0cac79d2736b107358.jpg","speciality":"Релейно-декатронный маньяк"},"statistics":{"commentsCount":11,"favoritesCount":35,"readingCount":4213,"score":65,"votesCount":65},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Сегодня речь пойдёт об электролюминесцентных индикаторах. Но, не о тех, которые окружают вас повсюду и к которым вы привыкли, а о других — получивших огромную популярность в 60-е годы прошлого века, и так же стремительно канувших в небытие. Заодно запущу свою коллекцию индикаторов, как серийно выпускавшихся, так и уникальных опытных и даже — лабораторных образцов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F523004\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F94e\u002F51f\u002F459\u002F94e51f459ae59c9d2fe6c448cb07bcca.gif\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Индикатор"},{"titleHtml":"электролюминесцентность"},{"titleHtml":"ruvds_статьи"}]},"580150":{"id":"580150","timePublished":"2021-09-27T10:50:03+00:00","isCorporative":true,"lang":"ru","titleHtml":"Топ-5 когнитивных искажений при планировании в IT","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2794469","alias":"KM_QA","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":7,"favoritesCount":45,"readingCount":4794,"score":32,"votesCount":34},"hubs":[{"relatedData":null,"id":"14332","alias":"oleg-bunin","type":"corporative","title":"Блог компании Конференции Олега Бунина (Онтико)","titleHtml":"Блог компании Конференции Олега Бунина (Онтико)","isProfiled":false},{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false},{"relatedData":null,"id":"21990","alias":"brain","type":"collective","title":"Мозг","titleHtml":"Мозг","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта статья подходит для тимлидов и их подопечных, а также для всех, кто оценивает проекты и задачи. Я расскажу, как и почему мы делаем ошибки из-за когнитивных искажений. Попадаем в них мы почти все, просто потому что мы живые люди. И на примере одного дня из жизни тимлида я хочу показать, в какие искажения чаще всего влетают в IT, и&nbsp; — самое полезное&nbsp; —&nbsp; как из них можно выходить.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЗамечу, что искать когнитивные искажения стоит, в первую очередь, у себя, а не у коллег. \u003C\u002Fstrong\u003EИ что рассказывать про искажения намного проще, чем не влетать в их на практике, однако, если этому научиться, то в перспективе это изрядно окупается, потому что экономит и время, и деньги, помогая и нам, и команде.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"когнитивные искажения"},{"titleHtml":"нейрофизиология"},{"titleHtml":"мозг"},{"titleHtml":"психология"},{"titleHtml":"тимлидство"},{"titleHtml":"тимлид"},{"titleHtml":"управление людьми"},{"titleHtml":"управление проектами и командой"},{"titleHtml":"управление командой"},{"titleHtml":"управление персоналом"}]},"580172":{"id":"580172","timePublished":"2021-09-27T11:45:49+00:00","isCorporative":true,"lang":"ru","titleHtml":"Небинарный ngIf*","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1050218","alias":"Waterplea","fullname":"Александр Инкин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fa70\u002F569\u002Ff31\u002Fa70569f31346559ce2b8b875e7f97480.jpg","speciality":"Google Developer Expert | Angular"},"statistics":{"commentsCount":1,"favoritesCount":11,"readingCount":822,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"17420","alias":"tinkoff","type":"corporative","title":"Блог компании TINKOFF","titleHtml":"Блог компании TINKOFF","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"18109","alias":"angular","type":"collective","title":"Angular","titleHtml":"Angular","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВам когда-нибудь хотелось отобразить состояние загрузки, пока \u003Ccode\u003EngIf\u003C\u002Fcode\u003E ждет ответа от \u003Ccode\u003Easync\u003C\u002Fcode\u003E-пайпа? Или, может, вы мечтали передать в \u003Ccode\u003EngFor\u003C\u002Fcode\u003E шаблон для пустого массива? Возможно, вы бросили это, потому что вам не хотелось реализовывать базовую логику этих директив самому. На самом деле в этом нет нужды! Один и тот же селектор может подцепить несколько директив, что позволяет расширить функциональность встроенных директив дополнительной логикой.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F846\u002F786\u002F3e2\u002F8467863e2df65db32cb31f4b16c822ef.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F846\u002F786\u002F3e2\u002F8467863e2df65db32cb31f4b16c822ef.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"template"},{"titleHtml":"directive"},{"titleHtml":"angular"},{"titleHtml":"structural"}]},"580194":{"id":"580194","timePublished":"2021-09-27T12:36:12+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сотрудники на карте: отвечаем на 10 важных вопросов о трекинге","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1254716","alias":"Axelus","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F118\u002Fc4f\u002F08f\u002F118c4f08ffa66438ad6be22e205d563d.png","speciality":"Разработчик"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":963,"score":13,"votesCount":15},"hubs":[{"relatedData":null,"id":"20758","alias":"regionsoft","type":"corporative","title":"Блог компании RegionSoft","titleHtml":"Блог компании RegionSoft","isProfiled":false},{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"12365","alias":"saas","type":"collective","title":"SaaS \u002F S+S","titleHtml":"SaaS \u002F S+S","isProfiled":true},{"relatedData":null,"id":"17783","alias":"geo","type":"collective","title":"Геоинформационные сервисы","titleHtml":"Геоинформационные сервисы","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛюбой контроль сотрудников — опасный и болезненный вопрос, особенно в небольших компаниях. Часто в дружеские и открытые отношения компании не вписывается ни одна из форм контроля, рассчитывать можно только на доверие. Но пресловутый ковид и здесь внёс свои коррективы: расширение удалённой работы, увеличение штата мобильных сотрудников, частичная занятость пополнили ряды полевых сисадминов, аутсорсеров поддержки и остальных «разъездных» работников. Увы, люди разные и вслед за приятными плодами и бонусами удалёнки пришли негативные истории про поведение курьеров, опоздания и откровенные нарушения сотрудников на территории клиентов, неявки на работу или к заказчику и т.д. С этим столкнулись и ритейл, и ИТ, и любая сфера с мобильными сотрудниками. Очень хочется верить в лучшее, но без минимального контроля можно просто потерять бизнес — и тогда пострадают коллеги нерадивых сотрудников.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4a\u002F5b9\u002Fa9d\u002Fe4a5b9a9d62c342fa897f4531ec9301b.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4a\u002F5b9\u002Fa9d\u002Fe4a5b9a9d62c342fa897f4531ec9301b.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"geomonitor"},{"titleHtml":"геолокация"},{"titleHtml":"геозона"},{"titleHtml":"трекинг"}]},"580196":{"id":"580196","timePublished":"2021-09-27T12:28:15+00:00","isCorporative":true,"lang":"ru","titleHtml":"Зачем нужен динамический анализ кода, на примере проекта PVS-Studio","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2302295","alias":"MrROBUST","fullname":"Алексей Говоров","avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":3,"readingCount":597,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"18095","alias":"pvs-studio","type":"corporative","title":"Блог компании PVS-Studio","titleHtml":"Блог компании PVS-Studio","isProfiled":false},{"relatedData":null,"id":"559","alias":"cpp","type":"collective","title":"C++","titleHtml":"C++","isProfiled":true},{"relatedData":null,"id":"11606","alias":"vs","type":"collective","title":"Visual Studio","titleHtml":"Visual Studio","isProfiled":true},{"relatedData":null,"id":"21456","alias":"win_dev","type":"collective","title":"Разработка под Windows","titleHtml":"Разработка под Windows","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ разговоре с Маршаллом Клоу на подкасте CppCast #300 ABI Stability была затронута достаточно давняя новость о поддержке компиляторами Visual Studio инструмента AddressSanitizer (ASan). Мы уже достаточно давно внедрили ASan в свою систему тестирования и хотим рассказать о паре интересных ошибок, которые он помог найти.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F7ef\u002F2db\u002F210\u002F7ef2db210d677f9a8c07026d4361d3ba.png\" alt=\"0868_PVS-Studio_ASan_ru\u002Fimage2.png\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"pvs-studio"},{"titleHtml":"clang"},{"titleHtml":"asan"},{"titleHtml":"sanitizer"},{"titleHtml":"динамический анализ кода"}]},"580206":{"id":"580206","timePublished":"2021-09-27T12:51:03+00:00","isCorporative":false,"lang":"ru","titleHtml":"МТС отказался от скрытых мобильных подписок?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2467147","alias":"Plusodin","fullname":"Владимир","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F343\u002Fb77\u002Fd12\u002F343b77d12f047368849a9880276f936e.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":8,"favoritesCount":3,"readingCount":4157,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"22008","alias":"cellular","type":"collective","title":"Сотовая связь","titleHtml":"Сотовая связь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПривет, Хабр!\u003C\u002Fp\u003E\u003Cp\u003EНу что, подходит к концу первый сезон сериала «О скрытых мобильных подписках и операторах связи». Предыдущие три серии: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F550448\u002F\" rel=\"noopener noreferrer nofollow\"\u003EМегафон\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F563260\u002F\" rel=\"noopener noreferrer nofollow\"\u003EБилайн\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F571256\u002F\" rel=\"noopener noreferrer nofollow\"\u003ETele2\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\u003Cp\u003EНу и вишенка на этом торте – МТС.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"мтс"},{"titleHtml":"мобильные подписки"},{"titleHtml":"подписки"},{"titleHtml":"оператор связи"},{"titleHtml":"теле2"},{"titleHtml":"мегафон"},{"titleHtml":"билайн"}]},"580208":{"id":"580208","timePublished":"2021-09-27T12:52:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Основная проблема образования","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"2270142","alias":"Chronicler","fullname":"Пушиз де Хрониклер","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Faa3\u002F149\u002Fdb0\u002Faa3149db0de5f6c071dfade7285fcb99.jpg","speciality":"Исследователь ближнего заполярья, почетный манул"},"statistics":{"commentsCount":11,"favoritesCount":11,"readingCount":2067,"score":7,"votesCount":17},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"17189","alias":"itstandarts","type":"collective","title":"IT-стандарты","titleHtml":"IT-стандарты","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНа днях на Хабре появилась \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F579998\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eкритическая статья\u003C\u002Fa\u003E о бакалавриате, что называется \"из первых уст\", от очередного первохода. Статья далеко не лишена смысла, однако главная проблема не была в ней затронута. А заключается она вовсе не в обилии посторонних дисциплин и даже не в том, что в учебных заведениях так мало разьясняют суровую конкретику жизни \"научиться штамповать JavaScript сайты за месяц\".  Да, эти проблемы присутствуют, наряду с плохой подготовкой педагогов и отношением к студентам, но не они на корню обесценивают нынешнее образование.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Что же на самом деле не так?","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"программирование"},{"titleHtml":"образование"},{"titleHtml":"курсы не нужны"},{"titleHtml":"вуз"}]},"580210":{"id":"580210","timePublished":"2021-09-27T12:53:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"PHP Дайджест № 212 (13 – 27 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"100489","alias":"pronskiy","fullname":"Роман Пронский","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F27f\u002Fb99\u002Feb3\u002F27fb99eb3e30e3221c5839e88be02395.jpg","speciality":"PHP"},"statistics":{"commentsCount":1,"favoritesCount":9,"readingCount":3111,"score":33,"votesCount":33},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"relatedData":null,"id":"477","alias":"symfony","type":"collective","title":"Symfony","titleHtml":"Symfony","isProfiled":true},{"relatedData":null,"id":"9554","alias":"yii","type":"collective","title":"Yii","titleHtml":"Yii","isProfiled":true},{"relatedData":null,"id":"18812","alias":"laravel","type":"collective","title":"Laravel","titleHtml":"Laravel","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fek\u002F6r\u002Fr1\u002Fek6rr1odvyzb89tfv0lq4cmfxi4.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nПодборка свежих новостей и материалов из мира PHP.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВышел PHP 8.1 RC2 и уже доступен первый пакет с использованием перечислений, будет сделан форк Magento, новый тип стандартов PER в дополнение к PSR, стартовала PhpStorm 2021.3 EAP, Symfony 6 будет полностью типизирован — как обновляться?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДля PHP 8.2 предложены новые оптимизированные структуры данных.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nТакже в выпуске порция инструментов, полезные статьи, видео и анонсы двух митапов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПриятного чтения!\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"php-дайджест"},{"titleHtml":"PHP"},{"titleHtml":"Symfony"},{"titleHtml":"Laravel"},{"titleHtml":"Magento"},{"titleHtml":"PHPUnit"},{"titleHtml":"PHP 8.1"},{"titleHtml":"PHP 8.2"}]},"580228":{"id":"580228","timePublished":"2021-09-27T16:41:21+00:00","isCorporative":true,"lang":"ru","titleHtml":"Идеальная светодиодная лампа за 21 рубль","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"108988","alias":"AlexeyNadezhin","fullname":"Алексей Надежин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffdc\u002F3ac\u002F9a2\u002Ffdc3ac9a2dc0107cc956f1bd0cf5fc2b.jpg","speciality":"Блогер"},"statistics":{"commentsCount":18,"favoritesCount":25,"readingCount":6753,"score":58,"votesCount":60},"hubs":[{"relatedData":null,"id":"21646","alias":"lamptest","type":"corporative","title":"Блог компании LampTest","titleHtml":"Блог компании LampTest","isProfiled":false},{"relatedData":null,"id":"21894","alias":"gadgets","type":"collective","title":"Гаджеты","titleHtml":"Гаджеты","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Удивительно осознавать, что достаточно сложное электронное устройство, которым является светодиодная лампочка, может стоить 21 рубль. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЕщё сложнее поверить, что эта лампочка безукоризненна по всем параметрам.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F20f\u002F849\u002Ffcd\u002F20f849fcd6a3891f506676fc87223bdf.jpg\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"led"},{"titleHtml":"светодиодные лампы"},{"titleHtml":"тест"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580060","580124","580228","580092","580210","580150","580094","579854","580090","580088","572164","580172","580008","580194","580206","580050","580196","579772","579984","580208"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":3},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["327248","226753","166633"],"similarListRefs":{"166633":{"id":"166633","timePublished":"2013-01-22T12:15:31+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение производительности: curl, php curl, php socket, python pycurl","editorVersion":"1.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"298419","alias":"Hukuta","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F24d\u002F7c2\u002F614\u002F24d7c2614f0e1ae4db99d82843b23ad0.png","speciality":"Пользователь"},"statistics":{"commentsCount":16,"favoritesCount":50,"readingCount":28455,"score":4,"votesCount":12},"hubs":[{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Мне предстоит проект, модуль которого будет большую часть времени работать с другим сервером, отправляя ему GET запросы.\u003Cbr\u002F\u003E\r\nЯ провел тесты чтобы определить каким способом получать страницу будет быстрее (в рамках предполагаемых технологий проекта).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервые 3 теста: каждым из способов выполнялось по 50 запросов подряд к одному сайту. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fc47\u002Fb65\u002F8d1\u002Fc47b658d18b11b6fd5c9e5473207c6ea.png\" alt=\"image\"\u002F\u003E\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Дальше еще много интересных графиков, таблиц и код","image":null},"status":"published","plannedPublishTime":null,"checked":null},"226753":{"id":"226753","timePublished":"2014-06-19T05:14:53+00:00","isCorporative":false,"lang":"ru","titleHtml":"Боятся ли PHP-разработчики функций?","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Nikita Popov","originalUrl":"http:\u002F\u002Fnikic.github.io\u002F2012\u002F08\u002F10\u002FAre-PHP-developers-functophobic.html"}}],"author":{"id":"1789","alias":"f3ath","fullname":"Алексей","avatarUrl":null,"speciality":"Иногда я не программирую"},"statistics":{"commentsCount":60,"favoritesCount":34,"readingCount":16140,"score":5,"votesCount":69},"hubs":[{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Недавно я обратил внимание на одну вещь, которая стала меня беспокоить: PHP-программисты не используют функции.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПожалуй, слишком сильное обобщение, поэтому уточню: PHP-разработчики, достичшие определенного уровня мастерства, практически перестают писать обычные функции, вместо них сплошные классы и методы. Во всяком случае, такое впечатление складывается, когда смотришь код библиотек и фреймворков с открытым кодом. Все “крутые” библиотеки используют разве что анонимные функции, и только.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"327248":{"id":"327248","timePublished":"2017-04-24T13:10:59+00:00","isCorporative":true,"lang":"ru","titleHtml":"Bash-скрипты, часть 6: функции и разработка библиотек","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Администратор likegeeks.com","originalUrl":"https:\u002F\u002Flikegeeks.com\u002Fbash-functions\u002F"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe36\u002F812\u002Fd3d\u002Fe36812d3de38eb3d479d7a13228717ef.png","speciality":"Пользователь"},"statistics":{"commentsCount":33,"favoritesCount":315,"readingCount":147905,"score":44,"votesCount":50},"hubs":[{"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"id":"36","alias":"linux","type":"collective","title":"Настройка Linux","titleHtml":"Настройка Linux","isProfiled":true},{"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cblockquote\u003E\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F325522\u002F\"\u003EBash-скрипты: начало\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F325928\u002F\"\u003EBash-скрипты, часть 2: циклы\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F326328\u002F\"\u003EBash-скрипты, часть 3: параметры и ключи командной строки\u003C\u002Fa\u003E \u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F326594\u002F\"\u003EBash-скрипты, часть 4: ввод и вывод\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F326826\u002F\"\u003EBash-скрипты, часть 5: сигналы, фоновые задачи, управление сценариями\u003C\u002Fa\u003E \u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F327248\u002F\"\u003EBash-скрипты, часть 6: функции и разработка библиотек\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F327530\u002F\"\u003EBash-скрипты, часть 7: sed и обработка текстов\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F327754\u002F\"\u003EBash-скрипты, часть 8: язык обработки данных awk\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F327896\u002F\"\u003EBash-скрипты, часть 9: регулярные выражения\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F328346\u002F\"\u003EBash-скрипты, часть 10: практические примеры\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F328436\u002F\"\u003EBash-скрипты, часть 11: expect и автоматизация интерактивных утилит\u003C\u002Fa\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nЗанимаясь разработкой bash-скриптов, вы рано или поздно столкнётесь с тем, что вам периодически приходится использовать одни и те же фрагменты кода. Постоянно набирать их вручную скучно, а копирование и вставка — не наш метод. Как быть? Хорошо бы найти средство, которое позволяет один раз написать блок кода и, когда он понадобится снова, просто сослаться на него в скрипте.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F327248\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F803\u002F892\u002Fbfe\u002F803892bfe548499aa763df324d40fd01.png\"\u002F\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОболочка bash предоставляет такую возможность, позволяя создавать функции. Функции bash — это именованные блоки кода, которые можно повторно использовать в скриптах.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"atercattus":{"scoreStats":{"score":133.2,"votesCount":227},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":"41001727210359","paymentPayPalMe":null,"paymentWebmoney":null},"id":"50814","alias":"AterCattus","fullname":"Алексей","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F56f\u002F94a\u002F7a8\u002F56f94a7a870440f297824d7266e43cfe.jpg","speciality":"Архитектор"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
