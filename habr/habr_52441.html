<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Дело о пропавшем индексе / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/52441\/"},"headline":"Дело о пропавшем индексе","datePublished":"2009-02-20T15:15:33+03:00","dateModified":"2009-02-20T15:15:33+03:00","author":{"@type":"Person","name":"nchaly"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения &mdash; показать средства, с помощью...","url":"https:\/\/habr.com\/ru\/post\/52441\/#post-content-body","about":["h_net","f_develop"],"image":["https:\/\/habr.com\/share\/publication\/52441\/9115f8aeea169a1e6e207515d402a7db\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Дело о пропавшем индексе" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Дело о пропавшем индексе" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Дело о пропавшем индексе" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="52441" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2009-02-20T12:15:33.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/52441/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/52441/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/52441/9115f8aeea169a1e6e207515d402a7db/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/nchaly/" title="nchaly" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/e05/b36/6cc/e05b366cc644122427cf55f45fc219d1.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/nchaly/" class="tm-user-info__username">
      nchaly
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2009-02-20T12:15:33.000Z" title="2009-02-20, 15:15">20  февраля  2009 в 15:15</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Дело о пропавшем индексе</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/net/" class="tm-article-snippet__hubs-item-link"><span>.NET</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><em>Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать поведение программы на самом низком уровне.</em><br/>
<br/>
Итак, имеется приложение, написанное на C#, которое использует .net framework 1.1 (да-да). Приложение после некоторых внесенных изменений начало выбрасывать такое малоинформативное исключение:<a name="habracut"></a><br/>
<blockquote><code>System.NullReferenceException: Object reference not set to an instance of an object.<br/>
 at System.Data.DataTable.<font color="#0000ff">ResetIndexes</font>()<br/>
 at System.Data.Merger.MergeTable(DataTable src, DataTable dst)<br/>
 at System.Data.Merger.MergeTableData(DataTable src)<br/>
 at System.Data.Merger.MergeTable(DataTable src)<br/>
 at System.Data.DataSet.Merge(DataTable table, Boolean preserveChanges, MissingSchemaAction missingSchemaAction)<br/>
 at Com.Product.App.RequestForm.<font color="#008000">InitEdit</font>(InitRequestArgs args)</code></blockquote><br/>
InitEdit — функция формы в приложении, которая инициализирует данные. Строка исходного кода приложения, на которой оно выбрасывается:<br/>
<blockquote><code><font color="black">dsRequestList.Merge(dsLast.Tables[<font color="#A31515">"TABLE_REQUESTS"</font>], <font color="#0000ff">false</font>, MissingSchemaAction.Ignore);</font></code></blockquote><br/>
Код функции ResetIndexes, который показывает нам Рефлектор, не сказать чтобы уж очень сложный:<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><ol>
<li><font color="#0000ff">internal</font> <font color="#0000ff">void</font> ResetIndexes()</li>
<li>{</li>
<li>    <font color="#0000ff">this</font>.RecomputeCompareInfo();</li>
<li>    <font color="#0000ff">if</font> (<font color="#0000ff">this</font>.indexes != <font color="#0000ff">null</font>)</li>
<li>    {</li>
<li>        <font color="#0000ff">this</font>.SetShadowIndexes();</li>
<li>        <font color="#0000ff">try</font></li>
<li>        {</li>
<li>            <font color="#0000ff">int</font> count = <font color="#0000ff">this</font>.shadowIndexes.Count;</li>
<li>            <font color="#0000ff">for</font> (<font color="#0000ff">int</font> i = 0; i &lt; count; i++)</li>
<li>            {</li>
<li>                ((Index)<font color="#0000ff">this</font>.shadowIndexes[i]).Reset();</li>
<li>            }</li>
<li>        }</li>
<li>        <font color="#0000ff">finally</font></li>
<li>        {</li>
<li>            <font color="#0000ff">this</font>.shadowIndexes = <font color="#0000ff">null</font>;</li>
<li>        }</li>
<li>    }</li>
<li>}</li>
</ol></font><font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
Вроде как проблем нет. Функция пробегает по индексам и вызывает у каждого <em>Reset</em>. Где может быть исключение? <strong>SetShadowIndexes</strong> просто вызывает "<strong>this.shadowIndexes = this.LiveIndexes;</strong>" Значит, на момент исполнения строки №9 <strong>shadowIndexes</strong> ненулевое. Значит, резонно, как мне кажется, предположить, что где-то внутри этого массива находится null элемент, и, соответственно падает на строке 12. Думаю, проблема в этом, сказал я себе и принялся за работу.<br/>
<br/>
Запускаем windbg, соединяемся с процессом, загружаем в дебагер Son of Strike (sos.dll). Думаю, все знают, что это такое, и нужды объяснять нет.<br/>
<br/>
Ставим точку остановки на нашей функции:<br/>
<br/>
<blockquote><code>0:023> !bp app.exe Com.Product.App.RequestForm.<font color="#008000">InitEdit</font><br/>
Setting breakpoint at : 0xcef7988<br/>
bp 0xcef7988 " .echo [DEFAULT] [hasThis] Boolean Com.Product.App.RequestForm.InitEdit(Class Com.Product.Tickets.InitArgs) "<br/>
Setting breakpoint at : 0xcef7a38<br/>
bp 0xcef7a38 " .echo [DEFAULT] [hasThis] Boolean Com.Product.App.RequestForm.InitEdit(Class Com.Product.App.Requests.InitRequestArgs) "</code></blockquote><br/>
<br/>
(Мне нужна только вторая функция, поэтому отключаем первую точку командой windbg: bd 0). <br/>
<br/>
Нельзя поставить точку остановки прямо на <strong>ResetIndexes</strong>, так как приложение довольно интенсивно использует датасеты и нам придется пропустить много ложных вызовов.<br/>
Поэтому точки надо расставлять последовательно, по мере вызова нужных функций.<br/>
<br/>
После того, как дебаггер останавливает на <strong>InitEdit</strong>, ставим точку на <strong>DataSet.Merge</strong>:<br/>
<blockquote><code>0:000> !bp system.data.dll System.Data.DataSet.Merge<br/>
Setting breakpoint at : 0x8185418<br/>
bp 0x8185418 " .echo [DEFAULT] [hasThis] Void System.Data.DataSet.Merge(Class System.Data.DataSet) "</code></blockquote><br/>
(опять же SoS выставит остановку на все перегруженные функции Merge, поэтому избавляемся от не ненужных)<br/>
<br/>
После <strong>DataSet.Merge</strong> нужно зайти в <strong>System.Data.Merger.MergeTable</strong>, откуда и вызывается <strong>DataTable.ResetIndexes</strong>.<br/>
<br/>
Проверяем, что аргумент действительно тот, который мы ожидаем:<br/>
<blockquote><code>0:000> !clrstack -a 1<br/>
Thread 0<br/>
ESP EIP <br/>
ESP/REG Object Name<br/>
eax 0x191cca10 Com.Product.App.Requests.dsRequests/TABLE_USERSDataTable<br/>
ecx 0x1562815c System.Data.Merger<br/>
<strong>edx</strong> <font color="#0000ff">0x1952b684 System.Data.DataTable</font> <br/>
esi 0x1562815c System.Data.Merger<br/>
edi 0x1952b684 System.Data.DataTable<br/>
0x0012e9b4 0x08186d00 [DEFAULT] [hasThis] Void System.Data.Merger.MergeTable(Class System.Data.DataTable,Class System.Data.DataTable)<br/>
 EDI 0x1952b684 ESI 0x1562815c EBX 0x00000000 EDX 0x1952b684 ECX 0x1562815c <br/>
 EAX 0x191cca10 EBP 0x0012e9dc ESP 0x0012e9b4 EIP 0x08186d00</code></blockquote><br/>
<br/>
Cмотрим на имя таблицы, которая передана как параметр.<br/>
<blockquote><code>0:000> !do (edx)<br/>
Name: System.Data.DataTable<br/>
MethodTable 0x04a633f8<br/>
EEClass 0x04a37244<br/>
Size 232(0xe8) bytes<br/>
GC Generation: 2<br/>
mdToken: 0x0200003d (c:\winxp\assembly\gac\system.data\1.0.5000.0__b77a5c561934e089\system.data.dll)<br/>
FieldDesc*: 0x04a62544<br/>
 MT Field Offset Type Attr Value Name<br/>
0x7b308b0c 0x4000583 0x4 CLASS instance 0x00000000 site<br/>
...<br/>
0x04a633f8 0x40003fa 0x34 CLASS instance 0x15628170 extendedProperties<br/>
0x04a633f8 0x40003fb <font color="#0000ff">0x38 CLASS instance 0x1952bc2c tableName</font> <br/>
0x04a633f8 0x40003fc 0x3c CLASS instance 0x00000000 tableNamespace<br/>
...</code></blockquote><br/>
<br/>
Имя таблицы записано в поле со смещением 0x38 от начала объекта.<br/>
<br/>
<code>0:000> !do poi(edx+38)<br/>
String: TABLE_USERS</code><br/>
<br/>
TABLE_USERS — не та таблица, что нам нужна, поэтому идем дальше, пока не встретим <br/>
<br/>
<blockquote><code>0:000> !do <font color="#0000ff">poi(edx+38)</font><br/>
String: TABLE_REQUESTS</code></blockquote><br/>
<br/>
Только после этого добавляем точку остановки в <strong>ResetIndexes</strong>, запускаем программу дальше, и опять останавливаемся.<br/>
<br/>
<blockquote><code>0:000> g<br/>
<font color="#0000ff">[DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()</font> <br/>
eax=191c76ec ebx=00000001 ecx=191c70b4 edx=0006471c esi=19508a4c edi=19221a28<br/>
eip=07eff838 esp=0012e988 ebp=191c70b4 iopl=0 nv up ei ng nz na po cy<br/>
cs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00000283<br/>
07eff838 55 push ebp<br/>
0:000> <strong>!clrstack -a 1</strong><br/>
Thread 0<br/>
ESP EIP <br/>
ESP/REG Object Name<br/>
eax 0x191c76ec System.Collections.ArrayList<br/>
ecx <font color="#0000ff">0x191c70b4 Com.Product.App.Requests.dsRequests/TABLE_REQUESTSDataTable</font> <br/>
esi 0x19508a4c System.Data.DataRow<br/>
edi 0x19221a28 System.Data.DataTable<br/>
ebp 0x191c70b4 Com.Product.App.Requests.dsRequests/TABLE_REQUESTSDataTable<br/>
0x0012e988 0x07eff838 [DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()<br/>
 EDI 0x19221a28 ESI 0x19508a4c EBX 0x00000001 EDX 0x0006471c ECX 0x191c70b4 <br/>
 EAX 0x191c76ec EBP 0x191c70b4 ESP 0x0012e988 EIP 0x07eff838 </code></blockquote><br/>
<br/>
this передается в ecx, берем ее и смотрим что лежит в поле <strong>indexes</strong>:<br/>
<br/>
<blockquote><code>0:000> <strong>!do ecx</strong><br/>
Name: Com.Product.App.Requests.dsRequests/TABLE_REQUESTSDataTable<br/>
MethodTable 0x10bb39f4<br/>
EEClass 0x10ac9a40<br/>
Size 580(0x244) bytes<br/>
GC Generation: 2<br/>
mdToken: 0x02000296 <br/>
FieldDesc*: 0x10bb2eb4<br/>
 MT Field Offset Type Attr Value Name<br/>
0x7b308b0c 0x4000583 0x4 CLASS instance 0x00000000 site<br/>
...<br/>
0x04a633f8 0x40003f8 0x2c CLASS <font color="#0000ff">instance 0x191c76ec indexes</font> <br/>
0x04a633f8 0x40003f9 0x30 CLASS instance 0x00000000 shadowIndexes <br/>
0x04a633f8 0x40003fa 0x34 CLASS instance 0x15629d98 extendedProperties<br/>
...<br/>
</code></blockquote><br/>
<br/>
Пока что все правильно. На момент входа в <strong>ResetIndexe</strong>s поле indexes равно нулю, затем устанавливается с помощью <strong>SetShadowIndexes</strong>.<br/>
<br/>
<blockquote><code>0:000> <strong>!dc <font color="#0000ff">0x191c76ec</font></strong><br/>
Going to dump the Collection passed.<br/>
Name: System.Collections.ArrayList<br/>
GC Generation: 2<br/>
<br/>
Address MT Class Name<br/>
0x1557971c 0x08121b80 System.Data.Index<br/>
0x1559e420 0x08121b80 System.Data.Index<br/>
0x1559e508 0x08121b80 System.Data.Index<br/>
0x1559e5f0 0x08121b80 System.Data.Index<br/>
0x1559e6d8 0x08121b80 System.Data.Index<br/>
0x1559e7c0 0x08121b80 System.Data.Index<br/>
0x1559e8a8 0x08121b80 System.Data.Index<br/>
0x1559e990 0x08121b80 System.Data.Index<br/>
0x1559ea78 0x08121b80 System.Data.Index<br/>
0x1559eb60 0x08121b80 System.Data.Index<br/>
0x1559ec48 0x08121b80 System.Data.Index<br/>
0x1559ed30 0x08121b80 System.Data.Index<br/>
0x1559ee18 0x08121b80 System.Data.Index<br/>
0x1559ef00 0x08121b80 System.Data.Index<br/>
0x1559efe8 0x08121b80 System.Data.Index<br/>
0x1559f0d0 0x08121b80 System.Data.Index<br/>
0x1559f1b8 0x08121b80 System.Data.Index<br/>
0x156f1a9c 0x08121b80 System.Data.Index<br/>
0x156f4cd4 0x08121b80 System.Data.Index<br/>
0x157962b0 0x08121b80 System.Data.Index<br/>
0x157ba910 0x08121b80 System.Data.Index</code></blockquote><br/>
<br/>
Мда… моя основная теория распадается на глазах. Нет там нулевых элементов. Вот незадача. Что ж, продолжим выполнение кода, и посмотрим на исключения изнутри windbg. Отпускаем программу. Когда происходит исключение, отладчик останавливается:<br/>
<blockquote><code>0:000> g<br/>
(1638.1738): Access violation - code c0000005 (first chance)<br/>
First chance exceptions are reported before any exception handling.<br/>
This exception may be expected and handled.<br/>
eax=191c70b4 ebx=00000015 ecx=00000000 edx=00000014 esi=195b0894 edi=00000014<br/>
eip=07eff899 esp=0012e960 ebp=0012e984 iopl=0 nv up ei ng nz ac pe cy<br/>
cs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00010297<br/>
07eff899 8b01 <font color="#0000ff">mov eax,dword ptr [ecx] ds:0023:00000000=????????</font></code></blockquote><br/>
<br/>
Выполняем команду <em>!analyze -v</em>, результат которой невероятно напичкан разного рода данными о произошедшем исключении. Привожу сжатом виде:<br/>
<br/>
<code>0:000> !analyze -v<br/>
<br/>
*******************************************************************************<br/>
* *<br/>
* Exception Analysis *<br/>
* *<br/>
*******************************************************************************<br/>
<br/>
FAULTING_IP: <br/>
+7eff899<br/>
07eff899 8b01 mov eax,dword ptr [ecx]<br/>
<br/>
EXCEPTION_RECORD: ffffffff -- (.exr 0xffffffffffffffff)<br/>
.exr 0xffffffffffffffff<br/>
ExceptionAddress: 07eff899<br/>
 ExceptionCode: c0000005 (Access violation)<br/>
 ExceptionFlags: 00000000<br/>
NumberParameters: 2<br/>
 Parameter[0]: 00000000<br/>
 Parameter[1]: 00000000<br/>
<font color="#0000ff">Attempt to read from address 00000000</font><br/>
<br/>
FAULTING_THREAD: 00001738<br/>
<br/>
DEFAULT_BUCKET_ID: NULL_POINTER_READ<br/>
<br/>
PROCESS_NAME: App.exe<br/>
<br/>
ERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at "0x%08lx" referenced memory at "0x%08lx". The memory could not be "%s".<br/>
<br/>
READ_ADDRESS: 00000000 <br/>
<br/>
FAILED_INSTRUCTION_ADDRESS: <br/>
+7eff899<br/>
<font color="#0000ff">07eff899 8b01 mov eax,dword ptr [ecx]</font><br/>
<br/>
NTGLOBALFLAG: 0<br/>
<br/>
APPLICATION_VERIFIER_FLAGS: 0<br/>
<br/>
IP_ON_HEAP: 08186f34<br/>
<br/>
MANAGED_STACK: !dumpstack -EE<br/>
!dumpstack -EE<br/>
Thread 0<br/>
<font color="#0000ff">Current frame: (MethodDesc 0x4a63200 +0x61 System.Data.DataTable.ResetIndexes)</font><br/>
 ChildEBP RetAddr Caller,Callee<br/>
0012e984 08186f34 (MethodDesc 0x31fcff0 +0x234 System.Data.Merger.MergeTable)<br/>
0012e9b0 08185790 (MethodDesc 0x31fd020 +0x48 System.Data.Merger.MergeTableData)<br/>
0012e9dc 0818e31f (MethodDesc 0x31fcfe0 +0x2f System.Data.Merger.MergeTable)<br/>
0012e9ec 0818e2b1 (MethodDesc 0x7ec0ce8 +0x61 System.Data.DataSet.Merge)<br/>
0012ea00 0cef8056 (MethodDesc 0x7c8f8d0 +0x61e Com.Product.App.RequestForm.InitEdit)<br/>
0012ec3c 26a117e7 (MethodDesc 0x10eaee98 +0x57 Com.Product.Core.Entities.EntityContextCache..ctor)<br/>
0012ec50 0cef79df (MethodDesc 0x7c8f8c0 +0x57 Com.Product.App.RequestForm.InitEdit)<br/>
0012ec74 0818d593 (MethodDesc 0x7ec0448 +0x2b Com.CommonComponents.Tools.PerformanceTimer.sAddCheckPoint)<br/>
0012ec84 0cef7933 (MethodDesc 0x7c8da68 +0x8b Com.Product.Tickets.Ticket.OnInit)<br/>
0012ecb4 0cef7706 (MethodDesc 0x7d509e8 +0x6e Com.Product.App.RequestForm.OnInit)<br/>
0012ecf4 0cef766b (MethodDesc 0x7c8da58 +0x1b Com.Product.Tickets.Ticket.Init)<br/>
[неважная часть стека вызовов]<br/>
---------<br/>
</code><br/>
<br/>
Cтек вызовов уже мы видели, правда в несколько сокращенном варианте. А вот по коду сейчас будем разбираться. Давайте взглянем на код, который вызвал исключение:<br/>
<code>07eff899 8b01 mov eax,dword ptr [ecx] ds:0023:00000000=????????</code><br/>
<br/>
Читается значение из памяти по адресу, который содержится в ECX, а там (в ECX), как мы видим, ноль…<br/>
<br/>
Давайте теперь посмотрим на функцию ResetIndexes, превращенную заботливым jit-компилятором в исполняемый код для процессора x86. Я повторю код функции на C#, и мы сейчас сопоставим его с кодом ассемблера.<br/>
<br/>
<blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a><font color="black"><ol>
<li><font color="#0000ff">internal</font> <font color="#0000ff">void</font> ResetIndexes()</li>
<li>{</li>
<li>    <font color="#0000ff">this</font>.RecomputeCompareInfo();</li>
<li>    <font color="#0000ff">if</font> (<font color="#0000ff">this</font>.indexes != <font color="#0000ff">null</font>)</li>
<li>    {</li>
<li>        <font color="#0000ff">this</font>.SetShadowIndexes();</li>
<li>        <font color="#0000ff">try</font></li>
<li>        {</li>
<li>            <font color="#0000ff">int</font> count = <font color="#0000ff">this</font>.shadowIndexes.Count;</li>
<li>            <font color="#0000ff">for</font> (<font color="#0000ff">int</font> i = 0; i &lt; count; i++)</li>
<li>            {</li>
<li>                ((Index)<font color="#0000ff">this</font>.shadowIndexes[i]).Reset();</li>
<li>            }</li>
<li>        }</li>
<li>        <font color="#0000ff">finally</font></li>
<li>        {</li>
<li>            <font color="#0000ff">this</font>.shadowIndexes = <font color="#0000ff">null</font>;</li>
<li>        }</li>
<li>    }</li>
<li>}</li>
</ol></font><font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font>.</font></code></blockquote><br/>
<br/>
Теперь дизассемблируем из windbg. Функция небольшая, а вот ассемблерного кода — две страницы :( <br/>
<br/>
<font><code>0:000> !u<br/>
No value passed in, defaulting to EIP<br/>
Will print '>>> ' at address: 0x07eff899<br/>
Normal JIT generated code<br/>
[DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()<br/>
Begin 0x07eff838, size 0xc4<br/>
07eff838 push    ebp<br/>
07eff839 mov     ebp,esp<br/>
07eff83b sub     esp,18h<br/>
07eff83e push    edi<br/>
07eff83f push    esi<br/>
07eff840 push    ebx                     ; настройка стека итд.<br/>
07eff841 mov     dword ptr [ebp-8],0     ;<br/>
07eff848 mov     dword ptr [ebp-14h],ecx ; По адресу "ebp-14h" сохраняется указатель на <br/>
                                         ; объект DataTable, внутри которого мы<br/>
                                         ; сейчас находимся, this.<br/>
07eff84b mov     ecx,dword ptr [ebp-14h]<br/>
07eff84e call    07eff420 (System.Data.DataTable.RecomputeCompareInfo) ; (3) это понятно и так<br/>
07eff853 mov     eax,dword ptr [ebp-14h]<br/>
07eff856 cmp     dword ptr [eax+2Ch],0   ; (4) if (this.indexes != null)<br/>
07eff85a jne     <font color="#0000ff"><strong>07eff863</strong></font><br/>
07eff85c pop     ebx<br/>
07eff85d pop     esi<br/>
07eff85e pop     edi<br/>
07eff85f mov     esp,ebp<br/>
07eff861 pop     ebp<br/>
07eff862 ret                             ; выход, если все же indexes == null<br/>
<font color="#0000ff"><strong>07eff863</strong></font> mov     ecx,dword ptr [ebp-14h] <br/>
07eff866 call    dword ptr ds:[4A634CCh] ; (6) this.LiveIndexes<br/>
07eff86c mov     ebx,dword ptr [ebp-14h]<br/>
07eff86f lea     edx,[ebx+30h]           ; (6) this.indexes                        <br/>
07eff872 call    01003048                ; (6) indexes = LiveIndexes, интересно,<br/>
                                         ; оказывается компилятор-то заинлайнил <br/>
                                         ; функцию SetShadowIndexes,<br/>
                                         ; которая, прочем, только <br/>
                                         ; из этого присваивания и состоит.<br/>
07eff877 mov     eax,dword ptr [ebp-14h] ; (9)<br/>
07eff87a mov     dword ptr [ebp-18h],eax ; (9)<br/>
07eff87d mov     ecx,dword ptr [eax+30h] ; (9) ECX сейчас содержит указатель shadowIndexes.<br/>
07eff880 mov     eax,dword ptr [ecx]     ; (9) Здесь танцы с бубном:<br/>
                                         ; (9) первое поле в объекте (то, которое берется как [ecx]) -<br/>
                                         ; (9) это указатель на MethodTable его класса,<br/>
07eff882 call    dword ptr [eax+0D0h]    ; (9) А это, собственно вызов функции со <br/>
                                         ; (9) смещением 0xD0 от начала таблицы методов -<br/>
                                         ; (9) ни что иное, как ArrayList.Count,<br/>
07eff888 mov     ebx,eax                 ; (9) значение которого сейчас в eax.<br/>
                                         ; (9) Инструкции, начиная с адреса 07eff877<br/>
                                         ; (9) по текущую - это строка кода<br/>
                                         ; (9) int count = this.shadowIndexes.Count;<br/>
07eff88a xor     edi,edi                 ;(10) int i = 0;<br/>
07eff88c cmp     ebx,0                   ;(10) Немедленный выход, <br/>
                                         ;(10) если shadowIndexes.Count == 0.<br/>
07eff88f jle     <font color="#008000"><strong>07eff8cc</strong></font><br/>
<font color="#ff0000"><strong>07eff891</strong></font> mov     eax,dword ptr [ebp-18h] ;(12)<br/>
07eff894 mov     ecx,dword ptr [eax+30h] ;(12) ECX опять содержит указатель shadowIndexes.<br/>
07eff897 mov     edx,edi<br/>
<font color="#0000ff">>>> 07eff    mov     eax,dword ptr [ecx]</font> ;(12) Опять получение MethodTable<br/>
                                         ;(12) для класса shadowIndexes (это ArrayList)<br/>
07eff89b call    dword ptr [eax+0A0h]    ;(12) Вызов shadowIndexes[i]<br/>
07eff8a1 mov     edx,eax<br/>
07eff8a3 mov     ecx,8121B80h<br/>
07eff8a8 call    mscorwks!JIT_ChkCastClass (791e381f)   ;(12) <br/>
                                         ;(12) Приведение типа: ((Index)this.shadowIndexes[i])<br/>
07eff8ad mov     esi,eax<br/>
07eff8af cmp     dword ptr [esi],eax<br/>
07eff8b1 mov     ecx,esi<br/>
07eff8b3 call    dword ptr ds:[8121C44h] ;(12) Вызов Index.InitRecords();<br/>
07eff8b9 mov     edx,dword ptr ds:[2208EC4h]<br/>
07eff8bf mov     ecx,esi<br/>
07eff8c1 call    dword ptr ds:[8121C54h] ;(12) Вызов Index.OnListChanged();<br/>
                                          ;(12) Что характерно, функция Index.Reset(),<br/>
                                          ;(12) которая состоит вызова <br/>
                                          ;(12) InitRecords и OnListChanged<br/>
                                          ;(12) также встроена в код,<br/>
<br/>
07eff8c7  inc     edi                     ;(10) это i++ из цикла for.<br/>
07eff8c8  cmp     edi,ebx                 ;(10) это<br/>
07eff8ca  jl      <font color="#ff0000"><strong>07eff891</strong></font>                ;(10) и это - "i &lt; count". Переход на начало цикла.<br/>
                                          ;(10) обычно так циклы и реализованы <br/>
                                          ;(10) в дотнет: блок проверки на <br/>
                                          ;(10) продолжение цикла находится в конце.<br/>
<font color="#008000"><strong>07eff8cc</strong></font>  mov     dword ptr [ebp-0Ch],0<br/>
07eff8d3  mov     dword ptr [ebp-8],0FCh<br/>
07eff8da  push    7EFF8EEh<br/>
07eff8df  jmp     07eff8e1<br/>
07eff8e1  mov     eax,dword ptr [ebp-14h]<br/>
07eff8e4  mov     dword ptr [eax+30h],0   ;(17) зануление shadowIndexes<br/>
                                          ;(17) в блоке finally.<br/>
07eff8eb  pop     eax<br/>
07eff8ec  jmp     eax<br/>
07eff8ee  mov     dword ptr [ebp-8],0<br/>
07eff8f5  pop     ebx<br/>
07eff8f6  pop     esi<br/>
07eff8f7  pop     edi<br/>
07eff8f8  mov     esp,ebp<br/>
07eff8fa  pop     ebp<br/>
07eff8fb  ret<br/>
</code></font><br/>
Строка на которой генерируется исключение, отмечена знаком ">>>", и становится ясно, что виноват не глючный какой-то элемент внутри списка shadowIndexes, а сам массив — где-то в процессе накручивания цикла значение shadowIndexes становися null.<br/>
<br/>
Определить виновника теперь довольно просто.<br/>
<br/>
Посмотрим на поля DataTable (0x1990a1d4 — это тот самый this, значение из ECX):<br/>
<blockquote><code>0:000> dd 0x1990a1d4 + 2c<br/>
1990a200 <font color="#0000ff">1990a80c</font> <font color="#008000">1990a80c</font> 15b03c88 0142ea34<br/>
1990a210 00000000 011e11f4 00000000 00000000<br/>
1990a220 01200c24 00000000 00000000 00000000<br/>
1990a230 0124ca7c 155796bc 15579758 00000000<br/>
1990a240 00000000 00000000 155a4c5c 00000000<br/>
1990a250 00000000 00000000 00000000 00000000<br/>
1990a260 15ae8eec 00000000 00000000 1990a824<br/>
1990a270 1990a418 1990a480 1990a4e8 00000002</code></blockquote><br/>
<br/>
По адресу 1990a200 находятся indexes (поле со смещением 2с), рядом с ним — shadowIndexes. Cтавим точку остановки <em>на запись</em> в эту область памяти.<br/>
<br/>
<code>0:000> ba w 4 <font color="#008000">1990a204</font></code><br/>
<br/>
И запускаем программу, которая через несколько незабываемых мгновений валится обратно в отладчик. Значит, дествительно, по интересующему нас адресу было записано некое значение.<br/>
<br/>
<blockquote><code>0:000> g<br/>
Breakpoint 12 hit<br/>
eax=1990a80c ebx=00000000 ecx=1990a80c edx=1990a204 esi=1990a1d4 edi=1990a1d4<br/>
eip=0100304a esp=0012e288 ebp=0012e2b4 iopl=0 nv up ei pl zr na pe nc<br/>
cs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00000246<br/>
0100304a 81f81c825715 cmp eax,1557821Ch</code></blockquote><br/>
<br/>
Видим, что текущая нструкция — «cmp eax,1557821Ch». На первый взгляд это странно. Показана она потому, что такая точка останова срабатывает после события записи.<br/>
<br/>
Команда !clrstack выводит стек вызовов, полный рефлекшена (последний метод в стеке System.Reflection.RuntimeMethodInfo.InternalInvoke, что не очень-то для нас полезно).<br/>
<br/>
Ипользуем dumpstack.<br/>
<br/>
<code>0:000> !dumpstack -ee<br/>
Thread 0<br/>
Current frame: <br/>
 ChildEBP RetAddr Caller,Callee<br/>
0012e284 0814f725 (MethodDesc 0x4a631c0 +0x2d System.Data.DataTable.RecordStateChanged)<br/>
0012e2b4 08144d6d (MethodDesc 0x4a63280 +0x1c5 System.Data.DataTable.SetNewRecord)<br/>
0012e314 08145b29 (MethodDesc 0x812c488 +0x29 System.Data.DataRow.EndEdit)<br/>
0012e328 081458d9 (MethodDesc 0x812c3c8 +0x131 System.Data.DataRow.set_Item)<br/>
0012e348 03206651 (MethodDesc 0x812c3a8 +0x49 System.Data.DataRow.set_Item)<br/>
0012e360 0320bac2 (MethodDesc 0x7ec3760 +0x5a Com.Product.Core.Entities.EntityAdapter.DBAssign)<br/>
<font color="#0000ff">0012e394 2ea362d7 (MethodDesc 0x7ec3d90 +0x3f Com.Product.Core.Entities.Request.set_Price)<br/>
0012e3b8 2ea359ea (MethodDesc 0x7c8faa0 +0x252 Com.Product.App.RequestForm.UpdatePrice<br/>
0012e494 0cefdf89 (MethodDesc 0x7d50218 +0x1a1 Com.Product.App.RequestForm.panel1_RadioButtonsValueRealyChanged) </font> <br/>
0012e4b0 7b8808cd (MethodDesc 0x7b9e38c8 +0x45 System.Windows.Forms.Control.AccessibilityNotifyClients)<br/>
0012e4c4 0cefd04c (MethodDesc 0xb989dd8 +0x4c Com.Product.CommonControls.DBControls.NullableRadioButtonsPanel.OnRadioButtonsValueReallyChanged)<br/>
0012e4e4 7b92a038 (MethodDesc 0x7ba1ea48 +0x68 System.Windows.Forms.RadioButton.set_Checked)<br/>
0012e4f0 0cefcda1 (MethodDesc 0xb989d78 +0x111 Com.Product.CommonControls.DBControls.NullableRadioButtonsPanel.set_RadioButtonsValue)<br/>
0012e760 799dd8c1 (MethodDesc 0x79bb1468 +0x141 System.Reflection.RuntimeMethodInfo.InternalInvoke)<br/>
0012e7a4 799dd768 (MethodDesc 0x79bb1458 +0x18 System.Reflection.RuntimeMethodInfo.Invoke)<br/>
0012e7bc 7b1f5c81 (MethodDesc 0x7b328e20 +0x139 System.ComponentModel.ReflectPropertyDescriptor.SetValue)<br/>
0012e810 7b8a1973 (MethodDesc 0x7ba38350 +0xd3 System.Windows.Forms.Binding.SetPropValue)<br/>
0012e82c 7b8a16d8 (MethodDesc 0x7ba38330 +0x50 System.Windows.Forms.Binding.FormatObject)<br/>
0012e840 7b8a1888 (MethodDesc 0x7ba38340 +0x38 System.Windows.Forms.Binding.PushData)<br/>
0012e848 7b8a311c (MethodDesc 0x7ba38938 +0x8c System.Windows.Forms.BindingManagerBase.PushData)<br/>
0012e85c 7b8bcde7 (MethodDesc 0x7ba38cf8 +0x37 System.Windows.Forms.CurrencyManager.CurrencyManager_PushData)<br/>
0012e87c 7b8a1996 (MethodDesc 0x7ba38350 +0xf6 System.Windows.Forms.Binding.SetPropValue)<br/>
0012e88c 7b8bdc33 (MethodDesc 0x7ba38df8 +0x5b System.Windows.Forms.CurrencyManager.OnItemChanged)<br/>
<font color="#0000ff">0012e8ac 7b8a1878 (MethodDesc 0x7ba38340 +0x28 System.Windows.Forms.Binding.PushData)</font> <br/>
0012e8b4 7b8a1ad9 (MethodDesc 0x7ba38390 +0x59 System.Windows.Forms.Binding.UpdateIsBinding)<br/>
0012e8bc 7b8bdff0 (MethodDesc 0x7ba38e88 +0x110 System.Windows.Forms.CurrencyManager.UpdateIsBinding)<br/>
0012e8d0 7b8bdec8 (MethodDesc 0x7ba38e78 +0x8 System.Windows.Forms.CurrencyManager.UpdateIsBinding)<br/>
0012e8d4 7b8bd78c (MethodDesc 0x7ba38db8 +0x1c4 System.Windows.Forms.CurrencyManager.List_ListChanged)<br/>
0012e900 08181927 (MethodDesc 0x812ce50 +0x37 System.Data.DataView.OnListChanged)<br/>
0012e928 10c456ac (MethodDesc 0x812ce40 +0x34 System.Data.DataView.IndexListChanged)<br/>
0012e930 10525133 (MethodDesc 0x812ce30 +0x33 System.Data.DataView.FireEvent)<br/>
0012e940 10c45663 (MethodDesc 0x31fada0 +0x2b System.Data.DataViewListener.IndexListChanged)<br/>
0012e950 0814c5bc (MethodDesc 0x81219d0 +0x1c System.Data.Index.OnListChanged)<br/>
<font color="#0000ff">0012e958 07eff8c7 (MethodDesc 0x4a63200 +0x8f System.Data.DataTable.ResetIndexes)</font> <br/>
0012e984 08186f34 (MethodDesc 0x31fcff0 +0x234 System.Data.Merger.MergeTable)<br/>
0012e9b0 08185790 (MethodDesc 0x31fd020 +0x48 System.Data.Merger.MergeTableData)<br/>
0012e9dc 0818e31f (MethodDesc 0x31fcfe0 +0x2f System.Data.Merger.MergeTable)<br/>
0012e9ec 0818e2b1 (MethodDesc 0x7ec0ce8 +0x61 System.Data.DataSet.Merge)<br/>
0012ea00 0cef8056 (MethodDesc 0x7c8f8d0 +0x61e Com.Product.App.RequestForm.InitEdit)<br/>
0012ec3c 26a117e7 (MethodDesc 0x10eaee98 +0x57 Com.Product.Core.Entities.EntityContextCache..ctor)<br/>
0012ec50 0cef79df (MethodDesc 0x7c8f8c0 +0x57 Com.Product.App.RequestForm.InitEdit)<br/>
0012ec74 0818d593 (MethodDesc 0x7ec0448 +0x2b Com.CommonComponents.Tools.PerformanceTimer.sAddCheckPoint)<br/>
0012ec84 0cef7933 (MethodDesc 0x7c8da68 +0x8b Com.Product.Tickets.Ticket.OnInit)<br/>
0012ecb4 0cef7706 (MethodDesc 0x7d509e8 +0x6e Com.Product.App.RequestForm.OnInit)<br/>
0012ecf4 0cef766b (MethodDesc 0x7c8da58 +0x1b Com.Product.Tickets.Ticket.Init)<br/>
....</code><br/>
<br/>
Ну вот, собственно, и виновник нашелся. Цветом в стеке выделенны ключевые вызовы: ResetIndexes вызывает событие OnListChanged, которое плавно перетекает в биндинг, который вызывает функцию приложения UpdatePrice. Эта функция по стечению обстоятельств меняет данные в датасете, что и приводит к преждевременному зануления shadowIndexes.<br/>
<br/>
Несколько движений технологичным нано-молотком сишарпа, виновник наказан, программа работает. Ура!</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B.net%5D" class="tm-article-body__tags-item-link">.net</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/net/" class="tm-article-body__tags-item-link">
                  .NET
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 51: ↑38 и ↓13</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 51: ↑38 и ↓13" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+25</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    8
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/52441/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      21
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/nchaly/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/e05/b36/6cc/e05b366cc644122427cf55f45fc219d1.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 248 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    332.7
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">nchaly</span> <a href="/ru/users/nchaly/" class="tm-user-card__nickname">
          @nchaly
        </a> <!----></div> <p class="tm-user-card__short-info">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/52441/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 21 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-08T12:48:06.000Z" title="2021-09-08, 15:48">8  сентября   в 15:48</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/samsung/blog/576884/" class="tm-article-title__link"><span>Ускоряем запуск приложений с .NET 6, .NET на холодильнике и многое другое</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 18: ↑18 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 18: ↑18 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+18</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.6K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    36
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/samsung/blog/576884/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      2
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2019-04-20T12:54:43.000Z" title="2019-04-20, 15:54">20  апреля  2019 в 15:54</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/448790/" class="tm-article-title__link"><span>SpaceVIL — кроссплатфоремнный GUI фреймворк для разработки на .Net Core, .Net Standard и JVM</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 35: ↑34 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 35: ↑34 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+33</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">23K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    75
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/448790/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      28
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2009-08-03T17:55:04.000Z" title="2009-08-03, 21:55">3  августа  2009 в 21:55</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/66117/" class="tm-article-title__link"><span>Изучение ASP.NET+ADO.NET+Silverlight</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 26: ↑18 и ↓8</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 26: ↑18 и ↓8" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+10</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">11K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    29
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/66117/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      18
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-27T09:00:04.000Z" title="2021-09-27, 12:00">сегодня в 12:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/ruvds/blog/580060/" class="tm-article-title__link"><span>Арракис, который мы заслужили</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 80: ↑77 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 80: ↑77 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+74</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    21
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/ruvds/blog/580060/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      13
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T21:49:14.000Z" title="2021-09-27, 00:49">сегодня в 00:49</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580092/" class="tm-article-title__link"><span>30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 42: ↑42 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 42: ↑42 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+42</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">15K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    44
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580092/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      80
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:37:10.000Z" title="2021-09-26, 22:37">вчера в 22:37</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580086/" class="tm-article-title__link"><span>Термо принтер и JavaScript</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 44: ↑43 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 44: ↑43 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+42</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    34
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580086/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      47
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T19:00:02.000Z" title="2021-09-26, 22:00">вчера в 22:00</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/funcorp/blog/579542/" class="tm-article-title__link"><span>Jetpack Compose — как легко построить UI на Android</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 39: ↑35 и ↓4</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 39: ↑35 и ↓4" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+31</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    50
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/funcorp/blog/579542/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      8
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-26T22:35:26.000Z" title="2021-09-27, 01:35">сегодня в 01:35</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580094/" class="tm-article-title__link"><span>Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 47: ↑37 и ↓10</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 47: ↑37 и ↓10" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+27</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">12K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    22
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580094/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      79
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="52441" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/52441/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/52441/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"52441":{"id":"52441","timePublished":"2009-02-20T12:15:33+00:00","isCorporative":false,"lang":"ru","titleHtml":"Дело о пропавшем индексе","leadData":{"textHtml":"\u003Cem\u003EДело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать поведение программы на самом низком уровне.\u003C\u002Fem\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, имеется приложение, написанное на C#, которое использует .net framework 1.1 (да-да). Приложение после некоторых внесенных изменений начало выбрасывать такое малоинформативное исключение:","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":332.7,"votesCount":248},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"19617","alias":"nchaly","fullname":"nchaly","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe05\u002Fb36\u002F6cc\u002Fe05b366cc644122427cf55f45fc219d1.jpg","speciality":null},"statistics":{"commentsCount":21,"favoritesCount":8,"readingCount":1466,"score":25,"votesCount":51},"hubs":[{"relatedData":null,"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cem\u003EДело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать поведение программы на самом низком уровне.\u003C\u002Fem\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, имеется приложение, написанное на C#, которое использует .net framework 1.1 (да-да). Приложение после некоторых внесенных изменений начало выбрасывать такое малоинформативное исключение:\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003ESystem.NullReferenceException: Object reference not set to an instance of an object.\u003Cbr\u002F\u003E\r\n at System.Data.DataTable.\u003Cfont color=\"#0000ff\"\u003EResetIndexes\u003C\u002Ffont\u003E()\u003Cbr\u002F\u003E\r\n at System.Data.Merger.MergeTable(DataTable src, DataTable dst)\u003Cbr\u002F\u003E\r\n at System.Data.Merger.MergeTableData(DataTable src)\u003Cbr\u002F\u003E\r\n at System.Data.Merger.MergeTable(DataTable src)\u003Cbr\u002F\u003E\r\n at System.Data.DataSet.Merge(DataTable table, Boolean preserveChanges, MissingSchemaAction missingSchemaAction)\u003Cbr\u002F\u003E\r\n at Com.Product.App.RequestForm.\u003Cfont color=\"#008000\"\u003EInitEdit\u003C\u002Ffont\u003E(InitRequestArgs args)\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nInitEdit — функция формы в приложении, которая инициализирует данные. Строка исходного кода приложения, на которой оно выбрасывается:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Cfont color=\"black\"\u003EdsRequestList.Merge(dsLast.Tables[\u003Cfont color=\"#A31515\"\u003E\"TABLE_REQUESTS\"\u003C\u002Ffont\u003E], \u003Cfont color=\"#0000ff\"\u003Efalse\u003C\u002Ffont\u003E, MissingSchemaAction.Ignore);\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nКод функции ResetIndexes, который показывает нам Рефлектор, не сказать чтобы уж очень сложный:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Col\u003E\r\n\u003Cli\u003E\u003Cfont color=\"#0000ff\"\u003Einternal\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E ResetIndexes()\u003C\u002Fli\u003E\r\n\u003Cli\u003E{\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.RecomputeCompareInfo();\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.indexes != \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.SetShadowIndexes();\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Etry\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E count = \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes.Count;\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Efor\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E i = 0; i &lt; count; i++)\u003C\u002Fli\u003E\r\n\u003Cli\u003E            {\u003C\u002Fli\u003E\r\n\u003Cli\u003E                ((Index)\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes[i]).Reset();\u003C\u002Fli\u003E\r\n\u003Cli\u003E            }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Efinally\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E}\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003C\u002Ffont\u003E\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nВроде как проблем нет. Функция пробегает по индексам и вызывает у каждого \u003Cem\u003EReset\u003C\u002Fem\u003E. Где может быть исключение? \u003Cstrong\u003ESetShadowIndexes\u003C\u002Fstrong\u003E просто вызывает \"\u003Cstrong\u003Ethis.shadowIndexes = this.LiveIndexes;\u003C\u002Fstrong\u003E\" Значит, на момент исполнения строки №9 \u003Cstrong\u003EshadowIndexes\u003C\u002Fstrong\u003E ненулевое. Значит, резонно, как мне кажется, предположить, что где-то внутри этого массива находится null элемент, и, соответственно падает на строке 12. Думаю, проблема в этом, сказал я себе и принялся за работу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗапускаем windbg, соединяемся с процессом, загружаем в дебагер Son of Strike (sos.dll). Думаю, все знают, что это такое, и нужды объяснять нет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтавим точку остановки на нашей функции:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:023\u003E !bp app.exe Com.Product.App.RequestForm.\u003Cfont color=\"#008000\"\u003EInitEdit\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nSetting breakpoint at : 0xcef7988\u003Cbr\u002F\u003E\r\nbp 0xcef7988 \" .echo [DEFAULT] [hasThis] Boolean Com.Product.App.RequestForm.InitEdit(Class Com.Product.Tickets.InitArgs) \"\u003Cbr\u002F\u003E\r\nSetting breakpoint at : 0xcef7a38\u003Cbr\u002F\u003E\r\nbp 0xcef7a38 \" .echo [DEFAULT] [hasThis] Boolean Com.Product.App.RequestForm.InitEdit(Class Com.Product.App.Requests.InitRequestArgs) \"\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n(Мне нужна только вторая функция, поэтому отключаем первую точку командой windbg: bd 0). \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНельзя поставить точку остановки прямо на \u003Cstrong\u003EResetIndexes\u003C\u002Fstrong\u003E, так как приложение довольно интенсивно использует датасеты и нам придется пропустить много ложных вызовов.\u003Cbr\u002F\u003E\r\nПоэтому точки надо расставлять последовательно, по мере вызова нужных функций.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле того, как дебаггер останавливает на \u003Cstrong\u003EInitEdit\u003C\u002Fstrong\u003E, ставим точку на \u003Cstrong\u003EDataSet.Merge\u003C\u002Fstrong\u003E:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E !bp system.data.dll System.Data.DataSet.Merge\u003Cbr\u002F\u003E\r\nSetting breakpoint at : 0x8185418\u003Cbr\u002F\u003E\r\nbp 0x8185418 \" .echo [DEFAULT] [hasThis] Void System.Data.DataSet.Merge(Class System.Data.DataSet) \"\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n(опять же SoS выставит остановку на все перегруженные функции Merge, поэтому избавляемся от не ненужных)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле \u003Cstrong\u003EDataSet.Merge\u003C\u002Fstrong\u003E нужно зайти в \u003Cstrong\u003ESystem.Data.Merger.MergeTable\u003C\u002Fstrong\u003E, откуда и вызывается \u003Cstrong\u003EDataTable.ResetIndexes\u003C\u002Fstrong\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПроверяем, что аргумент действительно тот, который мы ожидаем:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E !clrstack -a 1\u003Cbr\u002F\u003E\r\nThread 0\u003Cbr\u002F\u003E\r\nESP EIP \u003Cbr\u002F\u003E\r\nESP\u002FREG Object Name\u003Cbr\u002F\u003E\r\neax 0x191cca10 Com.Product.App.Requests.dsRequests\u002FTABLE_USERSDataTable\u003Cbr\u002F\u003E\r\necx 0x1562815c System.Data.Merger\u003Cbr\u002F\u003E\r\n\u003Cstrong\u003Eedx\u003C\u002Fstrong\u003E \u003Cfont color=\"#0000ff\"\u003E0x1952b684 System.Data.DataTable\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\nesi 0x1562815c System.Data.Merger\u003Cbr\u002F\u003E\r\nedi 0x1952b684 System.Data.DataTable\u003Cbr\u002F\u003E\r\n0x0012e9b4 0x08186d00 [DEFAULT] [hasThis] Void System.Data.Merger.MergeTable(Class System.Data.DataTable,Class System.Data.DataTable)\u003Cbr\u002F\u003E\r\n EDI 0x1952b684 ESI 0x1562815c EBX 0x00000000 EDX 0x1952b684 ECX 0x1562815c \u003Cbr\u002F\u003E\r\n EAX 0x191cca10 EBP 0x0012e9dc ESP 0x0012e9b4 EIP 0x08186d00\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nCмотрим на имя таблицы, которая передана как параметр.\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E !do (edx)\u003Cbr\u002F\u003E\r\nName: System.Data.DataTable\u003Cbr\u002F\u003E\r\nMethodTable 0x04a633f8\u003Cbr\u002F\u003E\r\nEEClass 0x04a37244\u003Cbr\u002F\u003E\r\nSize 232(0xe8) bytes\u003Cbr\u002F\u003E\r\nGC Generation: 2\u003Cbr\u002F\u003E\r\nmdToken: 0x0200003d (c:\\winxp\\assembly\\gac\\system.data\\1.0.5000.0__b77a5c561934e089\\system.data.dll)\u003Cbr\u002F\u003E\r\nFieldDesc*: 0x04a62544\u003Cbr\u002F\u003E\r\n MT Field Offset Type Attr Value Name\u003Cbr\u002F\u003E\r\n0x7b308b0c 0x4000583 0x4 CLASS instance 0x00000000 site\u003Cbr\u002F\u003E\r\n...\u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003fa 0x34 CLASS instance 0x15628170 extendedProperties\u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003fb \u003Cfont color=\"#0000ff\"\u003E0x38 CLASS instance 0x1952bc2c tableName\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003fc 0x3c CLASS instance 0x00000000 tableNamespace\u003Cbr\u002F\u003E\r\n...\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИмя таблицы записано в поле со смещением 0x38 от начала объекта.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E0:000\u003E !do poi(edx+38)\u003Cbr\u002F\u003E\r\nString: TABLE_USERS\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nTABLE_USERS — не та таблица, что нам нужна, поэтому идем дальше, пока не встретим \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E !do \u003Cfont color=\"#0000ff\"\u003Epoi(edx+38)\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nString: TABLE_REQUESTS\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТолько после этого добавляем точку остановки в \u003Cstrong\u003EResetIndexes\u003C\u002Fstrong\u003E, запускаем программу дальше, и опять останавливаемся.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E g\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E[DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\neax=191c76ec ebx=00000001 ecx=191c70b4 edx=0006471c esi=19508a4c edi=19221a28\u003Cbr\u002F\u003E\r\neip=07eff838 esp=0012e988 ebp=191c70b4 iopl=0 nv up ei ng nz na po cy\u003Cbr\u002F\u003E\r\ncs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00000283\u003Cbr\u002F\u003E\r\n07eff838 55 push ebp\u003Cbr\u002F\u003E\r\n0:000\u003E \u003Cstrong\u003E!clrstack -a 1\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nThread 0\u003Cbr\u002F\u003E\r\nESP EIP \u003Cbr\u002F\u003E\r\nESP\u002FREG Object Name\u003Cbr\u002F\u003E\r\neax 0x191c76ec System.Collections.ArrayList\u003Cbr\u002F\u003E\r\necx \u003Cfont color=\"#0000ff\"\u003E0x191c70b4 Com.Product.App.Requests.dsRequests\u002FTABLE_REQUESTSDataTable\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\nesi 0x19508a4c System.Data.DataRow\u003Cbr\u002F\u003E\r\nedi 0x19221a28 System.Data.DataTable\u003Cbr\u002F\u003E\r\nebp 0x191c70b4 Com.Product.App.Requests.dsRequests\u002FTABLE_REQUESTSDataTable\u003Cbr\u002F\u003E\r\n0x0012e988 0x07eff838 [DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()\u003Cbr\u002F\u003E\r\n EDI 0x19221a28 ESI 0x19508a4c EBX 0x00000001 EDX 0x0006471c ECX 0x191c70b4 \u003Cbr\u002F\u003E\r\n EAX 0x191c76ec EBP 0x191c70b4 ESP 0x0012e988 EIP 0x07eff838 \u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nthis передается в ecx, берем ее и смотрим что лежит в поле \u003Cstrong\u003Eindexes\u003C\u002Fstrong\u003E:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E \u003Cstrong\u003E!do ecx\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nName: Com.Product.App.Requests.dsRequests\u002FTABLE_REQUESTSDataTable\u003Cbr\u002F\u003E\r\nMethodTable 0x10bb39f4\u003Cbr\u002F\u003E\r\nEEClass 0x10ac9a40\u003Cbr\u002F\u003E\r\nSize 580(0x244) bytes\u003Cbr\u002F\u003E\r\nGC Generation: 2\u003Cbr\u002F\u003E\r\nmdToken: 0x02000296 \u003Cbr\u002F\u003E\r\nFieldDesc*: 0x10bb2eb4\u003Cbr\u002F\u003E\r\n MT Field Offset Type Attr Value Name\u003Cbr\u002F\u003E\r\n0x7b308b0c 0x4000583 0x4 CLASS instance 0x00000000 site\u003Cbr\u002F\u003E\r\n...\u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003f8 0x2c CLASS \u003Cfont color=\"#0000ff\"\u003Einstance 0x191c76ec indexes\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003f9 0x30 CLASS instance 0x00000000 shadowIndexes \u003Cbr\u002F\u003E\r\n0x04a633f8 0x40003fa 0x34 CLASS instance 0x15629d98 extendedProperties\u003Cbr\u002F\u003E\r\n...\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПока что все правильно. На момент входа в \u003Cstrong\u003EResetIndexe\u003C\u002Fstrong\u003Es поле indexes равно нулю, затем устанавливается с помощью \u003Cstrong\u003ESetShadowIndexes\u003C\u002Fstrong\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E \u003Cstrong\u003E!dc \u003Cfont color=\"#0000ff\"\u003E0x191c76ec\u003C\u002Ffont\u003E\u003C\u002Fstrong\u003E\u003Cbr\u002F\u003E\r\nGoing to dump the Collection passed.\u003Cbr\u002F\u003E\r\nName: System.Collections.ArrayList\u003Cbr\u002F\u003E\r\nGC Generation: 2\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAddress MT Class Name\u003Cbr\u002F\u003E\r\n0x1557971c 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e420 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e508 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e5f0 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e6d8 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e7c0 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e8a8 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559e990 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559ea78 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559eb60 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559ec48 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559ed30 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559ee18 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559ef00 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559efe8 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559f0d0 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x1559f1b8 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x156f1a9c 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x156f4cd4 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x157962b0 0x08121b80 System.Data.Index\u003Cbr\u002F\u003E\r\n0x157ba910 0x08121b80 System.Data.Index\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМда… моя основная теория распадается на глазах. Нет там нулевых элементов. Вот незадача. Что ж, продолжим выполнение кода, и посмотрим на исключения изнутри windbg. Отпускаем программу. Когда происходит исключение, отладчик останавливается:\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E g\u003Cbr\u002F\u003E\r\n(1638.1738): Access violation - code c0000005 (first chance)\u003Cbr\u002F\u003E\r\nFirst chance exceptions are reported before any exception handling.\u003Cbr\u002F\u003E\r\nThis exception may be expected and handled.\u003Cbr\u002F\u003E\r\neax=191c70b4 ebx=00000015 ecx=00000000 edx=00000014 esi=195b0894 edi=00000014\u003Cbr\u002F\u003E\r\neip=07eff899 esp=0012e960 ebp=0012e984 iopl=0 nv up ei ng nz ac pe cy\u003Cbr\u002F\u003E\r\ncs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00010297\u003Cbr\u002F\u003E\r\n07eff899 8b01 \u003Cfont color=\"#0000ff\"\u003Emov eax,dword ptr [ecx] ds:0023:00000000=????????\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыполняем команду \u003Cem\u003E!analyze -v\u003C\u002Fem\u003E, результат которой невероятно напичкан разного рода данными о произошедшем исключении. Привожу сжатом виде:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E0:000\u003E !analyze -v\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n*******************************************************************************\u003Cbr\u002F\u003E\r\n* *\u003Cbr\u002F\u003E\r\n* Exception Analysis *\u003Cbr\u002F\u003E\r\n* *\u003Cbr\u002F\u003E\r\n*******************************************************************************\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nFAULTING_IP: \u003Cbr\u002F\u003E\r\n+7eff899\u003Cbr\u002F\u003E\r\n07eff899 8b01 mov eax,dword ptr [ecx]\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nEXCEPTION_RECORD: ffffffff -- (.exr 0xffffffffffffffff)\u003Cbr\u002F\u003E\r\n.exr 0xffffffffffffffff\u003Cbr\u002F\u003E\r\nExceptionAddress: 07eff899\u003Cbr\u002F\u003E\r\n ExceptionCode: c0000005 (Access violation)\u003Cbr\u002F\u003E\r\n ExceptionFlags: 00000000\u003Cbr\u002F\u003E\r\nNumberParameters: 2\u003Cbr\u002F\u003E\r\n Parameter[0]: 00000000\u003Cbr\u002F\u003E\r\n Parameter[1]: 00000000\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003EAttempt to read from address 00000000\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nFAULTING_THREAD: 00001738\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nDEFAULT_BUCKET_ID: NULL_POINTER_READ\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nPROCESS_NAME: App.exe\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nERROR_CODE: (NTSTATUS) 0xc0000005 - The instruction at \"0x%08lx\" referenced memory at \"0x%08lx\". The memory could not be \"%s\".\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nREAD_ADDRESS: 00000000 \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nFAILED_INSTRUCTION_ADDRESS: \u003Cbr\u002F\u003E\r\n+7eff899\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E07eff899 8b01 mov eax,dword ptr [ecx]\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nNTGLOBALFLAG: 0\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAPPLICATION_VERIFIER_FLAGS: 0\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nIP_ON_HEAP: 08186f34\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nMANAGED_STACK: !dumpstack -EE\u003Cbr\u002F\u003E\r\n!dumpstack -EE\u003Cbr\u002F\u003E\r\nThread 0\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003ECurrent frame: (MethodDesc 0x4a63200 +0x61 System.Data.DataTable.ResetIndexes)\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n ChildEBP RetAddr Caller,Callee\u003Cbr\u002F\u003E\r\n0012e984 08186f34 (MethodDesc 0x31fcff0 +0x234 System.Data.Merger.MergeTable)\u003Cbr\u002F\u003E\r\n0012e9b0 08185790 (MethodDesc 0x31fd020 +0x48 System.Data.Merger.MergeTableData)\u003Cbr\u002F\u003E\r\n0012e9dc 0818e31f (MethodDesc 0x31fcfe0 +0x2f System.Data.Merger.MergeTable)\u003Cbr\u002F\u003E\r\n0012e9ec 0818e2b1 (MethodDesc 0x7ec0ce8 +0x61 System.Data.DataSet.Merge)\u003Cbr\u002F\u003E\r\n0012ea00 0cef8056 (MethodDesc 0x7c8f8d0 +0x61e Com.Product.App.RequestForm.InitEdit)\u003Cbr\u002F\u003E\r\n0012ec3c 26a117e7 (MethodDesc 0x10eaee98 +0x57 Com.Product.Core.Entities.EntityContextCache..ctor)\u003Cbr\u002F\u003E\r\n0012ec50 0cef79df (MethodDesc 0x7c8f8c0 +0x57 Com.Product.App.RequestForm.InitEdit)\u003Cbr\u002F\u003E\r\n0012ec74 0818d593 (MethodDesc 0x7ec0448 +0x2b Com.CommonComponents.Tools.PerformanceTimer.sAddCheckPoint)\u003Cbr\u002F\u003E\r\n0012ec84 0cef7933 (MethodDesc 0x7c8da68 +0x8b Com.Product.Tickets.Ticket.OnInit)\u003Cbr\u002F\u003E\r\n0012ecb4 0cef7706 (MethodDesc 0x7d509e8 +0x6e Com.Product.App.RequestForm.OnInit)\u003Cbr\u002F\u003E\r\n0012ecf4 0cef766b (MethodDesc 0x7c8da58 +0x1b Com.Product.Tickets.Ticket.Init)\u003Cbr\u002F\u003E\r\n[неважная часть стека вызовов]\u003Cbr\u002F\u003E\r\n---------\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nCтек вызовов уже мы видели, правда в несколько сокращенном варианте. А вот по коду сейчас будем разбираться. Давайте взглянем на код, который вызвал исключение:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E07eff899 8b01 mov eax,dword ptr [ecx] ds:0023:00000000=????????\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧитается значение из памяти по адресу, который содержится в ECX, а там (в ECX), как мы видим, ноль…\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте теперь посмотрим на функцию ResetIndexes, превращенную заботливым jit-компилятором в исполняемый код для процессора x86. Я повторю код функции на C#, и мы сейчас сопоставим его с кодом ассемблера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E\u003Ca href=\"http:\u002F\u002Fvirtser.net\u002Fblog\u002Fpost\u002Fsource-code-highlighter.aspx\"\u003E\u003C\u002Fa\u003E\u003Cfont color=\"black\"\u003E\u003Col\u003E\r\n\u003Cli\u003E\u003Cfont color=\"#0000ff\"\u003Einternal\u003C\u002Ffont\u003E \u003Cfont color=\"#0000ff\"\u003Evoid\u003C\u002Ffont\u003E ResetIndexes()\u003C\u002Fli\u003E\r\n\u003Cli\u003E{\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.RecomputeCompareInfo();\u003C\u002Fli\u003E\r\n\u003Cli\u003E    \u003Cfont color=\"#0000ff\"\u003Eif\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.indexes != \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E)\u003C\u002Fli\u003E\r\n\u003Cli\u003E    {\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.SetShadowIndexes();\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Etry\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E count = \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes.Count;\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Efor\u003C\u002Ffont\u003E (\u003Cfont color=\"#0000ff\"\u003Eint\u003C\u002Ffont\u003E i = 0; i &lt; count; i++)\u003C\u002Fli\u003E\r\n\u003Cli\u003E            {\u003C\u002Fli\u003E\r\n\u003Cli\u003E                ((Index)\u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes[i]).Reset();\u003C\u002Fli\u003E\r\n\u003Cli\u003E            }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E        \u003Cfont color=\"#0000ff\"\u003Efinally\u003C\u002Ffont\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E        {\u003C\u002Fli\u003E\r\n\u003Cli\u003E            \u003Cfont color=\"#0000ff\"\u003Ethis\u003C\u002Ffont\u003E.shadowIndexes = \u003Cfont color=\"#0000ff\"\u003Enull\u003C\u002Ffont\u003E;\u003C\u002Fli\u003E\r\n\u003Cli\u003E        }\u003C\u002Fli\u003E\r\n\u003Cli\u003E    }\u003C\u002Fli\u003E\r\n\u003Cli\u003E}\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003C\u002Ffont\u003E\u003Cfont color=\"gray\"\u003E* This source code was highlighted with \u003Cfont color=\"gray\"\u003ESource Code Highlighter\u003C\u002Ffont\u003E.\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь дизассемблируем из windbg. Функция небольшая, а вот ассемблерного кода — две страницы :( \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont\u003E\u003Ccode\u003E0:000\u003E !u\u003Cbr\u002F\u003E\r\nNo value passed in, defaulting to EIP\u003Cbr\u002F\u003E\r\nWill print '\u003E\u003E\u003E ' at address: 0x07eff899\u003Cbr\u002F\u003E\r\nNormal JIT generated code\u003Cbr\u002F\u003E\r\n[DEFAULT] [hasThis] Void System.Data.DataTable.ResetIndexes()\u003Cbr\u002F\u003E\r\nBegin 0x07eff838, size 0xc4\u003Cbr\u002F\u003E\r\n07eff838 push    ebp\u003Cbr\u002F\u003E\r\n07eff839 mov     ebp,esp\u003Cbr\u002F\u003E\r\n07eff83b sub     esp,18h\u003Cbr\u002F\u003E\r\n07eff83e push    edi\u003Cbr\u002F\u003E\r\n07eff83f push    esi\u003Cbr\u002F\u003E\r\n07eff840 push    ebx                     ; настройка стека итд.\u003Cbr\u002F\u003E\r\n07eff841 mov     dword ptr [ebp-8],0     ;\u003Cbr\u002F\u003E\r\n07eff848 mov     dword ptr [ebp-14h],ecx ; По адресу \"ebp-14h\" сохраняется указатель на \u003Cbr\u002F\u003E\r\n                                         ; объект DataTable, внутри которого мы\u003Cbr\u002F\u003E\r\n                                         ; сейчас находимся, this.\u003Cbr\u002F\u003E\r\n07eff84b mov     ecx,dword ptr [ebp-14h]\u003Cbr\u002F\u003E\r\n07eff84e call    07eff420 (System.Data.DataTable.RecomputeCompareInfo) ; (3) это понятно и так\u003Cbr\u002F\u003E\r\n07eff853 mov     eax,dword ptr [ebp-14h]\u003Cbr\u002F\u003E\r\n07eff856 cmp     dword ptr [eax+2Ch],0   ; (4) if (this.indexes != null)\u003Cbr\u002F\u003E\r\n07eff85a jne     \u003Cfont color=\"#0000ff\"\u003E\u003Cstrong\u003E07eff863\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n07eff85c pop     ebx\u003Cbr\u002F\u003E\r\n07eff85d pop     esi\u003Cbr\u002F\u003E\r\n07eff85e pop     edi\u003Cbr\u002F\u003E\r\n07eff85f mov     esp,ebp\u003Cbr\u002F\u003E\r\n07eff861 pop     ebp\u003Cbr\u002F\u003E\r\n07eff862 ret                             ; выход, если все же indexes == null\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E\u003Cstrong\u003E07eff863\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E mov     ecx,dword ptr [ebp-14h] \u003Cbr\u002F\u003E\r\n07eff866 call    dword ptr ds:[4A634CCh] ; (6) this.LiveIndexes\u003Cbr\u002F\u003E\r\n07eff86c mov     ebx,dword ptr [ebp-14h]\u003Cbr\u002F\u003E\r\n07eff86f lea     edx,[ebx+30h]           ; (6) this.indexes                        \u003Cbr\u002F\u003E\r\n07eff872 call    01003048                ; (6) indexes = LiveIndexes, интересно,\u003Cbr\u002F\u003E\r\n                                         ; оказывается компилятор-то заинлайнил \u003Cbr\u002F\u003E\r\n                                         ; функцию SetShadowIndexes,\u003Cbr\u002F\u003E\r\n                                         ; которая, прочем, только \u003Cbr\u002F\u003E\r\n                                         ; из этого присваивания и состоит.\u003Cbr\u002F\u003E\r\n07eff877 mov     eax,dword ptr [ebp-14h] ; (9)\u003Cbr\u002F\u003E\r\n07eff87a mov     dword ptr [ebp-18h],eax ; (9)\u003Cbr\u002F\u003E\r\n07eff87d mov     ecx,dword ptr [eax+30h] ; (9) ECX сейчас содержит указатель shadowIndexes.\u003Cbr\u002F\u003E\r\n07eff880 mov     eax,dword ptr [ecx]     ; (9) Здесь танцы с бубном:\u003Cbr\u002F\u003E\r\n                                         ; (9) первое поле в объекте (то, которое берется как [ecx]) -\u003Cbr\u002F\u003E\r\n                                         ; (9) это указатель на MethodTable его класса,\u003Cbr\u002F\u003E\r\n07eff882 call    dword ptr [eax+0D0h]    ; (9) А это, собственно вызов функции со \u003Cbr\u002F\u003E\r\n                                         ; (9) смещением 0xD0 от начала таблицы методов -\u003Cbr\u002F\u003E\r\n                                         ; (9) ни что иное, как ArrayList.Count,\u003Cbr\u002F\u003E\r\n07eff888 mov     ebx,eax                 ; (9) значение которого сейчас в eax.\u003Cbr\u002F\u003E\r\n                                         ; (9) Инструкции, начиная с адреса 07eff877\u003Cbr\u002F\u003E\r\n                                         ; (9) по текущую - это строка кода\u003Cbr\u002F\u003E\r\n                                         ; (9) int count = this.shadowIndexes.Count;\u003Cbr\u002F\u003E\r\n07eff88a xor     edi,edi                 ;(10) int i = 0;\u003Cbr\u002F\u003E\r\n07eff88c cmp     ebx,0                   ;(10) Немедленный выход, \u003Cbr\u002F\u003E\r\n                                         ;(10) если shadowIndexes.Count == 0.\u003Cbr\u002F\u003E\r\n07eff88f jle     \u003Cfont color=\"#008000\"\u003E\u003Cstrong\u003E07eff8cc\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff0000\"\u003E\u003Cstrong\u003E07eff891\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E mov     eax,dword ptr [ebp-18h] ;(12)\u003Cbr\u002F\u003E\r\n07eff894 mov     ecx,dword ptr [eax+30h] ;(12) ECX опять содержит указатель shadowIndexes.\u003Cbr\u002F\u003E\r\n07eff897 mov     edx,edi\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E\u003E\u003E\u003E 07eff    mov     eax,dword ptr [ecx]\u003C\u002Ffont\u003E ;(12) Опять получение MethodTable\u003Cbr\u002F\u003E\r\n                                         ;(12) для класса shadowIndexes (это ArrayList)\u003Cbr\u002F\u003E\r\n07eff89b call    dword ptr [eax+0A0h]    ;(12) Вызов shadowIndexes[i]\u003Cbr\u002F\u003E\r\n07eff8a1 mov     edx,eax\u003Cbr\u002F\u003E\r\n07eff8a3 mov     ecx,8121B80h\u003Cbr\u002F\u003E\r\n07eff8a8 call    mscorwks!JIT_ChkCastClass (791e381f)   ;(12) \u003Cbr\u002F\u003E\r\n                                         ;(12) Приведение типа: ((Index)this.shadowIndexes[i])\u003Cbr\u002F\u003E\r\n07eff8ad mov     esi,eax\u003Cbr\u002F\u003E\r\n07eff8af cmp     dword ptr [esi],eax\u003Cbr\u002F\u003E\r\n07eff8b1 mov     ecx,esi\u003Cbr\u002F\u003E\r\n07eff8b3 call    dword ptr ds:[8121C44h] ;(12) Вызов Index.InitRecords();\u003Cbr\u002F\u003E\r\n07eff8b9 mov     edx,dword ptr ds:[2208EC4h]\u003Cbr\u002F\u003E\r\n07eff8bf mov     ecx,esi\u003Cbr\u002F\u003E\r\n07eff8c1 call    dword ptr ds:[8121C54h] ;(12) Вызов Index.OnListChanged();\u003Cbr\u002F\u003E\r\n                                          ;(12) Что характерно, функция Index.Reset(),\u003Cbr\u002F\u003E\r\n                                          ;(12) которая состоит вызова \u003Cbr\u002F\u003E\r\n                                          ;(12) InitRecords и OnListChanged\u003Cbr\u002F\u003E\r\n                                          ;(12) также встроена в код,\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n07eff8c7  inc     edi                     ;(10) это i++ из цикла for.\u003Cbr\u002F\u003E\r\n07eff8c8  cmp     edi,ebx                 ;(10) это\u003Cbr\u002F\u003E\r\n07eff8ca  jl      \u003Cfont color=\"#ff0000\"\u003E\u003Cstrong\u003E07eff891\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E                ;(10) и это - \"i &lt; count\". Переход на начало цикла.\u003Cbr\u002F\u003E\r\n                                          ;(10) обычно так циклы и реализованы \u003Cbr\u002F\u003E\r\n                                          ;(10) в дотнет: блок проверки на \u003Cbr\u002F\u003E\r\n                                          ;(10) продолжение цикла находится в конце.\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#008000\"\u003E\u003Cstrong\u003E07eff8cc\u003C\u002Fstrong\u003E\u003C\u002Ffont\u003E  mov     dword ptr [ebp-0Ch],0\u003Cbr\u002F\u003E\r\n07eff8d3  mov     dword ptr [ebp-8],0FCh\u003Cbr\u002F\u003E\r\n07eff8da  push    7EFF8EEh\u003Cbr\u002F\u003E\r\n07eff8df  jmp     07eff8e1\u003Cbr\u002F\u003E\r\n07eff8e1  mov     eax,dword ptr [ebp-14h]\u003Cbr\u002F\u003E\r\n07eff8e4  mov     dword ptr [eax+30h],0   ;(17) зануление shadowIndexes\u003Cbr\u002F\u003E\r\n                                          ;(17) в блоке finally.\u003Cbr\u002F\u003E\r\n07eff8eb  pop     eax\u003Cbr\u002F\u003E\r\n07eff8ec  jmp     eax\u003Cbr\u002F\u003E\r\n07eff8ee  mov     dword ptr [ebp-8],0\u003Cbr\u002F\u003E\r\n07eff8f5  pop     ebx\u003Cbr\u002F\u003E\r\n07eff8f6  pop     esi\u003Cbr\u002F\u003E\r\n07eff8f7  pop     edi\u003Cbr\u002F\u003E\r\n07eff8f8  mov     esp,ebp\u003Cbr\u002F\u003E\r\n07eff8fa  pop     ebp\u003Cbr\u002F\u003E\r\n07eff8fb  ret\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\nСтрока на которой генерируется исключение, отмечена знаком \"\u003E\u003E\u003E\", и становится ясно, что виноват не глючный какой-то элемент внутри списка shadowIndexes, а сам массив — где-то в процессе накручивания цикла значение shadowIndexes становися null.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОпределить виновника теперь довольно просто.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосмотрим на поля DataTable (0x1990a1d4 — это тот самый this, значение из ECX):\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E dd 0x1990a1d4 + 2c\u003Cbr\u002F\u003E\r\n1990a200 \u003Cfont color=\"#0000ff\"\u003E1990a80c\u003C\u002Ffont\u003E \u003Cfont color=\"#008000\"\u003E1990a80c\u003C\u002Ffont\u003E 15b03c88 0142ea34\u003Cbr\u002F\u003E\r\n1990a210 00000000 011e11f4 00000000 00000000\u003Cbr\u002F\u003E\r\n1990a220 01200c24 00000000 00000000 00000000\u003Cbr\u002F\u003E\r\n1990a230 0124ca7c 155796bc 15579758 00000000\u003Cbr\u002F\u003E\r\n1990a240 00000000 00000000 155a4c5c 00000000\u003Cbr\u002F\u003E\r\n1990a250 00000000 00000000 00000000 00000000\u003Cbr\u002F\u003E\r\n1990a260 15ae8eec 00000000 00000000 1990a824\u003Cbr\u002F\u003E\r\n1990a270 1990a418 1990a480 1990a4e8 00000002\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПо адресу 1990a200 находятся indexes (поле со смещением 2с), рядом с ним — shadowIndexes. Cтавим точку остановки \u003Cem\u003Eна запись\u003C\u002Fem\u003E в эту область памяти.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E0:000\u003E ba w 4 \u003Cfont color=\"#008000\"\u003E1990a204\u003C\u002Ffont\u003E\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ запускаем программу, которая через несколько незабываемых мгновений валится обратно в отладчик. Значит, дествительно, по интересующему нас адресу было записано некое значение.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ccode\u003E0:000\u003E g\u003Cbr\u002F\u003E\r\nBreakpoint 12 hit\u003Cbr\u002F\u003E\r\neax=1990a80c ebx=00000000 ecx=1990a80c edx=1990a204 esi=1990a1d4 edi=1990a1d4\u003Cbr\u002F\u003E\r\neip=0100304a esp=0012e288 ebp=0012e2b4 iopl=0 nv up ei pl zr na pe nc\u003Cbr\u002F\u003E\r\ncs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00000246\u003Cbr\u002F\u003E\r\n0100304a 81f81c825715 cmp eax,1557821Ch\u003C\u002Fcode\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВидим, что текущая нструкция — «cmp eax,1557821Ch». На первый взгляд это странно. Показана она потому, что такая точка останова срабатывает после события записи.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКоманда !clrstack выводит стек вызовов, полный рефлекшена (последний метод в стеке System.Reflection.RuntimeMethodInfo.InternalInvoke, что не очень-то для нас полезно).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИпользуем dumpstack.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E0:000\u003E !dumpstack -ee\u003Cbr\u002F\u003E\r\nThread 0\u003Cbr\u002F\u003E\r\nCurrent frame: \u003Cbr\u002F\u003E\r\n ChildEBP RetAddr Caller,Callee\u003Cbr\u002F\u003E\r\n0012e284 0814f725 (MethodDesc 0x4a631c0 +0x2d System.Data.DataTable.RecordStateChanged)\u003Cbr\u002F\u003E\r\n0012e2b4 08144d6d (MethodDesc 0x4a63280 +0x1c5 System.Data.DataTable.SetNewRecord)\u003Cbr\u002F\u003E\r\n0012e314 08145b29 (MethodDesc 0x812c488 +0x29 System.Data.DataRow.EndEdit)\u003Cbr\u002F\u003E\r\n0012e328 081458d9 (MethodDesc 0x812c3c8 +0x131 System.Data.DataRow.set_Item)\u003Cbr\u002F\u003E\r\n0012e348 03206651 (MethodDesc 0x812c3a8 +0x49 System.Data.DataRow.set_Item)\u003Cbr\u002F\u003E\r\n0012e360 0320bac2 (MethodDesc 0x7ec3760 +0x5a Com.Product.Core.Entities.EntityAdapter.DBAssign)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E0012e394 2ea362d7 (MethodDesc 0x7ec3d90 +0x3f Com.Product.Core.Entities.Request.set_Price)\u003Cbr\u002F\u003E\r\n0012e3b8 2ea359ea (MethodDesc 0x7c8faa0 +0x252 Com.Product.App.RequestForm.UpdatePrice\u003Cbr\u002F\u003E\r\n0012e494 0cefdf89 (MethodDesc 0x7d50218 +0x1a1 Com.Product.App.RequestForm.panel1_RadioButtonsValueRealyChanged) \u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n0012e4b0 7b8808cd (MethodDesc 0x7b9e38c8 +0x45 System.Windows.Forms.Control.AccessibilityNotifyClients)\u003Cbr\u002F\u003E\r\n0012e4c4 0cefd04c (MethodDesc 0xb989dd8 +0x4c Com.Product.CommonControls.DBControls.NullableRadioButtonsPanel.OnRadioButtonsValueReallyChanged)\u003Cbr\u002F\u003E\r\n0012e4e4 7b92a038 (MethodDesc 0x7ba1ea48 +0x68 System.Windows.Forms.RadioButton.set_Checked)\u003Cbr\u002F\u003E\r\n0012e4f0 0cefcda1 (MethodDesc 0xb989d78 +0x111 Com.Product.CommonControls.DBControls.NullableRadioButtonsPanel.set_RadioButtonsValue)\u003Cbr\u002F\u003E\r\n0012e760 799dd8c1 (MethodDesc 0x79bb1468 +0x141 System.Reflection.RuntimeMethodInfo.InternalInvoke)\u003Cbr\u002F\u003E\r\n0012e7a4 799dd768 (MethodDesc 0x79bb1458 +0x18 System.Reflection.RuntimeMethodInfo.Invoke)\u003Cbr\u002F\u003E\r\n0012e7bc 7b1f5c81 (MethodDesc 0x7b328e20 +0x139 System.ComponentModel.ReflectPropertyDescriptor.SetValue)\u003Cbr\u002F\u003E\r\n0012e810 7b8a1973 (MethodDesc 0x7ba38350 +0xd3 System.Windows.Forms.Binding.SetPropValue)\u003Cbr\u002F\u003E\r\n0012e82c 7b8a16d8 (MethodDesc 0x7ba38330 +0x50 System.Windows.Forms.Binding.FormatObject)\u003Cbr\u002F\u003E\r\n0012e840 7b8a1888 (MethodDesc 0x7ba38340 +0x38 System.Windows.Forms.Binding.PushData)\u003Cbr\u002F\u003E\r\n0012e848 7b8a311c (MethodDesc 0x7ba38938 +0x8c System.Windows.Forms.BindingManagerBase.PushData)\u003Cbr\u002F\u003E\r\n0012e85c 7b8bcde7 (MethodDesc 0x7ba38cf8 +0x37 System.Windows.Forms.CurrencyManager.CurrencyManager_PushData)\u003Cbr\u002F\u003E\r\n0012e87c 7b8a1996 (MethodDesc 0x7ba38350 +0xf6 System.Windows.Forms.Binding.SetPropValue)\u003Cbr\u002F\u003E\r\n0012e88c 7b8bdc33 (MethodDesc 0x7ba38df8 +0x5b System.Windows.Forms.CurrencyManager.OnItemChanged)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E0012e8ac 7b8a1878 (MethodDesc 0x7ba38340 +0x28 System.Windows.Forms.Binding.PushData)\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n0012e8b4 7b8a1ad9 (MethodDesc 0x7ba38390 +0x59 System.Windows.Forms.Binding.UpdateIsBinding)\u003Cbr\u002F\u003E\r\n0012e8bc 7b8bdff0 (MethodDesc 0x7ba38e88 +0x110 System.Windows.Forms.CurrencyManager.UpdateIsBinding)\u003Cbr\u002F\u003E\r\n0012e8d0 7b8bdec8 (MethodDesc 0x7ba38e78 +0x8 System.Windows.Forms.CurrencyManager.UpdateIsBinding)\u003Cbr\u002F\u003E\r\n0012e8d4 7b8bd78c (MethodDesc 0x7ba38db8 +0x1c4 System.Windows.Forms.CurrencyManager.List_ListChanged)\u003Cbr\u002F\u003E\r\n0012e900 08181927 (MethodDesc 0x812ce50 +0x37 System.Data.DataView.OnListChanged)\u003Cbr\u002F\u003E\r\n0012e928 10c456ac (MethodDesc 0x812ce40 +0x34 System.Data.DataView.IndexListChanged)\u003Cbr\u002F\u003E\r\n0012e930 10525133 (MethodDesc 0x812ce30 +0x33 System.Data.DataView.FireEvent)\u003Cbr\u002F\u003E\r\n0012e940 10c45663 (MethodDesc 0x31fada0 +0x2b System.Data.DataViewListener.IndexListChanged)\u003Cbr\u002F\u003E\r\n0012e950 0814c5bc (MethodDesc 0x81219d0 +0x1c System.Data.Index.OnListChanged)\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#0000ff\"\u003E0012e958 07eff8c7 (MethodDesc 0x4a63200 +0x8f System.Data.DataTable.ResetIndexes)\u003C\u002Ffont\u003E \u003Cbr\u002F\u003E\r\n0012e984 08186f34 (MethodDesc 0x31fcff0 +0x234 System.Data.Merger.MergeTable)\u003Cbr\u002F\u003E\r\n0012e9b0 08185790 (MethodDesc 0x31fd020 +0x48 System.Data.Merger.MergeTableData)\u003Cbr\u002F\u003E\r\n0012e9dc 0818e31f (MethodDesc 0x31fcfe0 +0x2f System.Data.Merger.MergeTable)\u003Cbr\u002F\u003E\r\n0012e9ec 0818e2b1 (MethodDesc 0x7ec0ce8 +0x61 System.Data.DataSet.Merge)\u003Cbr\u002F\u003E\r\n0012ea00 0cef8056 (MethodDesc 0x7c8f8d0 +0x61e Com.Product.App.RequestForm.InitEdit)\u003Cbr\u002F\u003E\r\n0012ec3c 26a117e7 (MethodDesc 0x10eaee98 +0x57 Com.Product.Core.Entities.EntityContextCache..ctor)\u003Cbr\u002F\u003E\r\n0012ec50 0cef79df (MethodDesc 0x7c8f8c0 +0x57 Com.Product.App.RequestForm.InitEdit)\u003Cbr\u002F\u003E\r\n0012ec74 0818d593 (MethodDesc 0x7ec0448 +0x2b Com.CommonComponents.Tools.PerformanceTimer.sAddCheckPoint)\u003Cbr\u002F\u003E\r\n0012ec84 0cef7933 (MethodDesc 0x7c8da68 +0x8b Com.Product.Tickets.Ticket.OnInit)\u003Cbr\u002F\u003E\r\n0012ecb4 0cef7706 (MethodDesc 0x7d509e8 +0x6e Com.Product.App.RequestForm.OnInit)\u003Cbr\u002F\u003E\r\n0012ecf4 0cef766b (MethodDesc 0x7c8da58 +0x1b Com.Product.Tickets.Ticket.Init)\u003Cbr\u002F\u003E\r\n....\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу вот, собственно, и виновник нашелся. Цветом в стеке выделенны ключевые вызовы: ResetIndexes вызывает событие OnListChanged, которое плавно перетекает в биндинг, который вызывает функцию приложения UpdatePrice. Эта функция по стечению обстоятельств меняет данные в датасете, что и приводит к преждевременному зануления shadowIndexes.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНесколько движений технологичным нано-молотком сишарпа, виновник наказан, программа работает. Ура!\u003C\u002Fdiv\u003E","tags":[{"titleHtml":".net"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F52441\u002F9115f8aeea169a1e6e207515d402a7db\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F52441\u002F9115f8aeea169a1e6e207515d402a7db\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F52441\\\u002F\"},\"headline\":\"Дело о пропавшем индексе\",\"datePublished\":\"2009-02-20T15:15:33+03:00\",\"dateModified\":\"2009-02-20T15:15:33+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"nchaly\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения &mdash; показать средства, с помощью...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F52441\\\u002F#post-content-body\",\"about\":[\"h_net\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F52441\\\u002F9115f8aeea169a1e6e207515d402a7db\\\u002F\"]}","metaDescription":"Дело, конечно, не такое интересное, как у Руссиновича, но, надеюсь, будет полезно некотроым разработчикам. Основная цель изложения — показать средства, с помощью которых мы можем анализировать...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"578296":{"id":"578296","timePublished":"2021-09-26T14:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вектор? Растр? А может — и то, и другое?","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Zach Leatherman","originalUrl":"https:\u002F\u002Fwww.zachleat.com\u002Fweb\u002Fvector-raster-split\u002F"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe36\u002F812\u002Fd3d\u002Fe36812d3de38eb3d479d7a13228717ef.png","speciality":"Пользователь"},"statistics":{"commentsCount":8,"favoritesCount":29,"readingCount":2579,"score":23,"votesCount":25},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"19802","alias":"graph_design","type":"collective","title":"Графический дизайн","titleHtml":"Графический дизайн","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"На этой неделе я столкнулся с интересным классом задач, для решения которых, как я теперь понимаю, можно было использовать гораздо более удачный подход и раньше. Но существует ли такой подход?\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F578296\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fge\u002Fkf\u002F1n\u002Fgekf1nauxn50imhrqyil4rlzj5m.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EИзображение для верхней части сайта\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nРечь идёт о подготовке изображения, рассчитанного на использовании в верхней правой части сайта \u003Ca href=\"https:\u002F\u002Fjamstackconf.com\" rel=\"nofollow noopener noreferrer\"\u003Ejamstackconf.com\u003C\u002Fa\u003E. Мы, в маркетинговой команде Netlify, используем Figma. Первая моя попытка экспорта этого изображения для использования его на сайте оказалась далеко не самой удачной.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"графика"},{"titleHtml":"веб-разработка"},{"titleHtml":"ruvds_перевод"}]},"579542":{"id":"579542","timePublished":"2021-09-26T19:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Jetpack Compose — как легко построить UI на Android","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2713395","alias":"i15in","fullname":"Иван","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F25f\u002Fe4b\u002Ff94\u002F25fe4bf94867d9647a0ae809abf2e429.jpg","speciality":"Android developer"},"statistics":{"commentsCount":8,"favoritesCount":50,"readingCount":3477,"score":31,"votesCount":39},"hubs":[{"relatedData":null,"id":"18232","alias":"funcorp","type":"corporative","title":"Блог компании FUNCORP","titleHtml":"Блог компании FUNCORP","isProfiled":false},{"relatedData":null,"id":"6345","alias":"mobile_dev","type":"collective","title":"Разработка мобильных приложений","titleHtml":"Разработка мобильных приложений","isProfiled":true},{"relatedData":null,"id":"9188","alias":"ui","type":"collective","title":"Интерфейсы","titleHtml":"Интерфейсы","isProfiled":true},{"relatedData":null,"id":"17107","alias":"android_dev","type":"collective","title":"Разработка под Android","titleHtml":"Разработка под Android","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ июле этого года вместе с Android Studio Arctic Fox вышла одна из долгожданных библиотек — Jetpack Compose. Она позволяет создавать пользовательский интерфейс в декларативном стиле и обещает быть революцией в построении UI.\u003C\u002Fp\u003E\u003Cp\u003EРазбираемся, так ли это на самом деле, какие у библиотеки преимущества и недостатки. Подробности — в статье.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5da\u002F63d\u002F3cb\u002F5da63d3cbeb8e38de3dde2792d851722.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка мобильных приложений"},{"titleHtml":"jetpack compose"},{"titleHtml":"ui"},{"titleHtml":"интерфейсы"},{"titleHtml":"android"},{"titleHtml":"kotlin"},{"titleHtml":"android studio"},{"titleHtml":"arctic fox"},{"titleHtml":"пользовательские интерфейсы"}]},"579772":{"id":"579772","timePublished":"2021-09-27T05:32:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сливы процветают. Эксперт-«параноик» Майкл Баззель о защите личных данных","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Michael Bazzell","originalUrl":"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F"}}],"author":{"id":"2297567","alias":"SearchInform_team","fullname":null,"avatarUrl":"","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":5,"readingCount":1908,"score":9,"votesCount":9},"hubs":[{"relatedData":null,"id":"22418","alias":"searchinform","type":"corporative","title":"Блог компании SearchInform","titleHtml":"Блог компании SearchInform","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНаш очередной пост из серии «интересное на иностранном языке» – рассказ Майкла Баззеля о том, как сберечь свои персональные данные от утечек. Майкл – знаковая фигура в сфере OSINT, работал в правительстве США и ФБР, его приглашали в качестве технического эксперта в сериал «Мистер Робот», который считают достойным с точки зрения достоверности. В личной жизни эксперт придерживается настолько жестких правил в отношении информационной гигиены, что некоторые считают его «неадекватом». Так ли это – может быть несколько мнений. \u003C\u002Fp\u003E\u003Cp\u003EОдин из факторов, который убеждает в правильном подходе Майкла, – что риски обнаружить свои данные в интернете стали существенно выше, потому что шифровальщики без разбору сливают в сеть все, до чего дотягиваются при атаках на бизнес. Приводим перевод \u003Ca href=\"https:\u002F\u002Finteltechniques.com\u002Fblog\u002F2021\u002F07\u002F23\u002Fpersonal-ransomware-exposure\u002F\"\u003Eпоста Майкла Баззеля\u003C\u002Fa\u003E. \u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EАтакуют корпорации, а страдают люди\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EБольшинство людей не задумываются о том, как их касается проблема распространения вирусов-шифровальщиков. Логика такова: речь идет о проблемах компаний, это они вынуждены платить выкуп. При чем тут, казалось бы, обычные люди?! \u003C\u002Fp\u003E\u003Cp\u003EА при том, что преступники сменили тактику: сейчас они не просто шифруют данные, но и скачивают их, выкладывают в открытый доступ, если компании не платят им выкуп. Теперь давайте подумаем, что в этих слитых базах? Множество данных о сотрудниках, клиентах, контрагентах, с которыми компания-жертва работает.\u003C\u002Fp\u003E\u003Cp\u003EХочу сразу уточнить: я это пишу не потому что выступаю за уплату выкупа. Я за то, чтобы сопротивляться избыточному сбору данных там, где это не обязательно. Мы халатно относимся к своим ПДн, раздавая их по первому требованию.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3b\u002F3e1\u002F2c2\u002Fe3b3e12c2036d90018b804276e31ebea.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"персональные данные"},{"titleHtml":"пдн"},{"titleHtml":"сёрчинформ"},{"titleHtml":"Майкл Баззел"},{"titleHtml":"утечки информации"}]},"579804":{"id":"579804","timePublished":"2021-09-26T12:06:13+00:00","isCorporative":true,"lang":"ru","titleHtml":"ОС для работы со звуком — что она умеет","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2691015","alias":"mirhifi","fullname":"«Мир Hi-Fi»","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdfb\u002F713\u002Fedb\u002Fdfb713edbeed85de6588bd27d6c43229.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":24,"readingCount":6281,"score":9,"votesCount":11},"hubs":[{"relatedData":null,"id":"18822","alias":"audiomania","type":"corporative","title":"Блог компании Аудиомания","titleHtml":"Блог компании Аудиомания","isProfiled":false},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"21918","alias":"soft","type":"collective","title":"Софт","titleHtml":"Софт","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОдин из предыдущих материалов мы посвятили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575076\u002F\"\u003Eинструментам\u003C\u002Fa\u003E для сборки цифровой звуковой рабочей станции (DAW). Еще мы говорили об \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Faudiomania\u002Fblog\u002F575892\u002F\"\u003Eopen source проектах\u003C\u002Fa\u003E, в рамках которых можно сделать собственный синтезатор или педалборд.\u003C\u002Fp\u003E\u003Cp\u003EСегодня продолжим тему и расскажем об открытой ОС \u003Cstrong\u003EElk Audio\u003C\u002Fstrong\u003E, построенной на базе Linux. Она заточена под обработку звука на встраиваемых системах.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa15\u002Ffc8\u002F97f\u002Fa15fc897faa2b01e93257c9af08a6eaa.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"аудиомания"},{"titleHtml":"звук"},{"titleHtml":"Elk Audio"},{"titleHtml":"операционные системы"},{"titleHtml":"DAW"}]},"579854":{"id":"579854","timePublished":"2021-09-27T06:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Видишь уязвимости? А они есть! Наше исследование популярных CMS-систем","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2684283","alias":"Solar_Pentest","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":7,"favoritesCount":13,"readingCount":2395,"score":21,"votesCount":23},"hubs":[{"relatedData":null,"id":"20826","alias":"solarsecurity","type":"corporative","title":"Блог компании Ростелеком-Солар","titleHtml":"Блог компании Ростелеком-Солар","isProfiled":false},{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЛьвиная доля всех работ по анализу защищенности внешнего периметра – это тестирование веб-приложений. Здесь могут быть как корпоративные решения, так и «домашние» разработки на базе различных публичных систем управления контентом (CMS). Мы всегда проводим глубокий анализ подобных решений на тестовых стендах и зачастую находим уязвимости нулевого дня. Собственно, из опыта таких проектов и родилась идея собрать исследовательскую команду и провести глубокий анализ популярных CMS-систем и различных плагинов для них. В этом посте мы поделимся результатами нашего исследования, а также продемонстрируем примеры уязвимого кода наиболее интересных, на наш взгляд, уязвимостей и примеры их эксплуатации. Конечно все эти уязвимости уже исправлены и описываются здесь с разрешения владельцев систем.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","buttonTextHtml":"Не всё то в безопасности, что с Bug Bounty","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6df\u002F317\u002F4e6\u002F6df3174e60bbe263a70bcafdf9e51e6b.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"cms"},{"titleHtml":"уязвимости"},{"titleHtml":"уязвимости и их эксплуатация"},{"titleHtml":"уязвимость нулевого дня"}]},"580008":{"id":"580008","timePublished":"2021-09-27T06:30:02+00:00","isCorporative":false,"lang":"ru","titleHtml":"Летний Магнитогорск","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2614609","alias":"city_scraper","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F8f8\u002Fd6c\u002F328\u002F8f8d6c328ec3a513103b6757c2c21610.png","speciality":"Пользователь"},"statistics":{"commentsCount":5,"favoritesCount":2,"readingCount":2717,"score":9,"votesCount":15},"hubs":[{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМагнитогорск Челябинской области – один из крупнейших мировых центров чёрной металлургии. В России это шестой из крупнейших городов, которые не являются центрами субъектов страны. \u003C\u002Fp\u003E\u003Cp\u003EСовсем недавно город был одним из наиболее неблагополучных с точки зрения загрязнения атмосферного воздуха, но в 2021 году был зафиксирован «повышенный» уровень – то есть не «высокий» или «очень высокий», как раньше. \u003C\u002Fp\u003E\u003Cp\u003EКак этот город выглядит летом? Где и как его жители могут проводить время?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F030\u002F0d1\u002Fcff\u002F0300d1cff2029948d33d803000331724.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Магнитогорск"},{"titleHtml":"промышленность"},{"titleHtml":"промышленные города"},{"titleHtml":"урбанизм\u002Fурбания"},{"titleHtml":"урбанистика"},{"titleHtml":"города России"},{"titleHtml":"города"}]},"580038":{"id":"580038","timePublished":"2021-09-26T13:35:19+00:00","isCorporative":false,"lang":"ru","titleHtml":"KODI: собираем удобный и функциональный медиацентр для дома. Часть 9. Spotify","editorVersion":"2.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"id":"2644801","alias":"arboozof","fullname":"Роман","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ff76\u002F452\u002F3d5\u002Ff764523d55be8ef6fc4307ea3158dadf.png","speciality":"IT\u002FRetail"},"statistics":{"commentsCount":15,"favoritesCount":37,"readingCount":5732,"score":10,"votesCount":10},"hubs":[{"relatedData":null,"id":"36","alias":"linux","type":"collective","title":"Настройка Linux","titleHtml":"Настройка Linux","isProfiled":true},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"21908","alias":"smartphones","type":"collective","title":"Смартфоны","titleHtml":"Смартфоны","isProfiled":false},{"relatedData":null,"id":"21946","alias":"video_tech","type":"collective","title":"Видеотехника","titleHtml":"Видеотехника","isProfiled":false},{"relatedData":null,"id":"21988","alias":"sound","type":"collective","title":"Звук","titleHtml":"Звук","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПродолжаем тему интеграции в наш медиацентр онлайн-сервисов прослушивания музыки. Ранее мы уже «подружили» медиацентр KODI с сервисом Яндекс.Музыка. Сегодня на очереди не менее популярный сервис – Spotify.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","buttonTextHtml":"Читать дальше &rarr;","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd36\u002Fb76\u002Fd13\u002Fd36b76d13fccd166d952840d838d4997.png","fit":"cover","positionY":0,"positionX":14.74358974359}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"kodi"},{"titleHtml":"xbmc"},{"titleHtml":"ubuntu"},{"titleHtml":"kubuntu"},{"titleHtml":"music"},{"titleHtml":"spotify"},{"titleHtml":"addons"},{"titleHtml":"дополнения"},{"titleHtml":"тв"}]},"580048":{"id":"580048","timePublished":"2021-09-26T14:22:36+00:00","isCorporative":false,"lang":"ru","titleHtml":"Будь строже к себе: как ограничения помогают сделать код лучше","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"2787821","alias":"ZeBrains_team","fullname":"Станислав Маслов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fae3\u002F3ee\u002F4f1\u002Fae33ee4f1a117aeeab42ec5a9e2eba25.jpg","speciality":"директор продакшена в IT-компании"},"statistics":{"commentsCount":10,"favoritesCount":49,"readingCount":4573,"score":8,"votesCount":16},"hubs":[{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true},{"relatedData":null,"id":"20726","alias":"productpm","type":"collective","title":"Управление продуктом","titleHtml":"Управление продуктом","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EЕсли вам приходилось задумываться о построении эффективной экосистемы проекта и определении ролей тимлида и разработчика — статья Артема Прозорова из ZeBrains для вас. \u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EПредлагаю вам задуматься над одним вопросом. Но не спешите с ответом, потому что он не так очевиден, как может показаться:\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКакая из команд может реализовать более технически стабильный продукт?&nbsp;\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №1:\u003C\u002Fstrong\u003E Проектный менеджер, аналитик, тестировщик и несколько разработчиков, у каждого из которых за плечами минимум три года опыта. Все работают в одном офисе, посвящая свое время одному проекту в режиме fulltime.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EКоманда №2:\u003C\u002Fstrong\u003E Один сильный разработчик. Ему помогают множество не знакомых между собой людей из разных часовых поясов. У каждого — свой набор компетенций и уровень опыта. Работой над проектом участники занимаются в свободном режиме, по несколько часов в неделю.\u003C\u002Fp\u003E\u003Cp\u003E* * *\u003C\u002Fp\u003E\u003Cp\u003EОтвет на этот вопрос получим к концу статьи.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fefe\u002F413\u002Feb2\u002Fefe413eb27c391cfcfef0484e6997aab.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"управление проектами"},{"titleHtml":"управление продуктом"},{"titleHtml":"управление командой разработки"},{"titleHtml":"управление командами разработчиков"},{"titleHtml":"тимлид"},{"titleHtml":"тимлиды и разработчики"}]},"580052":{"id":"580052","timePublished":"2021-09-26T15:29:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Почему экология не может быть плохой?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2568695","alias":"phanerozoi_evidence","fullname":"Фанерозой","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdcc\u002F862\u002F561\u002Fdcc862561429f2ed85090ac53e39cf7d.jpg","speciality":"Биологи, врач, научный популяризатор, палеонтолог"},"statistics":{"commentsCount":46,"favoritesCount":26,"readingCount":4923,"score":8,"votesCount":28},"hubs":[{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22012","alias":"Ecology","type":"collective","title":"Экология","titleHtml":"Экология","isProfiled":false},{"relatedData":null,"id":"22750","alias":"biology","type":"collective","title":"Биология","titleHtml":"Биология","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cem\u003EСо второй половины ХХ в мы всё чаще слышим из средств массовой информации выражения «плохая экология», «сохранить экологию», «экология строительных материалов». Но, к сожалению, не многие знают, что такое «экология» на самом деле. Для разгадки тайн экологии нам предстоит окунуться в удивительный мир науки...\u003C\u002Fem\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9a4\u002Fecf\u002Fd11\u002F9a4ecfd1144e299873622d45d23d2ce0.png","fit":"cover","positionY":29.545454545455,"positionX":1.4102564102564}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"виды"},{"titleHtml":"охрана окружающей среды"},{"titleHtml":"мифы"},{"titleHtml":"экосистема"},{"titleHtml":"биогеоценоз"},{"titleHtml":"экология"},{"titleHtml":"экосистемы"},{"titleHtml":"биоценозы"},{"titleHtml":"биология"},{"titleHtml":"вирусы"}]},"580058":{"id":"580058","timePublished":"2021-09-26T16:31:38+00:00","isCorporative":false,"lang":"ru","titleHtml":"FOSS News №90 — дайджест материалов о свободном и открытом ПО за 20—26 сентября 2021 года","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1515607","alias":"Gim6626","fullname":"Дмитрий Винокуров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F390\u002F2c3\u002F669\u002F3902c3669d69c0b80b41b876d772a113.jpg","speciality":"Инженер-программист"},"statistics":{"commentsCount":5,"favoritesCount":2,"readingCount":2046,"score":6,"votesCount":8},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjh\u002Fie\u002Fz5\u002Fjhiez5jcobuwxp87xogmfnk_o1g.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Cp\u003EВсем привет!\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EПродолжаем дайджесты новостей и других материалов о свободном и открытом ПО и немного о железе. Всё самое главное про пингвинов и не только, в России и мире. \u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EГлавные темы нового выпуска:\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EВ Linux Foundation отмечают острый спрос компаний на профессиональных опенсорс-разработчиков.\u003C\u002Fli\u003E\r\n\u003Cli\u003EСрок поддержки Ubuntu 14.04 и 16.04 увеличен до 10 лет.\u003C\u002Fli\u003E\r\n\u003Cli\u003E1 октября в Москве состоится конференция Russian Open Source Summit.\u003C\u002Fli\u003E\r\n\u003Cli\u003EHackerOne реализовал выплату вознаграждений за выявление уязвимостей в открытом ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EGoogle меняет модель развития Android на более близкую к ядру Linux.\u003C\u002Fli\u003E\r\n\u003Cli\u003EArm разработал архитектуру и инструменты для транспортных средств со значительной ролью ПО.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредложения экспертов «Базальт СПО» включены в проект государственной стратегии развития СПО в России.\u003C\u002Fli\u003E\r\n\u003Cli\u003EМихаил Мишустин «анонсировал» российский аналог GitHub.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПредставлен модуль ядра, способный в разы ускорить OpenVPN.\u003C\u002Fli\u003E\r\n\u003Cli\u003EПроект Waydroid развивает пакет для запуска Android в дистрибутивах GNU\u002FLinux.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u003E\r\n\u003Cp\u003EИ многое другое…\u003C\u002Fp\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"новости"},{"titleHtml":"open source"},{"titleHtml":"free software"},{"titleHtml":"linux"},{"titleHtml":"foss news"}]},"580060":{"id":"580060","timePublished":"2021-09-27T09:00:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Арракис, который мы заслужили","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"238277","alias":"Zelenyikot","fullname":"Виталий Егоров","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F22b\u002F2d7\u002F7a5\u002F22b2d77a57b687aae24784a3e53089c9.jpg","speciality":"Популяризатор космонавтики"},"statistics":{"commentsCount":13,"favoritesCount":21,"readingCount":8072,"score":74,"votesCount":80},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false},{"relatedData":null,"id":"21984","alias":"sci-fi","type":"collective","title":"Научная фантастика","titleHtml":"Научная фантастика","isProfiled":false},{"relatedData":null,"id":"22014","alias":"futurenow","type":"collective","title":"Будущее здесь","titleHtml":"Будущее здесь","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580060\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fk0\u002Fds\u002Fy5\u002Fk0dsy5npxclyjdytiroqga7-leu.jpeg\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\nВо вселенной писателя-фантаста Фрэнка Герберта, Дюна, она же Арракис &mdash; это пустынная и маловодная планета с двумя лунами. По сюжету, она находится за пределами Солнечной системы, но если мы захотим поискать ближайшую схожую параллель,&nbsp;то больше всего подходит планета Марс. Предлагаю воспользоваться возможностями, которые даёт современная космонавтика, и совершить воображаемую прогулку на нашу Дюну.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Марс"},{"titleHtml":"Дюна"},{"titleHtml":"MRO"},{"titleHtml":"Curiosity"},{"titleHtml":"марсоход"},{"titleHtml":"ruvds_статьи"}]},"580066":{"id":"580066","timePublished":"2021-09-26T18:12:37+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сколько мы переплачиваем за сервера используя Ruby on Rails","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"941194","alias":"motoroller95","fullname":"Искандар Гохар","avatarUrl":"","speciality":"Ruby on Rails developer at IT-territory"},"statistics":{"commentsCount":48,"favoritesCount":6,"readingCount":4599,"score":7,"votesCount":13},"hubs":[{"relatedData":null,"id":"224","alias":"ruby","type":"collective","title":"Ruby","titleHtml":"Ruby","isProfiled":true},{"relatedData":null,"id":"8279","alias":"ror","type":"collective","title":"Ruby on Rails","titleHtml":"Ruby on Rails","isProfiled":true},{"relatedData":null,"id":"17822","alias":"parallel_programming","type":"collective","title":"Параллельное программирование","titleHtml":"Параллельное программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F577948\u002F\" rel=\"noopener noreferrer nofollow\"\u003Eпрошлой\u003C\u002Fa\u003E статье я разбирался с тем как работает GIL, а сегодня меня захватила идея узнать насколько дорого обходится этот GIL для кода, который исполняется у нас на бэкенде. Для этого я решил пропатчить MRI и добавить пару переменных, в которые буду засекать сколько времени поток реально выполнял код, а сколько ничего не делал и ждал пока ему удастся завладеть локом. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ruby"},{"titleHtml":"gil"}]},"580080":{"id":"580080","timePublished":"2021-09-26T19:12:55+00:00","isCorporative":false,"lang":"ru","titleHtml":"Дайджест свежих материалов из мира фронтенда за последнюю неделю №486 (20 — 26 сентября 2021)","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"59347","alias":"alexzfort","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd2a\u002Fe8a\u002F5ac\u002Fd2ae8a5ac9876f838ebdd45f3ea3bc3b.png","speciality":""},"statistics":{"commentsCount":2,"favoritesCount":18,"readingCount":3269,"score":17,"votesCount":17},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"307","alias":"css","type":"collective","title":"CSS","titleHtml":"CSS","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"17103","alias":"html5","type":"collective","title":"HTML","titleHtml":"HTML","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Предлагаем вашему вниманию подборку с ссылками на новые материалы из области фронтенда и около него.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fec\u002F0x\u002Fkx\u002Fec0xkxfr5jd-rci1wjo9bmr4cns.jpeg\"\u003E\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"дайджест"},{"titleHtml":"фронтенд"},{"titleHtml":"css"},{"titleHtml":"js"},{"titleHtml":"es6"},{"titleHtml":"vue"},{"titleHtml":"react"},{"titleHtml":"angular"},{"titleHtml":"ember"},{"titleHtml":"html5"},{"titleHtml":"браузеры"},{"titleHtml":"ссылки"}]},"580084":{"id":"580084","timePublished":"2021-09-26T19:30:13+00:00","isCorporative":false,"lang":"ru","titleHtml":"Telegram Bots vs Google Forms","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2705023","alias":"dm_aq","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":4,"favoritesCount":21,"readingCount":3849,"score":7,"votesCount":7},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"19441","alias":"kotlin","type":"collective","title":"Kotlin","titleHtml":"Kotlin","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EGoogle forms отличный инструмент для решения простых организационных задач, например, сбор информации для регистрации людей на небольшое мероприятие. Но что если мы попытаемся решить эту задачу по другому? Например через telegram.&nbsp;\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"telegrambot"},{"titleHtml":"telegram"},{"titleHtml":"kotlin"},{"titleHtml":"spring"}]},"580086":{"id":"580086","timePublished":"2021-09-26T19:37:10+00:00","isCorporative":false,"lang":"ru","titleHtml":"Термо принтер и JavaScript","editorVersion":"2.0","postType":"article","postLabels":[{"type":"recovery","data":null}],"author":{"id":"1709955","alias":"IIIarp","fullname":"Сергей Шарпов","avatarUrl":"","speciality":"Веб разработчик"},"statistics":{"commentsCount":47,"favoritesCount":34,"readingCount":8314,"score":42,"votesCount":44},"hubs":[{"relatedData":null,"id":"84","alias":"crazydev","type":"collective","title":"Ненормальное программирование","titleHtml":"Ненормальное программирование","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EПриобрел я на днях термопринтер (кассовый аппарат, если изволите) жене для магазина и решил что смогу его обуздать как истинный программист и сделать свою веб кассу, вместо того, что-бы использовать платные решения, ведь задача простая, печатать чеки, но это оказалось не так то и просто...\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4f3\u002F259\u002Fe4e\u002F4f3259e4e73b5bfae82890fd3db512a0.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"термопринтер"},{"titleHtml":"javascript"},{"titleHtml":"webusb"}]},"580088":{"id":"580088","timePublished":"2021-09-26T21:17:27+00:00","isCorporative":false,"lang":"ru","titleHtml":"Запуск X-приложения в chroot на примере POSE (или «QEMU не нужен»)","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1481597","alias":"edo1h","fullname":null,"avatarUrl":"","speciality":"немного программист, немного админ"},"statistics":{"commentsCount":5,"favoritesCount":9,"readingCount":983,"score":11,"votesCount":11},"hubs":[{"relatedData":null,"id":"221","alias":"sys_admin","type":"collective","title":"Системное администрирование","titleHtml":"Системное администрирование","isProfiled":true},{"relatedData":null,"id":"7289","alias":"nix","type":"collective","title":"*nix","titleHtml":"*nix","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта мини-статья родилась как ответ на статью \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F579296\" rel=\"noopener noreferrer nofollow\"\u003EУпрощаем эмуляцию X86 с помощью Live CD\u003C\u002Fa\u003E, в которой для запуска старых 32-битных приложений на 64-битных дистрибутивах Linux предлагалось использовать QEMU + Live CD — по моему мнению «из пушки по воробьям». Опишу своё решение на \u003Ccode\u003Echroot\u003C\u002Fcode\u003E + \u003Ccode\u003Edebootstrap\u003C\u002Fcode\u003E. \u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"chroot"},{"titleHtml":"debootstrap"},{"titleHtml":"xwindow"}]},"580090":{"id":"580090","timePublished":"2021-09-26T21:19:11+00:00","isCorporative":false,"lang":"ru","titleHtml":"Сравнение подходов к реализации распределенных транзакций для микросервисов","editorVersion":"2.0","postType":"article","postLabels":[{"type":"sandbox","data":null},{"type":"translation","data":{"originalAuthorName":"Bilgin Ibryam","originalUrl":"https:\u002F\u002Fdevelopers.redhat.com\u002Farticles\u002F2021\u002F09\u002F21\u002Fdistributed-transaction-patterns-microservices-compared"}}],"author":{"id":"194270","alias":"sprosin","fullname":"Sergey Prosin","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd67\u002F5d8\u002F1d6\u002Fd675d81d6fe5bf69493735cef4910eb5.jpg","speciality":"Веду команды к релизам, пишу статьи, выступаю."},"statistics":{"commentsCount":6,"favoritesCount":78,"readingCount":3820,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true},{"relatedData":null,"id":"22115","alias":"microservices","type":"collective","title":"Микросервисы","titleHtml":"Микросервисы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EКак архитектор-консультант в Red Hat, я имел возможность поработать над множеством проектов для наших клиентов. У каждого из них есть свои особенности, которые, однако, имеют некоторые общие черты. Большинство клиентов хотят знать, как скоординировать запись в несколько систем одновременно. Ответ на этот вопрос обычно включает подробное объяснение двойной записи, распределенных транзакций, современных альтернатив, а также возможных сценариев сбоев и недостатков каждого подхода. Как правило, именно в этот момент заказчик понимает, что разделение монолитного приложения на микросервисы - долгий и сложный путь, обычно требующий компромиссов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbc4\u002F35d\u002Fff3\u002Fbc435dff35d09143dacf29bbc1e470a7.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"распределенные системы"},{"titleHtml":"микросервисы"},{"titleHtml":"транзакции"},{"titleHtml":"распределенные транзакции"},{"titleHtml":"оркестрация"},{"titleHtml":"оркестрация микросервисов"},{"titleHtml":"хореография"},{"titleHtml":"конвейеры"}]},"580092":{"id":"580092","timePublished":"2021-09-26T21:49:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"30 сентября: Let's Encrypt и конец срока действия IdenTrust DST Root CA X3","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"805873","alias":"rantal","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":80,"favoritesCount":44,"readingCount":14713,"score":42,"votesCount":42},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E30 сентября 2021 14:01:15  GMT оканчивается срок действия корневого сертификата IdenTrust DST Root CA X3.\u003C\u002Fp\u003E\u003Cp\u003EЭто событие достойно вашего внимания по той причине, что после наступления этого момента ряд устаревших систем перестанут доверять сертификатам,&nbsp;выпущенным центром сертификации Let’s Encrypt. С учётом того, что на текущий момент Let's Encrypt предоставляет бесплатные криптографические сертификаты примерно для \u003Ca href=\"https:\u002F\u002Fletsencrypt.org\u002Fstats\u002F\" rel=\"noopener noreferrer nofollow\"\u003E250 миллионов доменных имен\u003C\u002Fa\u003E, а \"устаревшие системы\" - это порой системы возрастом всего 5-6 лет, вряд ли окончание срока действия сертификата&nbsp;DST Root CA X3 пройдёт для всех гладко и незаметно. В чём причина, кого конкретно это затронет, и что можно сделать?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"let's encrypt"},{"titleHtml":"DST Root CA X3"},{"titleHtml":"корневой сертификат"},{"titleHtml":"https"},{"titleHtml":"tls"},{"titleHtml":"openssl"}]},"580094":{"id":"580094","timePublished":"2021-09-26T22:35:26+00:00","isCorporative":false,"lang":"ru","titleHtml":"Блокчейн нас подвёл? Почему ДЭГ — это плохо и можем ли мы адекватно контролировать процесс подсчёта голосов?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"206414","alias":"PoltoS","fullname":"Сергей Полторак","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5cf\u002F03a\u002Fc7f\u002F5cf03ac7fe60ea8a6686bd4c57627ddc.png","speciality":""},"statistics":{"commentsCount":79,"favoritesCount":22,"readingCount":11549,"score":27,"votesCount":47},"hubs":[{"relatedData":null,"id":"118","alias":"crypto","type":"collective","title":"Криптография","titleHtml":"Криптография","isProfiled":true},{"relatedData":null,"id":"210","alias":"it_testing","type":"collective","title":"Тестирование IT-систем","titleHtml":"Тестирование IT-систем","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИнтересно наблюдать, как дискредитируется термин блокчейна на выборах в госдуму. Вроде голосование было на блокчейне, но его якобы подделали. Т.е. блокчейн можно подделать или ЦИК и ДИТ нам подсунули какой-то лохчейн вместо блокчейна?!? И мало кто обсуждает происходящее по существу без эмоций, связанных с результатами партий и кандидатов.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e5\u002F82b\u002F9d0\u002F6e582b9d062dd29fa41c7842a8b76495.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Криптография"},{"titleHtml":"блокчейн"},{"titleHtml":"открытые данные"},{"titleHtml":"электронное голосование"},{"titleHtml":"выборы"},{"titleHtml":"выборы в госдуму"},{"titleHtml":"дэг"},{"titleHtml":"дэг 2021"}]},"580150":{"id":"580150","timePublished":"2021-09-27T10:50:03+00:00","isCorporative":true,"lang":"ru","titleHtml":"Топ-5 когнитивных искажений при планировании в IT","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2794469","alias":"KM_QA","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":0,"favoritesCount":19,"readingCount":1557,"score":13,"votesCount":13},"hubs":[{"relatedData":null,"id":"14332","alias":"oleg-bunin","type":"corporative","title":"Блог компании Конференции Олега Бунина (Онтико)","titleHtml":"Блог компании Конференции Олега Бунина (Онтико)","isProfiled":false},{"relatedData":null,"id":"19583","alias":"dev_management","type":"collective","title":"Управление разработкой","titleHtml":"Управление разработкой","isProfiled":true},{"relatedData":null,"id":"20736","alias":"hr_management","type":"collective","title":"Управление персоналом","titleHtml":"Управление персоналом","isProfiled":true},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false},{"relatedData":null,"id":"21990","alias":"brain","type":"collective","title":"Мозг","titleHtml":"Мозг","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭта статья подходит для тимлидов и их подопечных, а также для всех, кто оценивает проекты и задачи. Я расскажу, как и почему мы делаем ошибки из-за когнитивных искажений. Попадаем в них мы почти все, просто потому что мы живые люди. И на примере одного дня из жизни тимлида я хочу показать, в какие искажения чаще всего влетают в IT, и&nbsp; — самое полезное&nbsp; —&nbsp; как из них можно выходить.\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EЗамечу, что искать когнитивные искажения стоит, в первую очередь, у себя, а не у коллег. \u003C\u002Fstrong\u003EИ что рассказывать про искажения намного проще, чем не влетать в их на практике, однако, если этому научиться, то в перспективе это изрядно окупается, потому что экономит и время, и деньги, помогая и нам, и команде.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb78\u002F76f\u002F001\u002Fb7876f0010e85c328462a735df0b76e8.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"когнитивные искажения"},{"titleHtml":"нейрофизиология"},{"titleHtml":"мозг"},{"titleHtml":"психология"},{"titleHtml":"тимлидство"},{"titleHtml":"тимлид"},{"titleHtml":"управление людьми"},{"titleHtml":"управление проектами и командой"},{"titleHtml":"управление командой"},{"titleHtml":"управление персоналом"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580060","580092","580086","579542","580094","578296","579854","580080","580090","580150","580088","580038","580008","579772","579804","580052","580048","580084","580066","580058"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":3},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["576884","448790","66117"],"similarListRefs":{"66117":{"id":"66117","timePublished":"2009-08-03T17:55:04+00:00","isCorporative":false,"lang":"ru","titleHtml":"Изучение ASP.NET+ADO.NET+Silverlight","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"19014","alias":"oparinov","fullname":"Паринов Олег","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb02\u002Fea7\u002F445\u002Fb02ea7445771d84c8df55af9603a1e1b.jpg","speciality":null},"statistics":{"commentsCount":18,"favoritesCount":29,"readingCount":11208,"score":10,"votesCount":26},"hubs":[{"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Совсем недавно я начал работу над одним проектом, подразумевающим создание веб-сервиса с удобным графическим интерфейсом. В то время я обладал лишь достаточно базисными знаниями языка C# и навыками в разработке Windows-приложений на .NET технологиях. Именно поэтому я решил тогда построить веб-приложения на технологиях \u003Cb\u003EASP.NET, ADO.NET \u003C\u002Fb\u003E(сервис предполагает активное взаимодействие с БД) и \u003Cb\u003ESilverlight.\u003C\u002Fb\u003E \u003Cbr\u002F\u003E\r\nПрошло всего несколько недель, и сервис готов больше, чем на половину. Не могу сказать, что знаю о вышеуказанных технологиях всё, но вполне достаточно :) Собственно мой топик сейчас — это рассказ о том, как, на мой взгляд, следует учить эти технологии и что читать. Фактически я написал то, что мне очень не хватало в свое время — практически план действий. Я нисколько не претендую на звание профессионала в указанных отраслях, просто хотелось бы дать несколько советов новичкам и просто начинающим. Итак, начнем.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"448790":{"id":"448790","timePublished":"2019-04-20T12:54:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"SpaceVIL — кроссплатфоремнный GUI фреймворк для разработки на .Net Core, .Net Standard и JVM","editorVersion":"1.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"id":"2018791","alias":"rsedaikin","fullname":"Роман","avatarUrl":null,"speciality":"Программист"},"statistics":{"commentsCount":28,"favoritesCount":75,"readingCount":22992,"score":33,"votesCount":35},"hubs":[{"id":"375","alias":"java","type":"collective","title":"Java","titleHtml":"Java","isProfiled":true},{"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true},{"id":"19253","alias":"osx_dev","type":"collective","title":"Разработка под MacOS","titleHtml":"Разработка под MacOS","isProfiled":true},{"id":"19727","alias":"linux_dev","type":"collective","title":"Разработка под Linux","titleHtml":"Разработка под Linux","isProfiled":true},{"id":"21456","alias":"win_dev","type":"collective","title":"Разработка под Windows","titleHtml":"Разработка под Windows","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВ данной статье я постараюсь рассказать о фреймворке SpaceVIL (Space of Visual Items Layout), который служит для построения пользовательских графических интерфейсов на платформах .Net \u002F .Net Core и JVM.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESpaceVIL является кроссплатформенным и мультиязычным фреймворком, в его основе лежит графическая технология OpenGL, а за создание окон отвечает библиотека GLFW. Используя данный фреймворк, вы можете работать и создавать графические клиентские приложения в операционных системах Linux, Mac OS X, Windows. Для программистов C# в данное время это особенно актуально, учитывая, что Microsoft не собирается переносить WPF на другие ОС и Avalonia является единственным возможным аналогом. Особенностью же SpaceVIL в этом конкретном случае является мультиязычность, то есть на данный момент фреймворк под .Net Core можно использовать в связке со следующими языками программирования: C#, VisualBasic. Фреймворк под JVM можно использовать в связке с языками Java и Scala. То есть, SpaceVIL можно использовать с любым из этих языков и итоговый код будет выглядеть одинаково, поэтому при переходе на другой язык переучиваться заново не придется.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003ESpaceVIL пока находится на стадии альфы, но, несмотря на это, фреймворк можно полноценно использовать уже сейчас, так как во фреймворке есть все необходимое для построения как сложного UI, так и для создания совершенно новых визуальных пользовательских элементов. Цель данной статьи как раз в том, чтобы убедить вас в этом.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"576884":{"id":"576884","timePublished":"2021-09-08T12:48:06+00:00","isCorporative":true,"lang":"ru","titleHtml":"Ускоряем запуск приложений с .NET 6, .NET на холодильнике и многое другое","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2750311","alias":"gbal","fullname":"Глеб Балыков","avatarUrl":null,"speciality":"Compiler Engineer"},"statistics":{"commentsCount":2,"favoritesCount":36,"readingCount":6629,"score":18,"votesCount":18},"hubs":[{"id":"13914","alias":"samsung","type":"corporative","title":"Блог компании Samsung","titleHtml":"Блог компании Samsung","isProfiled":false},{"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true},{"id":"17188","alias":"compilers","type":"collective","title":"Компиляторы","titleHtml":"Компиляторы","isProfiled":true},{"id":"18180","alias":"tizen_dev","type":"collective","title":"Разработка под Tizen","titleHtml":"Разработка под Tizen","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EДанная статья содержит небольшое введение в JIT-компиляцию и \u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fru-ru\u002Fdotnet\u002Ffundamentals\u002F\"\u003E.NET Core\u003C\u002Fa\u003E (отныне .NET 5, .NET 6 и так далее), а также несколько практических примеров ускорения запуска приложений на .NET. Данные советы могут быть полезны как для приложений, запускаемых на больших многоядерных x64 серверах, так и для приложений, запускаемых на ARM чипах с малым числом ядер. Например, подобные оптимизации используются в операционной системе \u003Ca href=\"https:\u002F\u002Fwww.tizen.org\u002F\"\u003ETizen\u003C\u002Fa\u003E, об этом далее.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcae\u002Faa3\u002F7da\u002Fcaeaa37da44b15553937d3280b0dd353.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcae\u002Faa3\u002F7da\u002Fcaeaa37da44b15553937d3280b0dd353.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"nchaly":{"scoreStats":{"score":332.7,"votesCount":248},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"19617","alias":"nchaly","fullname":"nchaly","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fe05\u002Fb36\u002F6cc\u002Fe05b366cc644122427cf55f45fc219d1.jpg","speciality":null}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
