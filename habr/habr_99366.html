<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Компиляция. 3: бизон / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.01bb2993.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.76acc47b.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0f7bdd8f.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.01bb2993.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-f458c7c4.e48e8f79.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.4f7c12b4e1b1b4c0e44ef6f9f33b1f9f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/99366\/"},"headline":"Компиляция. 3: бизон","datePublished":"2010-07-18T00:26:01+04:00","dateModified":"2010-07-19T13:00:53+04:00","author":{"@type":"Person","name":"Artyom Skrobov"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Это единственный пост в серии, в центре внимания которого &mdash; старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен б...","url":"https:\/\/habr.com\/ru\/post\/99366\/#post-content-body","about":["h_programming","f_develop"],"image":["https:\/\/habrastorage.org\/getpro\/habr\/post_images\/88f\/15b\/8ce\/88f15b8ceb15201a4db37376c88e0db4.jpg"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.47.1">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Компиляция. 3: бизон" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Компиляция. 3: бизон" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Компиляция. 3: бизон" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="99366" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2010-07-17T20:26:01.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/99366/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/99366/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/99366/d40ed8f72957ee9ebb8d5696943840b9/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.cee85629.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
              Как стать автором
            </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.cee85629.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.cee85629.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.cee85629.svg#pull-arrow"></use></svg></div></div> <!----> <div class="tm-page-article__body"><article class="tm-page-article__content tm-page-article__content_inner"><div class="tm-page-article__head-wrapper"><!----> <div class="tm-article-snippet tm-page-article__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/tyomitch/" title="tyomitch" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/b71/804/e6d/b71804e6dcbec22ada05c488b7ee4c1b.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/tyomitch/" class="tm-user-info__username">
      tyomitch
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2010-07-17T20:26:01.000Z" title="2010-07-18, 00:26">18  июля  2010 в 00:26</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Компиляция. 3: бизон</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по принципу работы генераторы LR-парсеров существуют для очень многих языков. Тех же, кто идеологически не приемлет LR-парсеры, мне сегодня привлечь нечем.<br/>
<br/>
<h3>Далее в посте:</h3><ol>
<li>Компиляция грамматики</li>
<li>Двухступенчатый парсер</li>
<li>Что у него внутри?</li>
<li>Конфликты в грамматике</li>
<li>Как это работает?</li>
</ol><a name="habracut"></a><br/>
Чем мы занимались до сих пор?<br/>
В прошлый раз <a href="http://habrahabr.ru/blogs/programming/99298/">составили грамматику</a> для арифметических выражений:<pre>
EXPR: TERM | EXPR '+' TERM | EXPR '-' TERM ;
TERM: NUM | TERM '*' NUM | TERM '/' NUM ;
NUM: DIGIT | NUM DIGIT ;
DIGIT: '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' ;
</pre><br/>
Закончили тем, что пристально рассмотрели автомат, который её парсит.<br/>
Придумывать парсящие автоматы сами мы не умеем, да и не надо — ведь бизон умеет строить их за нас!<br/>
С бизоньей помощью сможем скомпилировать наш парсер, и поглядеть, как всё это работает взаправду.<br/>
<br/>
<h3>Компиляция грамматики</h3><br/>
Общий принцип такой же, как с <code>flex</code> в <a href="http://habrahabr.ru/blogs/programming/99162/">первой части</a>: мы перечисляем правила грамматики, и напротив каждого правила пишем сишный код, который будет выполняться во время свёртки правила.<br/>
<br/>
В прошлый раз упомянули, что во время свёртки мы вынимаем из стека набор символов (строк или переменных), смотрим на их значения, задаём значение для свернувшейся переменной, и кладём её в стек вместо вынутых.<br/>
<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">&lt;stdio.h></font><br/>
    <font color="#008000">int</font> yylex() <font color="#ff40ff">{</font> <font color="#808000">return</font> getc(<font color="#ff6060">stdin</font>); <font color="#ff40ff">}</font><br/>
    <font color="#008000">void</font> yyerror(<font color="#008000">char</font> *s) <font color="#ff40ff">{</font><br/>
      fprintf (<font color="#ff6060">stderr</font>, <font color="#ff6060">"</font><font color="#ff40ff">%s</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, s);<br/>
    <font color="#ff40ff">}</font><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">EVALUATE:</font> EXPR <font color="#ff40ff">'\n'</font> <font color="#ff40ff">{</font> printf(<font color="#ff6060">"</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, <font color="#808000">$$</font>) <font color="#ff40ff">}</font> ;<br/>
<br/>
<font color="#7f9fbf">EXPR:</font>    TERM<br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'+'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> + <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'-'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> - <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#7f9fbf">TERM:</font>    NUM<br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'*'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> * <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'/'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> / <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#7f9fbf">NUM:</font>      DIGIT<br/>
<font color="#7f9fbf">        |</font> NUM DIGIT    <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font>*<font color="#ff6060">10</font>+<font color="#808000">$2</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#7f9fbf">DIGIT:</font>    <font color="#ff6060">'0'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">0</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'1'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">1</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'2'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">2</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'3'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> <font color="#ff6060">'4'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">4</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'5'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">5</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'6'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">6</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'7'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">7</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> <font color="#ff6060">'8'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">8</font>; <font color="#ff40ff">}</font> | <font color="#ff6060">'9'</font> <font color="#ff40ff">{</font> <font color="#808000">$$</font>=<font color="#ff6060">9</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#808080">%%</font><br/>
</code><br/>
<h4>Разбор кода</h4><a href="http://commons.wikimedia.org/wiki/File:Woman_with_yak_at_Qinghai_Lake.jpg"><img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/88f/15b/8ce/88f15b8ceb15201a4db37376c88e0db4.jpg" align="right" data-src="https://habrastorage.org/getpro/habr/post_images/88f/15b/8ce/88f15b8ceb15201a4db37376c88e0db4.jpg" data-blurred="true"/></a><br/>
Так же, как в <code>lex</code>-файлах, код в тегах <b>%{ %}</b> копируется в парсер неизменным. Есть две функции, которые необходимо определить: <code>int yylex()</code> возвращает следующий входной символ, и <code>void yyerror(char *s)</code> печатает сообщение об ошибке. Классический <code>yacc</code> включал готовую реализацию <code>yyerror</code>, которую можно было в случае необходимости переобъявить; но его GNU-клон <code>bison</code> требует от программиста явную реализацию.<br/>
<br/>
<b>%%</b>, как и в <code>lex</code>-файлах, разделяет область объявлений и область правил грамматики. Правила перечисляются в том же виде, как мы уже привыкли; в конце правила добавляем код свёртки. В коде свёртки, чтобы сослаться на значения символов на стеке парсера, используем <b>$</b>-теги. <code>$$</code> ссылается на сворачиваемую переменную (левую часть правила), <code>$1</code> на самый левый символ в правой части правила (самый глубокий в стеке парсера), <code>$2</code> на второй слева, и т.д. Если в правой части правила <i>N</i> символов, то можно пользоваться значениями от <code>$1</code> до <code>$N</code>.<br/>
Если код свёртки не задан, и в правой части правила один символ, то по умолчанию бизон «наследует» его значение: <code>$$=$1</code><br/>
<br/>
Самая первая объявленная переменная считается «корнем» грамматики, т.е. весь входной текст должен в итоге свернуться в этот корень. <code>EXPR</code> подходил бы в качестве корня, но тогда печать вычисленного выражения пришлось бы засунуть в свёртку <code>EXPR</code>; а значит, печаталось бы ещё и значение каждого подвыражения по дороге. Для удобства печати заведём новую переменную <code>EVALUATE</code>, которая используется только в качестве корня. Это заодно даёт возможность прочитать в конце выражения перевод строки — кроме удобства печати, получаем удобство ввода.<br/>
<br/>
При компиляции парсера нужно указать библиотеку <code>liby</code>, в которой лежит стандартная бизонья <code>main()</code>.<br/>
<code>[tyomitch@home ~]$ <b>bison 2.y</b><br/>
[tyomitch@home ~]$ <b>cc -ly 2.tab.c</b><br/>
[tyomitch@home ~]$ <b>./a.out</b><br/>
<b>22+3*4-5</b><br/>
=29<br/>
[tyomitch@home ~]$ <b>./a.out</b><br/>
<b>2 + 2</b><br/>
syntax error<br/>
</code><br/>
В отличие от калькулятора торговок с рынка, который умел игнорировать пробелы и комментарии, бизоний калькулятор понимает строго заданный синтаксис: цифры, знаки операций, перевод строки в конце. Чтобы предусмотреть, например, пробелы между любой парой символов, пришлось бы добавлять их в грамматику явно:<br/>
<code>EXPR: TERM | EXPR <b>WS</b> '+' <b>WS</b> TERM | EXPR <b>WS</b> '-' <b>WS</b> TERM ;<br/>
TERM: NUM | TERM <b>WS</b> '*' <b>WS</b> NUM | TERM <b>WS</b> '/' <b>WS</b> NUM ;<br/>
NUM: DIGIT | NUM DIGIT ;<br/>
DIGIT: '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' ;<br/>
<b>WS: | WS ' ' ;</b><br/>
</code><br/>
Ясно, что это неудобно. Да и писать для распознавания цифр 10 разных правил неудобно; а если бы нам нужны были латинские буквы, например в именах переменных, мы бы задавали 52 правила?!<br/>
<br/>
До чего здорово было бы совместить преимущества <code>flex</code> и <code>bison</code>! Чтобы простые выражения (числа, пробелы) распознавать было <i>просто</i>, и чтобы сложные выражения распознавать было <i>возможно</i>.<br/>
<br/>
<h3>Двухступенчатый парсер</h3><br/>
Если у нас уже есть <code>flex</code>-парсер, который успешно распознаёт числа и удаляет комментарии и пробелы, то прогоним входной текст через него; а то, что получится, прогоним через продвинутый бизоний парсер. На самом деле, нет надобности хранить промежуточный результат: обе ступени можно выполнить за один проход. <code>flex</code> читает входной текст символ за символом, время от времени передавая «наверх» бизону <i>токены</i> — терминальные символы грамматики. Значения для токенов <code>flex</code> задаёт сам.<br/>
<br/>
Чтобы такой симбиоз был возможен, <code>flex</code> должен как-то узнать терминальные символы бизоньей грамматики. Будем запускать <code>bison</code> с ключом <code>-d</code>, тогда он сгенерирует <code>.h</code>-файл с перечислением всех терминалов. Для этого нужно объявить (указанием <code>%token</code>) терминалы в файле грамматики — и останется лишь сослаться на сгенерированный <code>.h</code>-файл в файле <code>.lex</code>.<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">&lt;stdio.h></font><br/>
    <font color="#008000">void</font> yyerror(<font color="#008000">char</font> *s) <font color="#ff40ff">{</font><br/>
      fprintf (<font color="#ff6060">stderr</font>, <font color="#ff6060">"</font><font color="#ff40ff">%s</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, s);<br/>
    <font color="#ff40ff">}</font><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
<b><font color="#808000">%token</font> NUM</b><br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">EVALUATE:</font> EXPR          <font color="#ff40ff">{</font> printf(<font color="#ff6060">"=</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, <font color="#808000">$$</font>); <font color="#ff40ff">}</font> ;<br/>
<br/>
<font color="#7f9fbf">EXPR:</font>    TERM<br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'+'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> + <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'-'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> - <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#7f9fbf">TERM:</font>    NUM<br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'*'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> * <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'/'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> / <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#808080">%%</font><br/>
</code><br/>
Функция <code>yylex</code> нам больше не нужна: теперь входные символы будут поступать не из <code>stdin</code>, а от <code>flex</code>.<br/>
Кроме того, стёрли <code>'\n'</code> после <code>EXPR</code> (его проглотит <code>flex</code>), и убрали все правила про <code>NUM</code> и <code>DIGIT</code>.<br/>
<br/>
Соответствующий файл <code>.lex</code>:<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">"3.tab.h"</font><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
%option yylineno<br/>
%option noyywrap<br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">[/][/]</font><font color="#7f9fbf">.*\n</font>      ; <font color="#8080ff">// comment</font><br/>
<font color="#7f9fbf">[0-9]</font><font color="#7f9fbf">+</font>          <font color="#ff40ff">{</font> yylval = atoi(yytext);<br/>
                  <font color="#808000">return</font> NUM;<br/>
                <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">[ \t\r\n]</font>      ; <font color="#8080ff">// whitespace</font><br/>
<font color="#7f9fbf">.</font>              <font color="#ff40ff">{</font> <font color="#808000">return</font> *<font color="#7f9fbf">yytext</font>; <font color="#ff40ff">}</font><br/>
<br/>
<font color="#808080">%%</font><br/>
</code><br/>
Файл с определениями токенов получает суффикс <code>.tab.h</code><br/>
Единственное, что в нём есть — <code>#define NUM 258</code><br/>
Все токены получают номера выше 256, чтобы отличаться от «обычных» символов.<br/>
<br/>
Чтобы передать токен бизону, его значение записываем в глобальную (ох ужас!) переменную <code>yylval</code>, и возвращаем код токена.<br/>
Обычные символы передаём обычным способом (возвращаем код символа).<br/>
<br/>
Опция <code>noyywrap</code> указывает, что входной текст один, и после чтения <code>EOF</code> не нужно пытаться перейти к следующему тексту. Эта опция устанавливалась автоматически, пока мы пользовались <code>%option main</code>, задававшей чтение с <code>stdin</code>. Сейчас <code>main()</code> будет бизонья, поэтому нам не нужно ни просить у <code>flex</code> стандартную <code>main()</code>, ни писать свою.<br/>
<br/>
Компилируем двухступенчатый парсер:<br/>
<code>[tyomitch@home ~]$ <b>lex 3.lex</b><br/>
[tyomitch@home ~]$ <b>bison -d 3.y</b><br/>
[tyomitch@home ~]$ <b>cc -ly lex.yy.c 3.tab.c</b><br/>
[tyomitch@home ~]$ <b>./a.out</b><br/>
<b>22+ // hello<br/>
3*4 - 5<br/>
</b>=29<br/>
[tyomitch@home ~]$ <b>./a.out</b><br/>
<b>22+x</b><br/>
syntax error<br/>
</code><br/>
По поводу терминологии: в такой двухступенчатой модели нижний парсер, распознающий токены, по традиции называют <i>лексическим анализатором</i> («лексером»), а верхний, распознающий конструкции из токенов — <i>синтаксическим анализатором</i>. Это указание именно роли парсера, а не его устройства: другие системы разбора могут, например, использовать для обеих ступеней магазинно-автоматные парсеры.<br/>
<br/>
<h3>Что у него внутри?</h3><br/>
Чтобы увидеть сгенерированный автомат, не нужно нырять в пучины сишного кода: у бизона могучие средства для отладки грамматик. Указываем ключ <code>-v</code>, и глядим в файл с суффиксом <code>.output</code>.<br/>
После переноса парсинга чисел в лексер, в автомате осталось 14 состояний, и описаны они примерно так:<br/>
<pre>
...

state 7

    4 EXPR: EXPR '-' . TERM

    NUM  shift, and go to state 1

    TERM  go to state 11


state 8

    6 TERM: TERM '*' . NUM

    NUM  shift, and go to state 12


state 9

    7 TERM: TERM '/' . NUM

    NUM  shift, and go to state 13


state 10

    3 EXPR: EXPR '+' TERM .
    6 TERM: TERM . '*' NUM
    7     | TERM . '/' NUM

    '*'  shift, and go to state 8
    '/'  shift, and go to state 9

    $default  reduce using rule 3 (EXPR)

...
</pre><br/>
Для каждого состояния указаны правила, которые в этом состоянии распознаются (вместе с их номерами в грамматике), и перечислены действия, выполняемые для каждого входного символа. Не указано следующее состояние после свёртки; вместо этого автомат возвращается в состояние, прочитанное из стека, и в нём ищет правило «go to», соответствующее свежесвёрнутому нетерминалу. Таким образом, таблица переходов автомата получается двумерной: в каждом состоянии <i>действие</i> зависит только от входного символа, и не зависит от содержимого стека. (Но из стека берётся следующее состояние после свёртки.)<br/>
<br/>
Чтобы не ползать с карандашом по распечатке автомата, подставляя в него символ за символом, можно попросить бизона во время парсинга печатать все переходы из состояния в состояние. Для этого компилируем грамматику с ключом <code>-t</code>, и в парсере появится глобальный флаг <code>yydebug</code>. Его нужно установить в 1 — например, в <code>main()</code>.<br/>
Если мы, кроме того, хотим, чтобы печатались значения символов, то нужно определить макрос <code>YYPRINT</code>:<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">&lt;stdio.h></font><br/>
    <font color="#008000">void</font> yyerror(<font color="#008000">char</font> *s) <font color="#ff40ff">{</font><br/>
      fprintf (<font color="#ff6060">stderr</font>, <font color="#ff6060">"</font><font color="#ff40ff">%s</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, s);<br/>
    <font color="#ff40ff">}</font><br/>
<b><font color="#ff40ff">    #define YYPRINT(file, type, value) fprintf(file, </font><font color="#ff6060">"</font><font color="#ff40ff">%d</font><font color="#ff6060">"</font><font color="#ff40ff">, value);</font></b><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
<font color="#808000">%token</font> NUM<br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">EVALUATE:</font> EXPR          <font color="#ff40ff">{</font> printf(<font color="#ff6060">"=</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, <font color="#808000">$$</font>); <font color="#ff40ff">}</font> ;<br/>
<br/>
<font color="#7f9fbf">EXPR:</font>    TERM<br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'+'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> + <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'-'</font> TERM <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> - <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#7f9fbf">TERM:</font>    NUM<br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'*'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> * <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> TERM <font color="#ff6060">'/'</font> NUM  <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> / <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#808080">%%</font><br/>
<b><font color="#008000">int</font> main () <font color="#ff40ff">{</font> yydebug=<font color="#ff6060">1</font>; <font color="#808000">return</font> yyparse(); <font color="#ff40ff">}</font></b><br/>
</code><br/>
Код после второго тега <b>%%</b> копируется в парсер неизменным так же, как если бы он был в <b>%{ %}</b>.<br/>
Теперь, раз мы определили <code>main()</code> сами, уже не нужно при компиляции подключать <code>liby</code>:<br/>
<code>[tyomitch@home ~]$ <b>lex 3.lex</b><br/>
[tyomitch@home ~]$ <b>bison -dt 3.y</b><br/>
[tyomitch@home ~]$ <b>cc lex.yy.c 3.tab.c</b><br/>
[tyomitch@home ~]$ <b>./a.out</b><br/>
Starting parse<br/>
Entering state 0<br/>
Reading a token: <b>22+3*4-5</b><br/>
Next token is token NUM (22)<br/>
Shifting token NUM, Entering state 1<br/>
Reducing stack by rule 5 (line 20), NUM -> TERM<br/>
Stack now 0<br/>
Entering state 4<br/>
Reading a token: Next token is token '+' (22)<br/>
Reducing stack by rule 2 (line 15), TERM -> EXPR<br/>
Stack now 0<br/>
Entering state 3<br/>
Next token is token '+' (22)<br/>
Shifting token '+', Entering state 6<br/>
Reading a token: Next token is token NUM (3)<br/>
Shifting token NUM, Entering state 1<br/>
Reducing stack by rule 5 (line 20), NUM -> TERM<br/>
Stack now 0 3 6<br/>
Entering state 10<br/>
Reading a token: Next token is token '*' (3)<br/>
Shifting token '*', Entering state 8<br/>
Reading a token: Next token is token NUM (4)<br/>
Shifting token NUM, Entering state 12<br/>
Reducing stack by rule 6 (line 21), TERM '*' NUM -> TERM<br/>
Stack now 0 3 6<br/>
Entering state 10<br/>
Reading a token: Next token is token '-' (4)<br/>
Reducing stack by rule 3 (line 16), EXPR '+' TERM -> EXPR<br/>
Stack now 0<br/>
Entering state 3<br/>
Next token is token '-' (4)<br/>
Shifting token '-', Entering state 7<br/>
Reading a token: Next token is token NUM (5)<br/>
Shifting token NUM, Entering state 1<br/>
Reducing stack by rule 5 (line 20), NUM -> TERM<br/>
Stack now 0 3 7<br/>
Entering state 11<br/>
Reading a token: Now at end of input.<br/>
Reducing stack by rule 4 (line 17), EXPR '-' TERM -> EXPR<br/>
Stack now 0<br/>
Entering state 3<br/>
Now at end of input.<br/>
Reducing stack by rule 1 (line 13), EXPR -> EVALUATE<br/>
=29<br/>
Stack now 0<br/>
Entering state 2<br/>
Now at end of input.<br/>
</code><br/>
Из стека печатаются только состояния; типы символов в стеке, и их значения, остаётся угадывать из контекста.<br/>
Если макрос <code>YYPRINT</code> не задан, тогда угадывать придётся и значения прочитанных токенов: бизон будет печатать только пустые скобки.<br/>
<br/>
<h3>Конфликты в грамматике</h3><br/>
В прошлый раз упомянули неоднозначные грамматики, допускающие для одного выражения несколько вариантов разбора.<br/>
Что скажет бизон, если попытаемся скомпилировать неоднозначную грамматику?<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">&lt;stdio.h></font><br/>
    <font color="#008000">void</font> yyerror(<font color="#008000">char</font> *s) <font color="#ff40ff">{</font><br/>
      fprintf (<font color="#ff6060">stderr</font>, <font color="#ff6060">"</font><font color="#ff40ff">%s</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, s);<br/>
    <font color="#ff40ff">}</font><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
<font color="#808000">%token</font> NUM<br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">EVALUATE:</font> EXPR          <font color="#ff40ff">{</font> printf(<font color="#ff6060">"=</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, <font color="#808000">$$</font>) <font color="#ff40ff">}</font> ;<br/>
<br/>
<font color="#7f9fbf">EXPR:</font>    NUM<br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'+'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> + <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'-'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> - <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'*'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> * <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'/'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> / <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#808080">%%</font><br/>
<br/>
[tyomitch@home ~]$ <b>bison 4.y</b><br/>
4.y: conflicts: 16 shift/reduce<br/>
</code><br/>
Когда из одного состояния грамматика допускает несколько продолжений, бизону непонятно, что именно выполнять. В нашем случае он колеблется между сдвигом и свёрткой. Можно исправить грамматику, как мы в прошлый раз сделали; а можно «подтолкнуть» бизона в нужную сторону, и намекнуть, что делать в случае конфликта. Стоит относиться к этому как к быстрому хаку: парсер начинает работать, но отлаживать «грамматику с намёками» становится сложнее.<br/>
<br/>
Поскольку типичный источник конфликтов — арифметические выражения, то и намёки даются в виде указания приоритета операторов (выполнять умножение раньше сложения) и их ассоциативности (из операторов с равным приоритетом, который выполнять раньше). Чем ниже оператор в списке, тем выше приоритет. Операторы в одной строчке списка получают одинаковый приоритет.<br/>
<br/>
<code><font color="#ff40ff">%{</font><br/>
<font color="#ff40ff">    #include </font><font color="#ff6060">&lt;stdio.h></font><br/>
    <font color="#008000">void</font> yyerror(<font color="#008000">char</font> *s) <font color="#ff40ff">{</font><br/>
      fprintf (<font color="#ff6060">stderr</font>, <font color="#ff6060">"</font><font color="#ff40ff">%s</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, s);<br/>
    <font color="#ff40ff">}</font><br/>
<font color="#ff40ff">%}</font><br/>
<br/>
<font color="#808000">%token</font> NUM<br/>
<br/>
<b><font color="#808000">%left</font> <font color="#ff6060">'+'</font> <font color="#ff6060">'-'</font><br/>
<font color="#808000">%left</font> <font color="#ff6060">'*'</font> <font color="#ff6060">'/'</font><br/>
</b><br/>
<font color="#808080">%%</font><br/>
<br/>
<font color="#7f9fbf">EVALUATE:</font> EXPR          <font color="#ff40ff">{</font> printf(<font color="#ff6060">"=</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, <font color="#808000">$$</font>) <font color="#ff40ff">}</font> ;<br/>
<br/>
<font color="#7f9fbf">EXPR:</font>    NUM<br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'+'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> + <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'-'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> - <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'*'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> * <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">        |</font> EXPR <font color="#ff6060">'/'</font> EXPR <font color="#ff40ff">{</font> <font color="#808000">$$</font> = <font color="#808000">$1</font> / <font color="#808000">$3</font>; <font color="#ff40ff">}</font><br/>
<font color="#7f9fbf">;</font><br/>
<br/>
<font color="#808080">%%</font><br/>
</code><br/>
Для правоассоциативных операторов есть директива <code>%right</code>.<br/>
Противоестественность хака с приоритетами можно оценить на примере двусмысленности <code>if (1) if (2) foo(); else bar();</code><br/>
Чтобы она распарсилась привычным образом — <code>if (1) { if (2) foo(); else bar(); }</code> — нужно, чтобы приоритет <code>else</code> был выше, чем у <code>')'</code><br/>
Оба этих терминала тяжело назвать операторами, и тем более тяжело задать им «естественный» приоритет.<br/>
Зато это работает!<br/>
<br/>
«Грамматика с намёками» компактнее однозначной и в исходном виде (короче вдвое), и в виде автомата (сэкономили одно состояние).<br/>
<br/>
Даже в однозначной грамматике могут возникать конфликты, связанные с принципом работы магазинного автомата: во время выполнения каждого действия он видит только один следующий символ ввода. Например, грамматика <pre>
WORD: S1 'a' 'i' 'l' | S2 'a' 'l' 'e' ;
S1: 's' ;
S2: 's' ;
</pre> — однозначная, и ей соответствует всего два слова — sail и sale. Когда парсер сдвинул первую букву 's' и видит после неё 'a', он не может сделать выбор, сворачивать <code>S1</code> или <code>S2</code>: правильная свёртка зависит от того, какая буква будет после 'a'; но её автомат ещё не видит.<br/>
Это вторая причина, по которой парсер делают двухступенчатым: за счёт того, что лексер сжимает строки в токены и отбрасывает ненужные символы между токенами, LR-парсеру удаётся «дальше» заглядывать: не на одну букву, а на один токен вперёд.<br/>
<br/>
<h3>Как это работает?</h3><br/>
Как и у <code>flex</code>, ядро парсера — таблица переходов и небольшой цикл. Используется два параллельных стека: стек состояний <code>yyssa</code> и стек значений <code>yyvsa</code> — всё равно состояния и символы входят и выходят из стека всегда парами.<br/>
<br/>
Как и в прошлый раз, символы, идентичные с точки зрения парсера, объединены в классы. В данном случае, классов 7, и они перечислены в файле <code>.output</code>. Массив <code>static const unsigned char yytranslate[259]</code> сопоставляет всем терминалам класс. (От 0 до 255 — обычные символы; 258 — объявленный нами терминал <code>NUM</code>).<br/>
<br/>
Таблицы переходов хитроумно объединены. В основной таблице хранятся описания действий: для сдвига (положительное число) — в какое состояние перейти; для свёртки (отрицательное) — по какому правилу свернуть. <pre>
static const unsigned char yytable[] =
{
       6,     7,     5,     8,     9,    10,    11,     1,    12,    13
};
</pre>Удивительно, что таблица не только одномерная, но даже элементов в ней меньше, чем наших состояний (их 14).<br/>
Трюк в том, что индекс первого действия для каждого состояния хранится в отдельной таблице: <pre>
#define YYPACT_NINF -5
static const yysigned_char yypact[] =
{
       4,    -5,     2,    -4,    -3,    -5,     4,     4,     5,     6,
      -3,    -3,    -5,    -5
};
</pre><code>YYPACT_NINF</code> означает, что состоянию не соответствует ни один элемент <code>yytable</code>; иначе говоря, выполняемое действие не зависит от входного символа.<br/>
Действия по умолчанию для каждого состояния хранятся в другой отдельной таблице: <pre>
static const unsigned char yydefact[] =
{
       0,     6,     0,     2,     3,     1,     0,     0,     0,     0,
       4,     5,     7,     8
};
</pre>Не зависеть от входного символа может только выполнение свёртки, поэтому значения в <code>yydefact</code> — номера правил грамматики, по которым нужно сворачивать.<br/>
<br/>
По индексу из <code>yypact[n]</code> хранится действие для состояния <i>n</i> и для класса символов 0. Действие для класса символов <i>k</i> хранится в <code>yytable[yypact[n]+k]</code>; поэтому в <code>yypact</code> могут быть отрицательные индексы — это лишь «база», к которой будет прибавляться номер класса.<br/>
<br/>
Чтобы проверить, к которому символу относится каждое действие в <code>yytable</code>, есть ещё одна таблица: <pre>
static const unsigned char yycheck[] =
{
       4,     5,     0,     6,     7,     6,     7,     3,     3,     3
};
</pre>Что мы видим? <code>yytable[0]</code> относится к символам класса 4, <code>yytable[1]</code> к символам класса 5, и так далее.<br/>
Попробуем найти какое-нибудь действие, например приведённые выше: <pre>
...

state 7

    4 EXPR: EXPR '-' . TERM

    NUM  shift, and go to state 1

    TERM  go to state 11


state 8

    6 TERM: TERM '*' . NUM

    NUM  shift, and go to state 12

...
</pre><br/>
Класс терминала NUM — 3.<br/>
Ищем первый сдвиг: <code>yytable[yypact[7]+3]==yytable[4+3]==1</code> (и действительно, <code>yycheck[yypact[7]+3]==3</code>)<br/>
Второй сдвиг: <code>yytable[yypact[8]+3]==yytable[5+3]==12</code> (и действительно, <code>yycheck[yypact[7]+3]==3</code>)<br/>
<br/>
Аналогичным образом побита на три массива таблица «go to», которая задаёт, в какое состояние нужно перейти после свёртки.<br/>
<br/>
Код собственно парсера: (неинтересные куски вырезаны, а интересные прокомментированы)<br/>
<code><font color="#808000">yynewstate</font>:<br/>
  *++yyssp = yystate;    <font color="#8080ff">// кладём в стек текущее состояние</font><br/>
<br/>
  yyn = yypact[yystate];  <font color="#8080ff">// индекс первого действия</font><br/>
  <font color="#808000">if</font> (yyn == YYPACT_NINF)<br/>
    <font color="#808000">goto</font> yydefault;      <font color="#8080ff">// не зависит от входного символа</font><br/>
<br/>
  yychar = yylex();      <font color="#8080ff">// читаем входной символ</font><br/>
  yytoken = yytranslate[yychar]; <font color="#8080ff">// определяем класс</font><br/>
  yyn += yytoken;        <font color="#8080ff">// индекс внутрь yytable</font><br/>
  <font color="#808000">if</font> (yyn &lt; <font color="#ff6060">0</font> || YYLAST &lt; yyn || yycheck[yyn] != yytoken)<br/>
    <font color="#808000">goto</font> yydefault;      <font color="#8080ff">// нет подходящего действия</font><br/>
  yyn = yytable[yyn];<br/>
<br/>
  <font color="#808000">if</font> (yyn &lt;= <font color="#ff6060">0</font>) {<br/>
    yyn = -yyn;<br/>
    <font color="#808000">goto</font> yyreduce;<br/>
  }<br/>
<br/>
  *++yyvsp = yylval;      <font color="#8080ff">// сдвигаем</font><br/>
  yystate = yyn;          <font color="#8080ff">// следующее состояние</font><br/>
  <font color="#808000">goto</font> yynewstate;<br/>
<br/>
<font color="#808000">yydefault</font>:<br/>
  yyn = yydefact[yystate];<br/>
  <font color="#808000">if</font> (yyn == <font color="#ff6060">0</font>)          <font color="#8080ff">// ошибка синтаксиса:</font><br/>
    <font color="#808000">goto</font> yyerrlab;        <font color="#8080ff">//  ни одно действие не подошло,</font><br/>
                          <font color="#8080ff">//  и нет действия по умолчанию</font><br/>
<font color="#808000">yyreduce</font>:<br/>
  yylen = yyr2[yyn];      <font color="#8080ff">// длина правой части правила</font><br/>
<br/>
  yyval = yyvsp[<font color="#ff6060">1</font>-yylen]; <font color="#8080ff">// по умолчанию: унаследовать $1</font><br/>
<br/>
<font color="#8080ff">// действия при свёртке:</font><br/>
<font color="#8080ff">// вместо $-тегов бизон подставил yyval слева и yyvsp[] справа</font><br/>
<br/>
  <font color="#808000">switch</font> (yyn) {<br/>
  <font color="#808000">case</font> <font color="#ff6060">2</font>:<br/>
    { printf(<font color="#ff6060">"=</font><font color="#ff40ff">%d</font><font color="#ff40ff">\n</font><font color="#ff6060">"</font>, yyval); }<br/>
    <font color="#808000">break</font>;<br/>
<br/>
  <font color="#808000">case</font> <font color="#ff6060">4</font>:<br/>
    { yyval = yyvsp[-<font color="#ff6060">2</font>] + yyvsp[<font color="#ff6060">0</font>]; }<br/>
    <font color="#808000">break</font>;<br/>
<br/>
  <font color="#808000">case</font> <font color="#ff6060">5</font>:<br/>
    { yyval = yyvsp[-<font color="#ff6060">2</font>] - yyvsp[<font color="#ff6060">0</font>]; }<br/>
    <font color="#808000">break</font>;<br/>
<br/>
  <font color="#808000">case</font> <font color="#ff6060">7</font>:<br/>
    { yyval = yyvsp[-<font color="#ff6060">2</font>] * yyvsp[<font color="#ff6060">0</font>]; }<br/>
    <font color="#808000">break</font>;<br/>
<br/>
  <font color="#808000">case</font> <font color="#ff6060">8</font>:<br/>
    { yyval = yyvsp[-<font color="#ff6060">2</font>] / yyvsp[<font color="#ff6060">0</font>]; }<br/>
    <font color="#808000">break</font>;<br/>
  }<br/>
<br/>
  yyvsp -= yylen;        <font color="#8080ff">// удаление из стека</font><br/>
  yyssp -= yylen;<br/>
<br/>
  *++yyvsp = yyval;      <font color="#8080ff">// кладём свежесвёрнутую переменную</font><br/>
<br/>
  yyn = yyr1[yyn];        <font color="#8080ff">// номер переменной по номеру правила</font><br/>
<br/>
  <font color="#8080ff">// вычисление следующего состояния после свёртки</font><br/>
  yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;<br/>
  <font color="#808000">if</font> (<font color="#ff6060">0</font> &lt;= yystate &amp;&amp; yystate &lt;= YYLAST &amp;&amp; yycheck[yystate] == *yyssp)<br/>
    yystate = yytable[yystate];<br/>
  <font color="#808000">else</font><br/>
    yystate = yydefgoto[yyn - YYNTOKENS];<br/>
<br/>
  <font color="#808000">goto</font> yynewstate;<br/>
</code><br/>
Вновь видим: весь парсер, вместе с вычислением выражения, уложился в пару страниц кода; да и то, его треть — мудрёный поиск по сжатым таблицам.<br/>
<br/>
В следующий раз займёмся парсингом <a href="http://habrahabr.ru/blogs/programming/99397/">игрушечного языка программирования</a>.<br/>
Достоинство бизона и ему подобных в том, что от усложнения языка вырастут в парсере только таблицы и свитч с действиями при свёртке, скопированными из <code>.y</code>-файла.<br/>
Весь остальной код парсера универсален: никаких спагетти, никаких рекурсивных функций, вызывающих друг друга в хитрых комбинациях. Правила грамматики действительно <i>компилируются</i>, а не обрамляются в синтаксис языка высокого уровня.</div></div> <!----> <!----></div> <div class="tm-article-body__tags"><div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Теги:</span> <span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D1%8F%5D" class="tm-article-body__tags-item-link">компиляция</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9%20%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%5D" class="tm-article-body__tags-item-link">синтаксический анализ</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Byacc%5D" class="tm-article-body__tags-item-link">yacc</a></span><span class="tm-article-body__tags-item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bbison%5D" class="tm-article-body__tags-item-link">bison</a></span></div> <div class="tm-article-body__tags-links"><span class="tm-article-body__tags-title">Хабы:</span> <span class="tm-article-body__tags-item"><a href="/ru/hub/programming/" class="tm-article-body__tags-item-link">
                  Программирование
                </a></span></div></div></article> <div class="tm-article__icons-wrapper"><div class="tm-data-icons tm-page-article__counters-panel"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 73: ↑71 и ↓2</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 73: ↑71 и ↓2" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+69</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    148
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/99366/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      14
    </span></a> <!----></div> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <!----></div> <!----> <div class="tm-page-article__additional-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body"><div class="tm-article-author tm-page-article__author"><!----> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-two-column"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/tyomitch/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/b71/804/e6d/b71804e6dcbec22ada05c488b7ee4c1b.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 796 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    414.5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">7.6</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info"><div class="tm-user-card__title"><span class="tm-user-card__name">Artyom Skrobov</span> <a href="/ru/users/tyomitch/" class="tm-user-card__nickname">
          @tyomitch
        </a> <!----></div> <p class="tm-user-card__short-info">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-two-column"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <div class="tm-page-article__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/99366/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 14 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Похожие публикации</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2018-06-01T09:50:36.000Z" title="2018-06-01, 12:50">1  июня  2018 в 12:50</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/412905/" class="tm-article-title__link"><span>Про LL-парсинг: Подход к синтаксическому анализу через концепцию нарезания строки</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 14: ↑13 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑13 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+12</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">9.7K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    59
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/412905/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      6
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2017-11-16T11:46:18.000Z" title="2017-11-16, 14:46">16  ноября  2017 в 14:46</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/342162/" class="tm-article-title__link"><span>Синтаксический анализ в NLTK. Продолжение</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 8: ↑7 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 8: ↑7 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+6</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    41
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/342162/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2016-12-14T11:50:30.000Z" title="2016-12-14, 14:50">14  декабря  2016 в 14:50</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/317564/" class="tm-article-title__link"><span>Синтаксический анализ текстов с помощью SyntaxNet</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 29: ↑29 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 29: ↑29 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+29</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">34K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    162
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/317564/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      22
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----> <section class="tm-block tm-block_spacing-around"><header class="tm-block__header"><h2 class="tm-block__title">Лучшие публикации за сутки</h2> <!----></header> <div class="tm-block__body"><ul class="tm-article-list-block__list"><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T07:08:30.000Z" title="2021-09-28, 10:08">сегодня в 10:08</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/nlmk/blog/580270/" class="tm-article-title__link"><span>Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 65: ↑65 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 65: ↑65 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+65</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">5.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    23
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/nlmk/blog/580270/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      23
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:07:48.000Z" title="2021-09-28, 11:07">сегодня в 11:07</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/domclick/blog/575686/" class="tm-article-title__link"><span>Когда сделаете доработку?</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 42: ↑41 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 42: ↑41 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+40</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    33
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/domclick/blog/575686/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:51:05.000Z" title="2021-09-28, 11:51">сегодня в 11:51</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/yandex/blog/579778/" class="tm-article-title__link"><span>YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 37: ↑37 и ↓0</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 37: ↑37 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+37</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    23
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/yandex/blog/579778/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      7
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T14:25:12.000Z" title="2021-09-28, 17:25">сегодня в 17:25</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/post/580516/" class="tm-article-title__link"><span>Лучший язык программирования</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 34: ↑31 и ↓3</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 34: ↑31 и ↓3" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+28</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">6.5K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    47
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/post/580516/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      17
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li><li class="tm-article-list-block__item"><article class="tm-article-snippet-block-block tm-article-snippet-block-block_preview"><div class="tm-article-snippet-block__user-meta"><div class="tm-article-snippet-block__date"><time datetime="2021-09-28T08:18:27.000Z" title="2021-09-28, 11:18">сегодня в 11:18</time></div></div> <h2 class="tm-article-title tm-article-title_block"><a href="/ru/company/cloud4y/blog/580348/" class="tm-article-title__link"><span>Самый большой космический телескоп Джеймс Уэбб должен изменить наши представления о космосе</span></a></h2> <div class="tm-data-icons"><!----> <div class="tm-votes-meter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_small"><title>Всего голосов 29: ↑28 и ↓1</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-rating"></use></svg> <span title="Всего голосов 29: ↑28 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_small">+27</span></div> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    8
  </span></button> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/company/cloud4y/blog/580348/comments/" class="tm-article-comments-counter-link__link"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.cee85629.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      27
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></article></li> <!----></ul></div> <!----></section> <!----> <!----></div></div></div> <div class="tm-page__sidebar"><div hl="ru" id="99366" class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/99366/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/99366/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"99366":{"id":"99366","timePublished":"2010-07-17T20:26:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Компиляция. 3: бизон","leadData":{"textHtml":"Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по принципу работы генераторы LR-парсеров существуют для очень многих языков. Тех же, кто идеологически не приемлет LR-парсеры, мне сегодня привлечь нечем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EДалее в посте:\u003C\u002Fh3\u003E\u003Col\u003E\r\n\u003Cli\u003EКомпиляция грамматики\u003C\u002Fli\u003E\r\n\u003Cli\u003EДвухступенчатый парсер\u003C\u002Fli\u003E\r\n\u003Cli\u003EЧто у него внутри?\u003C\u002Fli\u003E\r\n\u003Cli\u003EКонфликты в грамматике\u003C\u002Fli\u003E\r\n\u003Cli\u003EКак это работает?\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":414.5,"votesCount":796},"rating":7.6,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"57766","alias":"tyomitch","fullname":"Artyom Skrobov","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb71\u002F804\u002Fe6d\u002Fb71804e6dcbec22ada05c488b7ee4c1b.png","speciality":"Пользователь"},"statistics":{"commentsCount":14,"favoritesCount":148,"readingCount":37019,"score":69,"votesCount":73},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EЭто единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по принципу работы генераторы LR-парсеров существуют для очень многих языков. Тех же, кто идеологически не приемлет LR-парсеры, мне сегодня привлечь нечем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EДалее в посте:\u003C\u002Fh3\u003E\u003Col\u003E\r\n\u003Cli\u003EКомпиляция грамматики\u003C\u002Fli\u003E\r\n\u003Cli\u003EДвухступенчатый парсер\u003C\u002Fli\u003E\r\n\u003Cli\u003EЧто у него внутри?\u003C\u002Fli\u003E\r\n\u003Cli\u003EКонфликты в грамматике\u003C\u002Fli\u003E\r\n\u003Cli\u003EКак это работает?\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧем мы занимались до сих пор?\u003Cbr\u002F\u003E\r\nВ прошлый раз \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fprogramming\u002F99298\u002F\"\u003Eсоставили грамматику\u003C\u002Fa\u003E для арифметических выражений:\u003Cpre\u003E\nEXPR: TERM | EXPR '+' TERM | EXPR '-' TERM ;\nTERM: NUM | TERM '*' NUM | TERM '\u002F' NUM ;\nNUM: DIGIT | NUM DIGIT ;\nDIGIT: '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' ;\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЗакончили тем, что пристально рассмотрели автомат, который её парсит.\u003Cbr\u002F\u003E\r\nПридумывать парсящие автоматы сами мы не умеем, да и не надо — ведь бизон умеет строить их за нас!\u003Cbr\u002F\u003E\r\nС бизоньей помощью сможем скомпилировать наш парсер, и поглядеть, как всё это работает взаправду.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EКомпиляция грамматики\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОбщий принцип такой же, как с \u003Ccode\u003Eflex\u003C\u002Fcode\u003E в \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fprogramming\u002F99162\u002F\"\u003Eпервой части\u003C\u002Fa\u003E: мы перечисляем правила грамматики, и напротив каждого правила пишем сишный код, который будет выполняться во время свёртки правила.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ прошлый раз упомянули, что во время свёртки мы вынимаем из стека набор символов (строк или переменных), смотрим на их значения, задаём значение для свернувшейся переменной, и кладём её в стек вместо вынутых.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E&lt;stdio.h\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Eint\u003C\u002Ffont\u003E yylex() \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003Ereturn\u003C\u002Ffont\u003E getc(\u003Cfont color=\"#ff6060\"\u003Estdin\u003C\u002Ffont\u003E); \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Evoid\u003C\u002Ffont\u003E yyerror(\u003Cfont color=\"#008000\"\u003Echar\u003C\u002Ffont\u003E *s) \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n      fprintf (\u003Cfont color=\"#ff6060\"\u003Estderr\u003C\u002Ffont\u003E, \u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%s\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, s);\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEVALUATE:\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E'\\n'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E printf(\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E) \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E ;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEXPR:\u003C\u002Ffont\u003E    TERM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E + \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E - \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003ETERM:\u003C\u002Ffont\u003E    NUM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E * \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E \u002F \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003ENUM:\u003C\u002Ffont\u003E      DIGIT\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E NUM DIGIT    \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E*\u003Cfont color=\"#ff6060\"\u003E10\u003C\u002Ffont\u003E+\u003Cfont color=\"#808000\"\u003E$2\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EDIGIT:\u003C\u002Ffont\u003E    \u003Cfont color=\"#ff6060\"\u003E'0'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'1'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E1\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'2'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'3'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'4'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E4\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'5'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E5\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'6'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E6\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'7'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E7\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'8'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E8\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E | \u003Cfont color=\"#ff6060\"\u003E'9'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E=\u003Cfont color=\"#ff6060\"\u003E9\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EРазбор кода\u003C\u002Fh4\u003E\u003Ca href=\"http:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Woman_with_yak_at_Qinghai_Lake.jpg\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F88f\u002F15b\u002F8ce\u002F88f15b8ceb15201a4db37376c88e0db4.jpg\" align=\"right\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F88f\u002F15b\u002F8ce\u002F88f15b8ceb15201a4db37376c88e0db4.jpg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nТак же, как в \u003Ccode\u003Elex\u003C\u002Fcode\u003E-файлах, код в тегах \u003Cb\u003E%{ %}\u003C\u002Fb\u003E копируется в парсер неизменным. Есть две функции, которые необходимо определить: \u003Ccode\u003Eint yylex()\u003C\u002Fcode\u003E возвращает следующий входной символ, и \u003Ccode\u003Evoid yyerror(char *s)\u003C\u002Fcode\u003E печатает сообщение об ошибке. Классический \u003Ccode\u003Eyacc\u003C\u002Fcode\u003E включал готовую реализацию \u003Ccode\u003Eyyerror\u003C\u002Fcode\u003E, которую можно было в случае необходимости переобъявить; но его GNU-клон \u003Ccode\u003Ebison\u003C\u002Fcode\u003E требует от программиста явную реализацию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E%%\u003C\u002Fb\u003E, как и в \u003Ccode\u003Elex\u003C\u002Fcode\u003E-файлах, разделяет область объявлений и область правил грамматики. Правила перечисляются в том же виде, как мы уже привыкли; в конце правила добавляем код свёртки. В коде свёртки, чтобы сослаться на значения символов на стеке парсера, используем \u003Cb\u003E$\u003C\u002Fb\u003E-теги. \u003Ccode\u003E$$\u003C\u002Fcode\u003E ссылается на сворачиваемую переменную (левую часть правила), \u003Ccode\u003E$1\u003C\u002Fcode\u003E на самый левый символ в правой части правила (самый глубокий в стеке парсера), \u003Ccode\u003E$2\u003C\u002Fcode\u003E на второй слева, и т.д. Если в правой части правила \u003Ci\u003EN\u003C\u002Fi\u003E символов, то можно пользоваться значениями от \u003Ccode\u003E$1\u003C\u002Fcode\u003E до \u003Ccode\u003E$N\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nЕсли код свёртки не задан, и в правой части правила один символ, то по умолчанию бизон «наследует» его значение: \u003Ccode\u003E$$=$1\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамая первая объявленная переменная считается «корнем» грамматики, т.е. весь входной текст должен в итоге свернуться в этот корень. \u003Ccode\u003EEXPR\u003C\u002Fcode\u003E подходил бы в качестве корня, но тогда печать вычисленного выражения пришлось бы засунуть в свёртку \u003Ccode\u003EEXPR\u003C\u002Fcode\u003E; а значит, печаталось бы ещё и значение каждого подвыражения по дороге. Для удобства печати заведём новую переменную \u003Ccode\u003EEVALUATE\u003C\u002Fcode\u003E, которая используется только в качестве корня. Это заодно даёт возможность прочитать в конце выражения перевод строки — кроме удобства печати, получаем удобство ввода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри компиляции парсера нужно указать библиотеку \u003Ccode\u003Eliby\u003C\u002Fcode\u003E, в которой лежит стандартная бизонья \u003Ccode\u003Emain()\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E[tyomitch@home ~]$ \u003Cb\u003Ebison 2.y\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ecc -ly 2.tab.c\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003E.\u002Fa.out\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E22+3*4-5\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n=29\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003E.\u002Fa.out\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E2 + 2\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\nsyntax error\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nВ отличие от калькулятора торговок с рынка, который умел игнорировать пробелы и комментарии, бизоний калькулятор понимает строго заданный синтаксис: цифры, знаки операций, перевод строки в конце. Чтобы предусмотреть, например, пробелы между любой парой символов, пришлось бы добавлять их в грамматику явно:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003EEXPR: TERM | EXPR \u003Cb\u003EWS\u003C\u002Fb\u003E '+' \u003Cb\u003EWS\u003C\u002Fb\u003E TERM | EXPR \u003Cb\u003EWS\u003C\u002Fb\u003E '-' \u003Cb\u003EWS\u003C\u002Fb\u003E TERM ;\u003Cbr\u002F\u003E\r\nTERM: NUM | TERM \u003Cb\u003EWS\u003C\u002Fb\u003E '*' \u003Cb\u003EWS\u003C\u002Fb\u003E NUM | TERM \u003Cb\u003EWS\u003C\u002Fb\u003E '\u002F' \u003Cb\u003EWS\u003C\u002Fb\u003E NUM ;\u003Cbr\u002F\u003E\r\nNUM: DIGIT | NUM DIGIT ;\u003Cbr\u002F\u003E\r\nDIGIT: '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' ;\u003Cbr\u002F\u003E\r\n\u003Cb\u003EWS: | WS ' ' ;\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЯсно, что это неудобно. Да и писать для распознавания цифр 10 разных правил неудобно; а если бы нам нужны были латинские буквы, например в именах переменных, мы бы задавали 52 правила?!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДо чего здорово было бы совместить преимущества \u003Ccode\u003Eflex\u003C\u002Fcode\u003E и \u003Ccode\u003Ebison\u003C\u002Fcode\u003E! Чтобы простые выражения (числа, пробелы) распознавать было \u003Ci\u003Eпросто\u003C\u002Fi\u003E, и чтобы сложные выражения распознавать было \u003Ci\u003Eвозможно\u003C\u002Fi\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EДвухступенчатый парсер\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nЕсли у нас уже есть \u003Ccode\u003Eflex\u003C\u002Fcode\u003E-парсер, который успешно распознаёт числа и удаляет комментарии и пробелы, то прогоним входной текст через него; а то, что получится, прогоним через продвинутый бизоний парсер. На самом деле, нет надобности хранить промежуточный результат: обе ступени можно выполнить за один проход. \u003Ccode\u003Eflex\u003C\u002Fcode\u003E читает входной текст символ за символом, время от времени передавая «наверх» бизону \u003Ci\u003Eтокены\u003C\u002Fi\u003E — терминальные символы грамматики. Значения для токенов \u003Ccode\u003Eflex\u003C\u002Fcode\u003E задаёт сам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы такой симбиоз был возможен, \u003Ccode\u003Eflex\u003C\u002Fcode\u003E должен как-то узнать терминальные символы бизоньей грамматики. Будем запускать \u003Ccode\u003Ebison\u003C\u002Fcode\u003E с ключом \u003Ccode\u003E-d\u003C\u002Fcode\u003E, тогда он сгенерирует \u003Ccode\u003E.h\u003C\u002Fcode\u003E-файл с перечислением всех терминалов. Для этого нужно объявить (указанием \u003Ccode\u003E%token\u003C\u002Fcode\u003E) терминалы в файле грамматики — и останется лишь сослаться на сгенерированный \u003Ccode\u003E.h\u003C\u002Fcode\u003E-файл в файле \u003Ccode\u003E.lex\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E&lt;stdio.h\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Evoid\u003C\u002Ffont\u003E yyerror(\u003Cfont color=\"#008000\"\u003Echar\u003C\u002Ffont\u003E *s) \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n      fprintf (\u003Cfont color=\"#ff6060\"\u003Estderr\u003C\u002Ffont\u003E, \u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%s\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, s);\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E\u003Cfont color=\"#808000\"\u003E%token\u003C\u002Ffont\u003E NUM\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEVALUATE:\u003C\u002Ffont\u003E EXPR          \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E printf(\u003Cfont color=\"#ff6060\"\u003E\"=\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E); \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E ;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEXPR:\u003C\u002Ffont\u003E    TERM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E + \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E - \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003ETERM:\u003C\u002Ffont\u003E    NUM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E * \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E \u002F \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nФункция \u003Ccode\u003Eyylex\u003C\u002Fcode\u003E нам больше не нужна: теперь входные символы будут поступать не из \u003Ccode\u003Estdin\u003C\u002Fcode\u003E, а от \u003Ccode\u003Eflex\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nКроме того, стёрли \u003Ccode\u003E'\\n'\u003C\u002Fcode\u003E после \u003Ccode\u003EEXPR\u003C\u002Fcode\u003E (его проглотит \u003Ccode\u003Eflex\u003C\u002Fcode\u003E), и убрали все правила про \u003Ccode\u003ENUM\u003C\u002Fcode\u003E и \u003Ccode\u003EDIGIT\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоответствующий файл \u003Ccode\u003E.lex\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"3.tab.h\"\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n%option yylineno\u003Cbr\u002F\u003E\r\n%option noyywrap\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E[\u002F][\u002F]\u003C\u002Ffont\u003E\u003Cfont color=\"#7f9fbf\"\u003E.*\\n\u003C\u002Ffont\u003E      ; \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F comment\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E[0-9]\u003C\u002Ffont\u003E\u003Cfont color=\"#7f9fbf\"\u003E+\u003C\u002Ffont\u003E          \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E yylval = atoi(yytext);\u003Cbr\u002F\u003E\r\n                  \u003Cfont color=\"#808000\"\u003Ereturn\u003C\u002Ffont\u003E NUM;\u003Cbr\u002F\u003E\r\n                \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E[ \\t\\r\\n]\u003C\u002Ffont\u003E      ; \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F whitespace\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E.\u003C\u002Ffont\u003E              \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003Ereturn\u003C\u002Ffont\u003E *\u003Cfont color=\"#7f9fbf\"\u003Eyytext\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nФайл с определениями токенов получает суффикс \u003Ccode\u003E.tab.h\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЕдинственное, что в нём есть — \u003Ccode\u003E#define NUM 258\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nВсе токены получают номера выше 256, чтобы отличаться от «обычных» символов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы передать токен бизону, его значение записываем в глобальную (ох ужас!) переменную \u003Ccode\u003Eyylval\u003C\u002Fcode\u003E, и возвращаем код токена.\u003Cbr\u002F\u003E\r\nОбычные символы передаём обычным способом (возвращаем код символа).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОпция \u003Ccode\u003Enoyywrap\u003C\u002Fcode\u003E указывает, что входной текст один, и после чтения \u003Ccode\u003EEOF\u003C\u002Fcode\u003E не нужно пытаться перейти к следующему тексту. Эта опция устанавливалась автоматически, пока мы пользовались \u003Ccode\u003E%option main\u003C\u002Fcode\u003E, задававшей чтение с \u003Ccode\u003Estdin\u003C\u002Fcode\u003E. Сейчас \u003Ccode\u003Emain()\u003C\u002Fcode\u003E будет бизонья, поэтому нам не нужно ни просить у \u003Ccode\u003Eflex\u003C\u002Fcode\u003E стандартную \u003Ccode\u003Emain()\u003C\u002Fcode\u003E, ни писать свою.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКомпилируем двухступенчатый парсер:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E[tyomitch@home ~]$ \u003Cb\u003Elex 3.lex\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ebison -d 3.y\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ecc -ly lex.yy.c 3.tab.c\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003E.\u002Fa.out\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E22+ \u002F\u002F hello\u003Cbr\u002F\u003E\r\n3*4 - 5\u003Cbr\u002F\u003E\r\n\u003C\u002Fb\u003E=29\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003E.\u002Fa.out\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E22+x\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\nsyntax error\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nПо поводу терминологии: в такой двухступенчатой модели нижний парсер, распознающий токены, по традиции называют \u003Ci\u003Eлексическим анализатором\u003C\u002Fi\u003E («лексером»), а верхний, распознающий конструкции из токенов — \u003Ci\u003Eсинтаксическим анализатором\u003C\u002Fi\u003E. Это указание именно роли парсера, а не его устройства: другие системы разбора могут, например, использовать для обеих ступеней магазинно-автоматные парсеры.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EЧто у него внутри?\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nЧтобы увидеть сгенерированный автомат, не нужно нырять в пучины сишного кода: у бизона могучие средства для отладки грамматик. Указываем ключ \u003Ccode\u003E-v\u003C\u002Fcode\u003E, и глядим в файл с суффиксом \u003Ccode\u003E.output\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nПосле переноса парсинга чисел в лексер, в автомате осталось 14 состояний, и описаны они примерно так:\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\n...\n\nstate 7\n\n    4 EXPR: EXPR '-' . TERM\n\n    NUM  shift, and go to state 1\n\n    TERM  go to state 11\n\n\nstate 8\n\n    6 TERM: TERM '*' . NUM\n\n    NUM  shift, and go to state 12\n\n\nstate 9\n\n    7 TERM: TERM '\u002F' . NUM\n\n    NUM  shift, and go to state 13\n\n\nstate 10\n\n    3 EXPR: EXPR '+' TERM .\n    6 TERM: TERM . '*' NUM\n    7     | TERM . '\u002F' NUM\n\n    '*'  shift, and go to state 8\n    '\u002F'  shift, and go to state 9\n\n    $default  reduce using rule 3 (EXPR)\n\n...\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nДля каждого состояния указаны правила, которые в этом состоянии распознаются (вместе с их номерами в грамматике), и перечислены действия, выполняемые для каждого входного символа. Не указано следующее состояние после свёртки; вместо этого автомат возвращается в состояние, прочитанное из стека, и в нём ищет правило «go to», соответствующее свежесвёрнутому нетерминалу. Таким образом, таблица переходов автомата получается двумерной: в каждом состоянии \u003Ci\u003Eдействие\u003C\u002Fi\u003E зависит только от входного символа, и не зависит от содержимого стека. (Но из стека берётся следующее состояние после свёртки.)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы не ползать с карандашом по распечатке автомата, подставляя в него символ за символом, можно попросить бизона во время парсинга печатать все переходы из состояния в состояние. Для этого компилируем грамматику с ключом \u003Ccode\u003E-t\u003C\u002Fcode\u003E, и в парсере появится глобальный флаг \u003Ccode\u003Eyydebug\u003C\u002Fcode\u003E. Его нужно установить в 1 — например, в \u003Ccode\u003Emain()\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nЕсли мы, кроме того, хотим, чтобы печатались значения символов, то нужно определить макрос \u003Ccode\u003EYYPRINT\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E&lt;stdio.h\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Evoid\u003C\u002Ffont\u003E yyerror(\u003Cfont color=\"#008000\"\u003Echar\u003C\u002Ffont\u003E *s) \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n      fprintf (\u003Cfont color=\"#ff6060\"\u003Estderr\u003C\u002Ffont\u003E, \u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%s\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, s);\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E\u003Cfont color=\"#ff40ff\"\u003E    #define YYPRINT(file, type, value) fprintf(file, \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E, value);\u003C\u002Ffont\u003E\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003E%token\u003C\u002Ffont\u003E NUM\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEVALUATE:\u003C\u002Ffont\u003E EXPR          \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E printf(\u003Cfont color=\"#ff6060\"\u003E\"=\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E); \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E ;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEXPR:\u003C\u002Ffont\u003E    TERM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E + \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E - \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003ETERM:\u003C\u002Ffont\u003E    NUM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E * \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E TERM \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E NUM  \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E \u002F \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cb\u003E\u003Cfont color=\"#008000\"\u003Eint\u003C\u002Ffont\u003E main () \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E yydebug=\u003Cfont color=\"#ff6060\"\u003E1\u003C\u002Ffont\u003E; \u003Cfont color=\"#808000\"\u003Ereturn\u003C\u002Ffont\u003E yyparse(); \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nКод после второго тега \u003Cb\u003E%%\u003C\u002Fb\u003E копируется в парсер неизменным так же, как если бы он был в \u003Cb\u003E%{ %}\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\nТеперь, раз мы определили \u003Ccode\u003Emain()\u003C\u002Fcode\u003E сами, уже не нужно при компиляции подключать \u003Ccode\u003Eliby\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E[tyomitch@home ~]$ \u003Cb\u003Elex 3.lex\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ebison -dt 3.y\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ecc lex.yy.c 3.tab.c\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003E.\u002Fa.out\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\nStarting parse\u003Cbr\u002F\u003E\r\nEntering state 0\u003Cbr\u002F\u003E\r\nReading a token: \u003Cb\u003E22+3*4-5\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\nNext token is token NUM (22)\u003Cbr\u002F\u003E\r\nShifting token NUM, Entering state 1\u003Cbr\u002F\u003E\r\nReducing stack by rule 5 (line 20), NUM -\u003E TERM\u003Cbr\u002F\u003E\r\nStack now 0\u003Cbr\u002F\u003E\r\nEntering state 4\u003Cbr\u002F\u003E\r\nReading a token: Next token is token '+' (22)\u003Cbr\u002F\u003E\r\nReducing stack by rule 2 (line 15), TERM -\u003E EXPR\u003Cbr\u002F\u003E\r\nStack now 0\u003Cbr\u002F\u003E\r\nEntering state 3\u003Cbr\u002F\u003E\r\nNext token is token '+' (22)\u003Cbr\u002F\u003E\r\nShifting token '+', Entering state 6\u003Cbr\u002F\u003E\r\nReading a token: Next token is token NUM (3)\u003Cbr\u002F\u003E\r\nShifting token NUM, Entering state 1\u003Cbr\u002F\u003E\r\nReducing stack by rule 5 (line 20), NUM -\u003E TERM\u003Cbr\u002F\u003E\r\nStack now 0 3 6\u003Cbr\u002F\u003E\r\nEntering state 10\u003Cbr\u002F\u003E\r\nReading a token: Next token is token '*' (3)\u003Cbr\u002F\u003E\r\nShifting token '*', Entering state 8\u003Cbr\u002F\u003E\r\nReading a token: Next token is token NUM (4)\u003Cbr\u002F\u003E\r\nShifting token NUM, Entering state 12\u003Cbr\u002F\u003E\r\nReducing stack by rule 6 (line 21), TERM '*' NUM -\u003E TERM\u003Cbr\u002F\u003E\r\nStack now 0 3 6\u003Cbr\u002F\u003E\r\nEntering state 10\u003Cbr\u002F\u003E\r\nReading a token: Next token is token '-' (4)\u003Cbr\u002F\u003E\r\nReducing stack by rule 3 (line 16), EXPR '+' TERM -\u003E EXPR\u003Cbr\u002F\u003E\r\nStack now 0\u003Cbr\u002F\u003E\r\nEntering state 3\u003Cbr\u002F\u003E\r\nNext token is token '-' (4)\u003Cbr\u002F\u003E\r\nShifting token '-', Entering state 7\u003Cbr\u002F\u003E\r\nReading a token: Next token is token NUM (5)\u003Cbr\u002F\u003E\r\nShifting token NUM, Entering state 1\u003Cbr\u002F\u003E\r\nReducing stack by rule 5 (line 20), NUM -\u003E TERM\u003Cbr\u002F\u003E\r\nStack now 0 3 7\u003Cbr\u002F\u003E\r\nEntering state 11\u003Cbr\u002F\u003E\r\nReading a token: Now at end of input.\u003Cbr\u002F\u003E\r\nReducing stack by rule 4 (line 17), EXPR '-' TERM -\u003E EXPR\u003Cbr\u002F\u003E\r\nStack now 0\u003Cbr\u002F\u003E\r\nEntering state 3\u003Cbr\u002F\u003E\r\nNow at end of input.\u003Cbr\u002F\u003E\r\nReducing stack by rule 1 (line 13), EXPR -\u003E EVALUATE\u003Cbr\u002F\u003E\r\n=29\u003Cbr\u002F\u003E\r\nStack now 0\u003Cbr\u002F\u003E\r\nEntering state 2\u003Cbr\u002F\u003E\r\nNow at end of input.\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nИз стека печатаются только состояния; типы символов в стеке, и их значения, остаётся угадывать из контекста.\u003Cbr\u002F\u003E\r\nЕсли макрос \u003Ccode\u003EYYPRINT\u003C\u002Fcode\u003E не задан, тогда угадывать придётся и значения прочитанных токенов: бизон будет печатать только пустые скобки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EКонфликты в грамматике\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВ прошлый раз упомянули неоднозначные грамматики, допускающие для одного выражения несколько вариантов разбора.\u003Cbr\u002F\u003E\r\nЧто скажет бизон, если попытаемся скомпилировать неоднозначную грамматику?\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E&lt;stdio.h\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Evoid\u003C\u002Ffont\u003E yyerror(\u003Cfont color=\"#008000\"\u003Echar\u003C\u002Ffont\u003E *s) \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n      fprintf (\u003Cfont color=\"#ff6060\"\u003Estderr\u003C\u002Ffont\u003E, \u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%s\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, s);\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003E%token\u003C\u002Ffont\u003E NUM\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEVALUATE:\u003C\u002Ffont\u003E EXPR          \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E printf(\u003Cfont color=\"#ff6060\"\u003E\"=\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E) \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E ;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEXPR:\u003C\u002Ffont\u003E    NUM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E + \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E - \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E * \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E \u002F \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n[tyomitch@home ~]$ \u003Cb\u003Ebison 4.y\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n4.y: conflicts: 16 shift\u002Freduce\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nКогда из одного состояния грамматика допускает несколько продолжений, бизону непонятно, что именно выполнять. В нашем случае он колеблется между сдвигом и свёрткой. Можно исправить грамматику, как мы в прошлый раз сделали; а можно «подтолкнуть» бизона в нужную сторону, и намекнуть, что делать в случае конфликта. Стоит относиться к этому как к быстрому хаку: парсер начинает работать, но отлаживать «грамматику с намёками» становится сложнее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоскольку типичный источник конфликтов — арифметические выражения, то и намёки даются в виде указания приоритета операторов (выполнять умножение раньше сложения) и их ассоциативности (из операторов с равным приоритетом, который выполнять раньше). Чем ниже оператор в списке, тем выше приоритет. Операторы в одной строчке списка получают одинаковый приоритет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#ff40ff\"\u003E%{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E    #include \u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E&lt;stdio.h\u003E\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#008000\"\u003Evoid\u003C\u002Ffont\u003E yyerror(\u003Cfont color=\"#008000\"\u003Echar\u003C\u002Ffont\u003E *s) \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n      fprintf (\u003Cfont color=\"#ff6060\"\u003Estderr\u003C\u002Ffont\u003E, \u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%s\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, s);\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#ff40ff\"\u003E%}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003E%token\u003C\u002Ffont\u003E NUM\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E\u003Cfont color=\"#808000\"\u003E%left\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003E%left\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEVALUATE:\u003C\u002Ffont\u003E EXPR          \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E printf(\u003Cfont color=\"#ff6060\"\u003E\"=\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E) \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E ;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003EEXPR:\u003C\u002Ffont\u003E    NUM\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'+'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E + \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'-'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E - \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'*'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E * \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E        |\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff6060\"\u003E'\u002F'\u003C\u002Ffont\u003E EXPR \u003Cfont color=\"#ff40ff\"\u003E{\u003C\u002Ffont\u003E \u003Cfont color=\"#808000\"\u003E$$\u003C\u002Ffont\u003E = \u003Cfont color=\"#808000\"\u003E$1\u003C\u002Ffont\u003E \u002F \u003Cfont color=\"#808000\"\u003E$3\u003C\u002Ffont\u003E; \u003Cfont color=\"#ff40ff\"\u003E}\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#7f9fbf\"\u003E;\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808080\"\u003E%%\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nДля правоассоциативных операторов есть директива \u003Ccode\u003E%right\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nПротивоестественность хака с приоритетами можно оценить на примере двусмысленности \u003Ccode\u003Eif (1) if (2) foo(); else bar();\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nЧтобы она распарсилась привычным образом — \u003Ccode\u003Eif (1) { if (2) foo(); else bar(); }\u003C\u002Fcode\u003E — нужно, чтобы приоритет \u003Ccode\u003Eelse\u003C\u002Fcode\u003E был выше, чем у \u003Ccode\u003E')'\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nОба этих терминала тяжело назвать операторами, и тем более тяжело задать им «естественный» приоритет.\u003Cbr\u002F\u003E\r\nЗато это работает!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n«Грамматика с намёками» компактнее однозначной и в исходном виде (короче вдвое), и в виде автомата (сэкономили одно состояние).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДаже в однозначной грамматике могут возникать конфликты, связанные с принципом работы магазинного автомата: во время выполнения каждого действия он видит только один следующий символ ввода. Например, грамматика \u003Cpre\u003E\nWORD: S1 'a' 'i' 'l' | S2 'a' 'l' 'e' ;\nS1: 's' ;\nS2: 's' ;\n\u003C\u002Fpre\u003E — однозначная, и ей соответствует всего два слова — sail и sale. Когда парсер сдвинул первую букву 's' и видит после неё 'a', он не может сделать выбор, сворачивать \u003Ccode\u003ES1\u003C\u002Fcode\u003E или \u003Ccode\u003ES2\u003C\u002Fcode\u003E: правильная свёртка зависит от того, какая буква будет после 'a'; но её автомат ещё не видит.\u003Cbr\u002F\u003E\r\nЭто вторая причина, по которой парсер делают двухступенчатым: за счёт того, что лексер сжимает строки в токены и отбрасывает ненужные символы между токенами, LR-парсеру удаётся «дальше» заглядывать: не на одну букву, а на один токен вперёд.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EКак это работает?\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКак и у \u003Ccode\u003Eflex\u003C\u002Fcode\u003E, ядро парсера — таблица переходов и небольшой цикл. Используется два параллельных стека: стек состояний \u003Ccode\u003Eyyssa\u003C\u002Fcode\u003E и стек значений \u003Ccode\u003Eyyvsa\u003C\u002Fcode\u003E — всё равно состояния и символы входят и выходят из стека всегда парами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак и в прошлый раз, символы, идентичные с точки зрения парсера, объединены в классы. В данном случае, классов 7, и они перечислены в файле \u003Ccode\u003E.output\u003C\u002Fcode\u003E. Массив \u003Ccode\u003Estatic const unsigned char yytranslate[259]\u003C\u002Fcode\u003E сопоставляет всем терминалам класс. (От 0 до 255 — обычные символы; 258 — объявленный нами терминал \u003Ccode\u003ENUM\u003C\u002Fcode\u003E).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТаблицы переходов хитроумно объединены. В основной таблице хранятся описания действий: для сдвига (положительное число) — в какое состояние перейти; для свёртки (отрицательное) — по какому правилу свернуть. \u003Cpre\u003E\nstatic const unsigned char yytable[] =\n{\n       6,     7,     5,     8,     9,    10,    11,     1,    12,    13\n};\n\u003C\u002Fpre\u003EУдивительно, что таблица не только одномерная, но даже элементов в ней меньше, чем наших состояний (их 14).\u003Cbr\u002F\u003E\r\nТрюк в том, что индекс первого действия для каждого состояния хранится в отдельной таблице: \u003Cpre\u003E\n#define YYPACT_NINF -5\nstatic const yysigned_char yypact[] =\n{\n       4,    -5,     2,    -4,    -3,    -5,     4,     4,     5,     6,\n      -3,    -3,    -5,    -5\n};\n\u003C\u002Fpre\u003E\u003Ccode\u003EYYPACT_NINF\u003C\u002Fcode\u003E означает, что состоянию не соответствует ни один элемент \u003Ccode\u003Eyytable\u003C\u002Fcode\u003E; иначе говоря, выполняемое действие не зависит от входного символа.\u003Cbr\u002F\u003E\r\nДействия по умолчанию для каждого состояния хранятся в другой отдельной таблице: \u003Cpre\u003E\nstatic const unsigned char yydefact[] =\n{\n       0,     6,     0,     2,     3,     1,     0,     0,     0,     0,\n       4,     5,     7,     8\n};\n\u003C\u002Fpre\u003EНе зависеть от входного символа может только выполнение свёртки, поэтому значения в \u003Ccode\u003Eyydefact\u003C\u002Fcode\u003E — номера правил грамматики, по которым нужно сворачивать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПо индексу из \u003Ccode\u003Eyypact[n]\u003C\u002Fcode\u003E хранится действие для состояния \u003Ci\u003En\u003C\u002Fi\u003E и для класса символов 0. Действие для класса символов \u003Ci\u003Ek\u003C\u002Fi\u003E хранится в \u003Ccode\u003Eyytable[yypact[n]+k]\u003C\u002Fcode\u003E; поэтому в \u003Ccode\u003Eyypact\u003C\u002Fcode\u003E могут быть отрицательные индексы — это лишь «база», к которой будет прибавляться номер класса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы проверить, к которому символу относится каждое действие в \u003Ccode\u003Eyytable\u003C\u002Fcode\u003E, есть ещё одна таблица: \u003Cpre\u003E\nstatic const unsigned char yycheck[] =\n{\n       4,     5,     0,     6,     7,     6,     7,     3,     3,     3\n};\n\u003C\u002Fpre\u003EЧто мы видим? \u003Ccode\u003Eyytable[0]\u003C\u002Fcode\u003E относится к символам класса 4, \u003Ccode\u003Eyytable[1]\u003C\u002Fcode\u003E к символам класса 5, и так далее.\u003Cbr\u002F\u003E\r\nПопробуем найти какое-нибудь действие, например приведённые выше: \u003Cpre\u003E\n...\n\nstate 7\n\n    4 EXPR: EXPR '-' . TERM\n\n    NUM  shift, and go to state 1\n\n    TERM  go to state 11\n\n\nstate 8\n\n    6 TERM: TERM '*' . NUM\n\n    NUM  shift, and go to state 12\n\n...\n\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nКласс терминала NUM — 3.\u003Cbr\u002F\u003E\r\nИщем первый сдвиг: \u003Ccode\u003Eyytable[yypact[7]+3]==yytable[4+3]==1\u003C\u002Fcode\u003E (и действительно, \u003Ccode\u003Eyycheck[yypact[7]+3]==3\u003C\u002Fcode\u003E)\u003Cbr\u002F\u003E\r\nВторой сдвиг: \u003Ccode\u003Eyytable[yypact[8]+3]==yytable[5+3]==12\u003C\u002Fcode\u003E (и действительно, \u003Ccode\u003Eyycheck[yypact[7]+3]==3\u003C\u002Fcode\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАналогичным образом побита на три массива таблица «go to», которая задаёт, в какое состояние нужно перейти после свёртки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКод собственно парсера: (неинтересные куски вырезаны, а интересные прокомментированы)\u003Cbr\u002F\u003E\r\n\u003Ccode\u003E\u003Cfont color=\"#808000\"\u003Eyynewstate\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n  *++yyssp = yystate;    \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F кладём в стек текущее состояние\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  yyn = yypact[yystate];  \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F индекс первого действия\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eif\u003C\u002Ffont\u003E (yyn == YYPACT_NINF)\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yydefault;      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F не зависит от входного символа\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  yychar = yylex();      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F читаем входной символ\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yytoken = yytranslate[yychar]; \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F определяем класс\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yyn += yytoken;        \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F индекс внутрь yytable\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eif\u003C\u002Ffont\u003E (yyn &lt; \u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E || YYLAST &lt; yyn || yycheck[yyn] != yytoken)\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yydefault;      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F нет подходящего действия\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yyn = yytable[yyn];\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eif\u003C\u002Ffont\u003E (yyn &lt;= \u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E) {\u003Cbr\u002F\u003E\r\n    yyn = -yyn;\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yyreduce;\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  *++yyvsp = yylval;      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F сдвигаем\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yystate = yyn;          \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F следующее состояние\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yynewstate;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003Eyydefault\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n  yyn = yydefact[yystate];\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eif\u003C\u002Ffont\u003E (yyn == \u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E)          \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F ошибка синтаксиса:\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yyerrlab;        \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F  ни одно действие не подошло,\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n                          \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F  и нет действия по умолчанию\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#808000\"\u003Eyyreduce\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n  yylen = yyr2[yyn];      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F длина правой части правила\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  yyval = yyvsp[\u003Cfont color=\"#ff6060\"\u003E1\u003C\u002Ffont\u003E-yylen]; \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F по умолчанию: унаследовать $1\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#8080ff\"\u003E\u002F\u002F действия при свёртке:\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cfont color=\"#8080ff\"\u003E\u002F\u002F вместо $-тегов бизон подставил yyval слева и yyvsp[] справа\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eswitch\u003C\u002Ffont\u003E (yyn) {\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Ecase\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n    { printf(\u003Cfont color=\"#ff6060\"\u003E\"=\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E%d\u003C\u002Ffont\u003E\u003Cfont color=\"#ff40ff\"\u003E\\n\u003C\u002Ffont\u003E\u003Cfont color=\"#ff6060\"\u003E\"\u003C\u002Ffont\u003E, yyval); }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Ebreak\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Ecase\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E4\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n    { yyval = yyvsp[-\u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E] + yyvsp[\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E]; }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Ebreak\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Ecase\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E5\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n    { yyval = yyvsp[-\u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E] - yyvsp[\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E]; }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Ebreak\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Ecase\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E7\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n    { yyval = yyvsp[-\u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E] * yyvsp[\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E]; }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Ebreak\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Ecase\u003C\u002Ffont\u003E \u003Cfont color=\"#ff6060\"\u003E8\u003C\u002Ffont\u003E:\u003Cbr\u002F\u003E\r\n    { yyval = yyvsp[-\u003Cfont color=\"#ff6060\"\u003E2\u003C\u002Ffont\u003E] \u002F yyvsp[\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E]; }\u003Cbr\u002F\u003E\r\n    \u003Cfont color=\"#808000\"\u003Ebreak\u003C\u002Ffont\u003E;\u003Cbr\u002F\u003E\r\n  }\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  yyvsp -= yylen;        \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F удаление из стека\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yyssp -= yylen;\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  *++yyvsp = yyval;      \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F кладём свежесвёрнутую переменную\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  yyn = yyr1[yyn];        \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F номер переменной по номеру правила\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#8080ff\"\u003E\u002F\u002F вычисление следующего состояния после свёртки\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n  yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eif\u003C\u002Ffont\u003E (\u003Cfont color=\"#ff6060\"\u003E0\u003C\u002Ffont\u003E &lt;= yystate &amp;&amp; yystate &lt;= YYLAST &amp;&amp; yycheck[yystate] == *yyssp)\u003Cbr\u002F\u003E\r\n    yystate = yytable[yystate];\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Eelse\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n    yystate = yydefgoto[yyn - YYNTOKENS];\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n  \u003Cfont color=\"#808000\"\u003Egoto\u003C\u002Ffont\u003E yynewstate;\u003Cbr\u002F\u003E\r\n\u003C\u002Fcode\u003E\u003Cbr\u002F\u003E\r\nВновь видим: весь парсер, вместе с вычислением выражения, уложился в пару страниц кода; да и то, его треть — мудрёный поиск по сжатым таблицам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ следующий раз займёмся парсингом \u003Ca href=\"http:\u002F\u002Fhabrahabr.ru\u002Fblogs\u002Fprogramming\u002F99397\u002F\"\u003Eигрушечного языка программирования\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\nДостоинство бизона и ему подобных в том, что от усложнения языка вырастут в парсере только таблицы и свитч с действиями при свёртке, скопированными из \u003Ccode\u003E.y\u003C\u002Fcode\u003E-файла.\u003Cbr\u002F\u003E\r\nВесь остальной код парсера универсален: никаких спагетти, никаких рекурсивных функций, вызывающих друг друга в хитрых комбинациях. Правила грамматики действительно \u003Ci\u003Eкомпилируются\u003C\u002Fi\u003E, а не обрамляются в синтаксис языка высокого уровня.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"компиляция"},{"titleHtml":"синтаксический анализ"},{"titleHtml":"yacc"},{"titleHtml":"bison"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F99366\u002Fd40ed8f72957ee9ebb8d5696943840b9\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F99366\u002Fd40ed8f72957ee9ebb8d5696943840b9\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F99366\\\u002F\"},\"headline\":\"Компиляция. 3: бизон\",\"datePublished\":\"2010-07-18T00:26:01+04:00\",\"dateModified\":\"2010-07-19T13:00:53+04:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Artyom Skrobov\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Это единственный пост в серии, в центре внимания которого &mdash; старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен б...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F99366\\\u002F#post-content-body\",\"about\":[\"h_programming\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F88f\\\u002F15b\\\u002F8ce\\\u002F88f15b8ceb15201a4db37376c88e0db4.jpg\"]}","metaDescription":"Это единственный пост в серии, в центре внимания которого — старообрядный сишный бизон, так надоевший некоторым. Тем, кто пишет не на Си, пост всё равно должен быть интересен, потому что похожие по...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false},"575686":{"id":"575686","timePublished":"2021-09-28T08:07:48+00:00","isCorporative":true,"lang":"ru","titleHtml":"Когда сделаете доработку?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1097452","alias":"Turundur","fullname":"Станислав Малышев","avatarUrl":"","speciality":"Разработчик"},"statistics":{"commentsCount":5,"favoritesCount":33,"readingCount":4112,"score":40,"votesCount":42},"hubs":[{"relatedData":null,"id":"22422","alias":"domclick","type":"corporative","title":"Блог компании ДомКлик","titleHtml":"Блог компании ДомКлик","isProfiled":false},{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EДовольно часто я попадаю в ситуацию, когда мне нужно в моменте оценить длительность реализации реализации бизнес-фичи. Обычно это какая-нибудь рядовая встреча, на которой инициатор бизнес-идеи, резво размахивая руками в воздухе, рассказывает о своем предложении. В конце своего выступления, в котором часто много слов (но не цифр) сказано о том, зачем это фича нужна и какой эффект она даст, всегда звучит сакральный вопрос: «Когда сделаете эту великолепную доработку?»\u003C\u002Fp\u003E\u003Cp\u003EЯ хотел бы поделиться с читателем ходом своих рассуждений, которые позволяют мне довольно точно оценивать сроки реализации даже в самых запущенных случаях.\u003C\u002Fp\u003E\u003Cp\u003EРазумеется, я не смогу предусмотреть и учесть все нюансы и специфики, принятые в различных компаниях в процессе разработки и вывода новой функциональности в эксплуатацию. Однако я верю, что описанные ниже практики будут полезны и вы сможете их адаптировать под свою ситуацию.\u003C\u002Fp\u003E\u003Cp\u003EСразу упомяну, что речь идет в первую очередь о продуктовых компаниях, где нет жесткого учета рабочего времени и можно подумать о качестве и поддерживаемости новой функциональности. В случае заказной разработки всё обычно гораздо сложнее и требует более детальной проработки.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb36\u002F6f1\u002Fe84\u002Fb366f1e845d886daf41be0f315b7c9a6.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"разработка"},{"titleHtml":"оценка"},{"titleHtml":"заказчик"}]},"579590":{"id":"579590","timePublished":"2021-09-27T23:58:49+00:00","isCorporative":true,"lang":"ru","titleHtml":"Seeed XIAO RP2040: микроконтроллер с отличными возможностями за $5","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Les Pounder","originalUrl":"https:\u002F\u002Fwww.tomshardware.com\u002Freviews\u002Fseeed-xiao-rp2040-review-dollar5-brain-food"}}],"author":{"id":"2071241","alias":"Deluar","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1a5\u002F707\u002F699\u002F1a5707699dc1770d6a9cdd5d777d5bb0.jpg","speciality":"Разработчик"},"statistics":{"commentsCount":15,"favoritesCount":24,"readingCount":7724,"score":22,"votesCount":36},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"19737","alias":"controllers","type":"collective","title":"Программирование микроконтроллеров","titleHtml":"Программирование микроконтроллеров","isProfiled":true},{"relatedData":null,"id":"21894","alias":"gadgets","type":"collective","title":"Гаджеты","titleHtml":"Гаджеты","isProfiled":false},{"relatedData":null,"id":"21976","alias":"DIY","type":"collective","title":"DIY или Сделай сам","titleHtml":"DIY или Сделай сам","isProfiled":false},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F53b\u002F390\u002F960\u002F53b39096013cb151e161ebf489fcca96.jpg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНа первый взгляд Seeed XIAO RP2040 не выглядит многообещающим. Но это обманчивое впечатление. Возможностей у него много. Благо, у компании есть опыт разработки подобных систем, ведь это не первый микроконтроллер от Seeed. Более того, ранее компания выпускала устройство на базе Seeeduino XIAO, которое выглядит близнецом XIAO RP2040, да и стоит столько же — $5.40. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо у XIAO RP2040 другой чип — здесь мы имеем дело с RP2040 SoC, так что этот микроконтроллер гораздо более мощный, чем предыдущая система. Причем доплачивать не нужно — стоимость та же. Стоит ли новинка пяти долларов? Забегая наперед, скажу — да, стоит. \u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"микроконтроллеры"},{"titleHtml":"гаджеты"},{"titleHtml":"устройства"},{"titleHtml":"электроника"}]},"579778":{"id":"579778","timePublished":"2021-09-28T08:51:05+00:00","isCorporative":true,"lang":"ru","titleHtml":"YARL: как Яндекс построил распределённый Rate Limiter с нулевым влиянием на время ответа сервисов","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"91003","alias":"DenKoren","fullname":"Кореневский Денис","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1a3\u002F2cd\u002F706\u002F1a32cd706b2d50526638707e3d3cdacc.png","speciality":"Release Engineer"},"statistics":{"commentsCount":7,"favoritesCount":23,"readingCount":2955,"score":37,"votesCount":37},"hubs":[{"relatedData":null,"id":"4991","alias":"yandex","type":"corporative","title":"Блог компании Яндекс","titleHtml":"Блог компании Яндекс","isProfiled":false},{"relatedData":null,"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true},{"relatedData":null,"id":"7504","alias":"refactoring","type":"collective","title":"Проектирование и рефакторинг","titleHtml":"Проектирование и рефакторинг","isProfiled":true},{"relatedData":null,"id":"8880","alias":"server_side_optimization","type":"collective","title":"Серверная оптимизация","titleHtml":"Серверная оптимизация","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EYandex Rate Limiter (далее просто YARL) — это сервис лимитирования нагрузки для распределённых сервисов. Его особенность в том, что он способен работать с миллионами квот, имея при этом очень низкие накладные расходы на проверку квоты. Если совсем кратко, это система распределённых \u003Ca href=\"https:\u002F\u002Fwww.wikiwand.com\u002Fen\u002FLeaky_bucket\" rel=\"nofollow noopener noreferrer\"\u003ELeaky Bucket'ов\u003C\u002Fa\u003E, с помощью которых можно ограничивать разные величины, связанные со временем: скорость передачи данных по сети, запросы в секунду и т. п.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdg\u002Fte\u002F--\u002Fdgte--d9wm8qyawhplaw4c87mky.jpeg\"\u003E\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EМеня зовут Денис Кореневский, я работаю в службе разработки внутреннего хранилища Яндекса, и сегодня я расскажу, как YARL устроен внутри, почему мы вообще написали своё решение и с какими трудностями нам пришлось столкнуться в процессе создания. Добро пожаловать под кат.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"rate limiter"},{"titleHtml":"балансировка нагрузки"}]},"579814":{"id":"579814","timePublished":"2021-09-28T08:18:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"World of Tanks Blitz — как мы сделали для танков динамическую подвеску","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2793863","alias":"alexbabey","fullname":"Alexander Babey","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Ffbd\u002Fb5f\u002F74d\u002Ffbdb5f74ddb6dab8c23878b6bdfc06ca.jpg","speciality":"Render Developer"},"statistics":{"commentsCount":7,"favoritesCount":12,"readingCount":2980,"score":14,"votesCount":14},"hubs":[{"relatedData":null,"id":"18218","alias":"wargaming","type":"corporative","title":"Блог компании Wargaming","titleHtml":"Блог компании Wargaming","isProfiled":false},{"relatedData":null,"id":"643","alias":"3d_graphics","type":"collective","title":"Работа с 3D-графикой","titleHtml":"Работа с 3D-графикой","isProfiled":true},{"relatedData":null,"id":"21980","alias":"games","type":"collective","title":"Игры и игровые приставки","titleHtml":"Игры и игровые приставки","isProfiled":false}],"flows":[{"id":"2","alias":"design","title":"Дизайн"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшой World of Tanks продолжает активно развиваться — игра часто получает обновления, включая как что-то, связанное с игровым процессом (новые карты и танки, режимы игры и сезонные события, умения экипажа и полевая модернизация), так и что-то чисто техническое. Например, использование новых графических технологий. Если мы говорим о ПК, то здесь есть множество гибких настроек, чтобы и комфортно поиграть с красивой картинкой, и сам ПК при этом не спалить.\u003C\u002Fp\u003E\u003Cp\u003EВ случае с мобильными устройствами все немного сложнее, и апдейты графики проводятся не так часто.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EВ этом посте рендер-разработчики студии мобильной разработки Wargaming MS-1 Рамиль Кудашев и Александр Бабей расскажут о том, что нового (и красивого) появилось в летнем релизе World of Tanks Blitz.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003E\u003Cstrong\u003EОсторожно, внутри тяжелые гифки.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a7\u002F9aa\u002Fc59\u002F3a79aac597c683f1a440fae3061a2296.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"mobile games"},{"titleHtml":"wot blitz"},{"titleHtml":"render"},{"titleHtml":"suspension"},{"titleHtml":"pbr"}]},"580104":{"id":"580104","timePublished":"2021-09-28T09:41:42+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Рост зарплат в IT это плохо? Вы же шутите, да?»","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2294597","alias":"Svetlana_get-it","fullname":"Светлана Петровичева","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F911\u002Fccf\u002Fb06\u002F911ccfb06379afc9647fcc9d45656e72.jpg","speciality":"HR tech Entrepreneur, основатель сервиса headz.io"},"statistics":{"commentsCount":161,"favoritesCount":37,"readingCount":19476,"score":24,"votesCount":48},"hubs":[{"relatedData":null,"id":"22550","alias":"headzio","type":"corporative","title":"Блог компании Headz.io","titleHtml":"Блог компании Headz.io","isProfiled":false},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"21890","alias":"statistics","type":"collective","title":"Статистика в IT","titleHtml":"Статистика в IT","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EНедавно мы выпустили статью «\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fheadzio\u002Fblog\u002F578792\u002F\"\u003E\u003Cu\u003EДефицит в IT: платите больше\u003C\u002Fu\u003E\u003C\u002Fa\u003E» о росте зарплат. Совпадение или нет, но чуть позже вышла \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F578820\u002F\"\u003E\u003Cu\u003Eстатья о минусах большого заработка у российских айтишников\u003C\u002Fu\u003E\u003C\u002Fa\u003E. Автор рассуждал о том, как высокие зарплаты могут навредить IT-отрасли. На первый взгляд аргументы выглядят логично. Но это только на первый взгляд.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7a3\u002F36d\u002F860\u002F7a336d8606f7ceb93d3322caea8419cb.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"рост зарплат"},{"titleHtml":"карьера программиста"},{"titleHtml":"карьера ит-специалиста"},{"titleHtml":"ответ"},{"titleHtml":"прогнозы"},{"titleHtml":"статистика"}]},"580168":{"id":"580168","timePublished":"2021-09-28T11:03:01+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как вообще Интернет приходит в ЦОД","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1919391","alias":"ntsaplin","fullname":"Никита Цаплин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F3a9\u002Fa0c\u002F722\u002F3a9a0c722ab0b73193e60b9f84f9a2c0.png","speciality":"010501.65 Прикладная математика и информатика"},"statistics":{"commentsCount":8,"favoritesCount":30,"readingCount":3040,"score":26,"votesCount":26},"hubs":[{"relatedData":null,"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false},{"relatedData":null,"id":"20","alias":"hosting","type":"collective","title":"Хостинг","titleHtml":"Хостинг","isProfiled":false},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"leadData":{"textHtml":"Пользователь VDS-хостинга задал нам вопрос о том, откуда берётся Интернет. И тут мы поняли, что это тот самый детский вопрос, на который не так-то просто нормально ответить. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДумаю, что 99 % людей ответят: берёт и приходит, а потом задумаются. Это настолько естественно и очевидно, что обычно просто не обсуждается. Ну там, знаете, оптика, она приходит в домик, в домике стоит коробка, а из коробки идёт медь. Вот примерно так оно и работает. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ теории всё так и есть, но на практике это выглядит немного иначе. И есть нюансы. Давайте покажу, откуда к нам приходит Интернет и в чём. А заодно поговорим про то, где фильтруется трафик и как это устроено в хостинге. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nДля нас всё начинается вот с этой ракеты в Королёве:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fruvds\u002Fblog\u002F580168\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwl\u002Fkl\u002Fqf\u002Fwlklqfzn9is5zcsqlww90dwdqfc.jpeg\"\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Fcommons.wikimedia.org\u002Fwiki\u002FFile:Vostok-2M_(8A292M)_in_Korolyov,_Moscow_Oblast.jpg\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЭто памятник «Восток-2М» (8А292М), стоящий в Королёве примерно на том месте, где вообще был разработан «Восток». Перед ним находится люк, где одна трасса оптики разделяется на три к M9, или \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FMSK-IX\" rel=\"nofollow noopener noreferrer\"\u003EMSK-IX \u003C\u002Fa\u003E— московской международной телефонной станции № 9, где когда-то появился самый крупный узел обмена трафика. Сейчас это главное место, откуда Интернет поставляется в Москву. Из-за некоторых особенностей нашей территории бомбоубежища именно в этом люке под ракетой находится уязвимое место оптики, где все три канала идут вместе, и их легко перерубить экскаватором на протяжении примерно 120 метров. В других местах до и после ракеты такого нет. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСоответственно один луч идёт через наш ЦОД в Ивантеевку, поворачивает в Щёлково и заканчивается на M9-IX. Второй подземный ввод идёт через Ярославское шоссе, третий ввод — дополнительный, он скачет по столбам от коллектора до ЦОДа в одну сторону и до местного провайдера в другую, а провайдер уже врезается в кольцо оптики по городу и тоже попадает в девятку.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"хостинг"},{"titleHtml":"VDS-хостинг"},{"titleHtml":"Интернет"},{"titleHtml":"ЦОД"},{"titleHtml":"ruvds_статьи"}]},"580170":{"id":"580170","timePublished":"2021-09-28T10:36:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Дитя конверсии: обзор ноутбука IBM ThinkPad iSeries 1400","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"154372","alias":"ereinion","fullname":"Виталий Прокофьев","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F53d\u002F8ec\u002F1fb\u002F53d8ec1fb1d65d37bb85b94c51b17167.jpg","speciality":"Руководитель отдела услуг администрирования"},"statistics":{"commentsCount":0,"favoritesCount":6,"readingCount":3634,"score":24,"votesCount":24},"hubs":[{"relatedData":null,"id":"14740","alias":"selectel","type":"corporative","title":"Блог компании Selectel","titleHtml":"Блог компании Selectel","isProfiled":false},{"relatedData":null,"id":"21898","alias":"hardware","type":"collective","title":"Компьютерное железо","titleHtml":"Компьютерное железо","isProfiled":false},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false},{"relatedData":null,"id":"21930","alias":"antikvariat","type":"collective","title":"Старое железо","titleHtml":"Старое железо","isProfiled":false},{"relatedData":null,"id":"21952","alias":"notebooks","type":"collective","title":"Ноутбуки","titleHtml":"Ноутбуки","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsn\u002Fs4\u002F4f\u002Fsns44fybis21deyqyx_mrkwrkie.png\"\u003E\u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nКогда компания пытается войти в новый для себя сегмент рынка, часто получаются очень необычные и забавные девайсы. Яркие примеры — почти электромобиль BMW i3, самолет HondaJet, постсоветские мясорубки и соковыжималки, которые после обработки напильником требовали лицензии на ношение, и ноутбуки IBM ThinkPad iSeries. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЗадуманные как недорогие машины для домашнего применения и крайне малого бизнеса, эти машины стали примером неоднозначных решений и странного дизайна. Но со временем превратились в большую редкость, не сразу понятую и принятую коллекционерами, но теперь — очень желанную.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ноутбук"},{"titleHtml":"лэптоп"},{"titleHtml":"старое железо"},{"titleHtml":"история ИТ"},{"titleHtml":"celeron"},{"titleHtml":"intel"},{"titleHtml":"thinkpad"},{"titleHtml":"ibm"},{"titleHtml":"lenovo"}]},"580214":{"id":"580214","timePublished":"2021-09-28T03:06:01+00:00","isCorporative":false,"lang":"ru","titleHtml":"Как выбрать подложку для СВЧ плат?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2759195","alias":"Leka_engineer","fullname":"Олеся","avatarUrl":"","speciality":"инженер-разработчик СВЧ устройств"},"statistics":{"commentsCount":24,"favoritesCount":16,"readingCount":1279,"score":16,"votesCount":22},"hubs":[{"relatedData":null,"id":"19395","alias":"netdev","type":"collective","title":"Разработка систем связи","titleHtml":"Разработка систем связи","isProfiled":true},{"relatedData":null,"id":"21484","alias":"electronics","type":"collective","title":"Производство и разработка электроники","titleHtml":"Производство и разработка электроники","isProfiled":true},{"relatedData":null,"id":"22016","alias":"easyelectronics","type":"collective","title":"Электроника для начинающих","titleHtml":"Электроника для начинающих","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЭтой статьёй я продолжаю цикл (надеюсь, что получится несколько) статей про особенности проектирования и изготовления СВЧ-плат. Эта  статья очень простая, так что, скорее всего, большинство читателей-СВЧшников не найдёт в ней ничего нового. Однако, я надеюсь, что статья будет полезна начинающим разработчикам.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"свч"},{"titleHtml":"свч-техника"},{"titleHtml":"печатная плата"},{"titleHtml":"производство электроники"},{"titleHtml":"разработка электроники"},{"titleHtml":"приложения для android"}]},"580222":{"id":"580222","timePublished":"2021-09-28T13:07:07+00:00","isCorporative":true,"lang":"ru","titleHtml":"Ортодонтия во взрослом возрасте: зачем вам это надо и что лучше знать до начала лечения","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2793023","alias":"magomedovazuzu","fullname":"Магомедова Зузу","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fd25\u002Fd7f\u002Fc69\u002Fd25d7fc697c903cbe6dfdf1423b5b7ba.jpg","speciality":"Врач стоматолог-ортопед"},"statistics":{"commentsCount":5,"favoritesCount":17,"readingCount":2658,"score":16,"votesCount":24},"hubs":[{"relatedData":null,"id":"22616","alias":"belayaraduga","type":"corporative","title":"Блог компании Белая Радуга","titleHtml":"Блог компании Белая Радуга","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fph\u002Fy_\u002Fys\u002Fphy_ysqfi51itdfzul5g9ujtcpe.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Ca href=\"https:\u002F\u002Forthodonticassoc.com\u002Fblog\u002Fthe-evolution-of-orthodontic-braces\u002F\" rel=\"nofollow noopener noreferrer\"\u003EПримерно \u003C\u002Fa\u003Eтак в конце XIX века выпрямляли зубы\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ современном мире не принято умирать от кривых зубов. Максимум, что с вами случится, — станет не очень приятно широко открывать рот, вылетит челюстной сустав, вырастут амортизационные издержки на периодонт зубов, да и со стоматологом вы начнёте видеться чаще. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ принципе 99% проблем с расположением зубов сегодня можно исправить без проблем. Для этого есть опоры, создающие давление на зубы и кости, двигающие их. Брекеты несъёмные фиксируются с внешней или внутренней стороны зубов, ими можно решить много проблем, но они требуют постоянного ухода и посещения клиники раз в месяц. Альтернатива — элайнеры, прозрачные капы. Их можно снимать, чистить зубы как обычно и есть всё подряд. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ большинстве случаев ортодонтическое лечение требует от 8 месяцев до 2 лет в зависимости от сложности случая. На масштабные изменения вроде перемещения соседнего седьмого зуба на место отсутствующего шестого может уйти и 3 года. Плюс есть вероятность неуспеха, потому что нужно много считать.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСмоделировать возможную ситуацию можно на основе данных КТ, телерентгенограммы и 3D-моделирования (это после съёмки полости рта сканером). Это более-менее страхует от скрытых кист, сверхкомплектных зубов и прочих радостей, которые могут вылезти в процессе лечения. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИтак, сегодня: \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E Что умеет современная ортодонтия и сколько она стоит.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Как мы корректируем прикус с помощью брекетов и элайнеров. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Зачем используем в дополнение минивинты (импланты) и нёбные расширители.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Когда будет результат. И что мы делаем, чтобы его закрепить. \u003C\u002Fli\u003E\r\n\u003Cli\u003E Что может пойти не так при установке брекетов или элайнеров.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"зуб"},{"titleHtml":"ортодонтия"},{"titleHtml":"лечение"},{"titleHtml":"элайнеры"},{"titleHtml":"брекеты"},{"titleHtml":"стоматология"}]},"580240":{"id":"580240","timePublished":"2021-09-28T11:02:14+00:00","isCorporative":false,"lang":"ru","titleHtml":"SQLite-песочница в браузере","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"5634","alias":"nalgeon","fullname":"Антон Жиянов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F031\u002F537\u002F2ce\u002F0315372ce4ec69d2b80b64771b54b5a2.png","speciality":"Python, SQL и открытые данные"},"statistics":{"commentsCount":1,"favoritesCount":40,"readingCount":1703,"score":25,"votesCount":25},"hubs":[{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true},{"relatedData":null,"id":"18554","alias":"sqlite","type":"collective","title":"SQLite","titleHtml":"SQLite","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EЧего мне всегда не хватало, так это аналога JSFiddle для SQLite. Онлайн-песочницы, в которой можно быстро проверить SQL-запрос и поделиться с другими.\u003C\u002Fp\u003E\u003Cp\u003EВот чего хотелось:\u003C\u002Fp\u003E\u003Cp\u003E— Возможность загрузить готовую базу, а не писать SQL для создания таблиц.\u003Cbr\u003E— Подключать как локальные базы, так и удаленные (по url).\u003Cbr\u003E— Сохранять базу и запросы в облаке.\u003Cbr\u003E— Бесплатно и без регистрации.\u003Cbr\u003E— Свежайшая версия SQLite.\u003Cbr\u003E— Минимализм.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","buttonTextHtml":"В итоге сделал сам","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd46\u002F816\u002Fde0\u002Fd46816de0e7cacdab5b8e27a6b48d6d0.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"песочница"},{"titleHtml":"gist"},{"titleHtml":"sql.js"},{"titleHtml":"sqlime"}]},"580270":{"id":"580270","timePublished":"2021-09-28T07:08:30+00:00","isCorporative":true,"lang":"ru","titleHtml":"Варим суп из стали: оптимизация логистики ковшей и как устроен цех КЦ № 2","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2790193","alias":"AlexanderSkorniakov","fullname":"Александр Скорняков","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fcbf\u002F737\u002F072\u002Fcbf737072762c9fe82994575e36e0c25.jpg","speciality":"Руководитель цифровых продуктов"},"statistics":{"commentsCount":23,"favoritesCount":23,"readingCount":5066,"score":65,"votesCount":65},"hubs":[{"relatedData":null,"id":"22816","alias":"nlmk","type":"corporative","title":"Блог компании Блог компании Группа НЛМК","titleHtml":"Блог компании Блог компании Группа НЛМК","isProfiled":false},{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"18816","alias":"industrial_control_system","type":"collective","title":"Промышленное программирование","titleHtml":"Промышленное программирование","isProfiled":true},{"relatedData":null,"id":"20682","alias":"pm","type":"collective","title":"Управление проектами","titleHtml":"Управление проектами","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"Привет из конвертерного цеха металлургического комбината! Смотрите, у нас тут есть вот такой суп в ковше, стоящем на сталевозе:\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdh\u002F3m\u002Fmn\u002Fdh3mmn_3v_fbdyt4k2hs3fhfnjm.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EТаких ковшей на 320 тонн стали в цехе 40 штук, и они медленно остывают. Этой стали грустно и одиноко, она подмерзает. Через эти ковши проходит 10 миллионов тонн стали в год, это 14% стали России\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНа входе в цех у нас жидкий чугун и металлолом, на выходе надо получить сляб — большой слиток стали. Контур системы диспетчеризации «Гефест» начинается с конвертера, где мы продуваем чугун кислородом, таким образом окисляем и удаляем ненужные нам примеси. После конвертера получается «стальной бульон» для супа, в который уже можно добавлять основные ингредиенты, чтобы получались разные марки стали. За смену мы выплавляем несколько заказов, и каждая сталь требует своего рецепта — это разные добавки, разные техпроцессы, разные температуры и разные последовательности действий. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fiv\u002Fmh\u002Fdj\u002Fivmhdjdffezd6k7p1kmw38_akcu.jpeg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EНа участке аргонной установки\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nУзким местом, в зависимости от сорта стали, может стать любой технологический узел на пути плавки от конвертера до разливки — агрегаты внепечной обработки, мостовые краны или сталевозы для перемещения ковшей могут оказаться в какой-то конкретный момент перегружены. Раньше графики последовательности действий составлялись в блокноте человеком и были недостаточно оптимизированы. Плюс непредсказуемость: графики с довольно широкими временными границами дают большие потери производительности, а графики с узкими границами — не дают прореагировать на возможную поломку, задержку в процессе или вынужденную остановку. Не знаю, сколько стоит у вас простой прода, но у нас один остывший не к месту ковш запросто может нанести ущерба на несколько миллионов рублей. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ общем, мы написали систему, которая не только оптимизирует загрузку этого участка производства, но и регулярно (во время смены) пересчитывает всю логистику ковшей.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо давайте начну с, собственно, рассказа про то, что же именно оптимизируется в цехе.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"сталь"},{"titleHtml":"производство"},{"titleHtml":"оптимизация"},{"titleHtml":"металл"},{"titleHtml":"металлургия"},{"titleHtml":"диспетчеризация"}]},"580304":{"id":"580304","timePublished":"2021-09-27T18:31:25+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как сделать 248MP фотографию Солнца","editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Simon Tang","originalUrl":"https:\u002F\u002Fpetapixel.com\u002F2021\u002F09\u002F15\u002Fa-closer-look-how-i-created-a-248mp-photo-of-the-sun\u002F"}}],"author":{"id":"2192534","alias":"Itelma","fullname":"T-800","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc3a\u002Fd1e\u002F43d\u002Fc3ad1e43d500046c3228c9494b510912.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":12,"favoritesCount":15,"readingCount":4227,"score":18,"votesCount":18},"hubs":[{"relatedData":null,"id":"22356","alias":"itelma","type":"corporative","title":"Блог компании НПП ИТЭЛМА","titleHtml":"Блог компании НПП ИТЭЛМА","isProfiled":false},{"relatedData":null,"id":"17175","alias":"image_processing","type":"collective","title":"Обработка изображений","titleHtml":"Обработка изображений","isProfiled":true},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21932","alias":"photo","type":"collective","title":"Фототехника","titleHtml":"Фототехника","isProfiled":false},{"relatedData":null,"id":"22022","alias":"astronomy","type":"collective","title":"Астрономия","titleHtml":"Астрономия","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe02\u002F643\u002Fa55\u002Fe02643a550e20aa10c366e20956e4b40.jpg\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ci\u003EЭто изображение диска нашего Солнца создано с помощью большого рефракторного (линзового) телескопа и высокоскоростной монохромной CMOS-камеры.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКаждый день над нашими головами висит большой шар света. Он там всегда, и никто не обращает на него внимания. Разумеется, мы не советуем вам долго смотреть на него и при этом ослепнуть, тем не менее, наука дала нам возможность смотреть прямо на солнце совершенно безопасно.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку техника стала более доступной, обычный человек может заглянуть в многочисленные слои Солнца с помощью специального оборудования, которое может купить в любом хорошем магазине телескопов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ этой статье мы подробно рассмотрим слой, известный как хромосфера: область Солнца, видимая в оранжево-красном спектре. При помощи специального фильтра это устройство блокирует весь нежелательный свет, пропуская при этом определенный диапазон частот, который нас интересует.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"обработка изображений"},{"titleHtml":"фототехника"}]},"580336":{"id":"580336","timePublished":"2021-09-28T05:40:43+00:00","isCorporative":false,"lang":"ru","titleHtml":"DOM, который построил Chrome. Или не построил? Или не Chrome? Или не DOM?","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2671923","alias":"Maxim_from_HW","fullname":"Максим","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F33e\u002F1a0\u002F5ba\u002F33e1a05ba0d2d651cc292ce76ad45ee1.png","speciality":"CEO"},"statistics":{"commentsCount":22,"favoritesCount":52,"readingCount":4442,"score":18,"votesCount":22},"hubs":[{"relatedData":null,"id":"91","alias":"webdev","type":"collective","title":"Разработка веб-сайтов","titleHtml":"Разработка веб-сайтов","isProfiled":true},{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"524","alias":"complete_code","type":"collective","title":"Совершенный код","titleHtml":"Совершенный код","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EОбычный, теневой, виртуальный, инкрементальный… Как получилось, что простой программный интерфейс доступа к элементам веб-страниц обзавелся таким количеством «родственников»? Чем современные фреймворки не устраивает стандартная объектная модель документа или просто DOM? Что и как на самом деле отрисовывает браузер в процессе рендера веб-страницы?\u003C\u002Fp\u003E\u003Cp\u003EВсем привет, это \u003Ca href=\"https:\u002F\u002Fwww.facebook.com\u002Fmy.kravets\" rel=\"noopener noreferrer nofollow\"\u003EМакс Кравец\u003C\u002Fa\u003E из Holyweb. Помните сцену из Матрицы, в которой один из юных кандидатов в Избранные наставляет Нео: «Не пытайся согнуть ложку. Первое, что ты должен понять — ложки не существует!»? Давайте переформулирую: «Не пытайся изменить DOM...». А вот о том, что прячется под многоточием, мы сегодня и поговорим.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5c9\u002F1cb\u002Fe9b\u002F5c91cbe9b4674ea479fed0a55f81fb7c.png","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"dom"},{"titleHtml":"google chrome"},{"titleHtml":"javascript"},{"titleHtml":"css"}]},"580348":{"id":"580348","timePublished":"2021-09-28T08:18:27+00:00","isCorporative":true,"lang":"ru","titleHtml":"Самый большой космический телескоп Джеймс Уэбб должен изменить наши представления о космосе","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"64252","alias":"Cloud4Y","fullname":"Cloud4Y","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fc2d\u002Fd0d\u002Fc05\u002Fc2dd0dc05834aebeb86bb76e35caeaab.png","speciality":"Корпоративный облачный провайдер"},"statistics":{"commentsCount":27,"favoritesCount":8,"readingCount":4088,"score":27,"votesCount":29},"hubs":[{"relatedData":null,"id":"17352","alias":"cloud4y","type":"corporative","title":"Блог компании Cloud4Y","titleHtml":"Блог компании Cloud4Y","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21962","alias":"space","type":"collective","title":"Космонавтика","titleHtml":"Космонавтика","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EИзучение новых миров,  понимание происхождения Вселенной, поиск жизни вне Земли. Всё это — задачи космического телескопа \"Джеймс Уэбб\", долгожданного преемника Хаббла.  Телескоп больше и легче Хаббла, зато в 100 раз мощнее,  а приборы — в семь раз чувствительнее. \u003C\u002Fp\u003E\u003Cp\u003EДжеймс Уэбб — это устройство для поиска ответов на неотвеченные вопросы о Вселенной, для изучения того, что до сих пор оставалось неизведанным. Что же такого в этом телескопе?\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0ed\u002F24e\u002Fd75\u002F0ed24ed759f6e945b81c1ce1beedd228.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"Телескоп"},{"titleHtml":"уэбб"},{"titleHtml":"космос"},{"titleHtml":"технологии"}]},"580360":{"id":"580360","timePublished":"2021-09-28T07:27:40+00:00","isCorporative":true,"lang":"ru","titleHtml":"Вы используете больше Open Source-софта, чем думаете","editorVersion":"2.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Klint Finley","originalUrl":"https:\u002F\u002Fgithub.com\u002Freadme\u002Ffeatured\u002Funseen-oss"}}],"author":{"id":"16172","alias":"shurup","fullname":"Дмитрий Шурупов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F062\u002Fc85\u002F607\u002F062c85607fbe4aaa29e1ad2076cd13a0.jpg","speciality":"Open Source geek"},"statistics":{"commentsCount":1,"favoritesCount":6,"readingCount":3453,"score":26,"votesCount":30},"hubs":[{"relatedData":null,"id":"20940","alias":"flant","type":"corporative","title":"Блог компании Флант","titleHtml":"Блог компании Флант","isProfiled":false},{"relatedData":null,"id":"144","alias":"open_source","type":"collective","title":"Open source","titleHtml":"Open source","isProfiled":true},{"relatedData":null,"id":"20688","alias":"research","type":"collective","title":"Исследования и прогнозы в IT","titleHtml":"Исследования и прогнозы в IT","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EПрим. перев.\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003Cem\u003E: оригинал этой статьи был опубликован минувшим летом в рамках проекта ReadME. Он создан в GitHub с целью стать своеобразной трибуной для многочисленных Open Source-разработчиков, предоставив им возможность поделиться с широким сообществом актуальными для них проблемами. Данный материал несет в себе призыв «перестать воспринимать Open Source как должное» и раскрывает те сложности, с которыми сталкиваются многие авторы свободного ПО, применяемого буквально повсеместно.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cp\u003EТобиас Копперс (Tobias Koppers) не работает в Instagram. И никогда не работал. Но с 2014 года он отвечает за поддержку важного компонента веб-версии Instagram. Копперс является создателем webpack — Open Source-инструмента для сборки (или «бандлинга») кода JavaScript.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"open source"}]},"580374":{"id":"580374","timePublished":"2021-09-28T08:46:26+00:00","isCorporative":true,"lang":"ru","titleHtml":"Делаем базу знаний для .NET разработчиков","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"1181772","alias":"nevoroman","fullname":"Роман Неволин","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F21d\u002F1d5\u002F7d9\u002F21d1d57d92a296101a1da62761632a78.jpg","speciality":"DevRel"},"statistics":{"commentsCount":6,"favoritesCount":24,"readingCount":2235,"score":12,"votesCount":14},"hubs":[{"relatedData":null,"id":"15878","alias":"skbkontur","type":"corporative","title":"Блог компании Контур","titleHtml":"Блог компании Контур","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"546","alias":"net","type":"collective","title":".NET","titleHtml":".NET","isProfiled":true},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"20754","alias":"tech_events","type":"collective","title":"Конференции","titleHtml":"Конференции","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"3","alias":"management","title":"Менеджмент"},{"id":"4","alias":"marketing","title":"Маркетинг"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EМы вместе с DotNetRu решили сделать базу знаний для .NET разработчиков. Собрать доступные в открытом доступе материалы по .NET и выбрать из них лучшие. Разбить все это по категориям и сложности, выстроить порядок изучения. А еще пригласить известных экспертов в каждой из тем, чтобы они помогли выбрать материалы и рассказали, что и почему вам будет полезно изучить.\u003C\u002Fp\u003E\u003Cp\u003EИ теперь мы по этому поводу будем проводить по два митапу раз в две недели — начиная уже с этой пятницы. Под катом будут детали, имена, даты и всякие пояснения, что и почему мы хотим сделать.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5dd\u002F71e\u002Fcc9\u002F5dd71ecc908ff997a1f46f440a9daaad.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F5dd\u002F71e\u002Fcc9\u002F5dd71ecc908ff997a1f46f440a9daaad.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"образование"},{"titleHtml":"dotnetru"},{"titleHtml":"opensource"},{"titleHtml":"обучение разработчика"}]},"580382":{"id":"580382","timePublished":"2021-09-28T10:30:17+00:00","isCorporative":true,"lang":"ru","titleHtml":"Советский «Мерседес» или как в Минске строили спортпрототип","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2776555","alias":"turbovagon","fullname":null,"avatarUrl":"","speciality":""},"statistics":{"commentsCount":2,"favoritesCount":5,"readingCount":1887,"score":17,"votesCount":21},"hubs":[{"relatedData":null,"id":"17357","alias":"timeweb","type":"corporative","title":"Блог компании Timeweb","titleHtml":"Блог компании Timeweb","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"22004","alias":"transport","type":"collective","title":"Транспорт","titleHtml":"Транспорт","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Во второй половине 50-х годов в Советском Союзе начал набирать популярность автоспорт. Появляются всё новые соревнования, усложняется их регламент, растут требования и к гонщикам, и к машинам. На старт шоссейно-кольцевых начали выходить уже не слегка «обработанные напильником» серийные легковушки, а вполне гоночные штучные поделки, напоминающие современные спортпрототипы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fz7\u002Fgs\u002Fzg\u002Fz7gszgbo8pc-ogtvjgvjd6vpaga.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EВот, например, некоторые участники заезда 1956 года. Штучное поделие МАЗа с двигателем «Москвич-402» в первом ряду. Дальше будет лучше.\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nОдним из них стал МАЗ-1500, детище, как нетрудно догадаться, специалистов Минского автозавода. Да, профильным направлением предприятия были грузовики. Однако от кульманов конструкторов до воплощения в металле доходила и разного рода автоэкзотика. Посему, когда в Минавтопроме БССР возникла идея создать команду для участия в чемпионате Советского Союза по шоссейно-кольцевым гонкам, работу по новому проекту возглавил руководитель Конструкторского отдела МАЗа, автогонщик Владимир Майборода.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"ссср"},{"titleHtml":"спорткар"},{"titleHtml":"автогонки"},{"titleHtml":"гараж"},{"titleHtml":"МАЗ"},{"titleHtml":"автомобили"}]},"580428":{"id":"580428","timePublished":"2021-09-28T10:57:35+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Понаехавший» в Чехию: как купить квартиру в столице и стать «своим» с акцентом","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"2581359","alias":"annesina","fullname":"Анна Есина","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F5d1\u002Fc94\u002F326\u002F5d1c943260bd153cf9263a6b59e7be21.png","speciality":"Пользователь"},"statistics":{"commentsCount":3,"favoritesCount":23,"readingCount":3590,"score":15,"votesCount":19},"hubs":[{"relatedData":null,"id":"22506","alias":"gms","type":"corporative","title":"Блог компании gms & g-mate","titleHtml":"Блог компании gms & g-mate","isProfiled":false},{"relatedData":null,"id":"20734","alias":"it_immigration","type":"collective","title":"IT-эмиграция","titleHtml":"IT-эмиграция","isProfiled":false},{"relatedData":null,"id":"20740","alias":"career","type":"collective","title":"Карьера в IT-индустрии","titleHtml":"Карьера в IT-индустрии","isProfiled":false},{"relatedData":null,"id":"20742","alias":"read","type":"collective","title":"Читальный зал","titleHtml":"Читальный зал","isProfiled":false},{"relatedData":null,"id":"22024","alias":"urban","type":"collective","title":"Урбанизм","titleHtml":"Урбанизм","isProfiled":false}],"flows":[{"id":"3","alias":"management","title":"Менеджмент"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EБольшое количество компаний и стартапов приглашают в Чехию IT-специалистов из стран СНГ. Почему они приезжают сюда? Разработчик из Омска ответил на популярные вопросы о переезде программиста в Прагу: какие нужны документы, как проходит адаптация, нужен ли диплом и как приобрести свое жилье. Передаем ему слово.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","buttonTextHtml":"Читать далее","image":{"url":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F995\u002F1b1\u002F45c\u002F9951b145c95413abb6f46ba5649b52f2.jpg","fit":"cover","positionY":0,"positionX":0}},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"g-mate"},{"titleHtml":"прага"},{"titleHtml":"чехия"},{"titleHtml":"переезд"},{"titleHtml":"IT-эмиграция"},{"titleHtml":"релокейт"},{"titleHtml":"релокация"}]},"580468":{"id":"580468","timePublished":"2021-09-28T12:04:47+00:00","isCorporative":true,"lang":"ru","titleHtml":"Проект «Горирожа»: про двойной подбородок","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1588913","alias":"elena_pastukhova","fullname":"Елена Пастухова","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F1dc\u002F879\u002Fc33\u002F1dc879c33e39127162333771dba2137a.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":19,"favoritesCount":17,"readingCount":3125,"score":15,"votesCount":43},"hubs":[{"relatedData":null,"id":"21848","alias":"geltek","type":"corporative","title":"Блог компании Гельтек-Медика","titleHtml":"Блог компании Гельтек-Медика","isProfiled":false},{"relatedData":null,"id":"21910","alias":"popular_science","type":"collective","title":"Научно-популярное","titleHtml":"Научно-популярное","isProfiled":false},{"relatedData":null,"id":"21996","alias":"health","type":"collective","title":"Здоровье","titleHtml":"Здоровье","isProfiled":false}],"flows":[{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"leadData":{"textHtml":"Борода у мужчин — это самый действенный способ скрыть жир. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nЕсть люди, которым повезло с квадратной челюстью: тогда всё прямо натянуто, и когда у обычного человека уже был бы тройной подбородок, у них — только двойной. Но если у вас славянский тип лица, то это не про вас. У нас прекрасный профиль, но в профиль будет видно даже минимальное количество жира. У азиатского типа — высокие скулы, которые тянут жир в другую сторону, а у нас нет никаких подобных генетических конструкций, поэтому при деформационном типе старения всё это ползёт вниз. Формируется либо второй подбородок, либо жировой компартмент располагается на щеках, и появляются так называемые «бульдожьи щёки». \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПоскольку жир там точно такой же, как на пузе и боках у мальчиков и на попе у девочек, то бороться с ним можно дефицитом калорий и физической нагрузкой. Ещё можно уменьшить склонность к отёчности и поднять тонус кожи через увлажнение. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСюрпризом стало то, что испытуемые из тестовой группы проекта Thermo Intensive (более известного вам как «\u003Ca href=\"https:\u002F\u002Fgeltek-medica.ru\u002Fcatalog\u002Fkosmetika\u002Fseriya-body-care\u002Fanticellyulitnyj-gel-thermo-intensive\u002F\u002F\" rel=\"nofollow noopener noreferrer\"\u003EГорижопа\u003C\u002Fa\u003E» ) начали мазать средство не в целевую область, а ещё и на лицо, рассчитывая, что жир там будет убираться так же быстро. Мы сразу запретили им это делать (потому что щитовидка рядом, а мажут они широко) и сразу задумались про новое средство. \u003Cbr\u003E\r\n \u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fbk\u002Fsd\u002Ffy\u002Fbksdfyfl8jwg3mvvmrjs4xzibz4.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003EПервая стадия, когда борода ещё не особо нужна. \u003Ca href=\"https:\u002F\u002Fmelmagazine.com\u002Fwp-content\u002Fuploads\u002F2018\u002F08\u002F1SmLNcqJD9Ao7TSeV1MwobA.png\" rel=\"nofollow noopener noreferrer\"\u003EИсточник\u003C\u002Fa\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПотому что бета-тестеры обозначили нам рыночную нишу. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСобственно, вы его тогда спрашивали и в комментариях, сразу раскусив, как можно неправильно использовать состав. И вот теперь у меня есть что показать.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"горирожа"},{"titleHtml":"второй подбородок"},{"titleHtml":"жир"},{"titleHtml":"артикулярная гимнастика"},{"titleHtml":"средство"},{"titleHtml":"гель"}]},"580516":{"id":"580516","timePublished":"2021-09-28T14:25:12+00:00","isCorporative":false,"lang":"ru","titleHtml":"Лучший язык программирования","editorVersion":"2.0","postType":"article","postLabels":[],"author":{"id":"8114","alias":"markshevchenko","fullname":"Марк Шевченко","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb16\u002F6c1\u002Fc82\u002Fb166c1c82387bf9406fcd39f40dc264e.jpg","speciality":"программист"},"statistics":{"commentsCount":17,"favoritesCount":47,"readingCount":6481,"score":28,"votesCount":34},"hubs":[{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"\u003Cp\u003EВопрос, который часто задают начинающие программисты&nbsp;— какой язык программирования изучать? Вопрос звучит разумно. Хочется выбрать самый лучший, чтобы потом не пришлось переучиваться.\u003C\u002Fp\u003E\u003Cp\u003EМожно ли на него ответить?\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать далее","image":null},"status":"published","plannedPublishTime":null,"checked":null,"tags":[{"titleHtml":"образование"},{"titleHtml":"языки программирования"}]}},"articlesIds":{"ARTICLES_LIST_TOP_PERIOD_DAILY":["580270","575686","579778","580516","580348","580168","580360","580240","580170","580104","579590","580336","580304","580382","580222","580214","580468","580428","579814","580374"]},"isLoading":false,"pagesCount":{"ARTICLES_LIST_TOP_PERIOD_DAILY":4},"route":{"name":"ARTICLES_LIST_TOP_PERIOD","params":{"period":"daily"},"query":{}},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":["412905","342162","317564"],"similarListRefs":{"317564":{"id":"317564","timePublished":"2016-12-14T11:50:30+00:00","isCorporative":false,"lang":"ru","titleHtml":"Синтаксический анализ текстов с помощью SyntaxNet","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"956550","alias":"mnv","fullname":"Николай","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F501\u002Fae5\u002F192\u002F501ae5192aae892bcd0308b9631e0f8c.jpg","speciality":"Программист"},"statistics":{"commentsCount":22,"favoritesCount":162,"readingCount":33569,"score":29,"votesCount":29},"hubs":[{"id":"260","alias":"php","type":"collective","title":"PHP","titleHtml":"PHP","isProfiled":true},{"id":"340","alias":"python","type":"collective","title":"Python","titleHtml":"Python","isProfiled":true},{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"id":"8000","alias":"algorithms","type":"collective","title":"Алгоритмы","titleHtml":"Алгоритмы","isProfiled":true},{"id":"19439","alias":"machine_learning","type":"collective","title":"Машинное обучение","titleHtml":"Машинное обучение","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Для одной из задач мне понадобился синтаксический анализатор русскоязычных текстов. Что это такое. Например, у нас есть предложение «Мама мыла раму». Нам нужно получить связи слов в этом предложении в виде дерева:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F33b\u002F49b\u002F826\u002F33b49b826eb27f95137c702dd91be1f9.png\" alt=\"image\" \u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nИз этого дерева понятно, что связаны слова «мама» и «мыла», а также «мыла» и «раму», а слова «мама» и «раму» напрямую не связаны.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтатья будет полезна тем, кому понадобился синтаксический анализатор, но не понятно, с чего начать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ занимался этой темой несколько месяцев назад, и на тот момент нашел не много информации по поводу того, где бы взять готовый и желательно свободный анализатор.\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"status":"published","plannedPublishTime":null,"checked":null},"342162":{"id":"342162","timePublished":"2017-11-16T11:46:18+00:00","isCorporative":false,"lang":"ru","titleHtml":"Синтаксический анализ в NLTK. Продолжение","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"1551587","alias":"Di3go","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":0,"favoritesCount":41,"readingCount":6459,"score":6,"votesCount":8},"hubs":[{"id":"340","alias":"python","type":"collective","title":"Python","titleHtml":"Python","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Здравствуйте. Это небольшое продолжение предыдущей статьи, где рассматривались основы синтаксического анализа с помощью пакета Natural Language Toolkit (сокращенно, NLTK). Как и в прошлой статье, в этой я буду сопровождать примеры кодом на языке Python (версии 2.7).\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ch2\u003EВступление\u003C\u002Fh2\u003E\u003Cbr\u003E\r\nВ \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F340574\u002F\"\u003Eпредыдущей\u003C\u002Fa\u003E статье мы рассматривали синтаксические анализаторы и виды грамматик. Настоятельно рекомендую её прочитать, если Вы этого не сделали. Также можно почитать \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fpost\u002F340404\u002F\"\u003Eпервую\u003C\u002Fa\u003E статью, где мы устанавливаем и настраиваем пакет NLTK.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПростые синтаксические анализаторы, которые мы уже рассматривали, имеют ряд недостатков, которые накладывают существенные ограничения как на эффективность, так и вообще на возможность получения результатов синтаксического анализа. Для решения этих проблем используются алгоритмы, базирующиеся на динамическом программировании.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null},"412905":{"id":"412905","timePublished":"2018-06-01T09:50:36+00:00","isCorporative":false,"lang":"ru","titleHtml":"Про LL-парсинг: Подход к синтаксическому анализу через концепцию нарезания строки","editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"103824","alias":"klvov","fullname":"Константин Львов","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fdae\u002F84b\u002F56d\u002Fdae84b56d586daa3535d062d2a83a460.jpg","speciality":"программист, программист СУБД, веб-разработчик"},"statistics":{"commentsCount":6,"favoritesCount":59,"readingCount":9662,"score":12,"votesCount":14},"hubs":[{"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"id":"8000","alias":"algorithms","type":"collective","title":"Алгоритмы","titleHtml":"Алгоритмы","isProfiled":true},{"id":"17188","alias":"compilers","type":"collective","title":"Компиляторы","titleHtml":"Компиляторы","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"leadData":{"textHtml":"Приветствую уважаемое сообщество!\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПовторение — мать учения, а разбираться в синтаксическом анализе — очень полезный навык для любого программиста, поэтому хочу еще раз поднять эту тему и поговорить в этот раз про анализ методом рекурсивного спуска (LL), обойдясь без лишних формализмов (к ним потом всегда можно будет вернуться).\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nКак пишет великий Д. Строгов, «понять — значит упростить». Поэтому, чтобы понять концепцию синтаксического разбора методом рекурсивного спуска (оно же LL-парсинг), упростим задачу насколько можно и вручную напишем синтаксический анализатор формата, похожего на JSON, но более простого (при желании можно будет потом его расширить до анализатора полноценного JSON, если захочется поупражняться). Напишем его, взяв за основу идею \u003Cb\u003Eнарезания строки\u003C\u002Fb\u003E.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"status":"published","plannedPublishTime":null,"checked":null}}},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{"tyomitch":{"scoreStats":{"score":414.5,"votesCount":796},"rating":7.6,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"57766","alias":"tyomitch","fullname":"Artyom Skrobov","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb71\u002F804\u002Fe6d\u002Fb71804e6dcbec22ada05c488b7ee4c1b.png","speciality":"Пользователь"}},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.670ab961.js" defer></script><script src="https://assets.habr.com/habr-web/js/chunk-f458c7c4.6e221df6.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.76acc47b.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
